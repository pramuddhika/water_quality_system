var mZ=Object.defineProperty;var gZ=(t,e,n)=>e in t?mZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ft=(t,e,n)=>gZ(t,typeof e!="symbol"?e+"":e,n);function VT(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Py(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _B(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),n}var SB={exports:{}},uS={},CB={exports:{}},Fn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy=Symbol.for("react.element"),vZ=Symbol.for("react.portal"),yZ=Symbol.for("react.fragment"),bZ=Symbol.for("react.strict_mode"),xZ=Symbol.for("react.profiler"),wZ=Symbol.for("react.provider"),_Z=Symbol.for("react.context"),SZ=Symbol.for("react.forward_ref"),CZ=Symbol.for("react.suspense"),kZ=Symbol.for("react.memo"),IZ=Symbol.for("react.lazy"),MD=Symbol.iterator;function NZ(t){return t===null||typeof t!="object"?null:(t=MD&&t[MD]||t["@@iterator"],typeof t=="function"?t:null)}var kB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IB=Object.assign,NB={};function x0(t,e,n){this.props=t,this.context=e,this.refs=NB,this.updater=n||kB}x0.prototype.isReactComponent={};x0.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};x0.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function EB(){}EB.prototype=x0.prototype;function WT(t,e,n){this.props=t,this.context=e,this.refs=NB,this.updater=n||kB}var UT=WT.prototype=new EB;UT.constructor=WT;IB(UT,x0.prototype);UT.isPureReactComponent=!0;var FD=Array.isArray,TB=Object.prototype.hasOwnProperty,HT={current:null},AB={key:!0,ref:!0,__self:!0,__source:!0};function RB(t,e,n){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)TB.call(e,i)&&!AB.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:Dy,type:t,key:r,ref:o,props:s,_owner:HT.current}}function EZ(t,e){return{$$typeof:Dy,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function GT(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dy}function TZ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var BD=/\/+/g;function uI(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TZ(""+t.key):e.toString(36)}function W2(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Dy:case vZ:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+uI(o,0):i,FD(s)?(n="",t!=null&&(n=t.replace(BD,"$&/")+"/"),W2(s,e,n,"",function(c){return c})):s!=null&&(GT(s)&&(s=EZ(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(BD,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",FD(t))for(var a=0;a<t.length;a++){r=t[a];var l=i+uI(r,a);o+=W2(r,e,n,l,s)}else if(l=NZ(t),typeof l=="function")for(t=l.call(t),a=0;!(r=t.next()).done;)r=r.value,l=i+uI(r,a++),o+=W2(r,e,n,l,s);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $x(t,e,n){if(t==null)return t;var i=[],s=0;return W2(t,i,"","",function(r){return e.call(n,r,s++)}),i}function AZ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jo={current:null},U2={transition:null},RZ={ReactCurrentDispatcher:Jo,ReactCurrentBatchConfig:U2,ReactCurrentOwner:HT};function LB(){throw Error("act(...) is not supported in production builds of React.")}Fn.Children={map:$x,forEach:function(t,e,n){$x(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $x(t,function(){e++}),e},toArray:function(t){return $x(t,function(e){return e})||[]},only:function(t){if(!GT(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fn.Component=x0;Fn.Fragment=yZ;Fn.Profiler=xZ;Fn.PureComponent=WT;Fn.StrictMode=bZ;Fn.Suspense=CZ;Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RZ;Fn.act=LB;Fn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=IB({},t.props),s=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=HT.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)TB.call(e,l)&&!AB.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Dy,type:t.type,key:s,ref:r,props:i,_owner:o}};Fn.createContext=function(t){return t={$$typeof:_Z,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wZ,_context:t},t.Consumer=t};Fn.createElement=RB;Fn.createFactory=function(t){var e=RB.bind(null,t);return e.type=t,e};Fn.createRef=function(){return{current:null}};Fn.forwardRef=function(t){return{$$typeof:SZ,render:t}};Fn.isValidElement=GT;Fn.lazy=function(t){return{$$typeof:IZ,_payload:{_status:-1,_result:t},_init:AZ}};Fn.memo=function(t,e){return{$$typeof:kZ,type:t,compare:e===void 0?null:e}};Fn.startTransition=function(t){var e=U2.transition;U2.transition={};try{t()}finally{U2.transition=e}};Fn.unstable_act=LB;Fn.useCallback=function(t,e){return Jo.current.useCallback(t,e)};Fn.useContext=function(t){return Jo.current.useContext(t)};Fn.useDebugValue=function(){};Fn.useDeferredValue=function(t){return Jo.current.useDeferredValue(t)};Fn.useEffect=function(t,e){return Jo.current.useEffect(t,e)};Fn.useId=function(){return Jo.current.useId()};Fn.useImperativeHandle=function(t,e,n){return Jo.current.useImperativeHandle(t,e,n)};Fn.useInsertionEffect=function(t,e){return Jo.current.useInsertionEffect(t,e)};Fn.useLayoutEffect=function(t,e){return Jo.current.useLayoutEffect(t,e)};Fn.useMemo=function(t,e){return Jo.current.useMemo(t,e)};Fn.useReducer=function(t,e,n){return Jo.current.useReducer(t,e,n)};Fn.useRef=function(t){return Jo.current.useRef(t)};Fn.useState=function(t){return Jo.current.useState(t)};Fn.useSyncExternalStore=function(t,e,n){return Jo.current.useSyncExternalStore(t,e,n)};Fn.useTransition=function(){return Jo.current.useTransition()};Fn.version="18.3.1";CB.exports=Fn;var K=CB.exports;const xn=Py(K),XN=VT({__proto__:null,default:xn},[K]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LZ=K,PZ=Symbol.for("react.element"),DZ=Symbol.for("react.fragment"),$Z=Object.prototype.hasOwnProperty,OZ=LZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MZ={key:!0,ref:!0,__self:!0,__source:!0};function PB(t,e,n){var i,s={},r=null,o=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)$Z.call(e,i)&&!MZ.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:PZ,type:t,key:r,ref:o,props:s,_owner:OZ.current}}uS.Fragment=DZ;uS.jsx=PB;uS.jsxs=PB;SB.exports=uS;var Q=SB.exports,DB={exports:{}},el={},$B={exports:{}},OB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var ne=B.length;B.push(Y);e:for(;0<ne;){var le=ne-1>>>1,M=B[le];if(0<s(M,Y))B[le]=Y,B[ne]=M,ne=le;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var Y=B[0],ne=B.pop();if(ne!==Y){B[0]=ne;e:for(var le=0,M=B.length,j=M>>>1;le<j;){var q=2*(le+1)-1,X=B[q],Z=q+1,ue=B[Z];if(0>s(X,ne))Z<M&&0>s(ue,X)?(B[le]=ue,B[Z]=ne,le=Z):(B[le]=X,B[q]=ne,le=q);else if(Z<M&&0>s(ue,ne))B[le]=ue,B[Z]=ne,le=Z;else break e}}return Y}function s(B,Y){var ne=B.sortIndex-Y.sortIndex;return ne!==0?ne:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,p=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var Y=n(c);Y!==null;){if(Y.callback===null)i(c);else if(Y.startTime<=B)i(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function S(B){if(g=!1,w(B),!m)if(n(l)!==null)m=!0,H(k);else{var Y=n(c);Y!==null&&G(S,Y.startTime-B)}}function k(B,Y){m=!1,g&&(g=!1,v(E),E=-1),p=!0;var ne=d;try{for(w(Y),h=n(l);h!==null&&(!(h.expirationTime>Y)||B&&!R());){var le=h.callback;if(typeof le=="function"){h.callback=null,d=h.priorityLevel;var M=le(h.expirationTime<=Y);Y=t.unstable_now(),typeof M=="function"?h.callback=M:h===n(l)&&i(l),w(Y)}else i(l);h=n(l)}if(h!==null)var j=!0;else{var q=n(c);q!==null&&G(S,q.startTime-Y),j=!1}return j}finally{h=null,d=ne,p=!1}}var I=!1,T=null,E=-1,O=5,F=-1;function R(){return!(t.unstable_now()-F<O)}function $(){if(T!==null){var B=t.unstable_now();F=B;var Y=!0;try{Y=T(!0,B)}finally{Y?U():(I=!1,T=null)}}else I=!1}var U;if(typeof b=="function")U=function(){b($)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,te=W.port2;W.port1.onmessage=$,U=function(){te.postMessage(null)}}else U=function(){y($,0)};function H(B){T=B,I||(I=!0,U())}function G(B,Y){E=y(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,H(k))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(d){case 1:case 2:case 3:var Y=3;break;default:Y=d}var ne=d;d=Y;try{return B()}finally{d=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ne=d;d=B;try{return Y()}finally{d=ne}},t.unstable_scheduleCallback=function(B,Y,ne){var le=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?le+ne:le):ne=le,B){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ne+M,B={id:u++,callback:Y,priorityLevel:B,startTime:ne,expirationTime:M,sortIndex:-1},ne>le?(B.sortIndex=ne,e(c,B),n(l)===null&&B===n(c)&&(g?(v(E),E=-1):g=!0,G(S,ne-le))):(B.sortIndex=M,e(l,B),m||p||(m=!0,H(k))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var Y=d;return function(){var ne=d;d=Y;try{return B.apply(this,arguments)}finally{d=ne}}}})(OB);$B.exports=OB;var FZ=$B.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BZ=K,Qa=FZ;function ct(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var MB=new Set,R1={};function fm(t,e){Wg(t,e),Wg(t+"Capture",e)}function Wg(t,e){for(R1[t]=e,t=0;t<e.length;t++)MB.add(e[t])}var vh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),YN=Object.prototype.hasOwnProperty,zZ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zD={},jD={};function jZ(t){return YN.call(jD,t)?!0:YN.call(zD,t)?!1:zZ.test(t)?jD[t]=!0:(zD[t]=!0,!1)}function VZ(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function WZ(t,e,n,i){if(e===null||typeof e>"u"||VZ(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ea(t,e,n,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Ur={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ur[t]=new ea(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ur[e]=new ea(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ur[t]=new ea(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ur[t]=new ea(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ur[t]=new ea(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ur[t]=new ea(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ur[t]=new ea(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ur[t]=new ea(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ur[t]=new ea(t,5,!1,t.toLowerCase(),null,!1,!1)});var qT=/[\-:]([a-z])/g;function KT(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qT,KT);Ur[e]=new ea(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qT,KT);Ur[e]=new ea(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qT,KT);Ur[e]=new ea(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ur[t]=new ea(t,1,!1,t.toLowerCase(),null,!1,!1)});Ur.xlinkHref=new ea("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ur[t]=new ea(t,1,!1,t.toLowerCase(),null,!0,!0)});function XT(t,e,n,i){var s=Ur.hasOwnProperty(e)?Ur[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(WZ(e,n,s,i)&&(n=null),i||s===null?jZ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Ah=BZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ox=Symbol.for("react.element"),pg=Symbol.for("react.portal"),mg=Symbol.for("react.fragment"),YT=Symbol.for("react.strict_mode"),ZN=Symbol.for("react.profiler"),FB=Symbol.for("react.provider"),BB=Symbol.for("react.context"),ZT=Symbol.for("react.forward_ref"),QN=Symbol.for("react.suspense"),JN=Symbol.for("react.suspense_list"),QT=Symbol.for("react.memo"),ud=Symbol.for("react.lazy"),zB=Symbol.for("react.offscreen"),VD=Symbol.iterator;function av(t){return t===null||typeof t!="object"?null:(t=VD&&t[VD]||t["@@iterator"],typeof t=="function"?t:null)}var fs=Object.assign,hI;function Ov(t){if(hI===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hI=e&&e[1]||""}return`
`+hI+t}var dI=!1;function fI(t,e){if(!t||dI)return"";dI=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{dI=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ov(t):""}function UZ(t){switch(t.tag){case 5:return Ov(t.type);case 16:return Ov("Lazy");case 13:return Ov("Suspense");case 19:return Ov("SuspenseList");case 0:case 2:case 15:return t=fI(t.type,!1),t;case 11:return t=fI(t.type.render,!1),t;case 1:return t=fI(t.type,!0),t;default:return""}}function e5(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mg:return"Fragment";case pg:return"Portal";case ZN:return"Profiler";case YT:return"StrictMode";case QN:return"Suspense";case JN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case BB:return(t.displayName||"Context")+".Consumer";case FB:return(t._context.displayName||"Context")+".Provider";case ZT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case QT:return e=t.displayName||null,e!==null?e:e5(t.type)||"Memo";case ud:e=t._payload,t=t._init;try{return e5(t(e))}catch{}}return null}function HZ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return e5(e);case 8:return e===YT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yd(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jB(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function GZ(t){var e=jB(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mx(t){t._valueTracker||(t._valueTracker=GZ(t))}function VB(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=jB(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function yw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function t5(t,e){var n=e.checked;return fs({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function WD(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Yd(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function WB(t,e){e=e.checked,e!=null&&XT(t,"checked",e,!1)}function n5(t,e){WB(t,e);var n=Yd(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?i5(t,e.type,n):e.hasOwnProperty("defaultValue")&&i5(t,e.type,Yd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function UD(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function i5(t,e,n){(e!=="number"||yw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mv=Array.isArray;function Eg(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Yd(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function s5(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ct(91));return fs({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function HD(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ct(92));if(Mv(n)){if(1<n.length)throw Error(ct(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yd(n)}}function UB(t,e){var n=Yd(e.value),i=Yd(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function GD(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function HB(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function r5(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?HB(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fx,GB=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fx=Fx||document.createElement("div"),Fx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fx.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function L1(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var n1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qZ=["Webkit","ms","Moz","O"];Object.keys(n1).forEach(function(t){qZ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),n1[e]=n1[t]})});function qB(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||n1.hasOwnProperty(t)&&n1[t]?(""+e).trim():e+"px"}function KB(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=qB(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var KZ=fs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function o5(t,e){if(e){if(KZ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ct(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ct(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ct(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ct(62))}}function a5(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l5=null;function JT(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var c5=null,Tg=null,Ag=null;function qD(t){if(t=My(t)){if(typeof c5!="function")throw Error(ct(280));var e=t.stateNode;e&&(e=mS(e),c5(t.stateNode,t.type,e))}}function XB(t){Tg?Ag?Ag.push(t):Ag=[t]:Tg=t}function YB(){if(Tg){var t=Tg,e=Ag;if(Ag=Tg=null,qD(t),e)for(t=0;t<e.length;t++)qD(e[t])}}function ZB(t,e){return t(e)}function QB(){}var pI=!1;function JB(t,e,n){if(pI)return t(e,n);pI=!0;try{return ZB(t,e,n)}finally{pI=!1,(Tg!==null||Ag!==null)&&(QB(),YB())}}function P1(t,e){var n=t.stateNode;if(n===null)return null;var i=mS(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ct(231,e,typeof n));return n}var u5=!1;if(vh)try{var lv={};Object.defineProperty(lv,"passive",{get:function(){u5=!0}}),window.addEventListener("test",lv,lv),window.removeEventListener("test",lv,lv)}catch{u5=!1}function XZ(t,e,n,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var i1=!1,bw=null,xw=!1,h5=null,YZ={onError:function(t){i1=!0,bw=t}};function ZZ(t,e,n,i,s,r,o,a,l){i1=!1,bw=null,XZ.apply(YZ,arguments)}function QZ(t,e,n,i,s,r,o,a,l){if(ZZ.apply(this,arguments),i1){if(i1){var c=bw;i1=!1,bw=null}else throw Error(ct(198));xw||(xw=!0,h5=c)}}function pm(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ez(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function KD(t){if(pm(t)!==t)throw Error(ct(188))}function JZ(t){var e=t.alternate;if(!e){if(e=pm(t),e===null)throw Error(ct(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return KD(s),t;if(r===i)return KD(s),e;r=r.sibling}throw Error(ct(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(ct(189))}}if(n.alternate!==i)throw Error(ct(190))}if(n.tag!==3)throw Error(ct(188));return n.stateNode.current===n?t:e}function tz(t){return t=JZ(t),t!==null?nz(t):null}function nz(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nz(t);if(e!==null)return e;t=t.sibling}return null}var iz=Qa.unstable_scheduleCallback,XD=Qa.unstable_cancelCallback,eQ=Qa.unstable_shouldYield,tQ=Qa.unstable_requestPaint,Ls=Qa.unstable_now,nQ=Qa.unstable_getCurrentPriorityLevel,eA=Qa.unstable_ImmediatePriority,sz=Qa.unstable_UserBlockingPriority,ww=Qa.unstable_NormalPriority,iQ=Qa.unstable_LowPriority,rz=Qa.unstable_IdlePriority,hS=null,fu=null;function sQ(t){if(fu&&typeof fu.onCommitFiberRoot=="function")try{fu.onCommitFiberRoot(hS,t,void 0,(t.current.flags&128)===128)}catch{}}var xc=Math.clz32?Math.clz32:aQ,rQ=Math.log,oQ=Math.LN2;function aQ(t){return t>>>=0,t===0?32:31-(rQ(t)/oQ|0)|0}var Bx=64,zx=4194304;function Fv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _w(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?i=Fv(a):(r&=o,r!==0&&(i=Fv(r)))}else o=n&~s,o!==0?i=Fv(o):r!==0&&(i=Fv(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-xc(e),s=1<<n,i|=t[n],e&=~s;return i}function lQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cQ(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-xc(r),a=1<<o,l=s[o];l===-1?(!(a&n)||a&i)&&(s[o]=lQ(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}}function d5(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function oz(){var t=Bx;return Bx<<=1,!(Bx&4194240)&&(Bx=64),t}function mI(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $y(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xc(e),t[e]=n}function uQ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-xc(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}function tA(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-xc(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var wi=0;function az(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lz,nA,cz,uz,hz,f5=!1,jx=[],Ad=null,Rd=null,Ld=null,D1=new Map,$1=new Map,md=[],hQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function YD(t,e){switch(t){case"focusin":case"focusout":Ad=null;break;case"dragenter":case"dragleave":Rd=null;break;case"mouseover":case"mouseout":Ld=null;break;case"pointerover":case"pointerout":D1.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$1.delete(e.pointerId)}}function cv(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=My(e),e!==null&&nA(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function dQ(t,e,n,i,s){switch(e){case"focusin":return Ad=cv(Ad,t,e,n,i,s),!0;case"dragenter":return Rd=cv(Rd,t,e,n,i,s),!0;case"mouseover":return Ld=cv(Ld,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return D1.set(r,cv(D1.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,$1.set(r,cv($1.get(r)||null,t,e,n,i,s)),!0}return!1}function dz(t){var e=yp(t.target);if(e!==null){var n=pm(e);if(n!==null){if(e=n.tag,e===13){if(e=ez(n),e!==null){t.blockedOn=e,hz(t.priority,function(){cz(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function H2(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=p5(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);l5=i,n.target.dispatchEvent(i),l5=null}else return e=My(n),e!==null&&nA(e),t.blockedOn=n,!1;e.shift()}return!0}function ZD(t,e,n){H2(t)&&n.delete(e)}function fQ(){f5=!1,Ad!==null&&H2(Ad)&&(Ad=null),Rd!==null&&H2(Rd)&&(Rd=null),Ld!==null&&H2(Ld)&&(Ld=null),D1.forEach(ZD),$1.forEach(ZD)}function uv(t,e){t.blockedOn===e&&(t.blockedOn=null,f5||(f5=!0,Qa.unstable_scheduleCallback(Qa.unstable_NormalPriority,fQ)))}function O1(t){function e(s){return uv(s,t)}if(0<jx.length){uv(jx[0],t);for(var n=1;n<jx.length;n++){var i=jx[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ad!==null&&uv(Ad,t),Rd!==null&&uv(Rd,t),Ld!==null&&uv(Ld,t),D1.forEach(e),$1.forEach(e),n=0;n<md.length;n++)i=md[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<md.length&&(n=md[0],n.blockedOn===null);)dz(n),n.blockedOn===null&&md.shift()}var Rg=Ah.ReactCurrentBatchConfig,Sw=!0;function pQ(t,e,n,i){var s=wi,r=Rg.transition;Rg.transition=null;try{wi=1,iA(t,e,n,i)}finally{wi=s,Rg.transition=r}}function mQ(t,e,n,i){var s=wi,r=Rg.transition;Rg.transition=null;try{wi=4,iA(t,e,n,i)}finally{wi=s,Rg.transition=r}}function iA(t,e,n,i){if(Sw){var s=p5(t,e,n,i);if(s===null)kI(t,e,i,Cw,n),YD(t,i);else if(dQ(s,t,e,n,i))i.stopPropagation();else if(YD(t,i),e&4&&-1<hQ.indexOf(t)){for(;s!==null;){var r=My(s);if(r!==null&&lz(r),r=p5(t,e,n,i),r===null&&kI(t,e,i,Cw,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else kI(t,e,i,null,n)}}var Cw=null;function p5(t,e,n,i){if(Cw=null,t=JT(i),t=yp(t),t!==null)if(e=pm(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ez(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cw=t,null}function fz(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nQ()){case eA:return 1;case sz:return 4;case ww:case iQ:return 16;case rz:return 536870912;default:return 16}default:return 16}}var yd=null,sA=null,G2=null;function pz(){if(G2)return G2;var t,e=sA,n=e.length,i,s="value"in yd?yd.value:yd.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===s[r-i];i++);return G2=s.slice(t,1<i?1-i:void 0)}function q2(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vx(){return!0}function QD(){return!1}function tl(t){function e(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Vx:QD,this.isPropagationStopped=QD,this}return fs(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vx)},persist:function(){},isPersistent:Vx}),e}var w0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rA=tl(w0),Oy=fs({},w0,{view:0,detail:0}),gQ=tl(Oy),gI,vI,hv,dS=fs({},Oy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oA,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hv&&(hv&&t.type==="mousemove"?(gI=t.screenX-hv.screenX,vI=t.screenY-hv.screenY):vI=gI=0,hv=t),gI)},movementY:function(t){return"movementY"in t?t.movementY:vI}}),JD=tl(dS),vQ=fs({},dS,{dataTransfer:0}),yQ=tl(vQ),bQ=fs({},Oy,{relatedTarget:0}),yI=tl(bQ),xQ=fs({},w0,{animationName:0,elapsedTime:0,pseudoElement:0}),wQ=tl(xQ),_Q=fs({},w0,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),SQ=tl(_Q),CQ=fs({},w0,{data:0}),e$=tl(CQ),kQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NQ[t])?!!e[t]:!1}function oA(){return EQ}var TQ=fs({},Oy,{key:function(t){if(t.key){var e=kQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=q2(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oA,charCode:function(t){return t.type==="keypress"?q2(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?q2(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),AQ=tl(TQ),RQ=fs({},dS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t$=tl(RQ),LQ=fs({},Oy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oA}),PQ=tl(LQ),DQ=fs({},w0,{propertyName:0,elapsedTime:0,pseudoElement:0}),$Q=tl(DQ),OQ=fs({},dS,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),MQ=tl(OQ),FQ=[9,13,27,32],aA=vh&&"CompositionEvent"in window,s1=null;vh&&"documentMode"in document&&(s1=document.documentMode);var BQ=vh&&"TextEvent"in window&&!s1,mz=vh&&(!aA||s1&&8<s1&&11>=s1),n$=" ",i$=!1;function gz(t,e){switch(t){case"keyup":return FQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vz(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gg=!1;function zQ(t,e){switch(t){case"compositionend":return vz(e);case"keypress":return e.which!==32?null:(i$=!0,n$);case"textInput":return t=e.data,t===n$&&i$?null:t;default:return null}}function jQ(t,e){if(gg)return t==="compositionend"||!aA&&gz(t,e)?(t=pz(),G2=sA=yd=null,gg=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mz&&e.locale!=="ko"?null:e.data;default:return null}}var VQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VQ[t.type]:e==="textarea"}function yz(t,e,n,i){XB(i),e=kw(e,"onChange"),0<e.length&&(n=new rA("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var r1=null,M1=null;function WQ(t){Tz(t,0)}function fS(t){var e=bg(t);if(VB(e))return t}function UQ(t,e){if(t==="change")return e}var bz=!1;if(vh){var bI;if(vh){var xI="oninput"in document;if(!xI){var r$=document.createElement("div");r$.setAttribute("oninput","return;"),xI=typeof r$.oninput=="function"}bI=xI}else bI=!1;bz=bI&&(!document.documentMode||9<document.documentMode)}function o$(){r1&&(r1.detachEvent("onpropertychange",xz),M1=r1=null)}function xz(t){if(t.propertyName==="value"&&fS(M1)){var e=[];yz(e,M1,t,JT(t)),JB(WQ,e)}}function HQ(t,e,n){t==="focusin"?(o$(),r1=e,M1=n,r1.attachEvent("onpropertychange",xz)):t==="focusout"&&o$()}function GQ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fS(M1)}function qQ(t,e){if(t==="click")return fS(e)}function KQ(t,e){if(t==="input"||t==="change")return fS(e)}function XQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ic=typeof Object.is=="function"?Object.is:XQ;function F1(t,e){if(Ic(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!YN.call(e,s)||!Ic(t[s],e[s]))return!1}return!0}function a$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function l$(t,e){var n=a$(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=a$(n)}}function wz(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wz(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _z(){for(var t=window,e=yw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yw(t.document)}return e}function lA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YQ(t){var e=_z(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&wz(n.ownerDocument.documentElement,n)){if(i!==null&&lA(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=l$(n,r);var o=l$(n,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ZQ=vh&&"documentMode"in document&&11>=document.documentMode,vg=null,m5=null,o1=null,g5=!1;function c$(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;g5||vg==null||vg!==yw(i)||(i=vg,"selectionStart"in i&&lA(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),o1&&F1(o1,i)||(o1=i,i=kw(m5,"onSelect"),0<i.length&&(e=new rA("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=vg)))}function Wx(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yg={animationend:Wx("Animation","AnimationEnd"),animationiteration:Wx("Animation","AnimationIteration"),animationstart:Wx("Animation","AnimationStart"),transitionend:Wx("Transition","TransitionEnd")},wI={},Sz={};vh&&(Sz=document.createElement("div").style,"AnimationEvent"in window||(delete yg.animationend.animation,delete yg.animationiteration.animation,delete yg.animationstart.animation),"TransitionEvent"in window||delete yg.transitionend.transition);function pS(t){if(wI[t])return wI[t];if(!yg[t])return t;var e=yg[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sz)return wI[t]=e[n];return t}var Cz=pS("animationend"),kz=pS("animationiteration"),Iz=pS("animationstart"),Nz=pS("transitionend"),Ez=new Map,u$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(t,e){Ez.set(t,e),fm(e,[t])}for(var _I=0;_I<u$.length;_I++){var SI=u$[_I],QQ=SI.toLowerCase(),JQ=SI[0].toUpperCase()+SI.slice(1);ff(QQ,"on"+JQ)}ff(Cz,"onAnimationEnd");ff(kz,"onAnimationIteration");ff(Iz,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(Nz,"onTransitionEnd");Wg("onMouseEnter",["mouseout","mouseover"]);Wg("onMouseLeave",["mouseout","mouseover"]);Wg("onPointerEnter",["pointerout","pointerover"]);Wg("onPointerLeave",["pointerout","pointerover"]);fm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fm("onBeforeInput",["compositionend","keypress","textInput","paste"]);fm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bv));function h$(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,QZ(i,e,void 0,t),t.currentTarget=null}function Tz(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;h$(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;h$(s,a,c),r=l}}}if(xw)throw t=h5,xw=!1,h5=null,t}function Gi(t,e){var n=e[w5];n===void 0&&(n=e[w5]=new Set);var i=t+"__bubble";n.has(i)||(Az(e,t,2,!1),n.add(i))}function CI(t,e,n){var i=0;e&&(i|=4),Az(n,t,i,e)}var Ux="_reactListening"+Math.random().toString(36).slice(2);function B1(t){if(!t[Ux]){t[Ux]=!0,MB.forEach(function(n){n!=="selectionchange"&&(eJ.has(n)||CI(n,!1,t),CI(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ux]||(e[Ux]=!0,CI("selectionchange",!1,e))}}function Az(t,e,n,i){switch(fz(e)){case 1:var s=pQ;break;case 4:s=mQ;break;default:s=iA}n=s.bind(null,e,n,t),s=void 0,!u5||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function kI(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=yp(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}a=a.parentNode}}i=i.return}JB(function(){var c=r,u=JT(n),h=[];e:{var d=Ez.get(t);if(d!==void 0){var p=rA,m=t;switch(t){case"keypress":if(q2(n)===0)break e;case"keydown":case"keyup":p=AQ;break;case"focusin":m="focus",p=yI;break;case"focusout":m="blur",p=yI;break;case"beforeblur":case"afterblur":p=yI;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=JD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=yQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=PQ;break;case Cz:case kz:case Iz:p=wQ;break;case Nz:p=$Q;break;case"scroll":p=gQ;break;case"wheel":p=MQ;break;case"copy":case"cut":case"paste":p=SQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=t$}var g=(e&4)!==0,y=!g&&t==="scroll",v=g?d!==null?d+"Capture":null:d;g=[];for(var b=c,w;b!==null;){w=b;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,v!==null&&(S=P1(b,v),S!=null&&g.push(z1(b,S,w)))),y)break;b=b.return}0<g.length&&(d=new p(d,m,null,n,u),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==l5&&(m=n.relatedTarget||n.fromElement)&&(yp(m)||m[yh]))break e;if((p||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?yp(m):null,m!==null&&(y=pm(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=JD,S="onMouseLeave",v="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=t$,S="onPointerLeave",v="onPointerEnter",b="pointer"),y=p==null?d:bg(p),w=m==null?d:bg(m),d=new g(S,b+"leave",p,n,u),d.target=y,d.relatedTarget=w,S=null,yp(u)===c&&(g=new g(v,b+"enter",m,n,u),g.target=w,g.relatedTarget=y,S=g),y=S,p&&m)t:{for(g=p,v=m,b=0,w=g;w;w=Zm(w))b++;for(w=0,S=v;S;S=Zm(S))w++;for(;0<b-w;)g=Zm(g),b--;for(;0<w-b;)v=Zm(v),w--;for(;b--;){if(g===v||v!==null&&g===v.alternate)break t;g=Zm(g),v=Zm(v)}g=null}else g=null;p!==null&&d$(h,d,p,g,!1),m!==null&&y!==null&&d$(h,y,m,g,!0)}}e:{if(d=c?bg(c):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var k=UQ;else if(s$(d))if(bz)k=KQ;else{k=GQ;var I=HQ}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(k=qQ);if(k&&(k=k(t,c))){yz(h,k,n,u);break e}I&&I(t,d,c),t==="focusout"&&(I=d._wrapperState)&&I.controlled&&d.type==="number"&&i5(d,"number",d.value)}switch(I=c?bg(c):window,t){case"focusin":(s$(I)||I.contentEditable==="true")&&(vg=I,m5=c,o1=null);break;case"focusout":o1=m5=vg=null;break;case"mousedown":g5=!0;break;case"contextmenu":case"mouseup":case"dragend":g5=!1,c$(h,n,u);break;case"selectionchange":if(ZQ)break;case"keydown":case"keyup":c$(h,n,u)}var T;if(aA)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else gg?gz(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(mz&&n.locale!=="ko"&&(gg||E!=="onCompositionStart"?E==="onCompositionEnd"&&gg&&(T=pz()):(yd=u,sA="value"in yd?yd.value:yd.textContent,gg=!0)),I=kw(c,E),0<I.length&&(E=new e$(E,t,null,n,u),h.push({event:E,listeners:I}),T?E.data=T:(T=vz(n),T!==null&&(E.data=T)))),(T=BQ?zQ(t,n):jQ(t,n))&&(c=kw(c,"onBeforeInput"),0<c.length&&(u=new e$("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=T))}Tz(h,e)})}function z1(t,e,n){return{instance:t,listener:e,currentTarget:n}}function kw(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=P1(t,n),r!=null&&i.unshift(z1(t,r,s)),r=P1(t,e),r!=null&&i.push(z1(t,r,s))),t=t.return}return i}function Zm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function d$(t,e,n,i,s){for(var r=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=P1(n,r),l!=null&&o.unshift(z1(n,l,a))):s||(l=P1(n,r),l!=null&&o.push(z1(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tJ=/\r\n?/g,nJ=/\u0000|\uFFFD/g;function f$(t){return(typeof t=="string"?t:""+t).replace(tJ,`
`).replace(nJ,"")}function Hx(t,e,n){if(e=f$(e),f$(t)!==e&&n)throw Error(ct(425))}function Iw(){}var v5=null,y5=null;function b5(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var x5=typeof setTimeout=="function"?setTimeout:void 0,iJ=typeof clearTimeout=="function"?clearTimeout:void 0,p$=typeof Promise=="function"?Promise:void 0,sJ=typeof queueMicrotask=="function"?queueMicrotask:typeof p$<"u"?function(t){return p$.resolve(null).then(t).catch(rJ)}:x5;function rJ(t){setTimeout(function(){throw t})}function II(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),O1(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);O1(e)}function Pd(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function m$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _0=Math.random().toString(36).slice(2),uu="__reactFiber$"+_0,j1="__reactProps$"+_0,yh="__reactContainer$"+_0,w5="__reactEvents$"+_0,oJ="__reactListeners$"+_0,aJ="__reactHandles$"+_0;function yp(t){var e=t[uu];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yh]||n[uu]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=m$(t);t!==null;){if(n=t[uu])return n;t=m$(t)}return e}t=n,n=t.parentNode}return null}function My(t){return t=t[uu]||t[yh],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bg(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ct(33))}function mS(t){return t[j1]||null}var _5=[],xg=-1;function pf(t){return{current:t}}function Ki(t){0>xg||(t.current=_5[xg],_5[xg]=null,xg--)}function ji(t,e){xg++,_5[xg]=t.current,t.current=e}var Zd={},_o=pf(Zd),Sa=pf(!1),jp=Zd;function Ug(t,e){var n=t.type.contextTypes;if(!n)return Zd;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=e[r];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ca(t){return t=t.childContextTypes,t!=null}function Nw(){Ki(Sa),Ki(_o)}function g$(t,e,n){if(_o.current!==Zd)throw Error(ct(168));ji(_o,e),ji(Sa,n)}function Rz(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(ct(108,HZ(t)||"Unknown",s));return fs({},n,i)}function Ew(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zd,jp=_o.current,ji(_o,t),ji(Sa,Sa.current),!0}function v$(t,e,n){var i=t.stateNode;if(!i)throw Error(ct(169));n?(t=Rz(t,e,jp),i.__reactInternalMemoizedMergedChildContext=t,Ki(Sa),Ki(_o),ji(_o,t)):Ki(Sa),ji(Sa,n)}var Yu=null,gS=!1,NI=!1;function Lz(t){Yu===null?Yu=[t]:Yu.push(t)}function lJ(t){gS=!0,Lz(t)}function mf(){if(!NI&&Yu!==null){NI=!0;var t=0,e=wi;try{var n=Yu;for(wi=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Yu=null,gS=!1}catch(s){throw Yu!==null&&(Yu=Yu.slice(t+1)),iz(eA,mf),s}finally{wi=e,NI=!1}}return null}var wg=[],_g=0,Tw=null,Aw=0,xl=[],wl=0,Vp=null,th=1,nh="";function sp(t,e){wg[_g++]=Aw,wg[_g++]=Tw,Tw=t,Aw=e}function Pz(t,e,n){xl[wl++]=th,xl[wl++]=nh,xl[wl++]=Vp,Vp=t;var i=th;t=nh;var s=32-xc(i)-1;i&=~(1<<s),n+=1;var r=32-xc(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,th=1<<32-xc(e)+s|n<<s|i,nh=r+t}else th=1<<r|n<<s|i,nh=t}function cA(t){t.return!==null&&(sp(t,1),Pz(t,1,0))}function uA(t){for(;t===Tw;)Tw=wg[--_g],wg[_g]=null,Aw=wg[--_g],wg[_g]=null;for(;t===Vp;)Vp=xl[--wl],xl[wl]=null,nh=xl[--wl],xl[wl]=null,th=xl[--wl],xl[wl]=null}var Xa=null,Ha=null,ns=!1,hc=null;function Dz(t,e){var n=Sl(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function y$(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xa=t,Ha=Pd(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xa=t,Ha=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vp!==null?{id:th,overflow:nh}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sl(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xa=t,Ha=null,!0):!1;default:return!1}}function S5(t){return(t.mode&1)!==0&&(t.flags&128)===0}function C5(t){if(ns){var e=Ha;if(e){var n=e;if(!y$(t,e)){if(S5(t))throw Error(ct(418));e=Pd(n.nextSibling);var i=Xa;e&&y$(t,e)?Dz(i,n):(t.flags=t.flags&-4097|2,ns=!1,Xa=t)}}else{if(S5(t))throw Error(ct(418));t.flags=t.flags&-4097|2,ns=!1,Xa=t}}}function b$(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xa=t}function Gx(t){if(t!==Xa)return!1;if(!ns)return b$(t),ns=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!b5(t.type,t.memoizedProps)),e&&(e=Ha)){if(S5(t))throw $z(),Error(ct(418));for(;e;)Dz(t,e),e=Pd(e.nextSibling)}if(b$(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ct(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ha=Pd(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ha=null}}else Ha=Xa?Pd(t.stateNode.nextSibling):null;return!0}function $z(){for(var t=Ha;t;)t=Pd(t.nextSibling)}function Hg(){Ha=Xa=null,ns=!1}function hA(t){hc===null?hc=[t]:hc.push(t)}var cJ=Ah.ReactCurrentBatchConfig;function dv(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ct(309));var i=n.stateNode}if(!i)throw Error(ct(147,t));var s=i,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(ct(284));if(!n._owner)throw Error(ct(290,t))}return t}function qx(t,e){throw t=Object.prototype.toString.call(e),Error(ct(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function x$(t){var e=t._init;return e(t._payload)}function Oz(t){function e(v,b){if(t){var w=v.deletions;w===null?(v.deletions=[b],v.flags|=16):w.push(b)}}function n(v,b){if(!t)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function i(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function s(v,b){return v=Md(v,b),v.index=0,v.sibling=null,v}function r(v,b,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<b?(v.flags|=2,b):w):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,b,w,S){return b===null||b.tag!==6?(b=DI(w,v.mode,S),b.return=v,b):(b=s(b,w),b.return=v,b)}function l(v,b,w,S){var k=w.type;return k===mg?u(v,b,w.props.children,S,w.key):b!==null&&(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ud&&x$(k)===b.type)?(S=s(b,w.props),S.ref=dv(v,b,w),S.return=v,S):(S=ew(w.type,w.key,w.props,null,v.mode,S),S.ref=dv(v,b,w),S.return=v,S)}function c(v,b,w,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=$I(w,v.mode,S),b.return=v,b):(b=s(b,w.children||[]),b.return=v,b)}function u(v,b,w,S,k){return b===null||b.tag!==7?(b=Ap(w,v.mode,S,k),b.return=v,b):(b=s(b,w),b.return=v,b)}function h(v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=DI(""+b,v.mode,w),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ox:return w=ew(b.type,b.key,b.props,null,v.mode,w),w.ref=dv(v,null,b),w.return=v,w;case pg:return b=$I(b,v.mode,w),b.return=v,b;case ud:var S=b._init;return h(v,S(b._payload),w)}if(Mv(b)||av(b))return b=Ap(b,v.mode,w,null),b.return=v,b;qx(v,b)}return null}function d(v,b,w,S){var k=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:a(v,b,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ox:return w.key===k?l(v,b,w,S):null;case pg:return w.key===k?c(v,b,w,S):null;case ud:return k=w._init,d(v,b,k(w._payload),S)}if(Mv(w)||av(w))return k!==null?null:u(v,b,w,S,null);qx(v,w)}return null}function p(v,b,w,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(w)||null,a(b,v,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ox:return v=v.get(S.key===null?w:S.key)||null,l(b,v,S,k);case pg:return v=v.get(S.key===null?w:S.key)||null,c(b,v,S,k);case ud:var I=S._init;return p(v,b,w,I(S._payload),k)}if(Mv(S)||av(S))return v=v.get(w)||null,u(b,v,S,k,null);qx(b,S)}return null}function m(v,b,w,S){for(var k=null,I=null,T=b,E=b=0,O=null;T!==null&&E<w.length;E++){T.index>E?(O=T,T=null):O=T.sibling;var F=d(v,T,w[E],S);if(F===null){T===null&&(T=O);break}t&&T&&F.alternate===null&&e(v,T),b=r(F,b,E),I===null?k=F:I.sibling=F,I=F,T=O}if(E===w.length)return n(v,T),ns&&sp(v,E),k;if(T===null){for(;E<w.length;E++)T=h(v,w[E],S),T!==null&&(b=r(T,b,E),I===null?k=T:I.sibling=T,I=T);return ns&&sp(v,E),k}for(T=i(v,T);E<w.length;E++)O=p(T,v,E,w[E],S),O!==null&&(t&&O.alternate!==null&&T.delete(O.key===null?E:O.key),b=r(O,b,E),I===null?k=O:I.sibling=O,I=O);return t&&T.forEach(function(R){return e(v,R)}),ns&&sp(v,E),k}function g(v,b,w,S){var k=av(w);if(typeof k!="function")throw Error(ct(150));if(w=k.call(w),w==null)throw Error(ct(151));for(var I=k=null,T=b,E=b=0,O=null,F=w.next();T!==null&&!F.done;E++,F=w.next()){T.index>E?(O=T,T=null):O=T.sibling;var R=d(v,T,F.value,S);if(R===null){T===null&&(T=O);break}t&&T&&R.alternate===null&&e(v,T),b=r(R,b,E),I===null?k=R:I.sibling=R,I=R,T=O}if(F.done)return n(v,T),ns&&sp(v,E),k;if(T===null){for(;!F.done;E++,F=w.next())F=h(v,F.value,S),F!==null&&(b=r(F,b,E),I===null?k=F:I.sibling=F,I=F);return ns&&sp(v,E),k}for(T=i(v,T);!F.done;E++,F=w.next())F=p(T,v,E,F.value,S),F!==null&&(t&&F.alternate!==null&&T.delete(F.key===null?E:F.key),b=r(F,b,E),I===null?k=F:I.sibling=F,I=F);return t&&T.forEach(function($){return e(v,$)}),ns&&sp(v,E),k}function y(v,b,w,S){if(typeof w=="object"&&w!==null&&w.type===mg&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ox:e:{for(var k=w.key,I=b;I!==null;){if(I.key===k){if(k=w.type,k===mg){if(I.tag===7){n(v,I.sibling),b=s(I,w.props.children),b.return=v,v=b;break e}}else if(I.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ud&&x$(k)===I.type){n(v,I.sibling),b=s(I,w.props),b.ref=dv(v,I,w),b.return=v,v=b;break e}n(v,I);break}else e(v,I);I=I.sibling}w.type===mg?(b=Ap(w.props.children,v.mode,S,w.key),b.return=v,v=b):(S=ew(w.type,w.key,w.props,null,v.mode,S),S.ref=dv(v,b,w),S.return=v,v=S)}return o(v);case pg:e:{for(I=w.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(v,b.sibling),b=s(b,w.children||[]),b.return=v,v=b;break e}else{n(v,b);break}else e(v,b);b=b.sibling}b=$I(w,v.mode,S),b.return=v,v=b}return o(v);case ud:return I=w._init,y(v,b,I(w._payload),S)}if(Mv(w))return m(v,b,w,S);if(av(w))return g(v,b,w,S);qx(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(v,b.sibling),b=s(b,w),b.return=v,v=b):(n(v,b),b=DI(w,v.mode,S),b.return=v,v=b),o(v)):n(v,b)}return y}var Gg=Oz(!0),Mz=Oz(!1),Rw=pf(null),Lw=null,Sg=null,dA=null;function fA(){dA=Sg=Lw=null}function pA(t){var e=Rw.current;Ki(Rw),t._currentValue=e}function k5(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Lg(t,e){Lw=t,dA=Sg=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xa=!0),t.firstContext=null)}function Pl(t){var e=t._currentValue;if(dA!==t)if(t={context:t,memoizedValue:e,next:null},Sg===null){if(Lw===null)throw Error(ct(308));Sg=t,Lw.dependencies={lanes:0,firstContext:t}}else Sg=Sg.next=t;return e}var bp=null;function mA(t){bp===null?bp=[t]:bp.push(t)}function Fz(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,mA(e)):(n.next=s.next,s.next=n),e.interleaved=n,bh(t,i)}function bh(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hd=!1;function gA(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bz(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function uh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dd(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Jn&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,bh(t,n)}return s=i.interleaved,s===null?(e.next=e,mA(i)):(e.next=s.next,s.next=e),i.interleaved=e,bh(t,n)}function K2(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,tA(t,n)}}function w$(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pw(t,e,n,i){var s=t.updateQueue;hd=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var h=s.baseState;o=0,u=c=l=null,a=r;do{var d=a.lane,p=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(d=e,p=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,d=typeof m=="function"?m.call(p,h,d):m,d==null)break e;h=fs({},h,d);break e;case 2:hd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Up|=o,t.lanes=o,t.memoizedState=h}}function _$(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(ct(191,s));s.call(i)}}}var Fy={},pu=pf(Fy),V1=pf(Fy),W1=pf(Fy);function xp(t){if(t===Fy)throw Error(ct(174));return t}function vA(t,e){switch(ji(W1,e),ji(V1,t),ji(pu,Fy),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:r5(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=r5(e,t)}Ki(pu),ji(pu,e)}function qg(){Ki(pu),Ki(V1),Ki(W1)}function zz(t){xp(W1.current);var e=xp(pu.current),n=r5(e,t.type);e!==n&&(ji(V1,t),ji(pu,n))}function yA(t){V1.current===t&&(Ki(pu),Ki(V1))}var us=pf(0);function Dw(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var EI=[];function bA(){for(var t=0;t<EI.length;t++)EI[t]._workInProgressVersionPrimary=null;EI.length=0}var X2=Ah.ReactCurrentDispatcher,TI=Ah.ReactCurrentBatchConfig,Wp=0,ds=null,rr=null,kr=null,$w=!1,a1=!1,U1=0,uJ=0;function so(){throw Error(ct(321))}function xA(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ic(t[n],e[n]))return!1;return!0}function wA(t,e,n,i,s,r){if(Wp=r,ds=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,X2.current=t===null||t.memoizedState===null?pJ:mJ,t=n(i,s),a1){r=0;do{if(a1=!1,U1=0,25<=r)throw Error(ct(301));r+=1,kr=rr=null,e.updateQueue=null,X2.current=gJ,t=n(i,s)}while(a1)}if(X2.current=Ow,e=rr!==null&&rr.next!==null,Wp=0,kr=rr=ds=null,$w=!1,e)throw Error(ct(300));return t}function _A(){var t=U1!==0;return U1=0,t}function tu(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kr===null?ds.memoizedState=kr=t:kr=kr.next=t,kr}function Dl(){if(rr===null){var t=ds.alternate;t=t!==null?t.memoizedState:null}else t=rr.next;var e=kr===null?ds.memoizedState:kr.next;if(e!==null)kr=e,rr=t;else{if(t===null)throw Error(ct(310));rr=t,t={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},kr===null?ds.memoizedState=kr=t:kr=kr.next=t}return kr}function H1(t,e){return typeof e=="function"?e(t):e}function AI(t){var e=Dl(),n=e.queue;if(n===null)throw Error(ct(311));n.lastRenderedReducer=t;var i=rr,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var u=c.lane;if((Wp&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,ds.lanes|=u,Up|=u}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,Ic(i,e.memoizedState)||(xa=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do r=s.lane,ds.lanes|=r,Up|=r,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function RI(t){var e=Dl(),n=e.queue;if(n===null)throw Error(ct(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=t(r,o.action),o=o.next;while(o!==s);Ic(r,e.memoizedState)||(xa=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function jz(){}function Vz(t,e){var n=ds,i=Dl(),s=e(),r=!Ic(i.memoizedState,s);if(r&&(i.memoizedState=s,xa=!0),i=i.queue,SA(Hz.bind(null,n,i,t),[t]),i.getSnapshot!==e||r||kr!==null&&kr.memoizedState.tag&1){if(n.flags|=2048,G1(9,Uz.bind(null,n,i,s,e),void 0,null),Tr===null)throw Error(ct(349));Wp&30||Wz(n,e,s)}return s}function Wz(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ds.updateQueue,e===null?(e={lastEffect:null,stores:null},ds.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Uz(t,e,n,i){e.value=n,e.getSnapshot=i,Gz(e)&&qz(t)}function Hz(t,e,n){return n(function(){Gz(e)&&qz(t)})}function Gz(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ic(t,n)}catch{return!0}}function qz(t){var e=bh(t,1);e!==null&&wc(e,t,1,-1)}function S$(t){var e=tu();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:H1,lastRenderedState:t},e.queue=t,t=t.dispatch=fJ.bind(null,ds,t),[e.memoizedState,t]}function G1(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ds.updateQueue,e===null?(e={lastEffect:null,stores:null},ds.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Kz(){return Dl().memoizedState}function Y2(t,e,n,i){var s=tu();ds.flags|=t,s.memoizedState=G1(1|e,n,void 0,i===void 0?null:i)}function vS(t,e,n,i){var s=Dl();i=i===void 0?null:i;var r=void 0;if(rr!==null){var o=rr.memoizedState;if(r=o.destroy,i!==null&&xA(i,o.deps)){s.memoizedState=G1(e,n,r,i);return}}ds.flags|=t,s.memoizedState=G1(1|e,n,r,i)}function C$(t,e){return Y2(8390656,8,t,e)}function SA(t,e){return vS(2048,8,t,e)}function Xz(t,e){return vS(4,2,t,e)}function Yz(t,e){return vS(4,4,t,e)}function Zz(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qz(t,e,n){return n=n!=null?n.concat([t]):null,vS(4,4,Zz.bind(null,e,t),n)}function CA(){}function Jz(t,e){var n=Dl();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&xA(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function e8(t,e){var n=Dl();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&xA(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function t8(t,e,n){return Wp&21?(Ic(n,e)||(n=oz(),ds.lanes|=n,Up|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xa=!0),t.memoizedState=n)}function hJ(t,e){var n=wi;wi=n!==0&&4>n?n:4,t(!0);var i=TI.transition;TI.transition={};try{t(!1),e()}finally{wi=n,TI.transition=i}}function n8(){return Dl().memoizedState}function dJ(t,e,n){var i=Od(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},i8(t))s8(e,n);else if(n=Fz(t,e,n,i),n!==null){var s=Ko();wc(n,t,i,s),r8(n,e,i)}}function fJ(t,e,n){var i=Od(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(i8(t))s8(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ic(a,o)){var l=e.interleaved;l===null?(s.next=s,mA(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Fz(t,e,s,i),n!==null&&(s=Ko(),wc(n,t,i,s),r8(n,e,i))}}function i8(t){var e=t.alternate;return t===ds||e!==null&&e===ds}function s8(t,e){a1=$w=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function r8(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,tA(t,n)}}var Ow={readContext:Pl,useCallback:so,useContext:so,useEffect:so,useImperativeHandle:so,useInsertionEffect:so,useLayoutEffect:so,useMemo:so,useReducer:so,useRef:so,useState:so,useDebugValue:so,useDeferredValue:so,useTransition:so,useMutableSource:so,useSyncExternalStore:so,useId:so,unstable_isNewReconciler:!1},pJ={readContext:Pl,useCallback:function(t,e){return tu().memoizedState=[t,e===void 0?null:e],t},useContext:Pl,useEffect:C$,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Y2(4194308,4,Zz.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Y2(4194308,4,t,e)},useInsertionEffect:function(t,e){return Y2(4,2,t,e)},useMemo:function(t,e){var n=tu();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=tu();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=dJ.bind(null,ds,t),[i.memoizedState,t]},useRef:function(t){var e=tu();return t={current:t},e.memoizedState=t},useState:S$,useDebugValue:CA,useDeferredValue:function(t){return tu().memoizedState=t},useTransition:function(){var t=S$(!1),e=t[0];return t=hJ.bind(null,t[1]),tu().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ds,s=tu();if(ns){if(n===void 0)throw Error(ct(407));n=n()}else{if(n=e(),Tr===null)throw Error(ct(349));Wp&30||Wz(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,C$(Hz.bind(null,i,r,t),[t]),i.flags|=2048,G1(9,Uz.bind(null,i,r,n,e),void 0,null),n},useId:function(){var t=tu(),e=Tr.identifierPrefix;if(ns){var n=nh,i=th;n=(i&~(1<<32-xc(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=U1++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uJ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mJ={readContext:Pl,useCallback:Jz,useContext:Pl,useEffect:SA,useImperativeHandle:Qz,useInsertionEffect:Xz,useLayoutEffect:Yz,useMemo:e8,useReducer:AI,useRef:Kz,useState:function(){return AI(H1)},useDebugValue:CA,useDeferredValue:function(t){var e=Dl();return t8(e,rr.memoizedState,t)},useTransition:function(){var t=AI(H1)[0],e=Dl().memoizedState;return[t,e]},useMutableSource:jz,useSyncExternalStore:Vz,useId:n8,unstable_isNewReconciler:!1},gJ={readContext:Pl,useCallback:Jz,useContext:Pl,useEffect:SA,useImperativeHandle:Qz,useInsertionEffect:Xz,useLayoutEffect:Yz,useMemo:e8,useReducer:RI,useRef:Kz,useState:function(){return RI(H1)},useDebugValue:CA,useDeferredValue:function(t){var e=Dl();return rr===null?e.memoizedState=t:t8(e,rr.memoizedState,t)},useTransition:function(){var t=RI(H1)[0],e=Dl().memoizedState;return[t,e]},useMutableSource:jz,useSyncExternalStore:Vz,useId:n8,unstable_isNewReconciler:!1};function ac(t,e){if(t&&t.defaultProps){e=fs({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function I5(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:fs({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yS={isMounted:function(t){return(t=t._reactInternals)?pm(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ko(),s=Od(t),r=uh(i,s);r.payload=e,n!=null&&(r.callback=n),e=Dd(t,r,s),e!==null&&(wc(e,t,s,i),K2(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ko(),s=Od(t),r=uh(i,s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Dd(t,r,s),e!==null&&(wc(e,t,s,i),K2(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ko(),i=Od(t),s=uh(n,i);s.tag=2,e!=null&&(s.callback=e),e=Dd(t,s,i),e!==null&&(wc(e,t,i,n),K2(e,t,i))}};function k$(t,e,n,i,s,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!F1(n,i)||!F1(s,r):!0}function o8(t,e,n){var i=!1,s=Zd,r=e.contextType;return typeof r=="object"&&r!==null?r=Pl(r):(s=Ca(e)?jp:_o.current,i=e.contextTypes,r=(i=i!=null)?Ug(t,s):Zd),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yS,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function I$(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&yS.enqueueReplaceState(e,e.state,null)}function N5(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},gA(t);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Pl(r):(r=Ca(e)?jp:_o.current,s.context=Ug(t,r)),s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(I5(t,e,r,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yS.enqueueReplaceState(s,s.state,null),Pw(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Kg(t,e){try{var n="",i=e;do n+=UZ(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:s,digest:null}}function LI(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function E5(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vJ=typeof WeakMap=="function"?WeakMap:Map;function a8(t,e,n){n=uh(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Fw||(Fw=!0,F5=i),E5(t,e)},n}function l8(t,e,n){n=uh(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){E5(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){E5(t,e),typeof i!="function"&&($d===null?$d=new Set([this]):$d.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function N$(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new vJ;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=RJ.bind(null,t,e,n),e.then(t,t))}function E$(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function T$(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=uh(-1,1),e.tag=2,Dd(n,e,1))),n.lanes|=1),t)}var yJ=Ah.ReactCurrentOwner,xa=!1;function Fo(t,e,n,i){e.child=t===null?Mz(e,null,n,i):Gg(e,t.child,n,i)}function A$(t,e,n,i,s){n=n.render;var r=e.ref;return Lg(e,s),i=wA(t,e,n,i,r,s),n=_A(),t!==null&&!xa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xh(t,e,s)):(ns&&n&&cA(e),e.flags|=1,Fo(t,e,i,s),e.child)}function R$(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!LA(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,c8(t,e,r,i,s)):(t=ew(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:F1,n(o,i)&&t.ref===e.ref)return xh(t,e,s)}return e.flags|=1,t=Md(r,i),t.ref=e.ref,t.return=e,e.child=t}function c8(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(F1(r,i)&&t.ref===e.ref)if(xa=!1,e.pendingProps=i=r,(t.lanes&s)!==0)t.flags&131072&&(xa=!0);else return e.lanes=t.lanes,xh(t,e,s)}return T5(t,e,n,i,s)}function u8(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ji(kg,ja),ja|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ji(kg,ja),ja|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,ji(kg,ja),ja|=i}else r!==null?(i=r.baseLanes|n,e.memoizedState=null):i=n,ji(kg,ja),ja|=i;return Fo(t,e,s,n),e.child}function h8(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function T5(t,e,n,i,s){var r=Ca(n)?jp:_o.current;return r=Ug(e,r),Lg(e,s),n=wA(t,e,n,i,r,s),i=_A(),t!==null&&!xa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xh(t,e,s)):(ns&&i&&cA(e),e.flags|=1,Fo(t,e,n,s),e.child)}function L$(t,e,n,i,s){if(Ca(n)){var r=!0;Ew(e)}else r=!1;if(Lg(e,s),e.stateNode===null)Z2(t,e),o8(e,n,i),N5(e,n,i,s),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Pl(c):(c=Ca(n)?jp:_o.current,c=Ug(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&I$(e,o,i,c),hd=!1;var d=e.memoizedState;o.state=d,Pw(e,i,o,s),l=e.memoizedState,a!==i||d!==l||Sa.current||hd?(typeof u=="function"&&(I5(e,n,u,i),l=e.memoizedState),(a=hd||k$(e,n,a,i,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Bz(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ac(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Pl(l):(l=Ca(n)?jp:_o.current,l=Ug(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&I$(e,o,i,l),hd=!1,d=e.memoizedState,o.state=d,Pw(e,i,o,s);var m=e.memoizedState;a!==h||d!==m||Sa.current||hd?(typeof p=="function"&&(I5(e,n,p,i),m=e.memoizedState),(c=hd||k$(e,n,c,i,d,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),o.props=i,o.state=m,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return A5(t,e,n,i,r,s)}function A5(t,e,n,i,s,r){h8(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&v$(e,n,!1),xh(t,e,r);i=e.stateNode,yJ.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Gg(e,t.child,null,r),e.child=Gg(e,null,a,r)):Fo(t,e,a,r),e.memoizedState=i.state,s&&v$(e,n,!0),e.child}function d8(t){var e=t.stateNode;e.pendingContext?g$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&g$(t,e.context,!1),vA(t,e.containerInfo)}function P$(t,e,n,i,s){return Hg(),hA(s),e.flags|=256,Fo(t,e,n,i),e.child}var R5={dehydrated:null,treeContext:null,retryLane:0};function L5(t){return{baseLanes:t,cachePool:null,transitions:null}}function f8(t,e,n){var i=e.pendingProps,s=us.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ji(us,s&1),t===null)return C5(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=wS(o,i,0,null),t=Ap(t,i,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=L5(n),e.memoizedState=R5,t):kA(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return bJ(t,e,o,i,a,s,n);if(r){r=i.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Md(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=Md(a,r):(r=Ap(r,o,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=t.child.memoizedState,o=o===null?L5(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~n,e.memoizedState=R5,i}return r=t.child,t=r.sibling,i=Md(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function kA(t,e){return e=wS({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kx(t,e,n,i){return i!==null&&hA(i),Gg(e,t.child,null,n),t=kA(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bJ(t,e,n,i,s,r,o){if(n)return e.flags&256?(e.flags&=-257,i=LI(Error(ct(422))),Kx(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=wS({mode:"visible",children:i.children},s,0,null),r=Ap(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Gg(e,t.child,null,o),e.child.memoizedState=L5(o),e.memoizedState=R5,r);if(!(e.mode&1))return Kx(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(ct(419)),i=LI(r,i,void 0),Kx(t,e,o,i)}if(a=(o&t.childLanes)!==0,xa||a){if(i=Tr,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,bh(t,s),wc(i,t,s,-1))}return RA(),i=LI(Error(ct(421))),Kx(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=LJ.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,Ha=Pd(s.nextSibling),Xa=e,ns=!0,hc=null,t!==null&&(xl[wl++]=th,xl[wl++]=nh,xl[wl++]=Vp,th=t.id,nh=t.overflow,Vp=e),e=kA(e,i.children),e.flags|=4096,e)}function D$(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),k5(t.return,e,n)}function PI(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function p8(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Fo(t,e,i.children,n),i=us.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&D$(t,n,e);else if(t.tag===19)D$(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ji(us,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Dw(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),PI(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Dw(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}PI(e,!0,n,null,r);break;case"together":PI(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Z2(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xh(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Up|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ct(153));if(e.child!==null){for(t=e.child,n=Md(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Md(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xJ(t,e,n){switch(e.tag){case 3:d8(e),Hg();break;case 5:zz(e);break;case 1:Ca(e.type)&&Ew(e);break;case 4:vA(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ji(Rw,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ji(us,us.current&1),e.flags|=128,null):n&e.child.childLanes?f8(t,e,n):(ji(us,us.current&1),t=xh(t,e,n),t!==null?t.sibling:null);ji(us,us.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return p8(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ji(us,us.current),i)break;return null;case 22:case 23:return e.lanes=0,u8(t,e,n)}return xh(t,e,n)}var m8,P5,g8,v8;m8=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};P5=function(){};g8=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,xp(pu.current);var r=null;switch(n){case"input":s=t5(t,s),i=t5(t,i),r=[];break;case"select":s=fs({},s,{value:void 0}),i=fs({},i,{value:void 0}),r=[];break;case"textarea":s=s5(t,s),i=s5(t,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Iw)}o5(n,i);var o;n=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(R1.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(r||(r=[]),r.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(R1.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Gi("scroll",t),r||a===l||(r=[])):(r=r||[]).push(c,l))}n&&(r=r||[]).push("style",n);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};v8=function(t,e,n,i){n!==i&&(e.flags|=4)};function fv(t,e){if(!ns)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ro(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function wJ(t,e,n){var i=e.pendingProps;switch(uA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ro(e),null;case 1:return Ca(e.type)&&Nw(),ro(e),null;case 3:return i=e.stateNode,qg(),Ki(Sa),Ki(_o),bA(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Gx(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hc!==null&&(j5(hc),hc=null))),P5(t,e),ro(e),null;case 5:yA(e);var s=xp(W1.current);if(n=e.type,t!==null&&e.stateNode!=null)g8(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ct(166));return ro(e),null}if(t=xp(pu.current),Gx(e)){i=e.stateNode,n=e.type;var r=e.memoizedProps;switch(i[uu]=e,i[j1]=r,t=(e.mode&1)!==0,n){case"dialog":Gi("cancel",i),Gi("close",i);break;case"iframe":case"object":case"embed":Gi("load",i);break;case"video":case"audio":for(s=0;s<Bv.length;s++)Gi(Bv[s],i);break;case"source":Gi("error",i);break;case"img":case"image":case"link":Gi("error",i),Gi("load",i);break;case"details":Gi("toggle",i);break;case"input":WD(i,r),Gi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Gi("invalid",i);break;case"textarea":HD(i,r),Gi("invalid",i)}o5(n,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&Hx(i.textContent,a,t),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Hx(i.textContent,a,t),s=["children",""+a]):R1.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Gi("scroll",i)}switch(n){case"input":Mx(i),UD(i,r,!0);break;case"textarea":Mx(i),GD(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Iw)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=HB(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[uu]=e,t[j1]=i,m8(t,e,!1,!1),e.stateNode=t;e:{switch(o=a5(n,i),n){case"dialog":Gi("cancel",t),Gi("close",t),s=i;break;case"iframe":case"object":case"embed":Gi("load",t),s=i;break;case"video":case"audio":for(s=0;s<Bv.length;s++)Gi(Bv[s],t);s=i;break;case"source":Gi("error",t),s=i;break;case"img":case"image":case"link":Gi("error",t),Gi("load",t),s=i;break;case"details":Gi("toggle",t),s=i;break;case"input":WD(t,i),s=t5(t,i),Gi("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=fs({},i,{value:void 0}),Gi("invalid",t);break;case"textarea":HD(t,i),s=s5(t,i),Gi("invalid",t);break;default:s=i}o5(n,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?KB(t,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&GB(t,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&L1(t,l):typeof l=="number"&&L1(t,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(R1.hasOwnProperty(r)?l!=null&&r==="onScroll"&&Gi("scroll",t):l!=null&&XT(t,r,l,o))}switch(n){case"input":Mx(t),UD(t,i,!1);break;case"textarea":Mx(t),GD(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Yd(i.value));break;case"select":t.multiple=!!i.multiple,r=i.value,r!=null?Eg(t,!!i.multiple,r,!1):i.defaultValue!=null&&Eg(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Iw)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ro(e),null;case 6:if(t&&e.stateNode!=null)v8(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ct(166));if(n=xp(W1.current),xp(pu.current),Gx(e)){if(i=e.stateNode,n=e.memoizedProps,i[uu]=e,(r=i.nodeValue!==n)&&(t=Xa,t!==null))switch(t.tag){case 3:Hx(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hx(i.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[uu]=e,e.stateNode=i}return ro(e),null;case 13:if(Ki(us),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ns&&Ha!==null&&e.mode&1&&!(e.flags&128))$z(),Hg(),e.flags|=98560,r=!1;else if(r=Gx(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(ct(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(ct(317));r[uu]=e}else Hg(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ro(e),r=!1}else hc!==null&&(j5(hc),hc=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||us.current&1?dr===0&&(dr=3):RA())),e.updateQueue!==null&&(e.flags|=4),ro(e),null);case 4:return qg(),P5(t,e),t===null&&B1(e.stateNode.containerInfo),ro(e),null;case 10:return pA(e.type._context),ro(e),null;case 17:return Ca(e.type)&&Nw(),ro(e),null;case 19:if(Ki(us),r=e.memoizedState,r===null)return ro(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)fv(r,!1);else{if(dr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Dw(t),o!==null){for(e.flags|=128,fv(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)r=n,t=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ji(us,us.current&1|2),e.child}t=t.sibling}r.tail!==null&&Ls()>Xg&&(e.flags|=128,i=!0,fv(r,!1),e.lanes=4194304)}else{if(!i)if(t=Dw(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fv(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!ns)return ro(e),null}else 2*Ls()-r.renderingStartTime>Xg&&n!==1073741824&&(e.flags|=128,i=!0,fv(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Ls(),e.sibling=null,n=us.current,ji(us,i?n&1|2:n&1),e):(ro(e),null);case 22:case 23:return AA(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ja&1073741824&&(ro(e),e.subtreeFlags&6&&(e.flags|=8192)):ro(e),null;case 24:return null;case 25:return null}throw Error(ct(156,e.tag))}function _J(t,e){switch(uA(e),e.tag){case 1:return Ca(e.type)&&Nw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qg(),Ki(Sa),Ki(_o),bA(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yA(e),null;case 13:if(Ki(us),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ct(340));Hg()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ki(us),null;case 4:return qg(),null;case 10:return pA(e.type._context),null;case 22:case 23:return AA(),null;case 24:return null;default:return null}}var Xx=!1,go=!1,SJ=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Cg(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){bs(t,e,i)}else n.current=null}function D5(t,e,n){try{n()}catch(i){bs(t,e,i)}}var $$=!1;function CJ(t,e){if(v5=Sw,t=_z(),lA(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,d=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==r||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===t)break t;if(d===n&&++c===s&&(a=o),d===r&&++u===i&&(l=o),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(y5={focusedElem:t,selectionRange:n},Sw=!1,Lt=e;Lt!==null;)if(e=Lt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Lt=t;else for(;Lt!==null;){e=Lt;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:ac(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ct(163))}}catch(S){bs(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Lt=t;break}Lt=e.return}return m=$$,$$=!1,m}function l1(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,r!==void 0&&D5(e,n,r)}s=s.next}while(s!==i)}}function bS(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function $5(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function y8(t){var e=t.alternate;e!==null&&(t.alternate=null,y8(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[uu],delete e[j1],delete e[w5],delete e[oJ],delete e[aJ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function b8(t){return t.tag===5||t.tag===3||t.tag===4}function O$(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||b8(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function O5(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Iw));else if(i!==4&&(t=t.child,t!==null))for(O5(t,e,n),t=t.sibling;t!==null;)O5(t,e,n),t=t.sibling}function M5(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(M5(t,e,n),t=t.sibling;t!==null;)M5(t,e,n),t=t.sibling}var zr=null,cc=!1;function rd(t,e,n){for(n=n.child;n!==null;)x8(t,e,n),n=n.sibling}function x8(t,e,n){if(fu&&typeof fu.onCommitFiberUnmount=="function")try{fu.onCommitFiberUnmount(hS,n)}catch{}switch(n.tag){case 5:go||Cg(n,e);case 6:var i=zr,s=cc;zr=null,rd(t,e,n),zr=i,cc=s,zr!==null&&(cc?(t=zr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zr.removeChild(n.stateNode));break;case 18:zr!==null&&(cc?(t=zr,n=n.stateNode,t.nodeType===8?II(t.parentNode,n):t.nodeType===1&&II(t,n),O1(t)):II(zr,n.stateNode));break;case 4:i=zr,s=cc,zr=n.stateNode.containerInfo,cc=!0,rd(t,e,n),zr=i,cc=s;break;case 0:case 11:case 14:case 15:if(!go&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&D5(n,e,o),s=s.next}while(s!==i)}rd(t,e,n);break;case 1:if(!go&&(Cg(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){bs(n,e,a)}rd(t,e,n);break;case 21:rd(t,e,n);break;case 22:n.mode&1?(go=(i=go)||n.memoizedState!==null,rd(t,e,n),go=i):rd(t,e,n);break;default:rd(t,e,n)}}function M$(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SJ),e.forEach(function(i){var s=PJ.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function nc(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:zr=a.stateNode,cc=!1;break e;case 3:zr=a.stateNode.containerInfo,cc=!0;break e;case 4:zr=a.stateNode.containerInfo,cc=!0;break e}a=a.return}if(zr===null)throw Error(ct(160));x8(r,o,s),zr=null,cc=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){bs(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)w8(e,t),e=e.sibling}function w8(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nc(e,t),Zc(t),i&4){try{l1(3,t,t.return),bS(3,t)}catch(g){bs(t,t.return,g)}try{l1(5,t,t.return)}catch(g){bs(t,t.return,g)}}break;case 1:nc(e,t),Zc(t),i&512&&n!==null&&Cg(n,n.return);break;case 5:if(nc(e,t),Zc(t),i&512&&n!==null&&Cg(n,n.return),t.flags&32){var s=t.stateNode;try{L1(s,"")}catch(g){bs(t,t.return,g)}}if(i&4&&(s=t.stateNode,s!=null)){var r=t.memoizedProps,o=n!==null?n.memoizedProps:r,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&WB(s,r),a5(a,o);var c=a5(a,r);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?KB(s,h):u==="dangerouslySetInnerHTML"?GB(s,h):u==="children"?L1(s,h):XT(s,u,h,c)}switch(a){case"input":n5(s,r);break;case"textarea":UB(s,r);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?Eg(s,!!r.multiple,p,!1):d!==!!r.multiple&&(r.defaultValue!=null?Eg(s,!!r.multiple,r.defaultValue,!0):Eg(s,!!r.multiple,r.multiple?[]:"",!1))}s[j1]=r}catch(g){bs(t,t.return,g)}}break;case 6:if(nc(e,t),Zc(t),i&4){if(t.stateNode===null)throw Error(ct(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(g){bs(t,t.return,g)}}break;case 3:if(nc(e,t),Zc(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{O1(e.containerInfo)}catch(g){bs(t,t.return,g)}break;case 4:nc(e,t),Zc(t);break;case 13:nc(e,t),Zc(t),s=t.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(EA=Ls())),i&4&&M$(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(go=(c=go)||u,nc(e,t),go=c):nc(e,t),Zc(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Lt=t,u=t.child;u!==null;){for(h=Lt=u;Lt!==null;){switch(d=Lt,p=d.child,d.tag){case 0:case 11:case 14:case 15:l1(4,d,d.return);break;case 1:Cg(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){bs(i,n,g)}}break;case 5:Cg(d,d.return);break;case 22:if(d.memoizedState!==null){B$(h);continue}}p!==null?(p.return=d,Lt=p):B$(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=qB("display",o))}catch(g){bs(t,t.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){bs(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:nc(e,t),Zc(t),i&4&&M$(t);break;case 21:break;default:nc(e,t),Zc(t)}}function Zc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(b8(n)){var i=n;break e}n=n.return}throw Error(ct(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(L1(s,""),i.flags&=-33);var r=O$(t);M5(t,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=O$(t);O5(t,a,o);break;default:throw Error(ct(161))}}catch(l){bs(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kJ(t,e,n){Lt=t,_8(t)}function _8(t,e,n){for(var i=(t.mode&1)!==0;Lt!==null;){var s=Lt,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Xx;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||go;a=Xx;var c=go;if(Xx=o,(go=l)&&!c)for(Lt=s;Lt!==null;)o=Lt,l=o.child,o.tag===22&&o.memoizedState!==null?z$(s):l!==null?(l.return=o,Lt=l):z$(s);for(;r!==null;)Lt=r,_8(r),r=r.sibling;Lt=s,Xx=a,go=c}F$(t)}else s.subtreeFlags&8772&&r!==null?(r.return=s,Lt=r):F$(t)}}function F$(t){for(;Lt!==null;){var e=Lt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:go||bS(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!go)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ac(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&_$(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_$(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&O1(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ct(163))}go||e.flags&512&&$5(e)}catch(d){bs(e,e.return,d)}}if(e===t){Lt=null;break}if(n=e.sibling,n!==null){n.return=e.return,Lt=n;break}Lt=e.return}}function B$(t){for(;Lt!==null;){var e=Lt;if(e===t){Lt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Lt=n;break}Lt=e.return}}function z$(t){for(;Lt!==null;){var e=Lt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bS(4,e)}catch(l){bs(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){bs(e,s,l)}}var r=e.return;try{$5(e)}catch(l){bs(e,r,l)}break;case 5:var o=e.return;try{$5(e)}catch(l){bs(e,o,l)}}}catch(l){bs(e,e.return,l)}if(e===t){Lt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Lt=a;break}Lt=e.return}}var IJ=Math.ceil,Mw=Ah.ReactCurrentDispatcher,IA=Ah.ReactCurrentOwner,Al=Ah.ReactCurrentBatchConfig,Jn=0,Tr=null,Gs=null,Wr=0,ja=0,kg=pf(0),dr=0,q1=null,Up=0,xS=0,NA=0,c1=null,va=null,EA=0,Xg=1/0,Xu=null,Fw=!1,F5=null,$d=null,Yx=!1,bd=null,Bw=0,u1=0,B5=null,Q2=-1,J2=0;function Ko(){return Jn&6?Ls():Q2!==-1?Q2:Q2=Ls()}function Od(t){return t.mode&1?Jn&2&&Wr!==0?Wr&-Wr:cJ.transition!==null?(J2===0&&(J2=oz()),J2):(t=wi,t!==0||(t=window.event,t=t===void 0?16:fz(t.type)),t):1}function wc(t,e,n,i){if(50<u1)throw u1=0,B5=null,Error(ct(185));$y(t,n,i),(!(Jn&2)||t!==Tr)&&(t===Tr&&(!(Jn&2)&&(xS|=n),dr===4&&gd(t,Wr)),ka(t,i),n===1&&Jn===0&&!(e.mode&1)&&(Xg=Ls()+500,gS&&mf()))}function ka(t,e){var n=t.callbackNode;cQ(t,e);var i=_w(t,t===Tr?Wr:0);if(i===0)n!==null&&XD(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&XD(n),e===1)t.tag===0?lJ(j$.bind(null,t)):Lz(j$.bind(null,t)),sJ(function(){!(Jn&6)&&mf()}),n=null;else{switch(az(i)){case 1:n=eA;break;case 4:n=sz;break;case 16:n=ww;break;case 536870912:n=rz;break;default:n=ww}n=A8(n,S8.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function S8(t,e){if(Q2=-1,J2=0,Jn&6)throw Error(ct(327));var n=t.callbackNode;if(Pg()&&t.callbackNode!==n)return null;var i=_w(t,t===Tr?Wr:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=zw(t,i);else{e=i;var s=Jn;Jn|=2;var r=k8();(Tr!==t||Wr!==e)&&(Xu=null,Xg=Ls()+500,Tp(t,e));do try{TJ();break}catch(a){C8(t,a)}while(!0);fA(),Mw.current=r,Jn=s,Gs!==null?e=0:(Tr=null,Wr=0,e=dr)}if(e!==0){if(e===2&&(s=d5(t),s!==0&&(i=s,e=z5(t,s))),e===1)throw n=q1,Tp(t,0),gd(t,i),ka(t,Ls()),n;if(e===6)gd(t,i);else{if(s=t.current.alternate,!(i&30)&&!NJ(s)&&(e=zw(t,i),e===2&&(r=d5(t),r!==0&&(i=r,e=z5(t,r))),e===1))throw n=q1,Tp(t,0),gd(t,i),ka(t,Ls()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(ct(345));case 2:rp(t,va,Xu);break;case 3:if(gd(t,i),(i&130023424)===i&&(e=EA+500-Ls(),10<e)){if(_w(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Ko(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=x5(rp.bind(null,t,va,Xu),e);break}rp(t,va,Xu);break;case 4:if(gd(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-xc(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=Ls()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*IJ(i/1960))-i,10<i){t.timeoutHandle=x5(rp.bind(null,t,va,Xu),i);break}rp(t,va,Xu);break;case 5:rp(t,va,Xu);break;default:throw Error(ct(329))}}}return ka(t,Ls()),t.callbackNode===n?S8.bind(null,t):null}function z5(t,e){var n=c1;return t.current.memoizedState.isDehydrated&&(Tp(t,e).flags|=256),t=zw(t,e),t!==2&&(e=va,va=n,e!==null&&j5(e)),t}function j5(t){va===null?va=t:va.push.apply(va,t)}function NJ(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!Ic(r(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gd(t,e){for(e&=~NA,e&=~xS,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xc(e),i=1<<n;t[n]=-1,e&=~i}}function j$(t){if(Jn&6)throw Error(ct(327));Pg();var e=_w(t,0);if(!(e&1))return ka(t,Ls()),null;var n=zw(t,e);if(t.tag!==0&&n===2){var i=d5(t);i!==0&&(e=i,n=z5(t,i))}if(n===1)throw n=q1,Tp(t,0),gd(t,e),ka(t,Ls()),n;if(n===6)throw Error(ct(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rp(t,va,Xu),ka(t,Ls()),null}function TA(t,e){var n=Jn;Jn|=1;try{return t(e)}finally{Jn=n,Jn===0&&(Xg=Ls()+500,gS&&mf())}}function Hp(t){bd!==null&&bd.tag===0&&!(Jn&6)&&Pg();var e=Jn;Jn|=1;var n=Al.transition,i=wi;try{if(Al.transition=null,wi=1,t)return t()}finally{wi=i,Al.transition=n,Jn=e,!(Jn&6)&&mf()}}function AA(){ja=kg.current,Ki(kg)}function Tp(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iJ(n)),Gs!==null)for(n=Gs.return;n!==null;){var i=n;switch(uA(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Nw();break;case 3:qg(),Ki(Sa),Ki(_o),bA();break;case 5:yA(i);break;case 4:qg();break;case 13:Ki(us);break;case 19:Ki(us);break;case 10:pA(i.type._context);break;case 22:case 23:AA()}n=n.return}if(Tr=t,Gs=t=Md(t.current,null),Wr=ja=e,dr=0,q1=null,NA=xS=Up=0,va=c1=null,bp!==null){for(e=0;e<bp.length;e++)if(n=bp[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}n.pending=i}bp=null}return t}function C8(t,e){do{var n=Gs;try{if(fA(),X2.current=Ow,$w){for(var i=ds.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}$w=!1}if(Wp=0,kr=rr=ds=null,a1=!1,U1=0,IA.current=null,n===null||n.return===null){dr=1,q1=e,Gs=null;break}e:{var r=t,o=n.return,a=n,l=e;if(e=Wr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=E$(o);if(p!==null){p.flags&=-257,T$(p,o,a,r,e),p.mode&1&&N$(r,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){N$(r,c,e),RA();break e}l=Error(ct(426))}}else if(ns&&a.mode&1){var y=E$(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),T$(y,o,a,r,e),hA(Kg(l,a));break e}}r=l=Kg(l,a),dr!==4&&(dr=2),c1===null?c1=[r]:c1.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var v=a8(r,l,e);w$(r,v);break e;case 1:a=l;var b=r.type,w=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&($d===null||!$d.has(w)))){r.flags|=65536,e&=-e,r.lanes|=e;var S=l8(r,a,e);w$(r,S);break e}}r=r.return}while(r!==null)}N8(n)}catch(k){e=k,Gs===n&&n!==null&&(Gs=n=n.return);continue}break}while(!0)}function k8(){var t=Mw.current;return Mw.current=Ow,t===null?Ow:t}function RA(){(dr===0||dr===3||dr===2)&&(dr=4),Tr===null||!(Up&268435455)&&!(xS&268435455)||gd(Tr,Wr)}function zw(t,e){var n=Jn;Jn|=2;var i=k8();(Tr!==t||Wr!==e)&&(Xu=null,Tp(t,e));do try{EJ();break}catch(s){C8(t,s)}while(!0);if(fA(),Jn=n,Mw.current=i,Gs!==null)throw Error(ct(261));return Tr=null,Wr=0,dr}function EJ(){for(;Gs!==null;)I8(Gs)}function TJ(){for(;Gs!==null&&!eQ();)I8(Gs)}function I8(t){var e=T8(t.alternate,t,ja);t.memoizedProps=t.pendingProps,e===null?N8(t):Gs=e,IA.current=null}function N8(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_J(n,e),n!==null){n.flags&=32767,Gs=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dr=6,Gs=null;return}}else if(n=wJ(n,e,ja),n!==null){Gs=n;return}if(e=e.sibling,e!==null){Gs=e;return}Gs=e=t}while(e!==null);dr===0&&(dr=5)}function rp(t,e,n){var i=wi,s=Al.transition;try{Al.transition=null,wi=1,AJ(t,e,n,i)}finally{Al.transition=s,wi=i}return null}function AJ(t,e,n,i){do Pg();while(bd!==null);if(Jn&6)throw Error(ct(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ct(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(uQ(t,r),t===Tr&&(Gs=Tr=null,Wr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yx||(Yx=!0,A8(ww,function(){return Pg(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=Al.transition,Al.transition=null;var o=wi;wi=1;var a=Jn;Jn|=4,IA.current=null,CJ(t,n),w8(n,t),YQ(y5),Sw=!!v5,y5=v5=null,t.current=n,kJ(n),tQ(),Jn=a,wi=o,Al.transition=r}else t.current=n;if(Yx&&(Yx=!1,bd=t,Bw=s),r=t.pendingLanes,r===0&&($d=null),sQ(n.stateNode),ka(t,Ls()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Fw)throw Fw=!1,t=F5,F5=null,t;return Bw&1&&t.tag!==0&&Pg(),r=t.pendingLanes,r&1?t===B5?u1++:(u1=0,B5=t):u1=0,mf(),null}function Pg(){if(bd!==null){var t=az(Bw),e=Al.transition,n=wi;try{if(Al.transition=null,wi=16>t?16:t,bd===null)var i=!1;else{if(t=bd,bd=null,Bw=0,Jn&6)throw Error(ct(331));var s=Jn;for(Jn|=4,Lt=t.current;Lt!==null;){var r=Lt,o=r.child;if(Lt.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Lt=c;Lt!==null;){var u=Lt;switch(u.tag){case 0:case 11:case 15:l1(8,u,r)}var h=u.child;if(h!==null)h.return=u,Lt=h;else for(;Lt!==null;){u=Lt;var d=u.sibling,p=u.return;if(y8(u),u===c){Lt=null;break}if(d!==null){d.return=p,Lt=d;break}Lt=p}}}var m=r.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Lt=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,Lt=o;else e:for(;Lt!==null;){if(r=Lt,r.flags&2048)switch(r.tag){case 0:case 11:case 15:l1(9,r,r.return)}var v=r.sibling;if(v!==null){v.return=r.return,Lt=v;break e}Lt=r.return}}var b=t.current;for(Lt=b;Lt!==null;){o=Lt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Lt=w;else e:for(o=b;Lt!==null;){if(a=Lt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bS(9,a)}}catch(k){bs(a,a.return,k)}if(a===o){Lt=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Lt=S;break e}Lt=a.return}}if(Jn=s,mf(),fu&&typeof fu.onPostCommitFiberRoot=="function")try{fu.onPostCommitFiberRoot(hS,t)}catch{}i=!0}return i}finally{wi=n,Al.transition=e}}return!1}function V$(t,e,n){e=Kg(n,e),e=a8(t,e,1),t=Dd(t,e,1),e=Ko(),t!==null&&($y(t,1,e),ka(t,e))}function bs(t,e,n){if(t.tag===3)V$(t,t,n);else for(;e!==null;){if(e.tag===3){V$(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&($d===null||!$d.has(i))){t=Kg(n,t),t=l8(e,t,1),e=Dd(e,t,1),t=Ko(),e!==null&&($y(e,1,t),ka(e,t));break}}e=e.return}}function RJ(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ko(),t.pingedLanes|=t.suspendedLanes&n,Tr===t&&(Wr&n)===n&&(dr===4||dr===3&&(Wr&130023424)===Wr&&500>Ls()-EA?Tp(t,0):NA|=n),ka(t,e)}function E8(t,e){e===0&&(t.mode&1?(e=zx,zx<<=1,!(zx&130023424)&&(zx=4194304)):e=1);var n=Ko();t=bh(t,e),t!==null&&($y(t,e,n),ka(t,n))}function LJ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),E8(t,n)}function PJ(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ct(314))}i!==null&&i.delete(e),E8(t,n)}var T8;T8=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Sa.current)xa=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xa=!1,xJ(t,e,n);xa=!!(t.flags&131072)}else xa=!1,ns&&e.flags&1048576&&Pz(e,Aw,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Z2(t,e),t=e.pendingProps;var s=Ug(e,_o.current);Lg(e,n),s=wA(null,e,i,t,s,n);var r=_A();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ca(i)?(r=!0,Ew(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gA(e),s.updater=yS,e.stateNode=s,s._reactInternals=e,N5(e,i,t,n),e=A5(null,e,i,!0,r,n)):(e.tag=0,ns&&r&&cA(e),Fo(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Z2(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=$J(i),t=ac(i,t),s){case 0:e=T5(null,e,i,t,n);break e;case 1:e=L$(null,e,i,t,n);break e;case 11:e=A$(null,e,i,t,n);break e;case 14:e=R$(null,e,i,ac(i.type,t),n);break e}throw Error(ct(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ac(i,s),T5(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ac(i,s),L$(t,e,i,s,n);case 3:e:{if(d8(e),t===null)throw Error(ct(387));i=e.pendingProps,r=e.memoizedState,s=r.element,Bz(t,e),Pw(e,i,null,n);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Kg(Error(ct(423)),e),e=P$(t,e,i,n,s);break e}else if(i!==s){s=Kg(Error(ct(424)),e),e=P$(t,e,i,n,s);break e}else for(Ha=Pd(e.stateNode.containerInfo.firstChild),Xa=e,ns=!0,hc=null,n=Mz(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hg(),i===s){e=xh(t,e,n);break e}Fo(t,e,i,n)}e=e.child}return e;case 5:return zz(e),t===null&&C5(e),i=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,o=s.children,b5(i,s)?o=null:r!==null&&b5(i,r)&&(e.flags|=32),h8(t,e),Fo(t,e,o,n),e.child;case 6:return t===null&&C5(e),null;case 13:return f8(t,e,n);case 4:return vA(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Gg(e,null,i,n):Fo(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ac(i,s),A$(t,e,i,s,n);case 7:return Fo(t,e,e.pendingProps,n),e.child;case 8:return Fo(t,e,e.pendingProps.children,n),e.child;case 12:return Fo(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,ji(Rw,i._currentValue),i._currentValue=o,r!==null)if(Ic(r.value,o)){if(r.children===s.children&&!Sa.current){e=xh(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=uh(-1,n&-n),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),k5(r.return,n,e),a.lanes|=n;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(ct(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),k5(o,n,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Fo(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Lg(e,n),s=Pl(s),i=i(s),e.flags|=1,Fo(t,e,i,n),e.child;case 14:return i=e.type,s=ac(i,e.pendingProps),s=ac(i.type,s),R$(t,e,i,s,n);case 15:return c8(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ac(i,s),Z2(t,e),e.tag=1,Ca(i)?(t=!0,Ew(e)):t=!1,Lg(e,n),o8(e,i,s),N5(e,i,s,n),A5(null,e,i,!0,t,n);case 19:return p8(t,e,n);case 22:return u8(t,e,n)}throw Error(ct(156,e.tag))};function A8(t,e){return iz(t,e)}function DJ(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sl(t,e,n,i){return new DJ(t,e,n,i)}function LA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $J(t){if(typeof t=="function")return LA(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ZT)return 11;if(t===QT)return 14}return 2}function Md(t,e){var n=t.alternate;return n===null?(n=Sl(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ew(t,e,n,i,s,r){var o=2;if(i=t,typeof t=="function")LA(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case mg:return Ap(n.children,s,r,e);case YT:o=8,s|=8;break;case ZN:return t=Sl(12,n,e,s|2),t.elementType=ZN,t.lanes=r,t;case QN:return t=Sl(13,n,e,s),t.elementType=QN,t.lanes=r,t;case JN:return t=Sl(19,n,e,s),t.elementType=JN,t.lanes=r,t;case zB:return wS(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case FB:o=10;break e;case BB:o=9;break e;case ZT:o=11;break e;case QT:o=14;break e;case ud:o=16,i=null;break e}throw Error(ct(130,t==null?t:typeof t,""))}return e=Sl(o,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function Ap(t,e,n,i){return t=Sl(7,t,i,e),t.lanes=n,t}function wS(t,e,n,i){return t=Sl(22,t,i,e),t.elementType=zB,t.lanes=n,t.stateNode={isHidden:!1},t}function DI(t,e,n){return t=Sl(6,t,null,e),t.lanes=n,t}function $I(t,e,n){return e=Sl(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OJ(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mI(0),this.expirationTimes=mI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mI(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function PA(t,e,n,i,s,r,o,a,l){return t=new OJ(t,e,n,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Sl(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gA(r),t}function MJ(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pg,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function R8(t){if(!t)return Zd;t=t._reactInternals;e:{if(pm(t)!==t||t.tag!==1)throw Error(ct(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ca(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ct(171))}if(t.tag===1){var n=t.type;if(Ca(n))return Rz(t,n,e)}return e}function L8(t,e,n,i,s,r,o,a,l){return t=PA(n,i,!0,t,s,r,o,a,l),t.context=R8(null),n=t.current,i=Ko(),s=Od(n),r=uh(i,s),r.callback=e??null,Dd(n,r,s),t.current.lanes=s,$y(t,s,i),ka(t,i),t}function _S(t,e,n,i){var s=e.current,r=Ko(),o=Od(s);return n=R8(n),e.context===null?e.context=n:e.pendingContext=n,e=uh(r,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Dd(s,e,o),t!==null&&(wc(t,s,o,r),K2(t,s,o)),o}function jw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function W$(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function DA(t,e){W$(t,e),(t=t.alternate)&&W$(t,e)}function FJ(){return null}var P8=typeof reportError=="function"?reportError:function(t){console.error(t)};function $A(t){this._internalRoot=t}SS.prototype.render=$A.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ct(409));_S(t,e,null,null)};SS.prototype.unmount=$A.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hp(function(){_S(null,t,null,null)}),e[yh]=null}};function SS(t){this._internalRoot=t}SS.prototype.unstable_scheduleHydration=function(t){if(t){var e=uz();t={blockedOn:null,target:t,priority:e};for(var n=0;n<md.length&&e!==0&&e<md[n].priority;n++);md.splice(n,0,t),n===0&&dz(t)}};function OA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function CS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function U$(){}function BJ(t,e,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=jw(o);r.call(c)}}var o=L8(e,i,t,0,null,!1,!1,"",U$);return t._reactRootContainer=o,t[yh]=o.current,B1(t.nodeType===8?t.parentNode:t),Hp(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=jw(l);a.call(c)}}var l=PA(t,0,!1,null,null,!1,!1,"",U$);return t._reactRootContainer=l,t[yh]=l.current,B1(t.nodeType===8?t.parentNode:t),Hp(function(){_S(e,l,n,i)}),l}function kS(t,e,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=jw(o);a.call(l)}}_S(e,o,t,s)}else o=BJ(n,e,t,s,i);return jw(o)}lz=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fv(e.pendingLanes);n!==0&&(tA(e,n|1),ka(e,Ls()),!(Jn&6)&&(Xg=Ls()+500,mf()))}break;case 13:Hp(function(){var i=bh(t,1);if(i!==null){var s=Ko();wc(i,t,1,s)}}),DA(t,1)}};nA=function(t){if(t.tag===13){var e=bh(t,134217728);if(e!==null){var n=Ko();wc(e,t,134217728,n)}DA(t,134217728)}};cz=function(t){if(t.tag===13){var e=Od(t),n=bh(t,e);if(n!==null){var i=Ko();wc(n,t,e,i)}DA(t,e)}};uz=function(){return wi};hz=function(t,e){var n=wi;try{return wi=t,e()}finally{wi=n}};c5=function(t,e,n){switch(e){case"input":if(n5(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=mS(i);if(!s)throw Error(ct(90));VB(i),n5(i,s)}}}break;case"textarea":UB(t,n);break;case"select":e=n.value,e!=null&&Eg(t,!!n.multiple,e,!1)}};ZB=TA;QB=Hp;var zJ={usingClientEntryPoint:!1,Events:[My,bg,mS,XB,YB,TA]},pv={findFiberByHostInstance:yp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jJ={bundleType:pv.bundleType,version:pv.version,rendererPackageName:pv.rendererPackageName,rendererConfig:pv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ah.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tz(t),t===null?null:t.stateNode},findFiberByHostInstance:pv.findFiberByHostInstance||FJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zx.isDisabled&&Zx.supportsFiber)try{hS=Zx.inject(jJ),fu=Zx}catch{}}el.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zJ;el.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!OA(e))throw Error(ct(200));return MJ(t,e,null,n)};el.createRoot=function(t,e){if(!OA(t))throw Error(ct(299));var n=!1,i="",s=P8;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=PA(t,1,!1,null,null,n,!1,i,s),t[yh]=e.current,B1(t.nodeType===8?t.parentNode:t),new $A(e)};el.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ct(188)):(t=Object.keys(t).join(","),Error(ct(268,t)));return t=tz(e),t=t===null?null:t.stateNode,t};el.flushSync=function(t){return Hp(t)};el.hydrate=function(t,e,n){if(!CS(e))throw Error(ct(200));return kS(null,t,e,!0,n)};el.hydrateRoot=function(t,e,n){if(!OA(t))throw Error(ct(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",o=P8;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=L8(e,null,t,1,n??null,s,!1,r,o),t[yh]=e.current,B1(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new SS(e)};el.render=function(t,e,n){if(!CS(e))throw Error(ct(200));return kS(null,t,e,!1,n)};el.unmountComponentAtNode=function(t){if(!CS(t))throw Error(ct(40));return t._reactRootContainer?(Hp(function(){kS(null,null,t,!1,function(){t._reactRootContainer=null,t[yh]=null})}),!0):!1};el.unstable_batchedUpdates=TA;el.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!CS(n))throw Error(ct(200));if(t==null||t._reactInternals===void 0)throw Error(ct(38));return kS(t,e,n,!1,i)};el.version="18.3.1-next-f1338f8080-20240426";function D8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D8)}catch(t){console.error(t)}}D8(),DB.exports=el;var IS=DB.exports;const wp=Py(IS),VJ=VT({__proto__:null,default:wp},[IS]);var $8,H$=IS;$8=H$.createRoot,H$.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ts(){return ts=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ts.apply(this,arguments)}var Ws;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ws||(Ws={}));const G$="popstate";function WJ(t){t===void 0&&(t={});function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return K1("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:Gp(s)}return HJ(e,n,null,t)}function Rn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function UJ(){return Math.random().toString(36).substr(2,8)}function q$(t,e){return{usr:t.state,key:t.key,idx:e}}function K1(t,e,n,i){return n===void 0&&(n=null),ts({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?gf(e):e,{state:n,key:e&&e.key||i||UJ()})}function Gp(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function gf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function HJ(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a=Ws.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(ts({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Ws.Pop;let y=u(),v=y==null?null:y-c;c=y,l&&l({action:a,location:g.location,delta:v})}function d(y,v){a=Ws.Push;let b=K1(g.location,y,v);c=u()+1;let w=q$(b,c),S=g.createHref(b);try{o.pushState(w,"",S)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(S)}r&&l&&l({action:a,location:g.location,delta:1})}function p(y,v){a=Ws.Replace;let b=K1(g.location,y,v);c=u();let w=q$(b,c),S=g.createHref(b);o.replaceState(w,"",S),r&&l&&l({action:a,location:g.location,delta:0})}function m(y){let v=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof y=="string"?y:Gp(y);return b=b.replace(/ $/,"%20"),Rn(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(G$,h),l=y,()=>{s.removeEventListener(G$,h),l=null}},createHref(y){return e(s,y)},createURL:m,encodeLocation(y){let v=m(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:p,go(y){return o.go(y)}};return g}var Ni;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ni||(Ni={}));const GJ=new Set(["lazy","caseSensitive","path","id","index","children"]);function qJ(t){return t.index===!0}function Vw(t,e,n,i){return n===void 0&&(n=[]),i===void 0&&(i={}),t.map((s,r)=>{let o=[...n,String(r)],a=typeof s.id=="string"?s.id:o.join("-");if(Rn(s.index!==!0||!s.children,"Cannot specify children on an index route"),Rn(!i[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),qJ(s)){let l=ts({},s,e(s),{id:a});return i[a]=l,l}else{let l=ts({},s,e(s),{id:a,children:void 0});return i[a]=l,s.children&&(l.children=Vw(s.children,e,o,i)),l}})}function fp(t,e,n){return n===void 0&&(n="/"),tw(t,e,n,!1)}function tw(t,e,n,i){let s=typeof e=="string"?gf(e):e,r=wh(s.pathname||"/",n);if(r==null)return null;let o=O8(t);XJ(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=oee(r);a=see(o[l],c,i)}return a}function KJ(t,e){let{route:n,pathname:i,params:s}=t;return{id:n.id,pathname:i,params:s,data:e[n.id],handle:n.handle}}function O8(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(Rn(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=hh([i,l.relativePath]),u=n.concat(l);r.children&&r.children.length>0&&(Rn(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),O8(r.children,e,u,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:nee(c,r.index),routesMeta:u})};return t.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of M8(r.path))s(r,o,l)}),e}function M8(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=M8(i.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function XJ(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iee(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const YJ=/^:[\w-]+$/,ZJ=3,QJ=2,JJ=1,eee=10,tee=-2,K$=t=>t==="*";function nee(t,e){let n=t.split("/"),i=n.length;return n.some(K$)&&(i+=tee),e&&(i+=QJ),n.filter(s=>!K$(s)).reduce((s,r)=>s+(YJ.test(r)?ZJ:r===""?JJ:eee),i)}function iee(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function see(t,e,n){n===void 0&&(n=!1);let{routesMeta:i}=t,s={},r="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=r==="/"?e:e.slice(r.length)||"/",h=Ww({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!h&&c&&n&&!i[i.length-1].route.index&&(h=Ww({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:hh([r,h.pathname]),pathnameBase:cee(hh([r,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(r=hh([r,h.pathnameBase]))}return o}function Ww(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=ree(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((c,u,h)=>{let{paramName:d,isOptional:p}=u;if(d==="*"){let g=a[h]||"";o=r.slice(0,r.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?c[d]=void 0:c[d]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:t}}function ree(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Yg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function oee(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function wh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function aee(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?gf(t):t;return{pathname:n?n.startsWith("/")?n:lee(n,e):e,search:uee(i),hash:hee(s)}}function lee(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function OI(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function F8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function MA(t,e){let n=F8(t);return e?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function FA(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=gf(t):(s=ts({},t),Rn(!s.pathname||!s.pathname.includes("?"),OI("?","pathname","search",s)),Rn(!s.pathname||!s.pathname.includes("#"),OI("#","pathname","hash",s)),Rn(!s.search||!s.search.includes("#"),OI("#","search","hash",s)));let r=t===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!i&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;s.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=aee(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(r||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const hh=t=>t.join("/").replace(/\/\/+/g,"/"),cee=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uee=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hee=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Uw{constructor(e,n,i,s){s===void 0&&(s=!1),this.status=e,this.statusText=n||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function NS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const B8=["post","put","patch","delete"],dee=new Set(B8),fee=["get",...B8],pee=new Set(fee),mee=new Set([301,302,303,307,308]),gee=new Set([307,308]),MI={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},vee={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},mv={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},BA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yee=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),z8="remix-router-transitions";function bee(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!n;Rn(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let ge=t.detectErrorBoundary;s=Ee=>({hasErrorBoundary:ge(Ee)})}else s=yee;let r={},o=Vw(t.routes,s,void 0,r),a,l=t.basename||"/",c=t.dataStrategy||See,u=t.patchRoutesOnNavigation,h=ts({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),d=null,p=new Set,m=null,g=null,y=null,v=t.hydrationData!=null,b=fp(o,t.history.location,l),w=null;if(b==null&&!u){let ge=ga(404,{pathname:t.history.location.pathname}),{matches:Ee,route:Be}=rO(o);b=Ee,w={[Be.id]:ge}}b&&!t.hydrationData&&ia(b,o,t.history.location.pathname).active&&(b=null);let S;if(b)if(b.some(ge=>ge.route.lazy))S=!1;else if(!b.some(ge=>ge.route.loader))S=!0;else if(h.v7_partialHydration){let ge=t.hydrationData?t.hydrationData.loaderData:null,Ee=t.hydrationData?t.hydrationData.errors:null;if(Ee){let Be=b.findIndex(Ke=>Ee[Ke.route.id]!==void 0);S=b.slice(0,Be+1).every(Ke=>!W5(Ke.route,ge,Ee))}else S=b.every(Be=>!W5(Be.route,ge,Ee))}else S=t.hydrationData!=null;else if(S=!1,b=[],h.v7_partialHydration){let ge=ia(null,o,t.history.location.pathname);ge.active&&ge.matches&&(b=ge.matches)}let k,I={historyAction:t.history.action,location:t.history.location,matches:b,initialized:S,navigation:MI,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||w,fetchers:new Map,blockers:new Map},T=Ws.Pop,E=!1,O,F=!1,R=new Map,$=null,U=!1,W=!1,te=[],H=new Set,G=new Map,B=0,Y=-1,ne=new Map,le=new Set,M=new Map,j=new Map,q=new Set,X=new Map,Z=new Map,ue;function fe(){if(d=t.history.listen(ge=>{let{action:Ee,location:Be,delta:Ke}=ge;if(ue){ue(),ue=void 0;return}Yg(Z.size===0||Ke!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let lt=rl({currentLocation:I.location,nextLocation:Be,historyAction:Ee});if(lt&&Ke!=null){let Ge=new Promise(Mt=>{ue=Mt});t.history.go(Ke*-1),$n(lt,{state:"blocked",location:Be,proceed(){$n(lt,{state:"proceeding",proceed:void 0,reset:void 0,location:Be}),Ge.then(()=>t.history.go(Ke))},reset(){let Mt=new Map(I.blockers);Mt.set(lt,mv),Ne({blockers:Mt})}});return}return xe(Ee,Be)}),n){Mee(e,R);let ge=()=>Fee(e,R);e.addEventListener("pagehide",ge),$=()=>e.removeEventListener("pagehide",ge)}return I.initialized||xe(Ws.Pop,I.location,{initialHydration:!0}),k}function me(){d&&d(),$&&$(),p.clear(),O&&O.abort(),I.fetchers.forEach((ge,Ee)=>nn(Ee)),I.blockers.forEach((ge,Ee)=>Js(Ee))}function Pe(ge){return p.add(ge),()=>p.delete(ge)}function Ne(ge,Ee){Ee===void 0&&(Ee={}),I=ts({},I,ge);let Be=[],Ke=[];h.v7_fetcherPersist&&I.fetchers.forEach((lt,Ge)=>{lt.state==="idle"&&(q.has(Ge)?Ke.push(Ge):Be.push(Ge))}),[...p].forEach(lt=>lt(I,{deletedFetchers:Ke,viewTransitionOpts:Ee.viewTransitionOpts,flushSync:Ee.flushSync===!0})),h.v7_fetcherPersist&&(Be.forEach(lt=>I.fetchers.delete(lt)),Ke.forEach(lt=>nn(lt)))}function Fe(ge,Ee,Be){var Ke,lt;let{flushSync:Ge}=Be===void 0?{}:Be,Mt=I.actionData!=null&&I.navigation.formMethod!=null&&uc(I.navigation.formMethod)&&I.navigation.state==="loading"&&((Ke=ge.state)==null?void 0:Ke._isRedirect)!==!0,Nt;Ee.actionData?Object.keys(Ee.actionData).length>0?Nt=Ee.actionData:Nt=null:Mt?Nt=I.actionData:Nt=null;let St=Ee.loaderData?iO(I.loaderData,Ee.loaderData,Ee.matches||[],Ee.errors):I.loaderData,vt=I.blockers;vt.size>0&&(vt=new Map(vt),vt.forEach((Qt,Xn)=>vt.set(Xn,mv)));let Et=E===!0||I.navigation.formMethod!=null&&uc(I.navigation.formMethod)&&((lt=ge.state)==null?void 0:lt._isRedirect)!==!0;a&&(o=a,a=void 0),U||T===Ws.Pop||(T===Ws.Push?t.history.push(ge,ge.state):T===Ws.Replace&&t.history.replace(ge,ge.state));let Zt;if(T===Ws.Pop){let Qt=R.get(I.location.pathname);Qt&&Qt.has(ge.pathname)?Zt={currentLocation:I.location,nextLocation:ge}:R.has(ge.pathname)&&(Zt={currentLocation:ge,nextLocation:I.location})}else if(F){let Qt=R.get(I.location.pathname);Qt?Qt.add(ge.pathname):(Qt=new Set([ge.pathname]),R.set(I.location.pathname,Qt)),Zt={currentLocation:I.location,nextLocation:ge}}Ne(ts({},Ee,{actionData:Nt,loaderData:St,historyAction:T,location:ge,initialized:!0,navigation:MI,revalidation:"idle",restoreScrollPosition:Wn(ge,Ee.matches||I.matches),preventScrollReset:Et,blockers:vt}),{viewTransitionOpts:Zt,flushSync:Ge===!0}),T=Ws.Pop,E=!1,F=!1,U=!1,W=!1,te=[]}async function qe(ge,Ee){if(typeof ge=="number"){t.history.go(ge);return}let Be=V5(I.location,I.matches,l,h.v7_prependBasename,ge,h.v7_relativeSplatPath,Ee==null?void 0:Ee.fromRouteId,Ee==null?void 0:Ee.relative),{path:Ke,submission:lt,error:Ge}=X$(h.v7_normalizeFormMethod,!1,Be,Ee),Mt=I.location,Nt=K1(I.location,Ke,Ee&&Ee.state);Nt=ts({},Nt,t.history.encodeLocation(Nt));let St=Ee&&Ee.replace!=null?Ee.replace:void 0,vt=Ws.Push;St===!0?vt=Ws.Replace:St===!1||lt!=null&&uc(lt.formMethod)&&lt.formAction===I.location.pathname+I.location.search&&(vt=Ws.Replace);let Et=Ee&&"preventScrollReset"in Ee?Ee.preventScrollReset===!0:void 0,Zt=(Ee&&Ee.flushSync)===!0,Qt=rl({currentLocation:Mt,nextLocation:Nt,historyAction:vt});if(Qt){$n(Qt,{state:"blocked",location:Nt,proceed(){$n(Qt,{state:"proceeding",proceed:void 0,reset:void 0,location:Nt}),qe(ge,Ee)},reset(){let Xn=new Map(I.blockers);Xn.set(Qt,mv),Ne({blockers:Xn})}});return}return await xe(vt,Nt,{submission:lt,pendingError:Ge,preventScrollReset:Et,replace:Ee&&Ee.replace,enableViewTransition:Ee&&Ee.viewTransition,flushSync:Zt})}function Qe(){if(pt(),Ne({revalidation:"loading"}),I.navigation.state!=="submitting"){if(I.navigation.state==="idle"){xe(I.historyAction,I.location,{startUninterruptedRevalidation:!0});return}xe(T||I.historyAction,I.navigation.location,{overrideNavigation:I.navigation,enableViewTransition:F===!0})}}async function xe(ge,Ee,Be){O&&O.abort(),O=null,T=ge,U=(Be&&Be.startUninterruptedRevalidation)===!0,on(I.location,I.matches),E=(Be&&Be.preventScrollReset)===!0,F=(Be&&Be.enableViewTransition)===!0;let Ke=a||o,lt=Be&&Be.overrideNavigation,Ge=fp(Ke,Ee,l),Mt=(Be&&Be.flushSync)===!0,Nt=ia(Ge,Ke,Ee.pathname);if(Nt.active&&Nt.matches&&(Ge=Nt.matches),!Ge){let{error:En,notFoundMatches:Sn,route:oi}=fi(Ee.pathname);Fe(Ee,{matches:Sn,loaderData:{},errors:{[oi.id]:En}},{flushSync:Mt});return}if(I.initialized&&!W&&Tee(I.location,Ee)&&!(Be&&Be.submission&&uc(Be.submission.formMethod))){Fe(Ee,{matches:Ge},{flushSync:Mt});return}O=new AbortController;let St=Qm(t.history,Ee,O.signal,Be&&Be.submission),vt;if(Be&&Be.pendingError)vt=[pp(Ge).route.id,{type:Ni.error,error:Be.pendingError}];else if(Be&&Be.submission&&uc(Be.submission.formMethod)){let En=await he(St,Ee,Be.submission,Ge,Nt.active,{replace:Be.replace,flushSync:Mt});if(En.shortCircuited)return;if(En.pendingActionResult){let[Sn,oi]=En.pendingActionResult;if(Va(oi)&&NS(oi.error)&&oi.error.status===404){O=null,Fe(Ee,{matches:En.matches,loaderData:{},errors:{[Sn]:oi.error}});return}}Ge=En.matches||Ge,vt=En.pendingActionResult,lt=FI(Ee,Be.submission),Mt=!1,Nt.active=!1,St=Qm(t.history,St.url,St.signal)}let{shortCircuited:Et,matches:Zt,loaderData:Qt,errors:Xn}=await ut(St,Ee,Ge,Nt.active,lt,Be&&Be.submission,Be&&Be.fetcherSubmission,Be&&Be.replace,Be&&Be.initialHydration===!0,Mt,vt);Et||(O=null,Fe(Ee,ts({matches:Zt||Ge},sO(vt),{loaderData:Qt,errors:Xn})))}async function he(ge,Ee,Be,Ke,lt,Ge){Ge===void 0&&(Ge={}),pt();let Mt=$ee(Ee,Be);if(Ne({navigation:Mt},{flushSync:Ge.flushSync===!0}),lt){let vt=await Ji(Ke,Ee.pathname,ge.signal);if(vt.type==="aborted")return{shortCircuited:!0};if(vt.type==="error"){let Et=pp(vt.partialMatches).route.id;return{matches:vt.partialMatches,pendingActionResult:[Et,{type:Ni.error,error:vt.error}]}}else if(vt.matches)Ke=vt.matches;else{let{notFoundMatches:Et,error:Zt,route:Qt}=fi(Ee.pathname);return{matches:Et,pendingActionResult:[Qt.id,{type:Ni.error,error:Zt}]}}}let Nt,St=zv(Ke,Ee);if(!St.route.action&&!St.route.lazy)Nt={type:Ni.error,error:ga(405,{method:ge.method,pathname:Ee.pathname,routeId:St.route.id})};else if(Nt=(await Rt("action",I,ge,[St],Ke,null))[St.route.id],ge.signal.aborted)return{shortCircuited:!0};if(_p(Nt)){let vt;return Ge&&Ge.replace!=null?vt=Ge.replace:vt=eO(Nt.response.headers.get("Location"),new URL(ge.url),l)===I.location.pathname+I.location.search,await wt(ge,Nt,!0,{submission:Be,replace:vt}),{shortCircuited:!0}}if(xd(Nt))throw ga(400,{type:"defer-action"});if(Va(Nt)){let vt=pp(Ke,St.route.id);return(Ge&&Ge.replace)!==!0&&(T=Ws.Push),{matches:Ke,pendingActionResult:[vt.route.id,Nt]}}return{matches:Ke,pendingActionResult:[St.route.id,Nt]}}async function ut(ge,Ee,Be,Ke,lt,Ge,Mt,Nt,St,vt,Et){let Zt=lt||FI(Ee,Ge),Qt=Ge||Mt||aO(Zt),Xn=!U&&(!h.v7_partialHydration||!St);if(Ke){if(Xn){let ti=ot(Et);Ne(ts({navigation:Zt},ti!==void 0?{actionData:ti}:{}),{flushSync:vt})}let yn=await Ji(Be,Ee.pathname,ge.signal);if(yn.type==="aborted")return{shortCircuited:!0};if(yn.type==="error"){let ti=pp(yn.partialMatches).route.id;return{matches:yn.partialMatches,loaderData:{},errors:{[ti]:yn.error}}}else if(yn.matches)Be=yn.matches;else{let{error:ti,notFoundMatches:ra,route:ol}=fi(Ee.pathname);return{matches:ra,loaderData:{},errors:{[ol.id]:ti}}}}let En=a||o,[Sn,oi]=Z$(t.history,I,Be,Qt,Ee,h.v7_partialHydration&&St===!0,h.v7_skipActionErrorRevalidation,W,te,H,q,M,le,En,l,Et);if(gr(yn=>!(Be&&Be.some(ti=>ti.route.id===yn))||Sn&&Sn.some(ti=>ti.route.id===yn)),Y=++B,Sn.length===0&&oi.length===0){let yn=Bs();return Fe(Ee,ts({matches:Be,loaderData:{},errors:Et&&Va(Et[1])?{[Et[0]]:Et[1].error}:null},sO(Et),yn?{fetchers:new Map(I.fetchers)}:{}),{flushSync:vt}),{shortCircuited:!0}}if(Xn){let yn={};if(!Ke){yn.navigation=Zt;let ti=ot(Et);ti!==void 0&&(yn.actionData=ti)}oi.length>0&&(yn.fetchers=Je(oi)),Ne(yn,{flushSync:vt})}oi.forEach(yn=>{di(yn.key),yn.controller&&G.set(yn.key,yn.controller)});let Io=()=>oi.forEach(yn=>di(yn.key));O&&O.signal.addEventListener("abort",Io);let{loaderResults:No,fetcherResults:vr}=await Ft(I,Be,Sn,oi,ge);if(ge.signal.aborted)return{shortCircuited:!0};O&&O.signal.removeEventListener("abort",Io),oi.forEach(yn=>G.delete(yn.key));let zs=Qx(No);if(zs)return await wt(ge,zs.result,!0,{replace:Nt}),{shortCircuited:!0};if(zs=Qx(vr),zs)return le.add(zs.key),await wt(ge,zs.result,!0,{replace:Nt}),{shortCircuited:!0};let{loaderData:Pu,errors:jl}=nO(I,Be,No,Et,oi,vr,X);X.forEach((yn,ti)=>{yn.subscribe(ra=>{(ra||yn.done)&&X.delete(ti)})}),h.v7_partialHydration&&St&&I.errors&&(jl=ts({},I.errors,jl));let Jr=Bs(),Vl=Vn(Y),Dc=Jr||Vl||oi.length>0;return ts({matches:Be,loaderData:Pu,errors:jl},Dc?{fetchers:new Map(I.fetchers)}:{})}function ot(ge){if(ge&&!Va(ge[1]))return{[ge[0]]:ge[1].data};if(I.actionData)return Object.keys(I.actionData).length===0?null:I.actionData}function Je(ge){return ge.forEach(Ee=>{let Be=I.fetchers.get(Ee.key),Ke=gv(void 0,Be?Be.data:void 0);I.fetchers.set(Ee.key,Ke)}),new Map(I.fetchers)}function it(ge,Ee,Be,Ke){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");di(ge);let lt=(Ke&&Ke.flushSync)===!0,Ge=a||o,Mt=V5(I.location,I.matches,l,h.v7_prependBasename,Be,h.v7_relativeSplatPath,Ee,Ke==null?void 0:Ke.relative),Nt=fp(Ge,Mt,l),St=ia(Nt,Ge,Mt);if(St.active&&St.matches&&(Nt=St.matches),!Nt){Ht(ge,Ee,ga(404,{pathname:Mt}),{flushSync:lt});return}let{path:vt,submission:Et,error:Zt}=X$(h.v7_normalizeFormMethod,!0,Mt,Ke);if(Zt){Ht(ge,Ee,Zt,{flushSync:lt});return}let Qt=zv(Nt,vt),Xn=(Ke&&Ke.preventScrollReset)===!0;if(Et&&uc(Et.formMethod)){ht(ge,Ee,vt,Qt,Nt,St.active,lt,Xn,Et);return}M.set(ge,{routeId:Ee,path:vt}),at(ge,Ee,vt,Qt,Nt,St.active,lt,Xn,Et)}async function ht(ge,Ee,Be,Ke,lt,Ge,Mt,Nt,St){pt(),M.delete(ge);function vt(Yn){if(!Yn.route.action&&!Yn.route.lazy){let vn=ga(405,{method:St.formMethod,pathname:Be,routeId:Ee});return Ht(ge,Ee,vn,{flushSync:Mt}),!0}return!1}if(!Ge&&vt(Ke))return;let Et=I.fetchers.get(ge);Ot(ge,Oee(St,Et),{flushSync:Mt});let Zt=new AbortController,Qt=Qm(t.history,Be,Zt.signal,St);if(Ge){let Yn=await Ji(lt,Be,Qt.signal);if(Yn.type==="aborted")return;if(Yn.type==="error"){Ht(ge,Ee,Yn.error,{flushSync:Mt});return}else if(Yn.matches){if(lt=Yn.matches,Ke=zv(lt,Be),vt(Ke))return}else{Ht(ge,Ee,ga(404,{pathname:Be}),{flushSync:Mt});return}}G.set(ge,Zt);let Xn=B,Sn=(await Rt("action",I,Qt,[Ke],lt,ge))[Ke.route.id];if(Qt.signal.aborted){G.get(ge)===Zt&&G.delete(ge);return}if(h.v7_fetcherPersist&&q.has(ge)){if(_p(Sn)||Va(Sn)){Ot(ge,cd(void 0));return}}else{if(_p(Sn))if(G.delete(ge),Y>Xn){Ot(ge,cd(void 0));return}else return le.add(ge),Ot(ge,gv(St)),wt(Qt,Sn,!1,{fetcherSubmission:St,preventScrollReset:Nt});if(Va(Sn)){Ht(ge,Ee,Sn.error);return}}if(xd(Sn))throw ga(400,{type:"defer-action"});let oi=I.navigation.location||I.location,Io=Qm(t.history,oi,Zt.signal),No=a||o,vr=I.navigation.state!=="idle"?fp(No,I.navigation.location,l):I.matches;Rn(vr,"Didn't find any matches after fetcher action");let zs=++B;ne.set(ge,zs);let Pu=gv(St,Sn.data);I.fetchers.set(ge,Pu);let[jl,Jr]=Z$(t.history,I,vr,St,oi,!1,h.v7_skipActionErrorRevalidation,W,te,H,q,M,le,No,l,[Ke.route.id,Sn]);Jr.filter(Yn=>Yn.key!==ge).forEach(Yn=>{let vn=Yn.key,an=I.fetchers.get(vn),Wl=gv(void 0,an?an.data:void 0);I.fetchers.set(vn,Wl),di(vn),Yn.controller&&G.set(vn,Yn.controller)}),Ne({fetchers:new Map(I.fetchers)});let Vl=()=>Jr.forEach(Yn=>di(Yn.key));Zt.signal.addEventListener("abort",Vl);let{loaderResults:Dc,fetcherResults:yn}=await Ft(I,vr,jl,Jr,Io);if(Zt.signal.aborted)return;Zt.signal.removeEventListener("abort",Vl),ne.delete(ge),G.delete(ge),Jr.forEach(Yn=>G.delete(Yn.key));let ti=Qx(Dc);if(ti)return wt(Io,ti.result,!1,{preventScrollReset:Nt});if(ti=Qx(yn),ti)return le.add(ti.key),wt(Io,ti.result,!1,{preventScrollReset:Nt});let{loaderData:ra,errors:ol}=nO(I,vr,Dc,void 0,Jr,yn,X);if(I.fetchers.has(ge)){let Yn=cd(Sn.data);I.fetchers.set(ge,Yn)}Vn(zs),I.navigation.state==="loading"&&zs>Y?(Rn(T,"Expected pending action"),O&&O.abort(),Fe(I.navigation.location,{matches:vr,loaderData:ra,errors:ol,fetchers:new Map(I.fetchers)})):(Ne({errors:ol,loaderData:iO(I.loaderData,ra,vr,ol),fetchers:new Map(I.fetchers)}),W=!1)}async function at(ge,Ee,Be,Ke,lt,Ge,Mt,Nt,St){let vt=I.fetchers.get(ge);Ot(ge,gv(St,vt?vt.data:void 0),{flushSync:Mt});let Et=new AbortController,Zt=Qm(t.history,Be,Et.signal);if(Ge){let Sn=await Ji(lt,Be,Zt.signal);if(Sn.type==="aborted")return;if(Sn.type==="error"){Ht(ge,Ee,Sn.error,{flushSync:Mt});return}else if(Sn.matches)lt=Sn.matches,Ke=zv(lt,Be);else{Ht(ge,Ee,ga(404,{pathname:Be}),{flushSync:Mt});return}}G.set(ge,Et);let Qt=B,En=(await Rt("loader",I,Zt,[Ke],lt,ge))[Ke.route.id];if(xd(En)&&(En=await zA(En,Zt.signal,!0)||En),G.get(ge)===Et&&G.delete(ge),!Zt.signal.aborted){if(q.has(ge)){Ot(ge,cd(void 0));return}if(_p(En))if(Y>Qt){Ot(ge,cd(void 0));return}else{le.add(ge),await wt(Zt,En,!1,{preventScrollReset:Nt});return}if(Va(En)){Ht(ge,Ee,En.error);return}Rn(!xd(En),"Unhandled fetcher deferred data"),Ot(ge,cd(En.data))}}async function wt(ge,Ee,Be,Ke){let{submission:lt,fetcherSubmission:Ge,preventScrollReset:Mt,replace:Nt}=Ke===void 0?{}:Ke;Ee.response.headers.has("X-Remix-Revalidate")&&(W=!0);let St=Ee.response.headers.get("Location");Rn(St,"Expected a Location header on the redirect Response"),St=eO(St,new URL(ge.url),l);let vt=K1(I.location,St,{_isRedirect:!0});if(n){let Sn=!1;if(Ee.response.headers.has("X-Remix-Reload-Document"))Sn=!0;else if(BA.test(St)){const oi=t.history.createURL(St);Sn=oi.origin!==e.location.origin||wh(oi.pathname,l)==null}if(Sn){Nt?e.location.replace(St):e.location.assign(St);return}}O=null;let Et=Nt===!0||Ee.response.headers.has("X-Remix-Replace")?Ws.Replace:Ws.Push,{formMethod:Zt,formAction:Qt,formEncType:Xn}=I.navigation;!lt&&!Ge&&Zt&&Qt&&Xn&&(lt=aO(I.navigation));let En=lt||Ge;if(gee.has(Ee.response.status)&&En&&uc(En.formMethod))await xe(Et,vt,{submission:ts({},En,{formAction:St}),preventScrollReset:Mt||E,enableViewTransition:Be?F:void 0});else{let Sn=FI(vt,lt);await xe(Et,vt,{overrideNavigation:Sn,fetcherSubmission:Ge,preventScrollReset:Mt||E,enableViewTransition:Be?F:void 0})}}async function Rt(ge,Ee,Be,Ke,lt,Ge){let Mt,Nt={};try{Mt=await Cee(c,ge,Ee,Be,Ke,lt,Ge,r,s)}catch(St){return Ke.forEach(vt=>{Nt[vt.route.id]={type:Ni.error,error:St}}),Nt}for(let[St,vt]of Object.entries(Mt))if(Aee(vt)){let Et=vt.result;Nt[St]={type:Ni.redirect,response:Nee(Et,Be,St,lt,l,h.v7_relativeSplatPath)}}else Nt[St]=await Iee(vt);return Nt}async function Ft(ge,Ee,Be,Ke,lt){let Ge=ge.matches,Mt=Rt("loader",ge,lt,Be,Ee,null),Nt=Promise.all(Ke.map(async Et=>{if(Et.matches&&Et.match&&Et.controller){let Qt=(await Rt("loader",ge,Qm(t.history,Et.path,Et.controller.signal),[Et.match],Et.matches,Et.key))[Et.match.route.id];return{[Et.key]:Qt}}else return Promise.resolve({[Et.key]:{type:Ni.error,error:ga(404,{pathname:Et.path})}})})),St=await Mt,vt=(await Nt).reduce((Et,Zt)=>Object.assign(Et,Zt),{});return await Promise.all([Pee(Ee,St,lt.signal,Ge,ge.loaderData),Dee(Ee,vt,Ke)]),{loaderResults:St,fetcherResults:vt}}function pt(){W=!0,te.push(...gr()),M.forEach((ge,Ee)=>{G.has(Ee)&&H.add(Ee),di(Ee)})}function Ot(ge,Ee,Be){Be===void 0&&(Be={}),I.fetchers.set(ge,Ee),Ne({fetchers:new Map(I.fetchers)},{flushSync:(Be&&Be.flushSync)===!0})}function Ht(ge,Ee,Be,Ke){Ke===void 0&&(Ke={});let lt=pp(I.matches,Ee);nn(ge),Ne({errors:{[lt.route.id]:Be},fetchers:new Map(I.fetchers)},{flushSync:(Ke&&Ke.flushSync)===!0})}function Bt(ge){return h.v7_fetcherPersist&&(j.set(ge,(j.get(ge)||0)+1),q.has(ge)&&q.delete(ge)),I.fetchers.get(ge)||vee}function nn(ge){let Ee=I.fetchers.get(ge);G.has(ge)&&!(Ee&&Ee.state==="loading"&&ne.has(ge))&&di(ge),M.delete(ge),ne.delete(ge),le.delete(ge),q.delete(ge),H.delete(ge),I.fetchers.delete(ge)}function mt(ge){if(h.v7_fetcherPersist){let Ee=(j.get(ge)||0)-1;Ee<=0?(j.delete(ge),q.add(ge)):j.set(ge,Ee)}else nn(ge);Ne({fetchers:new Map(I.fetchers)})}function di(ge){let Ee=G.get(ge);Ee&&(Ee.abort(),G.delete(ge))}function gn(ge){for(let Ee of ge){let Be=Bt(Ee),Ke=cd(Be.data);I.fetchers.set(Ee,Ke)}}function Bs(){let ge=[],Ee=!1;for(let Be of le){let Ke=I.fetchers.get(Be);Rn(Ke,"Expected fetcher: "+Be),Ke.state==="loading"&&(le.delete(Be),ge.push(Be),Ee=!0)}return gn(ge),Ee}function Vn(ge){let Ee=[];for(let[Be,Ke]of ne)if(Ke<ge){let lt=I.fetchers.get(Be);Rn(lt,"Expected fetcher: "+Be),lt.state==="loading"&&(di(Be),ne.delete(Be),Ee.push(Be))}return gn(Ee),Ee.length>0}function ki(ge,Ee){let Be=I.blockers.get(ge)||mv;return Z.get(ge)!==Ee&&Z.set(ge,Ee),Be}function Js(ge){I.blockers.delete(ge),Z.delete(ge)}function $n(ge,Ee){let Be=I.blockers.get(ge)||mv;Rn(Be.state==="unblocked"&&Ee.state==="blocked"||Be.state==="blocked"&&Ee.state==="blocked"||Be.state==="blocked"&&Ee.state==="proceeding"||Be.state==="blocked"&&Ee.state==="unblocked"||Be.state==="proceeding"&&Ee.state==="unblocked","Invalid blocker state transition: "+Be.state+" -> "+Ee.state);let Ke=new Map(I.blockers);Ke.set(ge,Ee),Ne({blockers:Ke})}function rl(ge){let{currentLocation:Ee,nextLocation:Be,historyAction:Ke}=ge;if(Z.size===0)return;Z.size>1&&Yg(!1,"A router only supports one blocker at a time");let lt=Array.from(Z.entries()),[Ge,Mt]=lt[lt.length-1],Nt=I.blockers.get(Ge);if(!(Nt&&Nt.state==="proceeding")&&Mt({currentLocation:Ee,nextLocation:Be,historyAction:Ke}))return Ge}function fi(ge){let Ee=ga(404,{pathname:ge}),Be=a||o,{matches:Ke,route:lt}=rO(Be);return gr(),{notFoundMatches:Ke,route:lt,error:Ee}}function gr(ge){let Ee=[];return X.forEach((Be,Ke)=>{(!ge||ge(Ke))&&(Be.cancel(),Ee.push(Ke),X.delete(Ke))}),Ee}function na(ge,Ee,Be){if(m=ge,y=Ee,g=Be||null,!v&&I.navigation===MI){v=!0;let Ke=Wn(I.location,I.matches);Ke!=null&&Ne({restoreScrollPosition:Ke})}return()=>{m=null,y=null,g=null}}function Ti(ge,Ee){return g&&g(ge,Ee.map(Ke=>KJ(Ke,I.loaderData)))||ge.key}function on(ge,Ee){if(m&&y){let Be=Ti(ge,Ee);m[Be]=y()}}function Wn(ge,Ee){if(m){let Be=Ti(ge,Ee),Ke=m[Be];if(typeof Ke=="number")return Ke}return null}function ia(ge,Ee,Be){if(u)if(ge){if(Object.keys(ge[0].params).length>0)return{active:!0,matches:tw(Ee,Be,l,!0)}}else return{active:!0,matches:tw(Ee,Be,l,!0)||[]};return{active:!1,matches:null}}async function Ji(ge,Ee,Be){if(!u)return{type:"success",matches:ge};let Ke=ge;for(;;){let lt=a==null,Ge=a||o,Mt=r;try{await u({path:Ee,matches:Ke,patch:(vt,Et)=>{Be.aborted||J$(vt,Et,Ge,Mt,s)}})}catch(vt){return{type:"error",error:vt,partialMatches:Ke}}finally{lt&&!Be.aborted&&(o=[...o])}if(Be.aborted)return{type:"aborted"};let Nt=fp(Ge,Ee,l);if(Nt)return{type:"success",matches:Nt};let St=tw(Ge,Ee,l,!0);if(!St||Ke.length===St.length&&Ke.every((vt,Et)=>vt.route.id===St[Et].route.id))return{type:"success",matches:null};Ke=St}}function sa(ge){r={},a=Vw(ge,s,void 0,r)}function Qr(ge,Ee){let Be=a==null;J$(ge,Ee,a||o,r,s),Be&&(o=[...o],Ne({}))}return k={get basename(){return l},get future(){return h},get state(){return I},get routes(){return o},get window(){return e},initialize:fe,subscribe:Pe,enableScrollRestoration:na,navigate:qe,fetch:it,revalidate:Qe,createHref:ge=>t.history.createHref(ge),encodeLocation:ge=>t.history.encodeLocation(ge),getFetcher:Bt,deleteFetcher:mt,dispose:me,getBlocker:ki,deleteBlocker:Js,patchRoutes:Qr,_internalFetchControllers:G,_internalActiveDeferreds:X,_internalSetRoutes:sa},k}function xee(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function V5(t,e,n,i,s,r,o,a){let l,c;if(o){l=[];for(let h of e)if(l.push(h),h.route.id===o){c=h;break}}else l=e,c=e[e.length-1];let u=FA(s||".",MA(l,r),wh(t.pathname,n)||t.pathname,a==="path");if(s==null&&(u.search=t.search,u.hash=t.hash),(s==null||s===""||s===".")&&c){let h=jA(u.search);if(c.route.index&&!h)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&h){let d=new URLSearchParams(u.search),p=d.getAll("index");d.delete("index"),p.filter(g=>g).forEach(g=>d.append("index",g));let m=d.toString();u.search=m?"?"+m:""}}return i&&n!=="/"&&(u.pathname=u.pathname==="/"?n:hh([n,u.pathname])),Gp(u)}function X$(t,e,n,i){if(!i||!xee(i))return{path:n};if(i.formMethod&&!Lee(i.formMethod))return{path:n,error:ga(405,{method:i.formMethod})};let s=()=>({path:n,error:ga(400,{type:"invalid-body"})}),r=i.formMethod||"get",o=t?r.toUpperCase():r.toLowerCase(),a=W8(n);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!uc(o))return s();let d=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((p,m)=>{let[g,y]=m;return""+p+g+"="+y+`
`},""):String(i.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:void 0,text:d}}}else if(i.formEncType==="application/json"){if(!uc(o))return s();try{let d=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:d,text:void 0}}}catch{return s()}}}Rn(typeof FormData=="function","FormData is not available in this environment");let l,c;if(i.formData)l=U5(i.formData),c=i.formData;else if(i.body instanceof FormData)l=U5(i.body),c=i.body;else if(i.body instanceof URLSearchParams)l=i.body,c=tO(l);else if(i.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(i.body),c=tO(l)}catch{return s()}let u={formMethod:o,formAction:a,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(uc(u.formMethod))return{path:n,submission:u};let h=gf(n);return e&&h.search&&jA(h.search)&&l.append("index",""),h.search="?"+l,{path:Gp(h),submission:u}}function Y$(t,e,n){n===void 0&&(n=!1);let i=t.findIndex(s=>s.route.id===e);return i>=0?t.slice(0,n?i+1:i):t}function Z$(t,e,n,i,s,r,o,a,l,c,u,h,d,p,m,g){let y=g?Va(g[1])?g[1].error:g[1].data:void 0,v=t.createURL(e.location),b=t.createURL(s),w=n;r&&e.errors?w=Y$(n,Object.keys(e.errors)[0],!0):g&&Va(g[1])&&(w=Y$(n,g[0]));let S=g?g[1].statusCode:void 0,k=o&&S&&S>=400,I=w.filter((E,O)=>{let{route:F}=E;if(F.lazy)return!0;if(F.loader==null)return!1;if(r)return W5(F,e.loaderData,e.errors);if(wee(e.loaderData,e.matches[O],E)||l.some(U=>U===E.route.id))return!0;let R=e.matches[O],$=E;return Q$(E,ts({currentUrl:v,currentParams:R.params,nextUrl:b,nextParams:$.params},i,{actionResult:y,actionStatus:S,defaultShouldRevalidate:k?!1:a||v.pathname+v.search===b.pathname+b.search||v.search!==b.search||j8(R,$)}))}),T=[];return h.forEach((E,O)=>{if(r||!n.some(W=>W.route.id===E.routeId)||u.has(O))return;let F=fp(p,E.path,m);if(!F){T.push({key:O,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let R=e.fetchers.get(O),$=zv(F,E.path),U=!1;d.has(O)?U=!1:c.has(O)?(c.delete(O),U=!0):R&&R.state!=="idle"&&R.data===void 0?U=a:U=Q$($,ts({currentUrl:v,currentParams:e.matches[e.matches.length-1].params,nextUrl:b,nextParams:n[n.length-1].params},i,{actionResult:y,actionStatus:S,defaultShouldRevalidate:k?!1:a})),U&&T.push({key:O,routeId:E.routeId,path:E.path,matches:F,match:$,controller:new AbortController})}),[I,T]}function W5(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let i=e!=null&&e[t.id]!==void 0,s=n!=null&&n[t.id]!==void 0;return!i&&s?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!i&&!s}function wee(t,e,n){let i=!e||n.route.id!==e.route.id,s=t[n.route.id]===void 0;return i||s}function j8(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Q$(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function J$(t,e,n,i,s){var r;let o;if(t){let c=i[t];Rn(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let a=e.filter(c=>!o.some(u=>V8(c,u))),l=Vw(a,s,[t||"_","patch",String(((r=o)==null?void 0:r.length)||"0")],i);o.push(...l)}function V8(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,i)=>{var s;return(s=e.children)==null?void 0:s.some(r=>V8(n,r))}):!1}async function _ee(t,e,n){if(!t.lazy)return;let i=await t.lazy();if(!t.lazy)return;let s=n[t.id];Rn(s,"No route found in manifest");let r={};for(let o in i){let l=s[o]!==void 0&&o!=="hasErrorBoundary";Yg(!l,'Route "'+s.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!GJ.has(o)&&(r[o]=i[o])}Object.assign(s,r),Object.assign(s,ts({},e(s),{lazy:void 0}))}async function See(t){let{matches:e}=t,n=e.filter(s=>s.shouldLoad);return(await Promise.all(n.map(s=>s.resolve()))).reduce((s,r,o)=>Object.assign(s,{[n[o].route.id]:r}),{})}async function Cee(t,e,n,i,s,r,o,a,l,c){let u=r.map(p=>p.route.lazy?_ee(p.route,l,a):void 0),h=r.map((p,m)=>{let g=u[m],y=s.some(b=>b.route.id===p.route.id);return ts({},p,{shouldLoad:y,resolve:async b=>(b&&i.method==="GET"&&(p.route.lazy||p.route.loader)&&(y=!0),y?kee(e,i,p,g,b,c):Promise.resolve({type:Ni.data,result:void 0}))})}),d=await t({matches:h,request:i,params:r[0].params,fetcherKey:o,context:c});try{await Promise.all(u)}catch{}return d}async function kee(t,e,n,i,s,r){let o,a,l=c=>{let u,h=new Promise((m,g)=>u=g);a=()=>u(),e.signal.addEventListener("abort",a);let d=m=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:r},...m!==void 0?[m]:[]),p=(async()=>{try{return{type:"data",result:await(s?s(g=>d(g)):d())}}catch(m){return{type:"error",result:m}}})();return Promise.race([p,h])};try{let c=n.route[t];if(i)if(c){let u,[h]=await Promise.all([l(c).catch(d=>{u=d}),i]);if(u!==void 0)throw u;o=h}else if(await i,c=n.route[t],c)o=await l(c);else if(t==="action"){let u=new URL(e.url),h=u.pathname+u.search;throw ga(405,{method:e.method,pathname:h,routeId:n.route.id})}else return{type:Ni.data,result:void 0};else if(c)o=await l(c);else{let u=new URL(e.url),h=u.pathname+u.search;throw ga(404,{pathname:h})}Rn(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:Ni.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function Iee(t){let{result:e,type:n}=t;if(U8(e)){let c;try{let u=e.headers.get("Content-Type");u&&/\bapplication\/json\b/.test(u)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(u){return{type:Ni.error,error:u}}return n===Ni.error?{type:Ni.error,error:new Uw(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:Ni.data,data:c,statusCode:e.status,headers:e.headers}}if(n===Ni.error){if(oO(e)){var i;if(e.data instanceof Error){var s;return{type:Ni.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status}}e=new Uw(((i=e.init)==null?void 0:i.status)||500,void 0,e.data)}return{type:Ni.error,error:e,statusCode:NS(e)?e.status:void 0}}if(Ree(e)){var r,o;return{type:Ni.deferred,deferredData:e,statusCode:(r=e.init)==null?void 0:r.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}if(oO(e)){var a,l;return{type:Ni.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:Ni.data,data:e}}function Nee(t,e,n,i,s,r){let o=t.headers.get("Location");if(Rn(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!BA.test(o)){let a=i.slice(0,i.findIndex(l=>l.route.id===n)+1);o=V5(new URL(e.url),a,s,!0,o,r),t.headers.set("Location",o)}return t}function eO(t,e,n){if(BA.test(t)){let i=t,s=i.startsWith("//")?new URL(e.protocol+i):new URL(i),r=wh(s.pathname,n)!=null;if(s.origin===e.origin&&r)return s.pathname+s.search+s.hash}return t}function Qm(t,e,n,i){let s=t.createURL(W8(e)).toString(),r={signal:n};if(i&&uc(i.formMethod)){let{formMethod:o,formEncType:a}=i;r.method=o.toUpperCase(),a==="application/json"?(r.headers=new Headers({"Content-Type":a}),r.body=JSON.stringify(i.json)):a==="text/plain"?r.body=i.text:a==="application/x-www-form-urlencoded"&&i.formData?r.body=U5(i.formData):r.body=i.formData}return new Request(s,r)}function U5(t){let e=new URLSearchParams;for(let[n,i]of t.entries())e.append(n,typeof i=="string"?i:i.name);return e}function tO(t){let e=new FormData;for(let[n,i]of t.entries())e.append(n,i);return e}function Eee(t,e,n,i,s){let r={},o=null,a,l=!1,c={},u=n&&Va(n[1])?n[1].error:void 0;return t.forEach(h=>{if(!(h.route.id in e))return;let d=h.route.id,p=e[d];if(Rn(!_p(p),"Cannot handle redirect results in processLoaderData"),Va(p)){let m=p.error;u!==void 0&&(m=u,u=void 0),o=o||{};{let g=pp(t,d);o[g.route.id]==null&&(o[g.route.id]=m)}r[d]=void 0,l||(l=!0,a=NS(p.error)?p.error.status:500),p.headers&&(c[d]=p.headers)}else xd(p)?(i.set(d,p.deferredData),r[d]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[d]=p.headers)):(r[d]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[d]=p.headers))}),u!==void 0&&n&&(o={[n[0]]:u},r[n[0]]=void 0),{loaderData:r,errors:o,statusCode:a||200,loaderHeaders:c}}function nO(t,e,n,i,s,r,o){let{loaderData:a,errors:l}=Eee(e,n,i,o);return s.forEach(c=>{let{key:u,match:h,controller:d}=c,p=r[u];if(Rn(p,"Did not find corresponding fetcher result"),!(d&&d.signal.aborted))if(Va(p)){let m=pp(t.matches,h==null?void 0:h.route.id);l&&l[m.route.id]||(l=ts({},l,{[m.route.id]:p.error})),t.fetchers.delete(u)}else if(_p(p))Rn(!1,"Unhandled fetcher revalidation redirect");else if(xd(p))Rn(!1,"Unhandled fetcher deferred data");else{let m=cd(p.data);t.fetchers.set(u,m)}}),{loaderData:a,errors:l}}function iO(t,e,n,i){let s=ts({},e);for(let r of n){let o=r.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(s[o]=e[o]):t[o]!==void 0&&r.route.loader&&(s[o]=t[o]),i&&i.hasOwnProperty(o))break}return s}function sO(t){return t?Va(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function pp(t,e){return(e?t.slice(0,t.findIndex(i=>i.route.id===e)+1):[...t]).reverse().find(i=>i.route.hasErrorBoundary===!0)||t[0]}function rO(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ga(t,e){let{pathname:n,routeId:i,method:s,type:r,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s&&n&&i?l="You made a "+s+' request to "'+n+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":r==="defer-action"?l="defer() is not supported in actions":r==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+i+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",s&&n&&i?l="You made a "+s.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":s&&(l='Invalid request method "'+s.toUpperCase()+'"')),new Uw(t||500,a,new Error(l),!0)}function Qx(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[i,s]=e[n];if(_p(s))return{key:i,result:s}}}function W8(t){let e=typeof t=="string"?gf(t):t;return Gp(ts({},e,{hash:""}))}function Tee(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Aee(t){return U8(t.result)&&mee.has(t.result.status)}function xd(t){return t.type===Ni.deferred}function Va(t){return t.type===Ni.error}function _p(t){return(t&&t.type)===Ni.redirect}function oO(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function Ree(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function U8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function Lee(t){return pee.has(t.toLowerCase())}function uc(t){return dee.has(t.toLowerCase())}async function Pee(t,e,n,i,s){let r=Object.entries(e);for(let o=0;o<r.length;o++){let[a,l]=r[o],c=t.find(d=>(d==null?void 0:d.route.id)===a);if(!c)continue;let u=i.find(d=>d.route.id===c.route.id),h=u!=null&&!j8(u,c)&&(s&&s[c.route.id])!==void 0;xd(l)&&h&&await zA(l,n,!1).then(d=>{d&&(e[a]=d)})}}async function Dee(t,e,n){for(let i=0;i<n.length;i++){let{key:s,routeId:r,controller:o}=n[i],a=e[s];t.find(c=>(c==null?void 0:c.route.id)===r)&&xd(a)&&(Rn(o,"Expected an AbortController for revalidating fetcher deferred result"),await zA(a,o.signal,!0).then(c=>{c&&(e[s]=c)}))}}async function zA(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Ni.data,data:t.deferredData.unwrappedData}}catch(s){return{type:Ni.error,error:s}}return{type:Ni.data,data:t.deferredData.data}}}function jA(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function zv(t,e){let n=typeof e=="string"?gf(e).search:e.search;if(t[t.length-1].route.index&&jA(n||""))return t[t.length-1];let i=F8(t);return i[i.length-1]}function aO(t){let{formMethod:e,formAction:n,formEncType:i,text:s,formData:r,json:o}=t;if(!(!e||!n||!i)){if(s!=null)return{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:void 0,text:s};if(r!=null)return{formMethod:e,formAction:n,formEncType:i,formData:r,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:o,text:void 0}}}function FI(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function $ee(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function gv(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Oee(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function cd(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Mee(t,e){try{let n=t.sessionStorage.getItem(z8);if(n){let i=JSON.parse(n);for(let[s,r]of Object.entries(i||{}))r&&Array.isArray(r)&&e.set(s,new Set(r||[]))}}catch{}}function Fee(t,e){if(e.size>0){let n={};for(let[i,s]of e)n[i]=[...s];try{t.sessionStorage.setItem(z8,JSON.stringify(n))}catch(i){Yg(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hw(){return Hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Hw.apply(this,arguments)}const By=K.createContext(null),VA=K.createContext(null),vf=K.createContext(null),WA=K.createContext(null),yf=K.createContext({outlet:null,matches:[],isDataRoute:!1}),H8=K.createContext(null);function Bee(t,e){let{relative:n}=e===void 0?{}:e;zy()||Rn(!1);let{basename:i,navigator:s}=K.useContext(vf),{hash:r,pathname:o,search:a}=ES(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:hh([i,o])),s.createHref({pathname:l,search:a,hash:r})}function zy(){return K.useContext(WA)!=null}function S0(){return zy()||Rn(!1),K.useContext(WA).location}function G8(t){K.useContext(vf).static||K.useLayoutEffect(t)}function UA(){let{isDataRoute:t}=K.useContext(yf);return t?Jee():zee()}function zee(){zy()||Rn(!1);let t=K.useContext(By),{basename:e,future:n,navigator:i}=K.useContext(vf),{matches:s}=K.useContext(yf),{pathname:r}=S0(),o=JSON.stringify(MA(s,n.v7_relativeSplatPath)),a=K.useRef(!1);return G8(()=>{a.current=!0}),K.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let h=FA(c,JSON.parse(o),r,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:hh([e,h.pathname])),(u.replace?i.replace:i.push)(h,u.state,u)},[e,i,o,r,t])}const jee=K.createContext(null);function Vee(t){let e=K.useContext(yf).outlet;return e&&K.createElement(jee.Provider,{value:t},e)}function ES(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=K.useContext(vf),{matches:s}=K.useContext(yf),{pathname:r}=S0(),o=JSON.stringify(MA(s,i.v7_relativeSplatPath));return K.useMemo(()=>FA(t,JSON.parse(o),r,n==="path"),[t,o,r,n])}function Wee(t,e,n,i){zy()||Rn(!1);let{navigator:s}=K.useContext(vf),{matches:r}=K.useContext(yf),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=S0(),u;u=c;let h=u.pathname||"/",d=h;if(l!=="/"){let g=l.replace(/^\//,"").split("/");d="/"+h.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=fp(t,{pathname:d});return Kee(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:hh([l,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:hh([l,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),r,n,i)}function Uee(){let t=Qee(),e=NS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),n?K.createElement("pre",{style:s},n):null,null)}const Hee=K.createElement(Uee,null);class Gee extends K.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?K.createElement(yf.Provider,{value:this.props.routeContext},K.createElement(H8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qee(t){let{routeContext:e,match:n,children:i}=t,s=K.useContext(By);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),K.createElement(yf.Provider,{value:e},i)}function Kee(t,e,n,i){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var r;if(!n)return null;if(n.errors)t=n.matches;else if((r=i)!=null&&r.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Rn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:d,errors:p}=n,m=h.route.loader&&d[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,d)=>{let p,m=!1,g=null,y=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||Hee,l&&(c<0&&d===0?(ete("route-fallback"),m=!0,y=null):c===d&&(m=!0,y=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,d+1)),b=()=>{let w;return p?w=g:m?w=y:h.route.Component?w=K.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,K.createElement(qee,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?K.createElement(Gee,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var q8=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(q8||{}),Gw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Gw||{});function Xee(t){let e=K.useContext(By);return e||Rn(!1),e}function Yee(t){let e=K.useContext(VA);return e||Rn(!1),e}function Zee(t){let e=K.useContext(yf);return e||Rn(!1),e}function K8(t){let e=Zee(),n=e.matches[e.matches.length-1];return n.route.id||Rn(!1),n.route.id}function Qee(){var t;let e=K.useContext(H8),n=Yee(Gw.UseRouteError),i=K8(Gw.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function Jee(){let{router:t}=Xee(q8.UseNavigateStable),e=K8(Gw.UseNavigateStable),n=K.useRef(!1);return G8(()=>{n.current=!0}),K.useCallback(function(s,r){r===void 0&&(r={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Hw({fromRouteId:e},r)))},[t,e])}const lO={};function ete(t,e,n){lO[t]||(lO[t]=!0)}function tte(t){return Vee(t.context)}function nte(t){let{basename:e="/",children:n=null,location:i,navigationType:s=Ws.Pop,navigator:r,static:o=!1,future:a}=t;zy()&&Rn(!1);let l=e.replace(/^\/*/,"/"),c=K.useMemo(()=>({basename:l,navigator:r,static:o,future:Hw({v7_relativeSplatPath:!1},a)}),[l,a,r,o]);typeof i=="string"&&(i=gf(i));let{pathname:u="/",search:h="",hash:d="",state:p=null,key:m="default"}=i,g=K.useMemo(()=>{let y=wh(u,l);return y==null?null:{location:{pathname:y,search:h,hash:d,state:p,key:m},navigationType:s}},[l,u,h,d,p,m,s]);return g==null?null:K.createElement(vf.Provider,{value:c},K.createElement(WA.Provider,{children:n,value:g}))}new Promise(()=>{});function ite(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:K.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:K.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:K.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zg(){return Zg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Zg.apply(this,arguments)}function X8(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function ste(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rte(t,e){return t.button===0&&(!e||e==="_self")&&!ste(t)}const ote=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ate=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],lte="6";try{window.__reactRouterVersion=lte}catch{}function cte(t,e){return bee({basename:e==null?void 0:e.basename,future:Zg({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:WJ({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||ute(),routes:t,mapRouteProperties:ite,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function ute(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Zg({},e,{errors:hte(e.errors)})),e}function hte(t){if(!t)return null;let e=Object.entries(t),n={};for(let[i,s]of e)if(s&&s.__type==="RouteErrorResponse")n[i]=new Uw(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let r=window[s.__subType];if(typeof r=="function")try{let o=new r(s.message);o.stack="",n[i]=o}catch{}}if(n[i]==null){let r=new Error(s.message);r.stack="",n[i]=r}}else n[i]=s;return n}const Y8=K.createContext({isTransitioning:!1}),dte=K.createContext(new Map),fte="startTransition",cO=XN[fte],pte="flushSync",uO=VJ[pte];function mte(t){cO?cO(t):t()}function vv(t){uO?uO(t):t()}let gte=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",n(i))}})}};function vte(t){let{fallbackElement:e,router:n,future:i}=t,[s,r]=K.useState(n.state),[o,a]=K.useState(),[l,c]=K.useState({isTransitioning:!1}),[u,h]=K.useState(),[d,p]=K.useState(),[m,g]=K.useState(),y=K.useRef(new Map),{v7_startTransition:v}=i||{},b=K.useCallback(E=>{v?mte(E):E()},[v]),w=K.useCallback((E,O)=>{let{deletedFetchers:F,flushSync:R,viewTransitionOpts:$}=O;F.forEach(W=>y.current.delete(W)),E.fetchers.forEach((W,te)=>{W.data!==void 0&&y.current.set(te,W.data)});let U=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!$||U){R?vv(()=>r(E)):b(()=>r(E));return}if(R){vv(()=>{d&&(u&&u.resolve(),d.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:$.currentLocation,nextLocation:$.nextLocation})});let W=n.window.document.startViewTransition(()=>{vv(()=>r(E))});W.finished.finally(()=>{vv(()=>{h(void 0),p(void 0),a(void 0),c({isTransitioning:!1})})}),vv(()=>p(W));return}d?(u&&u.resolve(),d.skipTransition(),g({state:E,currentLocation:$.currentLocation,nextLocation:$.nextLocation})):(a(E),c({isTransitioning:!0,flushSync:!1,currentLocation:$.currentLocation,nextLocation:$.nextLocation}))},[n.window,d,u,y,b]);K.useLayoutEffect(()=>n.subscribe(w),[n,w]),K.useEffect(()=>{l.isTransitioning&&!l.flushSync&&h(new gte)},[l]),K.useEffect(()=>{if(u&&o&&n.window){let E=o,O=u.promise,F=n.window.document.startViewTransition(async()=>{b(()=>r(E)),await O});F.finished.finally(()=>{h(void 0),p(void 0),a(void 0),c({isTransitioning:!1})}),p(F)}},[b,o,u,n.window]),K.useEffect(()=>{u&&o&&s.location.key===o.location.key&&u.resolve()},[u,d,s.location,o]),K.useEffect(()=>{!l.isTransitioning&&m&&(a(m.state),c({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),g(void 0))},[l.isTransitioning,m]),K.useEffect(()=>{},[]);let S=K.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:E=>n.navigate(E),push:(E,O,F)=>n.navigate(E,{state:O,preventScrollReset:F==null?void 0:F.preventScrollReset}),replace:(E,O,F)=>n.navigate(E,{replace:!0,state:O,preventScrollReset:F==null?void 0:F.preventScrollReset})}),[n]),k=n.basename||"/",I=K.useMemo(()=>({router:n,navigator:S,static:!1,basename:k}),[n,S,k]),T=K.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return K.createElement(K.Fragment,null,K.createElement(By.Provider,{value:I},K.createElement(VA.Provider,{value:s},K.createElement(dte.Provider,{value:y.current},K.createElement(Y8.Provider,{value:l},K.createElement(nte,{basename:k,location:s.location,navigationType:s.historyAction,navigator:S,future:T},s.initialized||n.future.v7_partialHydration?K.createElement(yte,{routes:n.routes,future:n.future,state:s}):e))))),null)}const yte=K.memo(bte);function bte(t){let{routes:e,future:n,state:i}=t;return Wee(e,void 0,i,n)}const xte=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wte=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_te=K.forwardRef(function(e,n){let{onClick:i,relative:s,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,d=X8(e,ote),{basename:p}=K.useContext(vf),m,g=!1;if(typeof c=="string"&&wte.test(c)&&(m=c,xte))try{let w=new URL(window.location.href),S=c.startsWith("//")?new URL(w.protocol+c):new URL(c),k=wh(S.pathname,p);S.origin===w.origin&&k!=null?c=k+S.search+S.hash:g=!0}catch{}let y=Bee(c,{relative:s}),v=Cte(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function b(w){i&&i(w),w.defaultPrevented||v(w)}return K.createElement("a",Zg({},d,{href:m||y,onClick:g||r?i:b,ref:n,target:l}))}),Zf=K.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:s=!1,className:r="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,h=X8(e,ate),d=ES(l,{relative:h.relative}),p=S0(),m=K.useContext(VA),{navigator:g,basename:y}=K.useContext(vf),v=m!=null&&kte(d)&&c===!0,b=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,w=p.pathname,S=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(w=w.toLowerCase(),S=S?S.toLowerCase():null,b=b.toLowerCase()),S&&y&&(S=wh(S,y)||S);const k=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let I=w===b||!o&&w.startsWith(b)&&w.charAt(k)==="/",T=S!=null&&(S===b||!o&&S.startsWith(b)&&S.charAt(b.length)==="/"),E={isActive:I,isPending:T,isTransitioning:v},O=I?i:void 0,F;typeof r=="function"?F=r(E):F=[r,I?"active":null,T?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(E):a;return K.createElement(_te,Zg({},h,{"aria-current":O,className:F,ref:n,style:R,to:l,viewTransition:c}),typeof u=="function"?u(E):u)});var H5;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(H5||(H5={}));var hO;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hO||(hO={}));function Ste(t){let e=K.useContext(By);return e||Rn(!1),e}function Cte(t,e){let{target:n,replace:i,state:s,preventScrollReset:r,relative:o,viewTransition:a}=e===void 0?{}:e,l=UA(),c=S0(),u=ES(t,{relative:o});return K.useCallback(h=>{if(rte(h,n)){h.preventDefault();let d=i!==void 0?i:Gp(c)===Gp(u);l(t,{replace:d,state:s,preventScrollReset:r,relative:o,viewTransition:a})}},[c,l,u,i,s,n,t,r,o,a])}function kte(t,e){e===void 0&&(e={});let n=K.useContext(Y8);n==null&&Rn(!1);let{basename:i}=Ste(H5.useViewTransitionState),s=ES(t,{relative:e.relative});if(!n.isTransitioning)return!1;let r=wh(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=wh(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Ww(s.pathname,o)!=null||Ww(s.pathname,r)!=null}const Ite="/water_quality_system/assets/image1-B331zOGP.png";function Z8(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Z8(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function wd(){for(var t,e,n=0,i="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Z8(t))&&(i&&(i+=" "),i+=e);return i}const X1=t=>typeof t=="number"&&!isNaN(t),Rp=t=>typeof t=="string",Ga=t=>typeof t=="function",nw=t=>Rp(t)||Ga(t)?t:null,G5=t=>K.isValidElement(t)||Rp(t)||Ga(t)||X1(t);function Nte(t,e,n){n===void 0&&(n=300);const{scrollHeight:i,style:s}=t;requestAnimationFrame(()=>{s.minHeight="initial",s.height=i+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,n)})})}function TS(t){let{enter:e,exit:n,appendPosition:i=!1,collapse:s=!0,collapseDuration:r=300}=t;return function(o){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:h,isIn:d,playToast:p}=o;const m=i?`${e}--${l}`:e,g=i?`${n}--${l}`:n,y=K.useRef(0);return K.useLayoutEffect(()=>{const v=h.current,b=m.split(" "),w=S=>{S.target===h.current&&(p(),v.removeEventListener("animationend",w),v.removeEventListener("animationcancel",w),y.current===0&&S.type!=="animationcancel"&&v.classList.remove(...b))};v.classList.add(...b),v.addEventListener("animationend",w),v.addEventListener("animationcancel",w)},[]),K.useEffect(()=>{const v=h.current,b=()=>{v.removeEventListener("animationend",b),s?Nte(v,u,r):u()};d||(c?b():(y.current=1,v.className+=` ${g}`,v.addEventListener("animationend",b)))},[d]),xn.createElement(xn.Fragment,null,a)}}function dO(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Wo=new Map;let Y1=[];const q5=new Set,Ete=t=>q5.forEach(e=>e(t)),Q8=()=>Wo.size>0;function J8(t,e){var n;if(e)return!((n=Wo.get(e))==null||!n.isToastActive(t));let i=!1;return Wo.forEach(s=>{s.isToastActive(t)&&(i=!0)}),i}function ej(t,e){G5(t)&&(Q8()||Y1.push({content:t,options:e}),Wo.forEach(n=>{n.buildToast(t,e)}))}function fO(t,e){Wo.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function Tte(t){const{subscribe:e,getSnapshot:n,setProps:i}=K.useRef(function(r){const o=r.containerId||1;return{subscribe(a){const l=function(u,h,d){let p=1,m=0,g=[],y=[],v=[],b=h;const w=new Map,S=new Set,k=()=>{v=Array.from(w.values()),S.forEach(E=>E())},I=E=>{y=E==null?[]:y.filter(O=>O!==E),k()},T=E=>{const{toastId:O,onOpen:F,updateId:R,children:$}=E.props,U=R==null;E.staleId&&w.delete(E.staleId),w.set(O,E),y=[...y,E.props.toastId].filter(W=>W!==E.staleId),k(),d(dO(E,U?"added":"updated")),U&&Ga(F)&&F(K.isValidElement($)&&$.props)};return{id:u,props:b,observe:E=>(S.add(E),()=>S.delete(E)),toggle:(E,O)=>{w.forEach(F=>{O!=null&&O!==F.props.toastId||Ga(F.toggle)&&F.toggle(E)})},removeToast:I,toasts:w,clearQueue:()=>{m-=g.length,g=[]},buildToast:(E,O)=>{if((M=>{let{containerId:j,toastId:q,updateId:X}=M;const Z=j?j!==u:u!==1,ue=w.has(q)&&X==null;return Z||ue})(O))return;const{toastId:F,updateId:R,data:$,staleId:U,delay:W}=O,te=()=>{I(F)},H=R==null;H&&m++;const G={...b,style:b.toastStyle,key:p++,...Object.fromEntries(Object.entries(O).filter(M=>{let[j,q]=M;return q!=null})),toastId:F,updateId:R,data:$,closeToast:te,isIn:!1,className:nw(O.className||b.toastClassName),bodyClassName:nw(O.bodyClassName||b.bodyClassName),progressClassName:nw(O.progressClassName||b.progressClassName),autoClose:!O.isLoading&&(B=O.autoClose,Y=b.autoClose,B===!1||X1(B)&&B>0?B:Y),deleteToast(){const M=w.get(F),{onClose:j,children:q}=M.props;Ga(j)&&j(K.isValidElement(q)&&q.props),d(dO(M,"removed")),w.delete(F),m--,m<0&&(m=0),g.length>0?T(g.shift()):k()}};var B,Y;G.closeButton=b.closeButton,O.closeButton===!1||G5(O.closeButton)?G.closeButton=O.closeButton:O.closeButton===!0&&(G.closeButton=!G5(b.closeButton)||b.closeButton);let ne=E;K.isValidElement(E)&&!Rp(E.type)?ne=K.cloneElement(E,{closeToast:te,toastProps:G,data:$}):Ga(E)&&(ne=E({closeToast:te,toastProps:G,data:$}));const le={content:ne,props:G,staleId:U};b.limit&&b.limit>0&&m>b.limit&&H?g.push(le):X1(W)?setTimeout(()=>{T(le)},W):T(le)},setProps(E){b=E},setToggle:(E,O)=>{w.get(E).toggle=O},isToastActive:E=>y.some(O=>O===E),getSnapshot:()=>v}}(o,r,Ete);Wo.set(o,l);const c=l.observe(a);return Y1.forEach(u=>ej(u.content,u.options)),Y1=[],()=>{c(),Wo.delete(o)}},setProps(a){var l;(l=Wo.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=Wo.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;i(t);const s=K.useSyncExternalStore(e,n,n);return{getToastToRender:function(r){if(!s)return[];const o=new Map;return t.newestOnTop&&s.reverse(),s.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>r(a[0],a[1]))},isToastActive:J8,count:s==null?void 0:s.length}}function Ate(t){const[e,n]=K.useState(!1),[i,s]=K.useState(!1),r=K.useRef(null),o=K.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:h}=t;var d,p;function m(){n(!0)}function g(){n(!1)}function y(w){const S=r.current;o.canDrag&&S&&(o.didMove=!0,e&&g(),o.delta=t.draggableDirection==="x"?w.clientX-o.start:w.clientY-o.start,o.start!==w.clientX&&(o.canCloseOnClick=!1),S.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,S.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function v(){document.removeEventListener("pointermove",y),document.removeEventListener("pointerup",v);const w=r.current;if(o.canDrag&&o.didMove&&w){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return s(!0),t.closeToast(),void t.collapseAll();w.style.transition="transform 0.2s, opacity 0.2s",w.style.removeProperty("transform"),w.style.removeProperty("opacity")}}(p=Wo.get((d={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||p.setToggle(d.id,d.fn),K.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||g(),window.addEventListener("focus",m),window.addEventListener("blur",g),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",g)}},[t.pauseOnFocusLoss]);const b={onPointerDown:function(w){if(t.draggable===!0||t.draggable===w.pointerType){o.didMove=!1,document.addEventListener("pointermove",y),document.addEventListener("pointerup",v);const S=r.current;o.canCloseOnClick=!0,o.canDrag=!0,S.style.transition="none",t.draggableDirection==="x"?(o.start=w.clientX,o.removalDistance=S.offsetWidth*(t.draggablePercent/100)):(o.start=w.clientY,o.removalDistance=S.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(w){const{top:S,bottom:k,left:I,right:T}=r.current.getBoundingClientRect();w.nativeEvent.type!=="touchend"&&t.pauseOnHover&&w.clientX>=I&&w.clientX<=T&&w.clientY>=S&&w.clientY<=k?g():m()}};return a&&l&&(b.onMouseEnter=g,t.stacked||(b.onMouseLeave=m)),h&&(b.onClick=w=>{u&&u(w),o.canCloseOnClick&&c()}),{playToast:m,pauseToast:g,isRunning:e,preventExitTransition:i,toastRef:r,eventHandlers:b}}function Rte(t){let{delay:e,isRunning:n,closeToast:i,type:s="default",hide:r,className:o,style:a,controlledProgress:l,progress:c,rtl:u,isIn:h,theme:d}=t;const p=r||l&&c===0,m={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(m.transform=`scaleX(${c})`);const g=wd("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":u}),y=Ga(o)?o({rtl:u,type:s,defaultClassName:g}):wd(g,o),v={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{h&&i()}};return xn.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},xn.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${s}`}),xn.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:y,style:m,...v}))}let Lte=1;const tj=()=>""+Lte++;function Pte(t){return t&&(Rp(t.toastId)||X1(t.toastId))?t.toastId:tj()}function h1(t,e){return ej(t,e),e.toastId}function qw(t,e){return{...e,type:e&&e.type||t,toastId:Pte(e)}}function Jx(t){return(e,n)=>h1(e,qw(t,n))}function jt(t,e){return h1(t,qw("default",e))}jt.loading=(t,e)=>h1(t,qw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),jt.promise=function(t,e,n){let i,{pending:s,error:r,success:o}=e;s&&(i=Rp(s)?jt.loading(s,n):jt.loading(s.render,{...n,...s}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,h,d)=>{if(h==null)return void jt.dismiss(i);const p={type:u,...a,...n,data:d},m=Rp(h)?{render:h}:h;return i?jt.update(i,{...p,...m}):jt(m.render,{...p,...m}),d},c=Ga(t)?t():t;return c.then(u=>l("success",o,u)).catch(u=>l("error",r,u)),c},jt.success=Jx("success"),jt.info=Jx("info"),jt.error=Jx("error"),jt.warning=Jx("warning"),jt.warn=jt.warning,jt.dark=(t,e)=>h1(t,qw("default",{theme:"dark",...e})),jt.dismiss=function(t){(function(e){var n;if(Q8()){if(e==null||Rp(n=e)||X1(n))Wo.forEach(i=>{i.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const i=Wo.get(e.containerId);i?i.removeToast(e.id):Wo.forEach(s=>{s.removeToast(e.id)})}}else Y1=Y1.filter(i=>e!=null&&i.options.toastId!==e)})(t)},jt.clearWaitingQueue=function(t){t===void 0&&(t={}),Wo.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},jt.isActive=J8,jt.update=function(t,e){e===void 0&&(e={});const n=((i,s)=>{var r;let{containerId:o}=s;return(r=Wo.get(o||1))==null?void 0:r.toasts.get(i)})(t,e);if(n){const{props:i,content:s}=n,r={delay:100,...i,...e,toastId:e.toastId||t,updateId:tj()};r.toastId!==t&&(r.staleId=t);const o=r.render||s;delete r.render,h1(o,r)}},jt.done=t=>{jt.update(t,{progress:1})},jt.onChange=function(t){return q5.add(t),()=>{q5.delete(t)}},jt.play=t=>fO(!0,t),jt.pause=t=>fO(!1,t);const Dte=typeof window<"u"?K.useLayoutEffect:K.useEffect,e2=t=>{let{theme:e,type:n,isLoading:i,...s}=t;return xn.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...s})},BI={info:function(t){return xn.createElement(e2,{...t},xn.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return xn.createElement(e2,{...t},xn.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return xn.createElement(e2,{...t},xn.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return xn.createElement(e2,{...t},xn.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return xn.createElement("div",{className:"Toastify__spinner"})}},$te=t=>{const{isRunning:e,preventExitTransition:n,toastRef:i,eventHandlers:s,playToast:r}=Ate(t),{closeButton:o,children:a,autoClose:l,onClick:c,type:u,hideProgressBar:h,closeToast:d,transition:p,position:m,className:g,style:y,bodyClassName:v,bodyStyle:b,progressClassName:w,progressStyle:S,updateId:k,role:I,progress:T,rtl:E,toastId:O,deleteToast:F,isIn:R,isLoading:$,closeOnClick:U,theme:W}=t,te=wd("Toastify__toast",`Toastify__toast-theme--${W}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":E},{"Toastify__toast--close-on-click":U}),H=Ga(g)?g({rtl:E,position:m,type:u,defaultClassName:te}):wd(te,g),G=function(le){let{theme:M,type:j,isLoading:q,icon:X}=le,Z=null;const ue={theme:M,type:j};return X===!1||(Ga(X)?Z=X({...ue,isLoading:q}):K.isValidElement(X)?Z=K.cloneElement(X,ue):q?Z=BI.spinner():(fe=>fe in BI)(j)&&(Z=BI[j](ue))),Z}(t),B=!!T||!l,Y={closeToast:d,type:u,theme:W};let ne=null;return o===!1||(ne=Ga(o)?o(Y):K.isValidElement(o)?K.cloneElement(o,Y):function(le){let{closeToast:M,theme:j,ariaLabel:q="close"}=le;return xn.createElement("button",{className:`Toastify__close-button Toastify__close-button--${j}`,type:"button",onClick:X=>{X.stopPropagation(),M(X)},"aria-label":q},xn.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},xn.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(Y)),xn.createElement(p,{isIn:R,done:F,position:m,preventExitTransition:n,nodeRef:i,playToast:r},xn.createElement("div",{id:O,onClick:c,"data-in":R,className:H,...s,style:y,ref:i},xn.createElement("div",{...R&&{role:I},className:Ga(v)?v({type:u}):wd("Toastify__toast-body",v),style:b},G!=null&&xn.createElement("div",{className:wd("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!$})},G),xn.createElement("div",null,a)),ne,xn.createElement(Rte,{...k&&!B?{key:`pb-${k}`}:{},rtl:E,theme:W,delay:l,isRunning:e,isIn:R,closeToast:d,hide:h,type:u,style:S,className:w,controlledProgress:B,progress:T||0})))},AS=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},Ote=TS(AS("bounce",!0));TS(AS("slide",!0));TS(AS("zoom"));TS(AS("flip"));const Mte={position:"top-right",transition:Ote,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function C0(t){let e={...Mte,...t};const n=t.stacked,[i,s]=K.useState(!0),r=K.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=Tte(e),{className:c,style:u,rtl:h,containerId:d}=e;function p(g){const y=wd("Toastify__toast-container",`Toastify__toast-container--${g}`,{"Toastify__toast-container--rtl":h});return Ga(c)?c({position:g,rtl:h,defaultClassName:y}):wd(y,nw(c))}function m(){n&&(s(!0),jt.play())}return Dte(()=>{if(n){var g;const y=r.current.querySelectorAll('[data-in="true"]'),v=12,b=(g=e.position)==null?void 0:g.includes("top");let w=0,S=0;Array.from(y).reverse().forEach((k,I)=>{const T=k;T.classList.add("Toastify__toast--stacked"),I>0&&(T.dataset.collapsed=`${i}`),T.dataset.pos||(T.dataset.pos=b?"top":"bot");const E=w*(i?.2:1)+(i?0:v*I);T.style.setProperty("--y",`${b?E:-1*E}px`),T.style.setProperty("--g",`${v}`),T.style.setProperty("--s",""+(1-(i?S:0))),w+=T.offsetHeight,S+=.025})}},[i,l,n]),xn.createElement("div",{ref:r,className:"Toastify",id:d,onMouseEnter:()=>{n&&(s(!1),jt.pause())},onMouseLeave:m},o((g,y)=>{const v=y.length?{...u}:{...u,pointerEvents:"none"};return xn.createElement("div",{className:p(g),style:v,key:`container-${g}`},y.map(b=>{let{content:w,props:S}=b;return xn.createElement($te,{...S,stacked:n,collapseAll:m,isIn:a(S.toastId,S.containerId),style:S.style,key:`toast-${S.key}`},w)}))}))}var pO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt=function(t,e){if(!t)throw k0(e)},k0=function(t){return new Error("Firebase Database ("+nj.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Fte=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},HA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=r>>2,h=(r&3)<<4|a>>4;let d=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(d=64)),i.push(n[u],n[h],n[d],n[p])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ij(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Fte(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||a==null||c==null||h==null)throw new Bte;const d=r<<2|a>>4;if(i.push(d),c!==64){const p=a<<4&240|c>>2;if(i.push(p),h!==64){const m=c<<6&192|h;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Bte extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sj=function(t){const e=ij(t);return HA.encodeByteArray(e,!0)},Kw=function(t){return sj(t).replace(/\./g,"")},K5=function(t){try{return HA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zte(t){return rj(void 0,t)}function rj(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!jte(n)||(t[n]=rj(t[n],e[n]));return t}function jte(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vte(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wte=()=>Vte().__FIREBASE_DEFAULTS__,Ute=()=>{if(typeof process>"u"||typeof pO>"u")return;const t=pO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Hte=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&K5(t[1]);return e&&JSON.parse(e)},oj=()=>{try{return Wte()||Ute()||Hte()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Gte=t=>{var e,n;return(n=(e=oj())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qte=t=>{const e=Gte(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},aj=()=>{var t;return(t=oj())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kte(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Kw(JSON.stringify(n)),Kw(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xte(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xte())}function Yte(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cj(){return nj.NODE_ADMIN===!0}function Zte(){try{return typeof indexedDB=="object"}catch{return!1}}function Qte(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jte="FirebaseError";class Vy extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Jte,Object.setPrototypeOf(this,Vy.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uj.prototype.create)}}class uj{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?ene(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Vy(s,a,i)}}function ene(t,e){return t.replace(tne,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const tne=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t){return JSON.parse(t)}function ur(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=function(t){let e={},n={},i={},s="";try{const r=t.split(".");e=Z1(K5(r[0])||""),n=Z1(K5(r[1])||""),s=r[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:s}},nne=function(t){const e=hj(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},ine=function(t){const e=hj(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Qg(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function mO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xw(t,e,n){const i={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=e.call(n,t[s],s,t));return i}function X5(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],o=e[s];if(gO(r)&&gO(o)){if(!X5(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function gO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sne(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rne{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)i[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(d<<1|d>>>31)&4294967295}let s=this.chain_[0],r=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^r&(o^a),u=1518500249):(c=r^o^a,u=1859775393):h<60?(c=r&o|a&(r|o),u=2400959708):(c=r^o^a,u=3395469782);const d=(s<<5|s>>>27)+c+l+u+i[h]&4294967295;l=a,a=o,o=(r<<30|r>>>2)&4294967295,r=s,s=d}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let s=0;const r=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(r[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(r),o=0;break}}else for(;s<n;)if(r[o]=e[s],++o,++s,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let r=24;r>=0;r-=8)e[i]=this.chain_[s]>>r&255,++i;return e}}function RS(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const one=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s>=55296&&s<=56319){const r=s-55296;i++,dt(i<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(i)-56320;s=65536+(r<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},LS=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t){return t&&t._delegate?t._delegate:t}class Q1{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ane{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new jy;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cne(e))try{this.getOrInitializeService({instanceIdentifier:op})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=op){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=op){return this.instances.has(e)}getOptions(e=op){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:lne(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=op){return this.component?this.component.multipleInstances?e:op:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lne(t){return t===op?void 0:t}function cne(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class une{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ane(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bi;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Bi||(Bi={}));const hne={debug:Bi.DEBUG,verbose:Bi.VERBOSE,info:Bi.INFO,warn:Bi.WARN,error:Bi.ERROR,silent:Bi.SILENT},dne=Bi.INFO,fne={[Bi.DEBUG]:"log",[Bi.VERBOSE]:"log",[Bi.INFO]:"info",[Bi.WARN]:"warn",[Bi.ERROR]:"error"},pne=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=fne[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let dj=class{constructor(e){this.name=e,this._logLevel=dne,this._logHandler=pne,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Bi))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hne[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Bi.DEBUG,...e),this._logHandler(this,Bi.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Bi.VERBOSE,...e),this._logHandler(this,Bi.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Bi.INFO,...e),this._logHandler(this,Bi.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Bi.WARN,...e),this._logHandler(this,Bi.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Bi.ERROR,...e),this._logHandler(this,Bi.ERROR,...e)}};const mne=(t,e)=>e.some(n=>t instanceof n);let vO,yO;function gne(){return vO||(vO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vne(){return yO||(yO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fj=new WeakMap,Y5=new WeakMap,pj=new WeakMap,zI=new WeakMap,GA=new WeakMap;function yne(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Fd(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&fj.set(n,t)}).catch(()=>{}),GA.set(e,t),e}function bne(t){if(Y5.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});Y5.set(t,e)}let Z5={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Y5.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pj.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fd(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xne(t){Z5=t(Z5)}function wne(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(jI(this),e,...n);return pj.set(i,e.sort?e.sort():[e]),Fd(i)}:vne().includes(t)?function(...e){return t.apply(jI(this),e),Fd(fj.get(this))}:function(...e){return Fd(t.apply(jI(this),e))}}function _ne(t){return typeof t=="function"?wne(t):(t instanceof IDBTransaction&&bne(t),mne(t,gne())?new Proxy(t,Z5):t)}function Fd(t){if(t instanceof IDBRequest)return yne(t);if(zI.has(t))return zI.get(t);const e=_ne(t);return e!==t&&(zI.set(t,e),GA.set(e,t)),e}const jI=t=>GA.get(t);function Sne(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=Fd(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Fd(o.result),l.oldVersion,l.newVersion,Fd(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Cne=["get","getKey","getAll","getAllKeys","count"],kne=["put","add","delete","clear"],VI=new Map;function bO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(VI.get(e))return VI.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=kne.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||Cne.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return VI.set(e,r),r}xne(t=>({...t,get:(e,n,i)=>bO(e,n)||t.get(e,n,i),has:(e,n)=>!!bO(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ine{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Nne(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Nne(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Q5="@firebase/app",xO="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new dj("@firebase/app"),Ene="@firebase/app-compat",Tne="@firebase/analytics-compat",Ane="@firebase/analytics",Rne="@firebase/app-check-compat",Lne="@firebase/app-check",Pne="@firebase/auth",Dne="@firebase/auth-compat",$ne="@firebase/database",One="@firebase/data-connect",Mne="@firebase/database-compat",Fne="@firebase/functions",Bne="@firebase/functions-compat",zne="@firebase/installations",jne="@firebase/installations-compat",Vne="@firebase/messaging",Wne="@firebase/messaging-compat",Une="@firebase/performance",Hne="@firebase/performance-compat",Gne="@firebase/remote-config",qne="@firebase/remote-config-compat",Kne="@firebase/storage",Xne="@firebase/storage-compat",Yne="@firebase/firestore",Zne="@firebase/vertexai-preview",Qne="@firebase/firestore-compat",Jne="firebase",eie="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5="[DEFAULT]",tie={[Q5]:"fire-core",[Ene]:"fire-core-compat",[Ane]:"fire-analytics",[Tne]:"fire-analytics-compat",[Lne]:"fire-app-check",[Rne]:"fire-app-check-compat",[Pne]:"fire-auth",[Dne]:"fire-auth-compat",[$ne]:"fire-rtdb",[One]:"fire-data-connect",[Mne]:"fire-rtdb-compat",[Fne]:"fire-fn",[Bne]:"fire-fn-compat",[zne]:"fire-iid",[jne]:"fire-iid-compat",[Vne]:"fire-fcm",[Wne]:"fire-fcm-compat",[Une]:"fire-perf",[Hne]:"fire-perf-compat",[Gne]:"fire-rc",[qne]:"fire-rc-compat",[Kne]:"fire-gcs",[Xne]:"fire-gcs-compat",[Yne]:"fire-fst",[Qne]:"fire-fst-compat",[Zne]:"fire-vertex","fire-js":"fire-js",[Jne]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw=new Map,nie=new Map,eE=new Map;function wO(t,e){try{t.container.addComponent(e)}catch(n){_h.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zw(t){const e=t.name;if(eE.has(e))return _h.debug(`There were multiple attempts to register component ${e}.`),!1;eE.set(e,t);for(const n of Yw.values())wO(n,t);for(const n of nie.values())wO(n,t);return!0}function iie(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bd=new uj("app","Firebase",sie);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rie{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Q1("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oie=eie;function mj(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:J5,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Bd.create("bad-app-name",{appName:String(s)});if(n||(n=aj()),!n)throw Bd.create("no-options");const r=Yw.get(s);if(r){if(X5(n,r.options)&&X5(i,r.config))return r;throw Bd.create("duplicate-app",{appName:s})}const o=new une(s);for(const l of eE.values())o.addComponent(l);const a=new rie(n,i,o);return Yw.set(s,a),a}function aie(t=J5){const e=Yw.get(t);if(!e&&t===J5&&aj())return mj();if(!e)throw Bd.create("no-app",{appName:t});return e}function Dg(t,e,n){var i;let s=(i=tie[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_h.warn(a.join(" "));return}Zw(new Q1(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lie="firebase-heartbeat-database",cie=1,J1="firebase-heartbeat-store";let WI=null;function gj(){return WI||(WI=Sne(lie,cie,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(J1)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bd.create("idb-open",{originalErrorMessage:t.message})})),WI}async function uie(t){try{const n=(await gj()).transaction(J1),i=await n.objectStore(J1).get(vj(t));return await n.done,i}catch(e){if(e instanceof Vy)_h.warn(e.message);else{const n=Bd.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_h.warn(n.message)}}}async function _O(t,e){try{const i=(await gj()).transaction(J1,"readwrite");await i.objectStore(J1).put(e,vj(t)),await i.done}catch(n){if(n instanceof Vy)_h.warn(n.message);else{const i=Bd.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_h.warn(i.message)}}}function vj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hie=1024,die=30*24*60*60*1e3;class fie{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mie(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=SO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)?void 0:(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=die}),this._storage.overwrite(this._heartbeatsCache))}catch(i){_h.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=SO(),{heartbeatsToSend:i,unsentEntries:s}=pie(this._heartbeatsCache.heartbeats),r=Kw(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return _h.warn(n),""}}}function SO(){return new Date().toISOString().substring(0,10)}function pie(t,e=hie){const n=[];let i=t.slice();for(const s of t){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),CO(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),CO(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class mie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zte()?Qte().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uie(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return _O(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return _O(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function CO(t){return Kw(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gie(t){Zw(new Q1("platform-logger",e=>new Ine(e),"PRIVATE")),Zw(new Q1("heartbeat",e=>new fie(e),"PRIVATE")),Dg(Q5,xO,t),Dg(Q5,xO,"esm2017"),Dg("fire-js","")}gie("");var vie="firebase",yie="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dg(vie,yie,"app");var kO={};const IO="@firebase/database",NO="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yj="";function bie(t){yj=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xie{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ur(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Z1(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wie{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Tu(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new xie(e)}}catch{}return new wie},Sp=bj("localStorage"),_ie=bj("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g=new dj("@firebase/database"),Sie=function(){let t=1;return function(){return t++}}(),xj=function(t){const e=one(t),n=new rne;n.update(e);const i=n.digest();return HA.encodeByteArray(i)},Wy=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Wy.apply(null,i):typeof i=="object"?e+=ur(i):e+=i,e+=" "}return e};let d1=null,EO=!0;const Cie=function(t,e){dt(!e,"Can't turn on custom loggers persistently."),$g.logLevel=Bi.VERBOSE,d1=$g.log.bind($g)},Vr=function(...t){if(EO===!0&&(EO=!1,d1===null&&_ie.get("logging_enabled")===!0&&Cie()),d1){const e=Wy.apply(null,t);d1(e)}},Uy=function(t){return function(...e){Vr(t,...e)}},tE=function(...t){const e="FIREBASE INTERNAL ERROR: "+Wy(...t);$g.error(e)},Sh=function(...t){const e=`FIREBASE FATAL ERROR: ${Wy(...t)}`;throw $g.error(e),new Error(e)},Xo=function(...t){const e="FIREBASE WARNING: "+Wy(...t);$g.warn(e)},kie=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},qA=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Iie=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},qp="[MIN_NAME]",Qd="[MAX_NAME]",mm=function(t,e){if(t===e)return 0;if(t===qp||e===Qd)return-1;if(e===qp||t===Qd)return 1;{const n=TO(t),i=TO(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},Nie=function(t,e){return t===e?0:t<e?-1:1},yv=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ur(e))},KA=function(t){if(typeof t!="object"||t===null)return ur(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=ur(e[i]),n+=":",n+=KA(t[e[i]]);return n+="}",n},wj=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let s=0;s<n;s+=e)s+e>n?i.push(t.substring(s,n)):i.push(t.substring(s,s+e));return i};function Hr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const _j=function(t){dt(!qA(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let s,r,o,a,l;t===0?(r=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),r=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(r=0,o=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(s?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},Eie=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Tie=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Aie(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const Rie=new RegExp("^-?(0*)\\d{1,10}$"),Lie=-2147483648,Pie=2147483647,TO=function(t){if(Rie.test(t)){const e=Number(t);if(e>=Lie&&e<=Pie)return e}return null},I0=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Xo("Exception was thrown by user callback.",n),e},Math.floor(0))}},Die=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},f1=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ie{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Xo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oie{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Vr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xo(e)}}class iw{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}iw.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="5",Sj="v",Cj="s",kj="r",Ij="f",Nj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ej="ls",Tj="p",nE="ac",Aj="websocket",Rj="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n,i,s,r=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Sp.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Sp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Mie(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Pj(t,e,n){dt(typeof e=="string","typeof type must == string"),dt(typeof n=="object","typeof params must == object");let i;if(e===Aj)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Rj)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Mie(t)&&(n.ns=t.namespace);const s=[];return Hr(n,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fie{constructor(){this.counters_={}}incrementCounter(e,n=1){Tu(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return zte(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI={},HI={};function YA(t){const e=t.toString();return UI[e]||(UI[e]=new Fie),UI[e]}function Bie(t,e){const n=t.toString();return HI[n]||(HI[n]=e()),HI[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zie{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&I0(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO="start",jie="close",Vie="pLPCommand",Wie="pRTLPCB",Dj="id",$j="pw",Oj="ser",Uie="cb",Hie="seg",Gie="ts",qie="d",Kie="dframe",Mj=1870,Fj=30,Xie=Mj-Fj,Yie=25e3,Zie=3e4;class Ig{constructor(e,n,i,s,r,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Uy(e),this.stats_=YA(n),this.urlFn=l=>(this.appCheckToken&&(l[nE]=this.appCheckToken),Pj(n,Rj,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new zie(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Zie)),Iie(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ZA((...r)=>{const[o,a,l,c,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===AO)this.id=a,this.password=l;else if(o===jie)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[AO]="t",i[Oj]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[Uie]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Sj]=XA,this.transportSessionId&&(i[Cj]=this.transportSessionId),this.lastSessionId&&(i[Ej]=this.lastSessionId),this.applicationId&&(i[Tj]=this.applicationId),this.appCheckToken&&(i[nE]=this.appCheckToken),typeof location<"u"&&location.hostname&&Nj.test(location.hostname)&&(i[kj]=Ij);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ig.forceAllow_=!0}static forceDisallow(){Ig.forceDisallow_=!0}static isAvailable(){return Ig.forceAllow_?!0:!Ig.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Eie()&&!Tie()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ur(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=sj(n),s=wj(i,Xie);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[Kie]="t",i[Dj]=e,i[$j]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ur(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class ZA{constructor(e,n,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Sie(),window[Vie+this.uniqueCallbackIdentifier]=e,window[Wie+this.uniqueCallbackIdentifier]=n,this.myIFrame=ZA.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Vr("frame writing exception"),a.stack&&Vr(a.stack),Vr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Vr("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Dj]=this.myID,e[$j]=this.myPW,e[Oj]=this.currentSerial;let n=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Fj+i.length<=Mj;){const o=this.pendingSegs.shift();i=i+"&"+Hie+s+"="+o.seg+"&"+Gie+s+"="+o.ts+"&"+qie+s+"="+o.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(Yie)),r=()=>{clearTimeout(s),i()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Vr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qie=16384,Jie=45e3;let Qw=null;typeof MozWebSocket<"u"?Qw=MozWebSocket:typeof WebSocket<"u"&&(Qw=WebSocket);class mc{constructor(e,n,i,s,r,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Uy(this.connId),this.stats_=YA(n),this.connURL=mc.connectionURL_(n,o,a,s,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,s,r){const o={};return o[Sj]=XA,typeof location<"u"&&location.hostname&&Nj.test(location.hostname)&&(o[kj]=Ij),n&&(o[Cj]=n),i&&(o[Ej]=i),s&&(o[nE]=s),r&&(o[Tj]=r),Pj(e,Aj,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Sp.set("previous_websocket_failure",!0);try{let i;cj(),this.mySock=new Qw(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){mc.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Qw!==null&&!mc.forceDisallow_}static previouslyFailed(){return Sp.isInMemoryStorage||Sp.get("previous_websocket_failure")===!0}markConnectionHealthy(){Sp.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Z1(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(dt(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=ur(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=wj(n,Qie);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Jie))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}mc.responsesRequiredToBeHealthy=2;mc.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ig,mc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=mc&&mc.isAvailable();let i=n&&!mc.previouslyFailed();if(e.webSocketOnly&&(n||Xo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[mc];else{const s=this.transports_=[];for(const r of ey.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r);ey.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ey.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ese=6e4,tse=5e3,nse=10*1024,ise=100*1024,GI="t",RO="d",sse="s",LO="r",rse="e",PO="o",DO="a",$O="n",OO="p",ose="h";class ase{constructor(e,n,i,s,r,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Uy("c:"+this.id+":"),this.transportManager_=new ey(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=f1(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>ise?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>nse?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(GI in e){const n=e[GI];n===DO?this.upgradeIfSecondaryHealthy_():n===LO?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===PO&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=yv("t",e),i=yv("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:OO,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:DO,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:$O,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=yv("t",e),i=yv("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=yv(GI,e);if(RO in e){const i=e[RO];if(n===ose){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===$O){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===sse?this.onConnectionShutdown_(i):n===LO?this.onReset_(i):n===rse?tE("Server Error: "+i):n===PO?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):tE("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),XA!==i&&Xo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),f1(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ese))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):f1(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tse))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:OO,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Sp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{put(e,n,i,s){}merge(e,n,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.allowedEvents_=e,this.listeners_={},dt(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const s=this.getInitialEvent(e);s&&n.apply(i,s)}off(e,n,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(e){dt(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw extends zj{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!lj()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Jw}getInitialEvent(e){return dt(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=32,FO=768;class _i{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ii(){return new _i("")}function Ln(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Jd(t){return t.pieces_.length-t.pieceNum_}function zi(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new _i(t.pieces_,e)}function QA(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function lse(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ty(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function jj(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new _i(e,0)}function xs(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof _i)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new _i(n,0)}function Pn(t){return t.pieceNum_>=t.pieces_.length}function Go(t,e){const n=Ln(t),i=Ln(e);if(n===null)return e;if(n===i)return Go(zi(t),zi(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function cse(t,e){const n=ty(t,0),i=ty(e,0);for(let s=0;s<n.length&&s<i.length;s++){const r=mm(n[s],i[s]);if(r!==0)return r}return n.length===i.length?0:n.length<i.length?-1:1}function JA(t,e){if(Jd(t)!==Jd(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Cl(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Jd(t)>Jd(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class use{constructor(e,n){this.errorPrefix_=n,this.parts_=ty(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=LS(this.parts_[i]);Vj(this)}}function hse(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=LS(e),Vj(t)}function dse(t){const e=t.parts_.pop();t.byteLength_-=LS(e),t.parts_.length>0&&(t.byteLength_-=1)}function Vj(t){if(t.byteLength_>FO)throw new Error(t.errorPrefix_+"has a key path longer than "+FO+" bytes ("+t.byteLength_+").");if(t.parts_.length>MO)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+MO+") or object contains a cycle "+ap(t))}function ap(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR extends zj{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new eR}getInitialEvent(e){return dt(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=1e3,fse=60*5*1e3,BO=30*1e3,pse=1.3,mse=3e4,gse="server_kill",zO=3;class dh extends Bj{constructor(e,n,i,s,r,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=dh.nextPersistentConnectionId_++,this.log_=Uy("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bv,this.maxReconnectDelay_=fse,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!cj())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");eR.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Jw.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const s=++this.requestNumber_,r={r:s,a:e,b:n};this.log_(ur(r)),dt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const n=new jy,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,i,s){this.initConnection_();const r=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),dt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),dt(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:i};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+i+" for "+s);const r={p:i},o="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(o,r,a=>{const l=a.d,c=a.s;dh.warnOnListenWarnings_(l,n),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Tu(e,"w")){const i=Qg(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();Xo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||ine(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=BO)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=nne(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,s=>{const r=s.s,o=s.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),dt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,n)}sendUnlisten_(e,n,i,s){this.log_("Unlisten on "+e+" for "+n);const r={p:e},o="n";s&&(r.q=i,r.t=s),this.sendRequest(o,r)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,s){const r={p:n,d:i};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,i,s){this.putInternal("p",e,n,i,s)}merge(e,n,i,s){this.putInternal("m",e,n,i,s)}putInternal(e,n,i,s,r){this.initConnection_();const o={p:n,d:i};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const r=i.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ur(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):tE("Unrecognized action received from server: "+ur(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){dt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bv,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=bv,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>mse&&(this.reconnectDelay_=bv),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*pse)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+dh.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(h){dt(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Vr("getToken() completed but was canceled"):(Vr("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new ase(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,p=>{Xo(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(gse)},r))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Xo(h),l())}}}interrupt(e){Vr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Vr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],mO(this.interruptReasons_)&&(this.reconnectDelay_=bv,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(r=>KA(r)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const i=new _i(e).toString();let s;if(this.listens.has(i)){const r=this.listens.get(i);s=r.get(n),r.delete(n),r.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,n){Vr("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=zO&&(this.reconnectDelay_=BO,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Vr("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=zO&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+yj.replace(/\./g,"-")]=1,lj()?e["framework.cordova"]=1:Yte()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Jw.getInstance().currentlyOnline();return mO(this.interruptReasons_)&&e}}dh.nextPersistentConnectionId_=0;dh.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Dn(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new Dn(qp,e),s=new Dn(qp,n);return this.compare(i,s)!==0}minPost(){return Dn.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t2;class Wj extends PS{static get __EMPTY_NODE(){return t2}static set __EMPTY_NODE(e){t2=e}compare(e,n){return mm(e.name,n.name)}isDefinedOn(e){throw k0("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Dn.MIN}maxPost(){return new Dn(Qd,t2)}makePost(e,n){return dt(typeof e=="string","KeyIndex indexValue must always be a string."),new Dn(e,t2)}toString(){return".key"}}const Lp=new Wj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ir{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??Ir.RED,this.left=s??wa.EMPTY_NODE,this.right=r??wa.EMPTY_NODE}copy(e,n,i,s,r){return new Ir(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return r<0?s=s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return wa.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,s;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return wa.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ir.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ir.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ir.RED=!0;Ir.BLACK=!1;class vse{copy(e,n,i,s,r){return this}insert(e,n,i){return new Ir(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class wa{constructor(e,n=wa.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new wa(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ir.BLACK,null,null))}remove(e){return new wa(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ir.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new n2(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new n2(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new n2(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new n2(this.root_,null,this.comparator_,!0,e)}}wa.EMPTY_NODE=new vse;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yse(t,e){return mm(t.name,e.name)}function tR(t,e){return mm(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iE;function bse(t){iE=t}const Uj=function(t){return typeof t=="number"?"number:"+_j(t):"string:"+t},Hj=function(t){if(t.isLeafNode()){const e=t.val();dt(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Tu(e,".sv"),"Priority must be a string or number.")}else dt(t===iE||t.isEmpty(),"priority of unexpected type.");dt(t===iE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jO;class Cr{constructor(e,n=Cr.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,dt(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Hj(this.priorityNode_)}static set __childrenNodeConstructor(e){jO=e}static get __childrenNodeConstructor(){return jO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Cr(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Cr.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Pn(e)?this:Ln(e)===".priority"?this.priorityNode_:Cr.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Cr.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Ln(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(dt(i!==".priority"||Jd(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Cr.__childrenNodeConstructor.EMPTY_NODE.updateChild(zi(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Uj(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=_j(this.value_):e+=this.value_,this.lazyHash_=xj(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Cr.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Cr.__childrenNodeConstructor?-1:(dt(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,s=Cr.VALUE_TYPE_ORDER.indexOf(n),r=Cr.VALUE_TYPE_ORDER.indexOf(i);return dt(s>=0,"Unknown leaf type: "+n),dt(r>=0,"Unknown leaf type: "+i),s===r?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Cr.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gj,qj;function xse(t){Gj=t}function wse(t){qj=t}class _se extends PS{compare(e,n){const i=e.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?mm(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Dn.MIN}maxPost(){return new Dn(Qd,new Cr("[PRIORITY-POST]",qj))}makePost(e,n){const i=Gj(e);return new Dn(n,new Cr("[PRIORITY-POST]",i))}toString(){return".priority"}}const hs=new _se;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sse=Math.log(2);class Cse{constructor(e){const n=r=>parseInt(Math.log(r)/Sse,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const e_=function(t,e,n,i){t.sort(e);const s=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=t[l],d=n?n(h):h,new Ir(d,h.node,Ir.BLACK,null,null);{const p=parseInt(u/2,10)+l,m=s(l,p),g=s(p+1,c);return h=t[p],d=n?n(h):h,new Ir(d,h.node,Ir.BLACK,m,g)}},r=function(l){let c=null,u=null,h=t.length;const d=function(m,g){const y=h-m,v=h;h-=m;const b=s(y+1,v),w=t[y],S=n?n(w):w;p(new Ir(S,w.node,g,null,b))},p=function(m){c?(c.left=m,c=m):(u=m,c=m)};for(let m=0;m<l.count;++m){const g=l.nextBitIsOne(),y=Math.pow(2,l.count-(m+1));g?d(y,Ir.BLACK):(d(y,Ir.BLACK),d(y,Ir.RED))}return u},o=new Cse(t.length),a=r(o);return new wa(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qI;const Jm={};class ih{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return dt(Jm&&hs,"ChildrenNode.ts has not been loaded"),qI=qI||new ih({".priority":Jm},{".priority":hs}),qI}get(e){const n=Qg(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof wa?n:null}hasIndex(e){return Tu(this.indexSet_,e.toString())}addIndex(e,n){dt(e!==Lp,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=n.getIterator(Dn.Wrap);let o=r.getNext();for(;o;)s=s||e.isDefinedOn(o.node),i.push(o),o=r.getNext();let a;s?a=e_(i,e.getCompare()):a=Jm;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new ih(u,c)}addToIndexes(e,n){const i=Xw(this.indexes_,(s,r)=>{const o=Qg(this.indexSet_,r);if(dt(o,"Missing index implementation for "+r),s===Jm)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Dn.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),e_(a,o.getCompare())}else return Jm;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new Dn(e.name,a))),l.insert(e,e.node)}});return new ih(i,this.indexSet_)}removeFromIndexes(e,n){const i=Xw(this.indexes_,s=>{if(s===Jm)return s;{const r=n.get(e.name);return r?s.remove(new Dn(e.name,r)):s}});return new ih(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xv;class rn{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Hj(this.priorityNode_),this.children_.isEmpty()&&dt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xv||(xv=new rn(new wa(tR),null,ih.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xv}updatePriority(e){return this.children_.isEmpty()?this:new rn(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?xv:n}}getChild(e){const n=Ln(e);return n===null?this:this.getImmediateChild(n).getChild(zi(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(dt(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new Dn(e,n);let s,r;n.isEmpty()?(s=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(i,this.children_));const o=s.isEmpty()?xv:this.priorityNode_;return new rn(s,o,r)}}updateChild(e,n){const i=Ln(e);if(i===null)return n;{dt(Ln(e)!==".priority"||Jd(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(zi(e),n);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,s=0,r=!0;if(this.forEachChild(hs,(o,a)=>{n[o]=a.val(e),i++,r&&rn.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):r=!1}),!e&&r&&s<2*i){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Uj(this.getPriority().val())+":"),this.forEachChild(hs,(n,i)=>{const s=i.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":xj(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const s=this.resolveIndex_(i);if(s){const r=s.getPredecessorKey(new Dn(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Dn(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Dn(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Dn.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)<0;)s.getNext(),r=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Dn.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)>0;)s.getNext(),r=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Hy?-1:0}withIndex(e){if(e===Lp||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new rn(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Lp||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(hs),s=n.getIterator(hs);let r=i.getNext(),o=s.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=i.getNext(),o=s.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Lp?null:this.indexMap_.get(e.toString())}}rn.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class kse extends rn{constructor(){super(new wa(tR),rn.EMPTY_NODE,ih.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return rn.EMPTY_NODE}isEmpty(){return!1}}const Hy=new kse;Object.defineProperties(Dn,{MIN:{value:new Dn(qp,rn.EMPTY_NODE)},MAX:{value:new Dn(Qd,Hy)}});Wj.__EMPTY_NODE=rn.EMPTY_NODE;Cr.__childrenNodeConstructor=rn;bse(Hy);wse(Hy);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ise=!0;function lr(t,e=null){if(t===null)return rn.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),dt(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Cr(n,lr(e))}if(!(t instanceof Array)&&Ise){const n=[];let i=!1;if(Hr(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=lr(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new Dn(o,l)))}}),n.length===0)return rn.EMPTY_NODE;const r=e_(n,yse,o=>o.name,tR);if(i){const o=e_(n,hs.getCompare());return new rn(r,lr(e),new ih({".priority":o},{".priority":hs}))}else return new rn(r,lr(e),ih.Default)}else{let n=rn.EMPTY_NODE;return Hr(t,(i,s)=>{if(Tu(t,i)&&i.substring(0,1)!=="."){const r=lr(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(lr(e))}}xse(lr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR extends PS{constructor(e){super(),this.indexPath_=e,dt(!Pn(e)&&Ln(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?mm(e.name,n.name):r}makePost(e,n){const i=lr(e),s=rn.EMPTY_NODE.updateChild(this.indexPath_,i);return new Dn(n,s)}maxPost(){const e=rn.EMPTY_NODE.updateChild(this.indexPath_,Hy);return new Dn(Qd,e)}toString(){return ty(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nse extends PS{compare(e,n){const i=e.node.compareTo(n.node);return i===0?mm(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Dn.MIN}maxPost(){return Dn.MAX}makePost(e,n){const i=lr(e);return new Dn(n,i)}toString(){return".value"}}const Kj=new Nse;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(t){return{type:"value",snapshotNode:t}}function Jg(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ny(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function iy(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Ese(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.index_=e}updateChild(e,n,i,s,r,o){dt(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(i.getChild(s))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(n)?o.trackChildChange(ny(n,a)):dt(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Jg(n,i)):o.trackChildChange(iy(n,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(hs,(s,r)=>{n.hasChild(s)||i.trackChildChange(ny(s,r))}),n.isLeafNode()||n.forEachChild(hs,(s,r)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(r)||i.trackChildChange(iy(s,r,o))}else i.trackChildChange(Jg(s,r))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?rn.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.indexedFilter_=new iR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=sy.getStartPost_(e),this.endPost_=sy.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,s,r,o){return this.matches(new Dn(n,i))||(i=rn.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,s,r,o)}updateFullNode(e,n,i){n.isLeafNode()&&(n=rn.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(rn.EMPTY_NODE);const r=this;return n.forEachChild(hs,(o,a)=>{r.matches(new Dn(o,a))||(s=s.updateImmediateChild(o,rn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tse{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new sy(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,s,r,o){return this.rangedFilter_.matches(new Dn(n,i))||(i=rn.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,s,r,o):this.fullLimitUpdateChild_(e,n,i,r,o)}updateFullNode(e,n,i){let s;if(n.isLeafNode()||n.isEmpty())s=rn.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=rn.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){const a=r.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(rn.EMPTY_NODE);let r;this.reverse_?r=s.getReverseIterator(this.index_):r=s.getIterator(this.index_);let o=0;for(;r.hasNext();){const a=r.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,rn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,s,r){let o;if(this.reverse_){const h=this.index_.getCompare();o=(d,p)=>h(p,d)}else o=this.index_.getCompare();const a=e;dt(a.numChildren()===this.limit_,"");const l=new Dn(n,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let d=s.getChildAfterChild(this.index_,c,this.reverse_);for(;d!=null&&(d.name===n||a.hasChild(d.name));)d=s.getChildAfterChild(this.index_,d,this.reverse_);const p=d==null?1:o(d,l);if(u&&!i.isEmpty()&&p>=0)return r!=null&&r.trackChildChange(iy(n,i,h)),a.updateImmediateChild(n,i);{r!=null&&r.trackChildChange(ny(n,h));const g=a.updateImmediateChild(n,rn.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(r!=null&&r.trackChildChange(Jg(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}}else return i.isEmpty()?e:u&&o(c,l)>=0?(r!=null&&(r.trackChildChange(ny(c.name,c.node)),r.trackChildChange(Jg(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(c.name,rn.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hs}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return dt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return dt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qp}hasEnd(){return this.endSet_}getIndexEndValue(){return dt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return dt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return dt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===hs}copy(){const e=new sR;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ase(t){return t.loadsAllData()?new iR(t.getIndex()):t.hasLimit()?new Tse(t):new sy(t)}function Rse(t,e,n){const i=t.copy();return i.startSet_=!0,e===void 0&&(e=null),i.indexStartValue_=e,n!=null?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function Lse(t,e,n){const i=t.copy();return i.endSet_=!0,e===void 0&&(e=null),i.indexEndValue_=e,n!==void 0?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function Pse(t,e){const n=t.copy();return n.index_=e,n}function VO(t){const e={};if(t.isDefault())return e;let n;if(t.index_===hs?n="$priority":t.index_===Kj?n="$value":t.index_===Lp?n="$key":(dt(t.index_ instanceof nR,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ur(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=ur(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+ur(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=ur(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+ur(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function WO(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==hs&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_ extends Bj{constructor(e,n,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=Uy("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(dt(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,s){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=t_.getListenId_(e,i),a={};this.listens_[o]=a;const l=VO(e._queryParams);this.restRequest_(r+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(r,h,!1,i),Qg(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",s(d,null)}})}unlisten(e,n){const i=t_.getListenId_(e,n);delete this.listens_[i]}get(e){const n=VO(e._queryParams),i=e._path.toString(),s=new jy;return this.restRequest_(i+".json",n,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(i,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+sne(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Z1(a.responseText)}catch{Xo("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&Xo("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dse{constructor(){this.rootNode_=rn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(){return{value:null,children:new Map}}function Yj(t,e,n){if(Pn(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=Ln(e);t.children.has(i)||t.children.set(i,n_());const s=t.children.get(i);e=zi(e),Yj(s,e,n)}}function sE(t,e,n){t.value!==null?n(e,t.value):$se(t,(i,s)=>{const r=new _i(e.toString()+"/"+i);sE(s,r,n)})}function $se(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ose{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Hr(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=10*1e3,Mse=30*1e3,Fse=5*60*1e3;class Bse{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Ose(e);const i=UO+(Mse-UO)*Math.random();f1(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Hr(e,(s,r)=>{r>0&&Tu(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),f1(this.reportStats_.bind(this),Math.floor(Math.random()*2*Fse))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gc;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(gc||(gc={}));function rR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function oR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function aR(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=gc.ACK_USER_WRITE,this.source=rR()}operationForChild(e){if(Pn(this.path)){if(this.affectedTree.value!=null)return dt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new _i(e));return new i_(ii(),n,this.revert)}}else return dt(Ln(this.path)===e,"operationForChild called for unrelated child."),new i_(zi(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,n){this.source=e,this.path=n,this.type=gc.LISTEN_COMPLETE}operationForChild(e){return Pn(this.path)?new ry(this.source,ii()):new ry(this.source,zi(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=gc.OVERWRITE}operationForChild(e){return Pn(this.path)?new Kp(this.source,ii(),this.snap.getImmediateChild(e)):new Kp(this.source,zi(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lR=class rE{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=gc.MERGE}operationForChild(e){if(Pn(this.path)){const n=this.children.subtree(new _i(e));return n.isEmpty()?null:n.value?new Kp(this.source,ii(),n.value):new rE(this.source,ii(),n)}else return dt(Ln(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new rE(this.source,zi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Pn(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ln(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zse{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function jse(t,e,n,i){const s=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(Ese(o.childName,o.snapshotNode))}),wv(t,s,"child_removed",e,i,n),wv(t,s,"child_added",e,i,n),wv(t,s,"child_moved",r,i,n),wv(t,s,"child_changed",e,i,n),wv(t,s,"value",e,i,n),s}function wv(t,e,n,i,s,r){const o=i.filter(a=>a.type===n);o.sort((a,l)=>Wse(t,a,l)),o.forEach(a=>{const l=Vse(t,a,r);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function Vse(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Wse(t,e,n){if(e.childName==null||n.childName==null)throw k0("Should only compare child_ events.");const i=new Dn(e.childName,e.snapshotNode),s=new Dn(n.childName,n.snapshotNode);return t.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t,e){return{eventCache:t,serverCache:e}}function p1(t,e,n,i){return DS(new ef(e,n,i),t.serverCache)}function Zj(t,e,n,i){return DS(t.eventCache,new ef(e,n,i))}function s_(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Xp(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KI;const Use=()=>(KI||(KI=new wa(Nie)),KI);class Mi{constructor(e,n=Use()){this.value=e,this.children=n}static fromObject(e){let n=new Mi(null);return Hr(e,(i,s)=>{n=n.set(new _i(i),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ii(),value:this.value};if(Pn(e))return null;{const i=Ln(e),s=this.children.get(i);if(s!==null){const r=s.findRootMostMatchingPathAndValue(zi(e),n);return r!=null?{path:xs(new _i(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Pn(e))return this;{const n=Ln(e),i=this.children.get(n);return i!==null?i.subtree(zi(e)):new Mi(null)}}set(e,n){if(Pn(e))return new Mi(n,this.children);{const i=Ln(e),r=(this.children.get(i)||new Mi(null)).set(zi(e),n),o=this.children.insert(i,r);return new Mi(this.value,o)}}remove(e){if(Pn(e))return this.children.isEmpty()?new Mi(null):new Mi(null,this.children);{const n=Ln(e),i=this.children.get(n);if(i){const s=i.remove(zi(e));let r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new Mi(null):new Mi(this.value,r)}else return this}}get(e){if(Pn(e))return this.value;{const n=Ln(e),i=this.children.get(n);return i?i.get(zi(e)):null}}setTree(e,n){if(Pn(e))return n;{const i=Ln(e),r=(this.children.get(i)||new Mi(null)).setTree(zi(e),n);let o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),new Mi(this.value,o)}}fold(e){return this.fold_(ii(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(xs(e,s),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,ii(),n)}findOnPath_(e,n,i){const s=this.value?i(n,this.value):!1;if(s)return s;if(Pn(e))return null;{const r=Ln(e),o=this.children.get(r);return o?o.findOnPath_(zi(e),xs(n,r),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ii(),n)}foreachOnPath_(e,n,i){if(Pn(e))return this;{this.value&&i(n,this.value);const s=Ln(e),r=this.children.get(s);return r?r.foreachOnPath_(zi(e),xs(n,s),i):new Mi(null)}}foreach(e){this.foreach_(ii(),e)}foreach_(e,n){this.children.inorderTraversal((i,s)=>{s.foreach_(xs(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e){this.writeTree_=e}static empty(){return new _c(new Mi(null))}}function m1(t,e,n){if(Pn(e))return new _c(new Mi(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let r=i.value;const o=Go(s,e);return r=r.updateChild(o,n),new _c(t.writeTree_.set(s,r))}else{const s=new Mi(n),r=t.writeTree_.setTree(e,s);return new _c(r)}}}function oE(t,e,n){let i=t;return Hr(n,(s,r)=>{i=m1(i,xs(e,s),r)}),i}function HO(t,e){if(Pn(e))return _c.empty();{const n=t.writeTree_.setTree(e,new Mi(null));return new _c(n)}}function aE(t,e){return gm(t,e)!=null}function gm(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Go(n.path,e)):null}function GO(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(hs,(i,s)=>{e.push(new Dn(i,s))}):t.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new Dn(i,s.value))}),e}function zd(t,e){if(Pn(e))return t;{const n=gm(t,e);return n!=null?new _c(new Mi(n)):new _c(t.writeTree_.subtree(e))}}function lE(t){return t.writeTree_.isEmpty()}function e0(t,e){return Qj(ii(),t.writeTree_,e)}function Qj(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((s,r)=>{s===".priority"?(dt(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=Qj(xs(t,s),r,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(xs(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t,e){return nV(e,t)}function Hse(t,e,n,i,s){dt(i>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:s}),s&&(t.visibleWrites=m1(t.visibleWrites,e,n)),t.lastWriteId=i}function Gse(t,e,n,i){dt(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=oE(t.visibleWrites,e,n),t.lastWriteId=i}function qse(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function Kse(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);dt(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let s=i.visible,r=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Xse(a,i.path)?s=!1:Cl(i.path,a.path)&&(r=!0)),o--}if(s){if(r)return Yse(t),!0;if(i.snap)t.visibleWrites=HO(t.visibleWrites,i.path);else{const a=i.children;Hr(a,l=>{t.visibleWrites=HO(t.visibleWrites,xs(i.path,l))})}return!0}else return!1}function Xse(t,e){if(t.snap)return Cl(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Cl(xs(t.path,n),e))return!0;return!1}function Yse(t){t.visibleWrites=Jj(t.allWrites,Zse,ii()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Zse(t){return t.visible}function Jj(t,e,n){let i=_c.empty();for(let s=0;s<t.length;++s){const r=t[s];if(e(r)){const o=r.path;let a;if(r.snap)Cl(n,o)?(a=Go(n,o),i=m1(i,a,r.snap)):Cl(o,n)&&(a=Go(o,n),i=m1(i,ii(),r.snap.getChild(a)));else if(r.children){if(Cl(n,o))a=Go(n,o),i=oE(i,a,r.children);else if(Cl(o,n))if(a=Go(o,n),Pn(a))i=oE(i,ii(),r.children);else{const l=Qg(r.children,Ln(a));if(l){const c=l.getChild(zi(a));i=m1(i,ii(),c)}}}else throw k0("WriteRecord should have .snap or .children")}}return i}function eV(t,e,n,i,s){if(!i&&!s){const r=gm(t.visibleWrites,e);if(r!=null)return r;{const o=zd(t.visibleWrites,e);if(lE(o))return n;if(n==null&&!aE(o,ii()))return null;{const a=n||rn.EMPTY_NODE;return e0(o,a)}}}else{const r=zd(t.visibleWrites,e);if(!s&&lE(r))return n;if(!s&&n==null&&!aE(r,ii()))return null;{const o=function(c){return(c.visible||s)&&(!i||!~i.indexOf(c.writeId))&&(Cl(c.path,e)||Cl(e,c.path))},a=Jj(t.allWrites,o,e),l=n||rn.EMPTY_NODE;return e0(a,l)}}}function Qse(t,e,n){let i=rn.EMPTY_NODE;const s=gm(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(hs,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(n){const r=zd(t.visibleWrites,e);return n.forEachChild(hs,(o,a)=>{const l=e0(zd(r,new _i(o)),a);i=i.updateImmediateChild(o,l)}),GO(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const r=zd(t.visibleWrites,e);return GO(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function Jse(t,e,n,i,s){dt(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=xs(e,n);if(aE(t.visibleWrites,r))return null;{const o=zd(t.visibleWrites,r);return lE(o)?s.getChild(n):e0(o,s.getChild(n))}}function ere(t,e,n,i){const s=xs(e,n),r=gm(t.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){const o=zd(t.visibleWrites,s);return e0(o,i.getNode().getImmediateChild(n))}else return null}function tre(t,e){return gm(t.visibleWrites,e)}function nre(t,e,n,i,s,r,o){let a;const l=zd(t.visibleWrites,e),c=gm(l,ii());if(c!=null)a=c;else if(n!=null)a=e0(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=r?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let p=d.getNext();for(;p&&u.length<s;)h(p,i)!==0&&u.push(p),p=d.getNext();return u}else return[]}function ire(){return{visibleWrites:_c.empty(),allWrites:[],lastWriteId:-1}}function r_(t,e,n,i){return eV(t.writeTree,t.treePath,e,n,i)}function cR(t,e){return Qse(t.writeTree,t.treePath,e)}function qO(t,e,n,i){return Jse(t.writeTree,t.treePath,e,n,i)}function o_(t,e){return tre(t.writeTree,xs(t.treePath,e))}function sre(t,e,n,i,s,r){return nre(t.writeTree,t.treePath,e,n,i,s,r)}function uR(t,e,n){return ere(t.writeTree,t.treePath,e,n)}function tV(t,e){return nV(xs(t.treePath,e),t.writeTree)}function nV(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rre{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;dt(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),dt(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,iy(i,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,ny(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,Jg(i,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,iy(i,e.snapshotNode,s.oldSnap));else throw k0("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ore{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const iV=new ore;class hR{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new ef(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uR(this.writes_,e,i)}}getChildAfterChild(e,n,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Xp(this.viewCache_),r=sre(this.writes_,s,n,1,i,e);return r.length===0?null:r[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function are(t){return{filter:t}}function lre(t,e){dt(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),dt(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function cre(t,e,n,i,s){const r=new rre;let o,a;if(n.type===gc.OVERWRITE){const c=n;c.source.fromUser?o=cE(t,e,c.path,c.snap,i,s,r):(dt(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Pn(c.path),o=a_(t,e,c.path,c.snap,i,s,a,r))}else if(n.type===gc.MERGE){const c=n;c.source.fromUser?o=hre(t,e,c.path,c.children,i,s,r):(dt(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=uE(t,e,c.path,c.children,i,s,a,r))}else if(n.type===gc.ACK_USER_WRITE){const c=n;c.revert?o=pre(t,e,c.path,i,s,r):o=dre(t,e,c.path,c.affectedTree,i,s,r)}else if(n.type===gc.LISTEN_COMPLETE)o=fre(t,e,n.path,i,r);else throw k0("Unknown operation type: "+n.type);const l=r.getChanges();return ure(e,o,l),{viewCache:o,changes:l}}function ure(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=s_(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(Xj(s_(e)))}}function sV(t,e,n,i,s,r){const o=e.eventCache;if(o_(i,n)!=null)return e;{let a,l;if(Pn(n))if(dt(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Xp(e),u=c instanceof rn?c:rn.EMPTY_NODE,h=cR(i,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,r)}else{const c=r_(i,Xp(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{const c=Ln(n);if(c===".priority"){dt(Jd(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=qO(i,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=zi(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const d=qO(i,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=uR(i,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,s,r):a=o.getNode()}}return p1(e,a,o.isFullyInitialized()||Pn(n),t.filter.filtersNodes())}}function a_(t,e,n,i,s,r,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(Pn(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),p,null)}else{const p=Ln(n);if(!l.isCompleteForPath(n)&&Jd(n)>1)return e;const m=zi(n),y=l.getNode().getImmediateChild(p).updateChild(m,i);p===".priority"?c=u.updatePriority(l.getNode(),y):c=u.updateChild(l.getNode(),p,y,m,iV,null)}const h=Zj(e,c,l.isFullyInitialized()||Pn(n),u.filtersNodes()),d=new hR(s,h,r);return sV(t,h,n,s,d,a)}function cE(t,e,n,i,s,r,o){const a=e.eventCache;let l,c;const u=new hR(s,e,r);if(Pn(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=p1(e,c,!0,t.filter.filtersNodes());else{const h=Ln(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=p1(e,c,a.isFullyInitialized(),a.isFiltered());else{const d=zi(n),p=a.getNode().getImmediateChild(h);let m;if(Pn(d))m=i;else{const g=u.getCompleteChild(h);g!=null?QA(d)===".priority"&&g.getChild(jj(d)).isEmpty()?m=g:m=g.updateChild(d,i):m=rn.EMPTY_NODE}if(p.equals(m))l=e;else{const g=t.filter.updateChild(a.getNode(),h,m,d,u,o);l=p1(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function KO(t,e){return t.eventCache.isCompleteForChild(e)}function hre(t,e,n,i,s,r,o){let a=e;return i.foreach((l,c)=>{const u=xs(n,l);KO(e,Ln(u))&&(a=cE(t,a,u,c,s,r,o))}),i.foreach((l,c)=>{const u=xs(n,l);KO(e,Ln(u))||(a=cE(t,a,u,c,s,r,o))}),a}function XO(t,e,n){return n.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function uE(t,e,n,i,s,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Pn(n)?c=i:c=new Mi(null).setTree(n,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),m=XO(t,p,d);l=a_(t,l,new _i(h),m,s,r,o,a)}}),c.children.inorderTraversal((h,d)=>{const p=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!p){const m=e.serverCache.getNode().getImmediateChild(h),g=XO(t,m,d);l=a_(t,l,new _i(h),g,s,r,o,a)}}),l}function dre(t,e,n,i,s,r,o){if(o_(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(Pn(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return a_(t,e,n,l.getNode().getChild(n),s,r,a,o);if(Pn(n)){let c=new Mi(null);return l.getNode().forEachChild(Lp,(u,h)=>{c=c.set(new _i(u),h)}),uE(t,e,n,c,s,r,a,o)}else return e}else{let c=new Mi(null);return i.foreach((u,h)=>{const d=xs(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),uE(t,e,n,c,s,r,a,o)}}function fre(t,e,n,i,s){const r=e.serverCache,o=Zj(e,r.getNode(),r.isFullyInitialized()||Pn(n),r.isFiltered());return sV(t,o,n,i,iV,s)}function pre(t,e,n,i,s,r){let o;if(o_(i,n)!=null)return e;{const a=new hR(i,e,s),l=e.eventCache.getNode();let c;if(Pn(n)||Ln(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=r_(i,Xp(e));else{const h=e.serverCache.getNode();dt(h instanceof rn,"serverChildren would be complete if leaf node"),u=cR(i,h)}u=u,c=t.filter.updateFullNode(l,u,r)}else{const u=Ln(n);let h=uR(i,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,zi(n),a,r):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,rn.EMPTY_NODE,zi(n),a,r):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=r_(i,Xp(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||o_(i,ii())!=null,p1(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mre{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new iR(i.getIndex()),r=Ase(i);this.processor_=are(r);const o=n.serverCache,a=n.eventCache,l=s.updateFullNode(rn.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(rn.EMPTY_NODE,a.getNode(),null),u=new ef(l,o.isFullyInitialized(),s.filtersNodes()),h=new ef(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=DS(h,u),this.eventGenerator_=new zse(this.query_)}get query(){return this.query_}}function gre(t){return t.viewCache_.serverCache.getNode()}function vre(t){return s_(t.viewCache_)}function yre(t,e){const n=Xp(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Pn(e)&&!n.getImmediateChild(Ln(e)).isEmpty())?n.getChild(e):null}function YO(t){return t.eventRegistrations_.length===0}function bre(t,e){t.eventRegistrations_.push(e)}function ZO(t,e,n){const i=[];if(n){dt(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(r=>{const o=r.createCancelEvent(n,s);o&&i.push(o)})}if(e){let s=[];for(let r=0;r<t.eventRegistrations_.length;++r){const o=t.eventRegistrations_[r];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(r+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return i}function QO(t,e,n,i){e.type===gc.MERGE&&e.source.queryId!==null&&(dt(Xp(t.viewCache_),"We should always have a full cache before handling merges"),dt(s_(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,r=cre(t.processor_,s,e,n,i);return lre(t.processor_,r.viewCache),dt(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,rV(t,r.changes,r.viewCache.eventCache.getNode(),null)}function xre(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(hs,(r,o)=>{i.push(Jg(r,o))}),n.isFullyInitialized()&&i.push(Xj(n.getNode())),rV(t,i,n.getNode(),e)}function rV(t,e,n,i){const s=i?[i]:t.eventRegistrations_;return jse(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l_;class oV{constructor(){this.views=new Map}}function wre(t){dt(!l_,"__referenceConstructor has already been defined"),l_=t}function _re(){return dt(l_,"Reference.ts has not been loaded"),l_}function Sre(t){return t.views.size===0}function dR(t,e,n,i){const s=e.source.queryId;if(s!==null){const r=t.views.get(s);return dt(r!=null,"SyncTree gave us an op for an invalid query."),QO(r,e,n,i)}else{let r=[];for(const o of t.views.values())r=r.concat(QO(o,e,n,i));return r}}function aV(t,e,n,i,s){const r=e._queryIdentifier,o=t.views.get(r);if(!o){let a=r_(n,s?i:null),l=!1;a?l=!0:i instanceof rn?(a=cR(n,i),l=!1):(a=rn.EMPTY_NODE,l=!1);const c=DS(new ef(a,l,!1),new ef(i,s,!1));return new mre(e,c)}return o}function Cre(t,e,n,i,s,r){const o=aV(t,e,i,s,r);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),bre(o,n),xre(o,n)}function kre(t,e,n,i){const s=e._queryIdentifier,r=[];let o=[];const a=tf(t);if(s==="default")for(const[l,c]of t.views.entries())o=o.concat(ZO(c,n,i)),YO(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||r.push(c.query));else{const l=t.views.get(s);l&&(o=o.concat(ZO(l,n,i)),YO(l)&&(t.views.delete(s),l.query._queryParams.loadsAllData()||r.push(l.query)))}return a&&!tf(t)&&r.push(new(_re())(e._repo,e._path)),{removed:r,events:o}}function lV(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function jd(t,e){let n=null;for(const i of t.views.values())n=n||yre(i,e);return n}function cV(t,e){if(e._queryParams.loadsAllData())return OS(t);{const i=e._queryIdentifier;return t.views.get(i)}}function uV(t,e){return cV(t,e)!=null}function tf(t){return OS(t)!=null}function OS(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c_;function Ire(t){dt(!c_,"__referenceConstructor has already been defined"),c_=t}function Nre(){return dt(c_,"Reference.ts has not been loaded"),c_}let Ere=1;class JO{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mi(null),this.pendingWriteTree_=ire(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function hV(t,e,n,i,s){return Hse(t.pendingWriteTree_,e,n,i,s),s?N0(t,new Kp(rR(),e,n)):[]}function Tre(t,e,n,i){Gse(t.pendingWriteTree_,e,n,i);const s=Mi.fromObject(n);return N0(t,new lR(rR(),e,s))}function _d(t,e,n=!1){const i=qse(t.pendingWriteTree_,e);if(Kse(t.pendingWriteTree_,e)){let r=new Mi(null);return i.snap!=null?r=r.set(ii(),!0):Hr(i.children,o=>{r=r.set(new _i(o),!0)}),N0(t,new i_(i.path,r,n))}else return[]}function Gy(t,e,n){return N0(t,new Kp(oR(),e,n))}function Are(t,e,n){const i=Mi.fromObject(n);return N0(t,new lR(oR(),e,i))}function Rre(t,e){return N0(t,new ry(oR(),e))}function Lre(t,e,n){const i=pR(t,n);if(i){const s=mR(i),r=s.path,o=s.queryId,a=Go(r,e),l=new ry(aR(o),a);return gR(t,r,l)}else return[]}function u_(t,e,n,i,s=!1){const r=e._path,o=t.syncPointTree_.get(r);let a=[];if(o&&(e._queryIdentifier==="default"||uV(o,e))){const l=kre(o,e,n,i);Sre(o)&&(t.syncPointTree_=t.syncPointTree_.remove(r));const c=l.removed;if(a=l.events,!s){const u=c.findIndex(d=>d._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(r,(d,p)=>tf(p));if(u&&!h){const d=t.syncPointTree_.subtree(r);if(!d.isEmpty()){const p=$re(d);for(let m=0;m<p.length;++m){const g=p[m],y=g.query,v=mV(t,g);t.listenProvider_.startListening(g1(y),oy(t,y),v.hashFn,v.onComplete)}}}!h&&c.length>0&&!i&&(u?t.listenProvider_.stopListening(g1(e),null):c.forEach(d=>{const p=t.queryToTagMap.get(MS(d));t.listenProvider_.stopListening(g1(d),p)}))}Ore(t,c)}return a}function dV(t,e,n,i){const s=pR(t,i);if(s!=null){const r=mR(s),o=r.path,a=r.queryId,l=Go(o,e),c=new Kp(aR(a),l,n);return gR(t,o,c)}else return[]}function Pre(t,e,n,i){const s=pR(t,i);if(s){const r=mR(s),o=r.path,a=r.queryId,l=Go(o,e),c=Mi.fromObject(n),u=new lR(aR(a),l,c);return gR(t,o,u)}else return[]}function hE(t,e,n,i=!1){const s=e._path;let r=null,o=!1;t.syncPointTree_.foreachOnPath(s,(d,p)=>{const m=Go(d,s);r=r||jd(p,m),o=o||tf(p)});let a=t.syncPointTree_.get(s);a?(o=o||tf(a),r=r||jd(a,ii())):(a=new oV,t.syncPointTree_=t.syncPointTree_.set(s,a));let l;r!=null?l=!0:(l=!1,r=rn.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((p,m)=>{const g=jd(m,ii());g&&(r=r.updateImmediateChild(p,g))}));const c=uV(a,e);if(!c&&!e._queryParams.loadsAllData()){const d=MS(e);dt(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const p=Mre();t.queryToTagMap.set(d,p),t.tagToQueryMap.set(p,d)}const u=$S(t.pendingWriteTree_,s);let h=Cre(a,e,n,u,r,l);if(!c&&!o&&!i){const d=cV(a,e);h=h.concat(Fre(t,e,d))}return h}function fR(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Go(o,e),c=jd(a,l);if(c)return c});return eV(s,e,r,n,!0)}function Dre(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(c,u)=>{const h=Go(c,n);i=i||jd(u,h)});let s=t.syncPointTree_.get(n);s?i=i||jd(s,ii()):(s=new oV,t.syncPointTree_=t.syncPointTree_.set(n,s));const r=i!=null,o=r?new ef(i,!0,!1):null,a=$S(t.pendingWriteTree_,e._path),l=aV(s,e,a,r?o.getNode():rn.EMPTY_NODE,r);return vre(l)}function N0(t,e){return fV(e,t.syncPointTree_,null,$S(t.pendingWriteTree_,ii()))}function fV(t,e,n,i){if(Pn(t.path))return pV(t,e,n,i);{const s=e.get(ii());n==null&&s!=null&&(n=jd(s,ii()));let r=[];const o=Ln(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=tV(i,o);r=r.concat(fV(a,l,c,u))}return s&&(r=r.concat(dR(s,t,i,n))),r}}function pV(t,e,n,i){const s=e.get(ii());n==null&&s!=null&&(n=jd(s,ii()));let r=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=tV(i,o),u=t.operationForChild(o);u&&(r=r.concat(pV(u,a,l,c)))}),s&&(r=r.concat(dR(s,t,i,n))),r}function mV(t,e){const n=e.query,i=oy(t,n);return{hashFn:()=>(gre(e)||rn.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?Lre(t,n._path,i):Rre(t,n._path);{const r=Aie(s,n);return u_(t,n,null,r)}}}}function oy(t,e){const n=MS(e);return t.queryToTagMap.get(n)}function MS(t){return t._path.toString()+"$"+t._queryIdentifier}function pR(t,e){return t.tagToQueryMap.get(e)}function mR(t){const e=t.indexOf("$");return dt(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new _i(t.substr(0,e))}}function gR(t,e,n){const i=t.syncPointTree_.get(e);dt(i,"Missing sync point for query tag that we're tracking");const s=$S(t.pendingWriteTree_,e);return dR(i,n,s,null)}function $re(t){return t.fold((e,n,i)=>{if(n&&tf(n))return[OS(n)];{let s=[];return n&&(s=lV(n)),Hr(i,(r,o)=>{s=s.concat(o)}),s}})}function g1(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Nre())(t._repo,t._path):t}function Ore(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const s=MS(i),r=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(r)}}}function Mre(){return Ere++}function Fre(t,e,n){const i=e._path,s=oy(t,e),r=mV(t,n),o=t.listenProvider_.startListening(g1(e),s,r.hashFn,r.onComplete),a=t.syncPointTree_.subtree(i);if(s)dt(!tf(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!Pn(c)&&u&&tf(u))return[OS(u).query];{let d=[];return u&&(d=d.concat(lV(u).map(p=>p.query))),Hr(h,(p,m)=>{d=d.concat(m)}),d}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(g1(u),oy(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new vR(n)}node(){return this.node_}}class yR{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=xs(this.path_,e);return new yR(this.syncTree_,n)}node(){return fR(this.syncTree_,this.path_)}}const Bre=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},e4=function(t,e,n){if(!t||typeof t!="object")return t;if(dt(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return zre(t[".sv"],e,n);if(typeof t[".sv"]=="object")return jre(t[".sv"],e);dt(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},zre=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:dt(!1,"Unexpected server value: "+t)}},jre=function(t,e,n){t.hasOwnProperty("increment")||dt(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&dt(!1,"Unexpected increment value: "+i);const s=e.node();if(dt(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const o=s.getValue();return typeof o!="number"?i:o+i},gV=function(t,e,n,i){return bR(e,new yR(n,t),i)},vV=function(t,e,n){return bR(t,new vR(e),n)};function bR(t,e,n){const i=t.getPriority().val(),s=e4(i,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const o=t,a=e4(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Cr(a,lr(s)):t}else{const o=t;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new Cr(s))),o.forEachChild(hs,(a,l)=>{const c=bR(l,e.getImmediateChild(a),n);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function wR(t,e){let n=e instanceof _i?e:new _i(e),i=t,s=Ln(n);for(;s!==null;){const r=Qg(i.node.children,s)||{children:{},childCount:0};i=new xR(s,i,r),n=zi(n),s=Ln(n)}return i}function E0(t){return t.node.value}function yV(t,e){t.node.value=e,dE(t)}function bV(t){return t.node.childCount>0}function Vre(t){return E0(t)===void 0&&!bV(t)}function FS(t,e){Hr(t.node.children,(n,i)=>{e(new xR(n,t,i))})}function xV(t,e,n,i){n&&!i&&e(t),FS(t,s=>{xV(s,e,!0,i)}),n&&i&&e(t)}function Wre(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function qy(t){return new _i(t.parent===null?t.name:qy(t.parent)+"/"+t.name)}function dE(t){t.parent!==null&&Ure(t.parent,t.name,t)}function Ure(t,e,n){const i=Vre(n),s=Tu(t.node.children,e);i&&s?(delete t.node.children[e],t.node.childCount--,dE(t)):!i&&!s&&(t.node.children[e]=n.node,t.node.childCount++,dE(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hre=/[\[\].#$\/\u0000-\u001F\u007F]/,Gre=/[\[\].#$\u0000-\u001F\u007F]/,XI=10*1024*1024,_R=function(t){return typeof t=="string"&&t.length!==0&&!Hre.test(t)},wV=function(t){return typeof t=="string"&&t.length!==0&&!Gre.test(t)},qre=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),wV(t)},fE=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!qA(t)||t&&typeof t=="object"&&Tu(t,".sv")},Ky=function(t,e,n,i){i&&e===void 0||BS(RS(t,"value"),e,n)},BS=function(t,e,n){const i=n instanceof _i?new use(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ap(i));if(typeof e=="function")throw new Error(t+"contains a function "+ap(i)+" with contents = "+e.toString());if(qA(e))throw new Error(t+"contains "+e.toString()+" "+ap(i));if(typeof e=="string"&&e.length>XI/3&&LS(e)>XI)throw new Error(t+"contains a string greater than "+XI+" utf8 bytes "+ap(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,r=!1;if(Hr(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!_R(o)))throw new Error(t+" contains an invalid key ("+o+") "+ap(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);hse(i,o),BS(t,a,i),dse(i)}),s&&r)throw new Error(t+' contains ".value" child '+ap(i)+" in addition to actual children.")}},Kre=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const r=ty(i);for(let o=0;o<r.length;o++)if(!(r[o]===".priority"&&o===r.length-1)){if(!_R(r[o]))throw new Error(t+"contains an invalid key ("+r[o]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(cse);let s=null;for(n=0;n<e.length;n++){if(i=e[n],s!==null&&Cl(s,i))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}},Xre=function(t,e,n,i){const s=RS(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const r=[];Hr(e,(o,a)=>{const l=new _i(o);if(BS(s,a,xs(n,l)),QA(l)===".priority"&&!fE(a))throw new Error(s+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(l)}),Kre(s,r)},SR=function(t,e,n,i){if(!wV(n))throw new Error(RS(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Yre=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),SR(t,e,n)},_V=function(t,e){if(Ln(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Zre=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!_R(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!qre(n))throw new Error(RS(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qre{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function zS(t,e){let n=null;for(let i=0;i<e.length;i++){const s=e[i],r=s.getPath();n!==null&&!JA(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&t.eventLists_.push(n)}function SV(t,e,n){zS(t,n),CV(t,i=>JA(i,e))}function $l(t,e,n){zS(t,n),CV(t,i=>Cl(i,e)||Cl(e,i))}function CV(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const s=t.eventLists_[i];if(s){const r=s.path;e(r)?(Jre(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Jre(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();d1&&Vr("event: "+n.toString()),I0(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eoe="repo_interrupt",toe=25;class noe{constructor(e,n,i,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Qre,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=n_(),this.transactionQueueTree_=new xR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ioe(t,e,n){if(t.stats_=YA(t.repoInfo_),t.forceRestClient_||Die())t.server_=new t_(t.repoInfo_,(i,s,r,o)=>{t4(t,i,s,r,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>n4(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ur(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new dh(t.repoInfo_,e,(i,s,r,o)=>{t4(t,i,s,r,o)},i=>{n4(t,i)},i=>{soe(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=Bie(t.repoInfo_,()=>new Bse(t.stats_,t.server_)),t.infoData_=new Dse,t.infoSyncTree_=new JO({startListening:(i,s,r,o)=>{let a=[];const l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=Gy(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),CR(t,"connected",!1),t.serverSyncTree_=new JO({startListening:(i,s,r,o)=>(t.server_.listen(i,r,s,(a,l)=>{const c=o(a,l);$l(t.eventQueue_,i._path,c)}),[]),stopListening:(i,s)=>{t.server_.unlisten(i,s)}})}function kV(t){const n=t.infoData_.getNode(new _i(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function jS(t){return Bre({timestamp:kV(t)})}function t4(t,e,n,i,s){t.dataUpdateCount++;const r=new _i(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(i){const l=Xw(n,c=>lr(c));o=Pre(t.serverSyncTree_,r,l,s)}else{const l=lr(n);o=dV(t.serverSyncTree_,r,l,s)}else if(i){const l=Xw(n,c=>lr(c));o=Are(t.serverSyncTree_,r,l)}else{const l=lr(n);o=Gy(t.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=t0(t,r)),$l(t.eventQueue_,a,o)}function n4(t,e){CR(t,"connected",e),e===!1&&loe(t)}function soe(t,e){Hr(e,(n,i)=>{CR(t,n,i)})}function CR(t,e,n){const i=new _i("/.info/"+e),s=lr(n);t.infoData_.updateSnapshot(i,s);const r=Gy(t.infoSyncTree_,i,s);$l(t.eventQueue_,i,r)}function kR(t){return t.nextWriteId_++}function roe(t,e,n){const i=Dre(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(s=>{const r=lr(s).withIndex(e._queryParams.getIndex());hE(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Gy(t.serverSyncTree_,e._path,r);else{const a=oy(t.serverSyncTree_,e);o=dV(t.serverSyncTree_,e._path,r,a)}return $l(t.eventQueue_,e._path,o),u_(t.serverSyncTree_,e,n,null,!0),r},s=>(Xy(t,"get for query "+ur(e)+" failed: "+s),Promise.reject(new Error(s))))}function ooe(t,e,n,i,s){Xy(t,"set",{path:e.toString(),value:n,priority:i});const r=jS(t),o=lr(n,i),a=fR(t.serverSyncTree_,e),l=vV(o,a,r),c=kR(t),u=hV(t.serverSyncTree_,e,l,c,!0);zS(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(d,p)=>{const m=d==="ok";m||Xo("set at "+e+" failed: "+d);const g=_d(t.serverSyncTree_,c,!m);$l(t.eventQueue_,e,g),pE(t,s,d,p)});const h=NR(t,e);t0(t,h),$l(t.eventQueue_,h,[])}function aoe(t,e,n,i){Xy(t,"update",{path:e.toString(),value:n});let s=!0;const r=jS(t),o={};if(Hr(n,(a,l)=>{s=!1,o[a]=gV(xs(e,a),lr(l),t.serverSyncTree_,r)}),s)Vr("update() called with empty data.  Don't do anything."),pE(t,i,"ok",void 0);else{const a=kR(t),l=Tre(t.serverSyncTree_,e,o,a);zS(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,u)=>{const h=c==="ok";h||Xo("update at "+e+" failed: "+c);const d=_d(t.serverSyncTree_,a,!h),p=d.length>0?t0(t,e):e;$l(t.eventQueue_,p,d),pE(t,i,c,u)}),Hr(n,c=>{const u=NR(t,xs(e,c));t0(t,u)}),$l(t.eventQueue_,e,[])}}function loe(t){Xy(t,"onDisconnectEvents");const e=jS(t),n=n_();sE(t.onDisconnect_,ii(),(s,r)=>{const o=gV(s,r,t.serverSyncTree_,e);Yj(n,s,o)});let i=[];sE(n,ii(),(s,r)=>{i=i.concat(Gy(t.serverSyncTree_,s,r));const o=NR(t,s);t0(t,o)}),t.onDisconnect_=n_(),$l(t.eventQueue_,ii(),i)}function coe(t,e,n){let i;Ln(e._path)===".info"?i=hE(t.infoSyncTree_,e,n):i=hE(t.serverSyncTree_,e,n),SV(t.eventQueue_,e._path,i)}function uoe(t,e,n){let i;Ln(e._path)===".info"?i=u_(t.infoSyncTree_,e,n):i=u_(t.serverSyncTree_,e,n),SV(t.eventQueue_,e._path,i)}function hoe(t){t.persistentConnection_&&t.persistentConnection_.interrupt(eoe)}function Xy(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Vr(n,...e)}function pE(t,e,n,i){e&&I0(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let r=s;i&&(r+=": "+i);const o=new Error(r);o.code=s,e(o)}})}function IV(t,e,n){return fR(t.serverSyncTree_,e,n)||rn.EMPTY_NODE}function IR(t,e=t.transactionQueueTree_){if(e||VS(t,e),E0(e)){const n=EV(t,e);dt(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&doe(t,qy(e),n)}else bV(e)&&FS(e,n=>{IR(t,n)})}function doe(t,e,n){const i=n.map(c=>c.currentWriteId),s=IV(t,e,i);let r=s;const o=s.hash();for(let c=0;c<n.length;c++){const u=n[c];dt(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Go(e,u.path);r=r.updateChild(h,u.currentOutputSnapshotRaw)}const a=r.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Xy(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(_d(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();VS(t,wR(t.transactionQueueTree_,e)),IR(t,t.transactionQueueTree_),$l(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)I0(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Xo("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}t0(t,e)}},o)}function t0(t,e){const n=NV(t,e),i=qy(n),s=EV(t,n);return foe(t,s,i),i}function foe(t,e,n){if(e.length===0)return;const i=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Go(n,l.path);let u=!1,h;if(dt(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,s=s.concat(_d(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=toe)u=!0,h="maxretry",s=s.concat(_d(t.serverSyncTree_,l.currentWriteId,!0));else{const d=IV(t,l.path,o);l.currentInputSnapshot=d;const p=e[a].update(d.val());if(p!==void 0){BS("transaction failed: Data returned ",p,l.path);let m=lr(p);typeof p=="object"&&p!=null&&Tu(p,".priority")||(m=m.updatePriority(d.getPriority()));const y=l.currentWriteId,v=jS(t),b=vV(m,d,v);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=b,l.currentWriteId=kR(t),o.splice(o.indexOf(y),1),s=s.concat(hV(t.serverSyncTree_,l.path,b,l.currentWriteId,l.applyLocally)),s=s.concat(_d(t.serverSyncTree_,y,!0))}else u=!0,h="nodata",s=s.concat(_d(t.serverSyncTree_,l.currentWriteId,!0))}$l(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(h),!1,null))))}VS(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)I0(i[a]);IR(t,t.transactionQueueTree_)}function NV(t,e){let n,i=t.transactionQueueTree_;for(n=Ln(e);n!==null&&E0(i)===void 0;)i=wR(i,n),e=zi(e),n=Ln(e);return i}function EV(t,e){const n=[];return TV(t,e,n),n.sort((i,s)=>i.order-s.order),n}function TV(t,e,n){const i=E0(e);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);FS(e,s=>{TV(t,s,n)})}function VS(t,e){const n=E0(e);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,yV(e,n.length>0?n:void 0)}FS(e,i=>{VS(t,i)})}function NR(t,e){const n=qy(NV(t,e)),i=wR(t.transactionQueueTree_,e);return Wre(i,s=>{YI(t,s)}),YI(t,i),xV(i,s=>{YI(t,s)}),n}function YI(t,e){const n=E0(e);if(n){const i=[];let s=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(dt(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(dt(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(_d(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?yV(e,void 0):n.length=r+1,$l(t.eventQueue_,qy(e),s);for(let o=0;o<i.length;o++)I0(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function poe(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function moe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Xo(`Invalid query segment '${n}' in query '${t}'`)}return e}const i4=function(t,e){const n=goe(t),i=n.namespace;n.domain==="firebase.com"&&Sh(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Sh("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||kie();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Lj(n.host,n.secure,i,s,e,"",i!==n.subdomain),path:new _i(n.pathString)}},goe=function(t){let e="",n="",i="",s="",r="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(s=poe(t.substring(u,h)));const d=moe(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const m=e.indexOf(".");i=e.substring(0,m).toLowerCase(),n=e.substring(m+1),r=i}"ns"in d&&(r=d.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:s,namespace:r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",voe=function(){let t=0;const e=[];return function(n){const i=n===t;t=n;let s;const r=new Array(8);for(s=7;s>=0;s--)r[s]=s4.charAt(n%64),n=Math.floor(n/64);dt(n===0,"Cannot push at time == 0");let o=r.join("");if(i){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=s4.charAt(e[s]);return dt(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yoe{constructor(e,n,i,s){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ur(this.snapshot.exportVal())}}class boe{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return dt(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n,i,s){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return Pn(this._path)?null:QA(this._path)}get ref(){return new Rh(this._repo,this._path)}get _queryIdentifier(){const e=WO(this._queryParams),n=KA(e);return n==="{}"?"default":n}get _queryObject(){return WO(this._queryParams)}isEqual(e){if(e=bf(e),!(e instanceof T0))return!1;const n=this._repo===e._repo,i=JA(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+lse(this._path)}}function xoe(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function ER(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Lp){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==qp)throw new Error(i);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==Qd)throw new Error(i);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===hs){if(e!=null&&!fE(e)||n!=null&&!fE(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(dt(t.getIndex()instanceof nR||t.getIndex()===Kj,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function RV(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Rh extends T0{constructor(e,n){super(e,n,new sR,!1)}get parent(){const e=jj(this._path);return e===null?null:new Rh(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ay{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new _i(e),i=Yp(this.ref,e);return new ay(this._node.getChild(n),i,hs)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new ay(s,Yp(this.ref,i),hs)))}hasChild(e){const n=new _i(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ia(t,e){return t=bf(t),t._checkNotDeleted("ref"),e!==void 0?Yp(t._root,e):t._root}function Yp(t,e){return t=bf(t),Ln(t._path)===null?Yre("child","path",e):SR("child","path",e),new Rh(t._repo,xs(t._path,e))}function woe(t,e){t=bf(t),_V("push",t._path),Ky("push",e,t._path,!0);const n=kV(t._repo),i=voe(n),s=Yp(t,i),r=Yp(t,i);let o;return e!=null?o=_oe(r,e).then(()=>r):o=Promise.resolve(r),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function _oe(t,e){t=bf(t),_V("set",t._path),Ky("set",e,t._path,!1);const n=new jy;return ooe(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function LV(t,e){Xre("update",e,t._path);const n=new jy;return aoe(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function mu(t){t=bf(t);const e=new AV(()=>{}),n=new WS(e);return roe(t._repo,t,n).then(i=>new ay(i,new Rh(t._repo,t._path),t._queryParams.getIndex()))}class WS{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new yoe("value",this,new ay(e.snapshotNode,new Rh(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new boe(this,e,n):null}matches(e){return e instanceof WS?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Soe(t,e,n,i,s){const r=new AV(n,void 0),o=new WS(r);return coe(t._repo,t,o),()=>uoe(t._repo,t,o)}function Coe(t,e,n,i){return Soe(t,"value",e)}class US{}class koe extends US{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Ky("endAt",this._value,e._path,!0);const n=Lse(e._queryParams,this._value,this._key);if(RV(n),ER(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new T0(e._repo,e._path,n,e._orderByCalled)}}class Ioe extends US{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Ky("startAt",this._value,e._path,!0);const n=Rse(e._queryParams,this._value,this._key);if(RV(n),ER(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new T0(e._repo,e._path,n,e._orderByCalled)}}class Noe extends US{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){xoe(e,"orderByChild");const n=new _i(this._path);if(Pn(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new nR(n),s=Pse(e._queryParams,i);return ER(s),new T0(e._repo,e._path,s,!0)}}function Eoe(t){return SR("orderByChild","path",t),new Noe(t)}class Toe extends US{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Ky("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new koe(this._value,this._key)._apply(new Ioe(this._value,this._key)._apply(e))}}function Aoe(t,e){return new Toe(t,e)}function Roe(t,...e){let n=bf(t);for(const i of e)n=i._apply(n);return n}wre(Rh);Ire(Rh);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Loe="FIREBASE_DATABASE_EMULATOR_HOST",mE={};let Poe=!1;function Doe(t,e,n,i){t.repoInfo_=new Lj(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function $oe(t,e,n,i,s){let r=i||t.options.databaseURL;r===void 0&&(t.options.projectId||Sh("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vr("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=i4(r,s),a=o.repoInfo,l;typeof process<"u"&&kO&&(l=kO[Loe]),l?(r=`http://${l}?ns=${a.namespace}`,o=i4(r,s),a=o.repoInfo):o.repoInfo.secure;const c=new Oie(t.name,t.options,e);Zre("Invalid Firebase Database URL",o),Pn(o.path)||Sh("Database URL must point to the root of a Firebase Database (not including a child path).");const u=Moe(a,t,c,new $ie(t.name,n));return new Foe(u,t)}function Ooe(t,e){const n=mE[e];(!n||n[t.key]!==t)&&Sh(`Database ${e}(${t.repoInfo_}) has already been deleted.`),hoe(t),delete n[t.key]}function Moe(t,e,n,i){let s=mE[e.name];s||(s={},mE[e.name]=s);let r=s[t.toURLString()];return r&&Sh("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new noe(t,Poe,n,i),s[t.toURLString()]=r,r}class Foe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ioe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Rh(this._repo,ii())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Ooe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Sh("Cannot call "+e+" on a deleted database.")}}function TR(t=aie(),e){const n=iie(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=qte("database");i&&Boe(n,...i)}return n}function Boe(t,e,n,i={}){t=bf(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Sh("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let r;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&Sh('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new iw(iw.OWNER);else if(i.mockUserToken){const o=typeof i.mockUserToken=="string"?i.mockUserToken:Kte(i.mockUserToken,t.app.options.projectId);r=new iw(o)}Doe(s,e,n,r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zoe(t){bie(oie),Zw(new Q1("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return $oe(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),Dg(IO,NO,t),Dg(IO,NO,"esm2017")}dh.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};dh.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};zoe();const joe={apiKey:"AIzaSyDYUsVIgr7gCL3D1S5dhwyDc6K-aP31sXA",authDomain:"waterquality-ba0bb.firebaseapp.com",databaseURL:"https://waterquality-ba0bb-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"waterquality-ba0bb",storageBucket:"waterquality-ba0bb.appspot.com",messagingSenderId:"654440423465",appId:"1:654440423465:web:8e7694398bd773f3343c38",measurementId:"G-QSVJTQQ3RD"},Voe=mj(joe),Rl=TR(Voe),Woe=()=>{const t=UA(),[e,n]=K.useState(""),[i,s]=K.useState(""),r=async o=>{o.preventDefault();try{const a=Ia(Rl,"members"),l=await mu(a);if(l.exists()){let c=!1;l.forEach(u=>{const h=u.val();h.username===e&&(c=!0,h.password===i?h.status==="Inactive"?jt.error("Account temporarily blocked, please contact WQS officer"):(jt.success("Login successful"),localStorage.setItem("userData",JSON.stringify({username:h.username,role:h.role,status:h.status})),h.role==="Admin"?t("/dashboard"):h.role==="Client"&&t("/sensor-data"),setTimeout(()=>{},3e3)):jt.error("Incorrect Login Credentials"))}),c||jt.error("Incorrect Login Credentials")}else jt.error("Incorrect Login Credentials")}catch(a){console.error("Login error:",a),jt.error("An error occurred. Please try again.")}};return Q.jsxs(Q.Fragment,{children:[Q.jsxs("div",{className:"font-[sans-serif] h-screen grid lg:grid-cols-2 md:grid-cols-2 items-center gap-4",children:[Q.jsx("div",{className:"order-2 md:order-1 h-screen hidden md:block",children:Q.jsx("img",{src:Ite,className:"w-full h-full object-cover object-right",alt:"login"})}),Q.jsxs("div",{className:"order-1 md:order-2 p-8",children:[Q.jsxs("div",{className:"text-center font-bold mb-4",children:[Q.jsx("h1",{className:"text-3xl text-blue-500",children:"Water Quality"}),Q.jsx("h3",{className:"text-end mr-10 lg:mr-64 md:mr-12 text-blue-400",children:"System"})]}),Q.jsxs("div",{className:"mb-6 lg:ml-40",children:[Q.jsx("h2",{className:"text-2xl font-bold",children:"Welcome Back"}),Q.jsx("p",{className:"text-gray-500",children:"Login to your account"})]}),Q.jsxs("form",{className:"lg:mr-40 lg:ml-40",onSubmit:r,children:[Q.jsxs("div",{className:"mb-4",children:[Q.jsx("label",{htmlFor:"userName",className:"text-sm",children:"User Name"}),Q.jsx("input",{type:"text",id:"userName",className:"border border-gray-200 rounded-lg p-2 w-full mt-1 focus:outline-none",placeholder:"Enter your user name","aria-label":"User Name",value:e,onChange:o=>n(o.target.value)})]}),Q.jsxs("div",{className:"mb-4",children:[Q.jsx("label",{htmlFor:"password",className:"text-sm",children:"Password"}),Q.jsx("input",{type:"password",id:"password",className:"border border-gray-200 rounded-lg p-2 w-full mt-1 focus:outline-none",placeholder:"Enter your password","aria-label":"Password",value:i,onChange:o=>s(o.target.value)})]}),Q.jsx("div",{children:Q.jsx("button",{type:"submit",className:"bg-blue-500 text-white w-full py-2 rounded-lg hover:bg-blue-900",children:"Login"})})]})]})]}),Q.jsx(C0,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})},Uoe=({title:t,className:e,toggleSideNav:n})=>Q.jsxs("div",{className:`flex items-center px-4 bg-gray-100 ${e}`,children:[Q.jsx("button",{onClick:n,className:"block md:hidden mr-4 text-gray-600",children:Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})}),Q.jsx("h1",{className:"text-xl font-semibold",children:t})]});var PV={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(r=s(r,i(a)))}return r}function i(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return n.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var o="";for(var a in r)e.call(r,a)&&r[a]&&(o=s(o,a));return o}function s(r,o){return o?r?r+" "+o:r+o:r}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(PV);var Hoe=PV.exports;const qt=Py(Hoe);function Jt(){return Jt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Jt.apply(null,arguments)}function AR(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;n[i]=t[i]}return n}function r4(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function Goe(t){var e=qoe(t,"string");return typeof e=="symbol"?e:String(e)}function qoe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Koe(t,e,n){var i=K.useRef(t!==void 0),s=K.useState(e),r=s[0],o=s[1],a=t!==void 0,l=i.current;return i.current=a,!a&&l&&r!==e&&o(e),[a?t:r,K.useCallback(function(c){for(var u=arguments.length,h=new Array(u>1?u-1:0),d=1;d<u;d++)h[d-1]=arguments[d];n&&n.apply(void 0,[c].concat(h)),o(c)},[n])]}function DV(t,e){return Object.keys(e).reduce(function(n,i){var s,r=n,o=r[r4(i)],a=r[i],l=AR(r,[r4(i),i].map(Goe)),c=e[i],u=Koe(a,o,t[c]),h=u[0],d=u[1];return Jt({},l,(s={},s[i]=h,s[c]=d,s))},t)}function h_(t,e){return h_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},h_(t,e)}function Xoe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,h_(t,e)}const Yoe=["xxl","xl","lg","md","sm","xs"],Zoe="xs",HS=K.createContext({prefixes:{},breakpoints:Yoe,minBreakpoint:Zoe});function dn(t,e){const{prefixes:n}=K.useContext(HS);return t||n[e]||e}function $V(){const{breakpoints:t}=K.useContext(HS);return t}function OV(){const{minBreakpoint:t}=K.useContext(HS);return t}function Qoe(){const{dir:t}=K.useContext(HS);return t==="rtl"}function GS(t){return t&&t.ownerDocument||document}function Joe(t){var e=GS(t);return e&&e.defaultView||window}function eae(t,e){return Joe(t).getComputedStyle(t,e)}var tae=/([A-Z])/g;function nae(t){return t.replace(tae,"-$1").toLowerCase()}var iae=/^ms-/;function i2(t){return nae(t).replace(iae,"-ms-")}var sae=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function rae(t){return!!(t&&sae.test(t))}function fh(t,e){var n="",i="";if(typeof e=="string")return t.style.getPropertyValue(i2(e))||eae(t).getPropertyValue(i2(e));Object.keys(e).forEach(function(s){var r=e[s];!r&&r!==0?t.style.removeProperty(i2(s)):rae(s)?i+=s+"("+r+") ":n+=i2(s)+": "+r+";"}),i&&(n+="transform: "+i+";"),t.style.cssText+=";"+n}var MV={exports:{}},oae="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",aae=oae,lae=aae;function FV(){}function BV(){}BV.resetWarningCache=FV;var cae=function(){function t(i,s,r,o,a,l){if(l!==lae){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:BV,resetWarningCache:FV};return n.PropTypes=n,n};MV.exports=cae();var uae=MV.exports;const ph=Py(uae),o4={disabled:!1},zV=xn.createContext(null);var hae=function(e){return e.scrollTop},jv="unmounted",dd="exited",dc="entering",Ju="entered",ly="exiting",Lh=function(t){Xoe(e,t);function e(i,s){var r;r=t.call(this,i,s)||this;var o=s,a=o&&!o.isMounting?i.enter:i.appear,l;return r.appearStatus=null,i.in?a?(l=dd,r.appearStatus=dc):l=Ju:i.unmountOnExit||i.mountOnEnter?l=jv:l=dd,r.state={status:l},r.nextCallback=null,r}e.getDerivedStateFromProps=function(s,r){var o=s.in;return o&&r.status===jv?{status:dd}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var r=null;if(s!==this.props){var o=this.state.status;this.props.in?o!==dc&&o!==Ju&&(r=dc):(o===dc||o===Ju)&&(r=ly)}this.updateStatus(!1,r)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,r,o,a;return r=o=a=s,s!=null&&typeof s!="number"&&(r=s.exit,o=s.enter,a=s.appear!==void 0?s.appear:o),{exit:r,enter:o,appear:a}},n.updateStatus=function(s,r){if(s===void 0&&(s=!1),r!==null)if(this.cancelNextCallback(),r===dc){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:wp.findDOMNode(this);o&&hae(o)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===dd&&this.setState({status:jv})},n.performEnter=function(s){var r=this,o=this.props.enter,a=this.context?this.context.isMounting:s,l=this.props.nodeRef?[a]:[wp.findDOMNode(this),a],c=l[0],u=l[1],h=this.getTimeouts(),d=a?h.appear:h.enter;if(!s&&!o||o4.disabled){this.safeSetState({status:Ju},function(){r.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:dc},function(){r.props.onEntering(c,u),r.onTransitionEnd(d,function(){r.safeSetState({status:Ju},function(){r.props.onEntered(c,u)})})})},n.performExit=function(){var s=this,r=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:wp.findDOMNode(this);if(!r||o4.disabled){this.safeSetState({status:dd},function(){s.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:ly},function(){s.props.onExiting(a),s.onTransitionEnd(o.exit,function(){s.safeSetState({status:dd},function(){s.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,r){r=this.setNextCallback(r),this.setState(s,r)},n.setNextCallback=function(s){var r=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,r.nextCallback=null,s(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(s,r){this.setNextCallback(r);var o=this.props.nodeRef?this.props.nodeRef.current:wp.findDOMNode(this),a=s==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===jv)return null;var r=this.props,o=r.children;r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef;var a=AR(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return xn.createElement(zV.Provider,{value:null},typeof o=="function"?o(s,a):xn.cloneElement(xn.Children.only(o),a))},e}(xn.Component);Lh.contextType=zV;Lh.propTypes={};function eg(){}Lh.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:eg,onEntering:eg,onEntered:eg,onExit:eg,onExiting:eg,onExited:eg};Lh.UNMOUNTED=jv;Lh.EXITED=dd;Lh.ENTERING=dc;Lh.ENTERED=Ju;Lh.EXITING=ly;const A0=!!(typeof window<"u"&&window.document&&window.document.createElement);var gE=!1,vE=!1;try{var ZI={get passive(){return gE=!0},get once(){return vE=gE=!0}};A0&&(window.addEventListener("test",ZI,ZI),window.removeEventListener("test",ZI,!0))}catch{}function jV(t,e,n,i){if(i&&typeof i!="boolean"&&!vE){var s=i.once,r=i.capture,o=n;!vE&&s&&(o=n.__once||function a(l){this.removeEventListener(e,a,r),n.call(this,l)},n.__once=o),t.addEventListener(e,o,gE?i:r)}t.addEventListener(e,n,i)}function yE(t,e,n,i){var s=i&&typeof i!="boolean"?i.capture:i;t.removeEventListener(e,n,s),n.__once&&t.removeEventListener(e,n.__once,s)}function d_(t,e,n,i){return jV(t,e,n,i),function(){yE(t,e,n,i)}}function dae(t,e,n,i){if(i===void 0&&(i=!0),t){var s=document.createEvent("HTMLEvents");s.initEvent(e,n,i),t.dispatchEvent(s)}}function fae(t){var e=fh(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function pae(t,e,n){n===void 0&&(n=5);var i=!1,s=setTimeout(function(){i||dae(t,"transitionend",!0)},e+n),r=d_(t,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(s),r()}}function VV(t,e,n,i){n==null&&(n=fae(t)||0);var s=pae(t,n,i),r=d_(t,"transitionend",e);return function(){s(),r()}}function a4(t,e){const n=fh(t,e)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function RR(t,e){const n=a4(t,"transitionDuration"),i=a4(t,"transitionDelay"),s=VV(t,r=>{r.target===t&&(s(),e(r))},n+i)}function _v(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...s){e.apply(this,s),n.apply(this,s)}},null)}function WV(t){t.offsetHeight}const l4=t=>!t||typeof t=="function"?t:e=>{t.current=e};function mae(t,e){const n=l4(t),i=l4(e);return s=>{n&&n(s),i&&i(s)}}function R0(t,e){return K.useMemo(()=>mae(t,e),[t,e])}function gae(t){return t&&"setState"in t?wp.findDOMNode(t):t??null}const LR=xn.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:s,onExited:r,addEndListener:o,children:a,childRef:l,...c},u)=>{const h=K.useRef(null),d=R0(h,l),p=I=>{d(gae(I))},m=I=>T=>{I&&h.current&&I(h.current,T)},g=K.useCallback(m(t),[t]),y=K.useCallback(m(e),[e]),v=K.useCallback(m(n),[n]),b=K.useCallback(m(i),[i]),w=K.useCallback(m(s),[s]),S=K.useCallback(m(r),[r]),k=K.useCallback(m(o),[o]);return Q.jsx(Lh,{ref:u,...c,onEnter:g,onEntered:v,onEntering:y,onExit:b,onExited:S,onExiting:w,addEndListener:k,nodeRef:h,children:typeof a=="function"?(I,T)=>a(I,{...T,ref:p}):xn.cloneElement(a,{ref:p})})}),vae={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function yae(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,i=e[n],s=vae[t];return i+parseInt(fh(e,s[0]),10)+parseInt(fh(e,s[1]),10)}const bae={[dd]:"collapse",[ly]:"collapsing",[dc]:"collapsing",[Ju]:"collapse show"},xae=xn.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:s,className:r,children:o,dimension:a="height",in:l=!1,timeout:c=300,mountOnEnter:u=!1,unmountOnExit:h=!1,appear:d=!1,getDimensionValue:p=yae,...m},g)=>{const y=typeof a=="function"?a():a,v=K.useMemo(()=>_v(I=>{I.style[y]="0"},t),[y,t]),b=K.useMemo(()=>_v(I=>{const T=`scroll${y[0].toUpperCase()}${y.slice(1)}`;I.style[y]=`${I[T]}px`},e),[y,e]),w=K.useMemo(()=>_v(I=>{I.style[y]=null},n),[y,n]),S=K.useMemo(()=>_v(I=>{I.style[y]=`${p(y,I)}px`,WV(I)},i),[i,p,y]),k=K.useMemo(()=>_v(I=>{I.style[y]=null},s),[y,s]);return Q.jsx(LR,{ref:g,addEndListener:RR,...m,"aria-expanded":m.role?l:null,onEnter:v,onEntering:b,onEntered:w,onExit:S,onExiting:k,childRef:o.ref,in:l,timeout:c,mountOnEnter:u,unmountOnExit:h,appear:d,children:(I,T)=>xn.cloneElement(o,{...T,className:qt(r,o.props.className,bae[I],y==="width"&&"collapse-horizontal")})})});function wae(t){const e=K.useRef(t);return K.useEffect(()=>{e.current=t},[t]),e}function Uo(t){const e=wae(t);return K.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const qS=t=>K.forwardRef((e,n)=>Q.jsx("div",{...e,ref:n,className:qt(e.className,t)}));function _ae(){return K.useState(null)}function Sae(){const t=K.useRef(!0),e=K.useRef(()=>t.current);return K.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function Cae(t){const e=K.useRef(null);return K.useEffect(()=>{e.current=t}),e.current}const kae=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Iae=typeof document<"u",bE=Iae||kae?K.useLayoutEffect:K.useEffect,Nae=["as","disabled"];function Eae(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Tae(t){return!t||t.trim()==="#"}function PR({tagName:t,disabled:e,href:n,target:i,rel:s,role:r,onClick:o,tabIndex:a=0,type:l}){t||(n!=null||i!=null||s!=null?t="a":t="button");const c={tagName:t};if(t==="button")return[{type:l||"button",disabled:e},c];const u=d=>{if((e||t==="a"&&Tae(n))&&d.preventDefault(),e){d.stopPropagation();return}o==null||o(d)},h=d=>{d.key===" "&&(d.preventDefault(),u(d))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:r??"button",disabled:void 0,tabIndex:e?void 0:a,href:n,target:t==="a"?i:void 0,"aria-disabled":e||void 0,rel:t==="a"?s:void 0,onClick:u,onKeyDown:h},c]}const UV=K.forwardRef((t,e)=>{let{as:n,disabled:i}=t,s=Eae(t,Nae);const[r,{tagName:o}]=PR(Object.assign({tagName:n,disabled:i},s));return Q.jsx(o,Object.assign({},s,r,{ref:e}))});UV.displayName="Button";const Aae=["onKeyDown"];function Rae(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Lae(t){return!t||t.trim()==="#"}const HV=K.forwardRef((t,e)=>{let{onKeyDown:n}=t,i=Rae(t,Aae);const[s]=PR(Object.assign({tagName:"a"},i)),r=Uo(o=>{s.onKeyDown(o),n==null||n(o)});return Lae(i.href)||i.role==="button"?Q.jsx("a",Object.assign({ref:e},i,s,{onKeyDown:r})):Q.jsx("a",Object.assign({ref:e},i,{onKeyDown:n}))});HV.displayName="Anchor";function Pae(t){return t.code==="Escape"||t.keyCode===27}function GV(){const t=K.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}const Dae={[dc]:"show",[Ju]:"show"},KS=K.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:i,...s},r)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...s},a=K.useCallback((u,h)=>{WV(u),i==null||i(u,h)},[i]),{major:l}=GV(),c=l>=19?e.props.ref:e.ref;return Q.jsx(LR,{ref:r,addEndListener:RR,...o,onEnter:a,childRef:c,children:(u,h)=>K.cloneElement(e,{...h,className:qt("fade",t,e.props.className,Dae[u],n[u])})})});KS.displayName="Fade";const $ae={"aria-label":ph.string,onClick:ph.func,variant:ph.oneOf(["white"])},DR=K.forwardRef(({className:t,variant:e,"aria-label":n="Close",...i},s)=>Q.jsx("button",{ref:s,type:"button",className:qt("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...i}));DR.displayName="CloseButton";DR.propTypes=$ae;const Ho=K.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:i,active:s=!1,disabled:r=!1,className:o,...a},l)=>{const c=dn(e,"btn"),[u,{tagName:h}]=PR({tagName:t,disabled:r,...a}),d=h;return Q.jsx(d,{...u,...a,ref:l,disabled:r,className:qt(o,c,s&&"active",n&&`${c}-${n}`,i&&`${c}-${i}`,a.href&&r&&"disabled")})});Ho.displayName="Button";const $R=K.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},s)=>(e=dn(e,"card-body"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));$R.displayName="CardBody";const qV=K.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},s)=>(e=dn(e,"card-footer"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));qV.displayName="CardFooter";const OR=K.createContext(null);OR.displayName="CardHeaderContext";const KV=K.forwardRef(({bsPrefix:t,className:e,as:n="div",...i},s)=>{const r=dn(t,"card-header"),o=K.useMemo(()=>({cardHeaderBsPrefix:r}),[r]);return Q.jsx(OR.Provider,{value:o,children:Q.jsx(n,{ref:s,...i,className:qt(e,r)})})});KV.displayName="CardHeader";const XV=K.forwardRef(({bsPrefix:t,className:e,variant:n,as:i="img",...s},r)=>{const o=dn(t,"card-img");return Q.jsx(i,{ref:r,className:qt(n?`${o}-${n}`:o,e),...s})});XV.displayName="CardImg";const YV=K.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},s)=>(e=dn(e,"card-img-overlay"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));YV.displayName="CardImgOverlay";const ZV=K.forwardRef(({className:t,bsPrefix:e,as:n="a",...i},s)=>(e=dn(e,"card-link"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));ZV.displayName="CardLink";const Oae=qS("h6"),QV=K.forwardRef(({className:t,bsPrefix:e,as:n=Oae,...i},s)=>(e=dn(e,"card-subtitle"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));QV.displayName="CardSubtitle";const JV=K.forwardRef(({className:t,bsPrefix:e,as:n="p",...i},s)=>(e=dn(e,"card-text"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));JV.displayName="CardText";const Mae=qS("h5"),e7=K.forwardRef(({className:t,bsPrefix:e,as:n=Mae,...i},s)=>(e=dn(e,"card-title"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));e7.displayName="CardTitle";const t7=K.forwardRef(({bsPrefix:t,className:e,bg:n,text:i,border:s,body:r=!1,children:o,as:a="div",...l},c)=>{const u=dn(t,"card");return Q.jsx(a,{ref:c,...l,className:qt(e,u,n&&`bg-${n}`,i&&`text-${i}`,s&&`border-${s}`),children:r?Q.jsx($R,{children:o}):o})});t7.displayName="Card";const oo=Object.assign(t7,{Img:XV,Title:e7,Subtitle:QV,Body:$R,Link:ZV,Text:JV,Header:KV,Footer:qV,ImgOverlay:YV});function Fae(t){const e=K.useRef(t);return e.current=t,e}function n7(t){const e=Fae(t);K.useEffect(()=>()=>e.current(),[])}function Bae(t,e){return K.Children.toArray(t).some(n=>K.isValidElement(n)&&n.type===e)}function zae({as:t,bsPrefix:e,className:n,...i}){e=dn(e,"col");const s=$V(),r=OV(),o=[],a=[];return s.forEach(l=>{const c=i[l];delete i[l];let u,h,d;typeof c=="object"&&c!=null?{span:u,offset:h,order:d}=c:u=c;const p=l!==r?`-${l}`:"";u&&o.push(u===!0?`${e}${p}`:`${e}${p}-${u}`),d!=null&&a.push(`order${p}-${d}`),h!=null&&a.push(`offset${p}-${h}`)}),[{...i,className:qt(n,...o,...a)},{as:t,bsPrefix:e,spans:o}]}const jn=K.forwardRef((t,e)=>{const[{className:n,...i},{as:s="div",bsPrefix:r,spans:o}]=zae(t);return Q.jsx(s,{...i,ref:e,className:qt(n,!o.length&&r)})});jn.displayName="Col";const Yy=K.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:i,...s},r)=>{const o=dn(t,"container"),a=typeof e=="string"?`-${e}`:"-fluid";return Q.jsx(n,{ref:r,...s,className:qt(i,e?`${o}${a}`:o)})});Yy.displayName="Container";var jae=Function.prototype.bind.call(Function.prototype.call,[].slice);function lp(t,e){return jae(t.querySelectorAll(e))}function Vae(){const[,t]=K.useReducer(e=>!e,!1);return t}function c4(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}const f_=K.createContext(null),MR=(t,e=null)=>t!=null?String(t):e||null,FR=K.createContext(null);FR.displayName="NavContext";const Wae="data-rr-ui-",Uae="rrUi";function XS(t){return`${Wae}${t}`}function Hae(t){return`${Uae}${t}`}const i7=K.createContext(A0?window:void 0);i7.Provider;function BR(){return K.useContext(i7)}const L0=K.createContext(null);L0.displayName="NavbarContext";const Gae={type:ph.string,tooltip:ph.bool,as:ph.elementType},YS=K.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:i=!1,...s},r)=>Q.jsx(t,{...s,ref:r,className:qt(e,`${n}-${i?"tooltip":"feedback"}`)}));YS.displayName="Feedback";YS.propTypes=Gae;const Ch=K.createContext({}),zR=K.forwardRef(({id:t,bsPrefix:e,className:n,type:i="checkbox",isValid:s=!1,isInvalid:r=!1,as:o="input",...a},l)=>{const{controlId:c}=K.useContext(Ch);return e=dn(e,"form-check-input"),Q.jsx(o,{...a,ref:l,type:i,id:t||c,className:qt(n,e,s&&"is-valid",r&&"is-invalid")})});zR.displayName="FormCheckInput";const p_=K.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...i},s)=>{const{controlId:r}=K.useContext(Ch);return t=dn(t,"form-check-label"),Q.jsx("label",{...i,ref:s,htmlFor:n||r,className:qt(e,t)})});p_.displayName="FormCheckLabel";const s7=K.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:i=!1,reverse:s=!1,disabled:r=!1,isValid:o=!1,isInvalid:a=!1,feedbackTooltip:l=!1,feedback:c,feedbackType:u,className:h,style:d,title:p="",type:m="checkbox",label:g,children:y,as:v="input",...b},w)=>{e=dn(e,"form-check"),n=dn(n,"form-switch");const{controlId:S}=K.useContext(Ch),k=K.useMemo(()=>({controlId:t||S}),[S,t]),I=!y&&g!=null&&g!==!1||Bae(y,p_),T=Q.jsx(zR,{...b,type:m==="switch"?"checkbox":m,ref:w,isValid:o,isInvalid:a,disabled:r,as:v});return Q.jsx(Ch.Provider,{value:k,children:Q.jsx("div",{style:d,className:qt(h,I&&e,i&&`${e}-inline`,s&&`${e}-reverse`,m==="switch"&&n),children:y||Q.jsxs(Q.Fragment,{children:[T,I&&Q.jsx(p_,{title:p,children:g}),c&&Q.jsx(YS,{type:u,tooltip:l,children:c})]})})})});s7.displayName="FormCheck";const m_=Object.assign(s7,{Input:zR,Label:p_}),r7=K.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:i,id:s,className:r,isValid:o=!1,isInvalid:a=!1,plaintext:l,readOnly:c,as:u="input",...h},d)=>{const{controlId:p}=K.useContext(Ch);return t=dn(t,"form-control"),Q.jsx(u,{...h,type:e,size:i,ref:d,readOnly:c,id:s||p,className:qt(r,l?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,o&&"is-valid",a&&"is-invalid")})});r7.displayName="FormControl";const qae=Object.assign(r7,{Feedback:YS}),o7=K.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},s)=>(e=dn(e,"form-floating"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));o7.displayName="FormFloating";const jR=K.forwardRef(({controlId:t,as:e="div",...n},i)=>{const s=K.useMemo(()=>({controlId:t}),[t]);return Q.jsx(Ch.Provider,{value:s,children:Q.jsx(e,{...n,ref:i})})});jR.displayName="FormGroup";const a7=K.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:i=!1,className:s,htmlFor:r,...o},a)=>{const{controlId:l}=K.useContext(Ch);e=dn(e,"form-label");let c="col-form-label";typeof n=="string"&&(c=`${c} ${c}-${n}`);const u=qt(s,e,i&&"visually-hidden",n&&c);return r=r||l,n?Q.jsx(jn,{ref:a,as:"label",className:u,htmlFor:r,...o}):Q.jsx(t,{ref:a,className:u,htmlFor:r,...o})});a7.displayName="FormLabel";const l7=K.forwardRef(({bsPrefix:t,className:e,id:n,...i},s)=>{const{controlId:r}=K.useContext(Ch);return t=dn(t,"form-range"),Q.jsx("input",{...i,type:"range",ref:s,className:qt(e,t),id:n||r})});l7.displayName="FormRange";const c7=K.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:i,isValid:s=!1,isInvalid:r=!1,id:o,...a},l)=>{const{controlId:c}=K.useContext(Ch);return t=dn(t,"form-select"),Q.jsx("select",{...a,size:n,ref:l,className:qt(i,t,e&&`${t}-${e}`,s&&"is-valid",r&&"is-invalid"),id:o||c})});c7.displayName="FormSelect";const u7=K.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:i,...s},r)=>(t=dn(t,"form-text"),Q.jsx(n,{...s,ref:r,className:qt(e,t,i&&"text-muted")})));u7.displayName="FormText";const h7=K.forwardRef((t,e)=>Q.jsx(m_,{...t,ref:e,type:"switch"}));h7.displayName="Switch";const Kae=Object.assign(h7,{Input:m_.Input,Label:m_.Label}),d7=K.forwardRef(({bsPrefix:t,className:e,children:n,controlId:i,label:s,...r},o)=>(t=dn(t,"form-floating"),Q.jsxs(jR,{ref:o,className:qt(e,t),controlId:i,...r,children:[n,Q.jsx("label",{htmlFor:i,children:s})]})));d7.displayName="FloatingLabel";const Xae={_ref:ph.any,validated:ph.bool,as:ph.elementType},VR=K.forwardRef(({className:t,validated:e,as:n="form",...i},s)=>Q.jsx(n,{...i,ref:s,className:qt(t,e&&"was-validated")}));VR.displayName="Form";VR.propTypes=Xae;const Bo=Object.assign(VR,{Group:jR,Control:qae,Floating:o7,Check:m_,Switch:Kae,Label:a7,Text:u7,Range:l7,Select:c7,FloatingLabel:d7}),f7=K.createContext(null),Yae=["as","active","eventKey"];function Zae(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function p7({key:t,onClick:e,active:n,id:i,role:s,disabled:r}){const o=K.useContext(f_),a=K.useContext(FR),l=K.useContext(f7);let c=n;const u={role:s};if(a){!s&&a.role==="tablist"&&(u.role="tab");const h=a.getControllerId(t??null),d=a.getControlledId(t??null);u[XS("event-key")]=t,u.id=h||i,c=n==null&&t!=null?a.activeKey===t:n,(c||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(u["aria-controls"]=d)}return u.role==="tab"&&(u["aria-selected"]=c,c||(u.tabIndex=-1),r&&(u.tabIndex=-1,u["aria-disabled"]=!0)),u.onClick=Uo(h=>{r||(e==null||e(h),t!=null&&o&&!h.isPropagationStopped()&&o(t,h))}),[u,{isActive:c}]}const m7=K.forwardRef((t,e)=>{let{as:n=UV,active:i,eventKey:s}=t,r=Zae(t,Yae);const[o,a]=p7(Object.assign({key:MR(s,r.href),active:i},r));return o[XS("active")]=a.isActive,Q.jsx(n,Object.assign({},r,o,{ref:e}))});m7.displayName="NavItem";const Qae=["as","onSelect","activeKey","role","onKeyDown"];function Jae(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const u4=()=>{},h4=XS("event-key"),g7=K.forwardRef((t,e)=>{let{as:n="div",onSelect:i,activeKey:s,role:r,onKeyDown:o}=t,a=Jae(t,Qae);const l=Vae(),c=K.useRef(!1),u=K.useContext(f_),h=K.useContext(f7);let d,p;h&&(r=r||"tablist",s=h.activeKey,d=h.getControlledId,p=h.getControllerId);const m=K.useRef(null),g=w=>{const S=m.current;if(!S)return null;const k=lp(S,`[${h4}]:not([aria-disabled=true])`),I=S.querySelector("[aria-selected=true]");if(!I||I!==document.activeElement)return null;const T=k.indexOf(I);if(T===-1)return null;let E=T+w;return E>=k.length&&(E=0),E<0&&(E=k.length-1),k[E]},y=(w,S)=>{w!=null&&(i==null||i(w,S),u==null||u(w,S))},v=w=>{if(o==null||o(w),!h)return;let S;switch(w.key){case"ArrowLeft":case"ArrowUp":S=g(-1);break;case"ArrowRight":case"ArrowDown":S=g(1);break;default:return}S&&(w.preventDefault(),y(S.dataset[Hae("EventKey")]||null,w),c.current=!0,l())};K.useEffect(()=>{if(m.current&&c.current){const w=m.current.querySelector(`[${h4}][aria-selected=true]`);w==null||w.focus()}c.current=!1});const b=R0(e,m);return Q.jsx(f_.Provider,{value:y,children:Q.jsx(FR.Provider,{value:{role:r,activeKey:MR(s),getControlledId:d||u4,getControllerId:p||u4},children:Q.jsx(n,Object.assign({},a,{onKeyDown:v,ref:b,role:r}))})})});g7.displayName="Nav";const ele=Object.assign(g7,{Item:m7});var s2;function d4(t){if((!s2&&s2!==0||t)&&A0){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),s2=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return s2}function QI(t){t===void 0&&(t=GS());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function tle(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const f4=XS("modal-open");class WR{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return tle(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();e.style={overflow:s.style.overflow,[i]:s.style[i]},e.scrollBarWidth&&(n[i]=`${parseInt(fh(s,i)||"0",10)+e.scrollBarWidth}px`),s.setAttribute(f4,""),fh(s,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(f4),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const JI=(t,e)=>A0?t==null?(e||GS()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function nle(t,e){const n=BR(),[i,s]=K.useState(()=>JI(t,n==null?void 0:n.document));if(!i){const r=JI(t);r&&s(r)}return K.useEffect(()=>{},[e,i]),K.useEffect(()=>{const r=JI(t);r!==i&&s(r)},[t,i]),i}function ile({children:t,in:e,onExited:n,mountOnEnter:i,unmountOnExit:s}){const r=K.useRef(null),o=K.useRef(e),a=Uo(n);K.useEffect(()=>{e?o.current=!0:a(r.current)},[e,a]);const l=R0(r,t.ref),c=K.cloneElement(t,{ref:l});return e?c:s||!o.current&&i?null:c}const sle=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function rle(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function ole(t){let{onEnter:e,onEntering:n,onEntered:i,onExit:s,onExiting:r,onExited:o,addEndListener:a,children:l}=t,c=rle(t,sle);const{major:u}=GV(),h=u>=19?l.props.ref:l.ref,d=K.useRef(null),p=R0(d,typeof l=="function"?null:h),m=I=>T=>{I&&d.current&&I(d.current,T)},g=K.useCallback(m(e),[e]),y=K.useCallback(m(n),[n]),v=K.useCallback(m(i),[i]),b=K.useCallback(m(s),[s]),w=K.useCallback(m(r),[r]),S=K.useCallback(m(o),[o]),k=K.useCallback(m(a),[a]);return Object.assign({},c,{nodeRef:d},e&&{onEnter:g},n&&{onEntering:y},i&&{onEntered:v},s&&{onExit:b},r&&{onExiting:w},o&&{onExited:S},a&&{addEndListener:k},{children:typeof l=="function"?(I,T)=>l(I,Object.assign({},T,{ref:p})):K.cloneElement(l,{ref:p})})}const ale=["component"];function lle(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const cle=K.forwardRef((t,e)=>{let{component:n}=t,i=lle(t,ale);const s=ole(i);return Q.jsx(n,Object.assign({ref:e},s))});function ule({in:t,onTransition:e}){const n=K.useRef(null),i=K.useRef(!0),s=Uo(e);return bE(()=>{if(!n.current)return;let r=!1;return s({in:t,element:n.current,initial:i.current,isStale:()=>r}),()=>{r=!0}},[t,s]),bE(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function hle({children:t,in:e,onExited:n,onEntered:i,transition:s}){const[r,o]=K.useState(!e);e&&r&&o(!1);const a=ule({in:!!e,onTransition:c=>{const u=()=>{c.isStale()||(c.in?i==null||i(c.element,c.initial):(o(!0),n==null||n(c.element)))};Promise.resolve(s(c)).then(u,h=>{throw c.in||o(!0),h})}}),l=R0(a,t.ref);return r&&!e?null:K.cloneElement(t,{ref:l})}function p4(t,e,n){return t?Q.jsx(cle,Object.assign({},n,{component:t})):e?Q.jsx(hle,Object.assign({},n,{transition:e})):Q.jsx(ile,Object.assign({},n))}const dle=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function fle(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}let eN;function ple(t){return eN||(eN=new WR({ownerDocument:t==null?void 0:t.document})),eN}function mle(t){const e=BR(),n=t||ple(e),i=K.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:K.useCallback(s=>{i.current.dialog=s},[]),setBackdropRef:K.useCallback(s=>{i.current.backdrop=s},[])})}const v7=K.forwardRef((t,e)=>{let{show:n=!1,role:i="dialog",className:s,style:r,children:o,backdrop:a=!0,keyboard:l=!0,onBackdropClick:c,onEscapeKeyDown:u,transition:h,runTransition:d,backdropTransition:p,runBackdropTransition:m,autoFocus:g=!0,enforceFocus:y=!0,restoreFocus:v=!0,restoreFocusOptions:b,renderDialog:w,renderBackdrop:S=xe=>Q.jsx("div",Object.assign({},xe)),manager:k,container:I,onShow:T,onHide:E=()=>{},onExit:O,onExited:F,onExiting:R,onEnter:$,onEntering:U,onEntered:W}=t,te=fle(t,dle);const H=BR(),G=nle(I),B=mle(k),Y=Sae(),ne=Cae(n),[le,M]=K.useState(!n),j=K.useRef(null);K.useImperativeHandle(e,()=>B,[B]),A0&&!ne&&n&&(j.current=QI(H==null?void 0:H.document)),n&&le&&M(!1);const q=Uo(()=>{if(B.add(),Pe.current=d_(document,"keydown",fe),me.current=d_(document,"focus",()=>setTimeout(Z),!0),T&&T(),g){var xe,he;const ut=QI((xe=(he=B.dialog)==null?void 0:he.ownerDocument)!=null?xe:H==null?void 0:H.document);B.dialog&&ut&&!c4(B.dialog,ut)&&(j.current=ut,B.dialog.focus())}}),X=Uo(()=>{if(B.remove(),Pe.current==null||Pe.current(),me.current==null||me.current(),v){var xe;(xe=j.current)==null||xe.focus==null||xe.focus(b),j.current=null}});K.useEffect(()=>{!n||!G||q()},[n,G,q]),K.useEffect(()=>{le&&X()},[le,X]),n7(()=>{X()});const Z=Uo(()=>{if(!y||!Y()||!B.isTopModal())return;const xe=QI(H==null?void 0:H.document);B.dialog&&xe&&!c4(B.dialog,xe)&&B.dialog.focus()}),ue=Uo(xe=>{xe.target===xe.currentTarget&&(c==null||c(xe),a===!0&&E())}),fe=Uo(xe=>{l&&Pae(xe)&&B.isTopModal()&&(u==null||u(xe),xe.defaultPrevented||E())}),me=K.useRef(),Pe=K.useRef(),Ne=(...xe)=>{M(!0),F==null||F(...xe)};if(!G)return null;const Fe=Object.assign({role:i,ref:B.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},te,{style:r,className:s,tabIndex:-1});let qe=w?w(Fe):Q.jsx("div",Object.assign({},Fe,{children:K.cloneElement(o,{role:"document"})}));qe=p4(h,d,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:O,onExiting:R,onExited:Ne,onEnter:$,onEntering:U,onEntered:W,children:qe});let Qe=null;return a&&(Qe=S({ref:B.setBackdropRef,onClick:ue}),Qe=p4(p,m,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Qe})),Q.jsx(Q.Fragment,{children:wp.createPortal(Q.jsxs(Q.Fragment,{children:[Qe,qe]}),G)})});v7.displayName="Modal";const y7=Object.assign(v7,{Manager:WR});function gle(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function vle(t,e){t.classList?t.classList.add(e):gle(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function m4(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function yle(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=m4(t.className,e):t.setAttribute("class",m4(t.className&&t.className.baseVal||"",e))}const tg={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class b7 extends WR{adjustAndStore(e,n,i){const s=n.style[e];n.dataset[e]=s,fh(n,{[e]:`${parseFloat(fh(n,e))+i}px`})}restore(e,n){const i=n.dataset[e];i!==void 0&&(delete n.dataset[e],fh(n,{[e]:i}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(vle(n,"modal-open"),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";lp(n,tg.FIXED_CONTENT).forEach(r=>this.adjustAndStore(i,r,e.scrollBarWidth)),lp(n,tg.STICKY_CONTENT).forEach(r=>this.adjustAndStore(s,r,-e.scrollBarWidth)),lp(n,tg.NAVBAR_TOGGLER).forEach(r=>this.adjustAndStore(s,r,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();yle(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";lp(n,tg.FIXED_CONTENT).forEach(r=>this.restore(i,r)),lp(n,tg.STICKY_CONTENT).forEach(r=>this.restore(s,r)),lp(n,tg.NAVBAR_TOGGLER).forEach(r=>this.restore(s,r))}}let tN;function x7(t){return tN||(tN=new b7(t)),tN}const w7=K.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},s)=>(e=dn(e,"modal-body"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));w7.displayName="ModalBody";const UR=K.createContext({onHide(){}}),HR=K.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:i,size:s,fullscreen:r,children:o,scrollable:a,...l},c)=>{t=dn(t,"modal");const u=`${t}-dialog`,h=typeof r=="string"?`${t}-fullscreen-${r}`:`${t}-fullscreen`;return Q.jsx("div",{...l,ref:c,className:qt(u,e,s&&`${t}-${s}`,i&&`${u}-centered`,a&&`${u}-scrollable`,r&&h),children:Q.jsx("div",{className:qt(`${t}-content`,n),children:o})})});HR.displayName="ModalDialog";const _7=K.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},s)=>(e=dn(e,"modal-footer"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));_7.displayName="ModalFooter";const S7=K.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:i,children:s,...r},o)=>{const a=K.useContext(UR),l=Uo(()=>{a==null||a.onHide(),i==null||i()});return Q.jsxs("div",{ref:o,...r,children:[s,n&&Q.jsx(DR,{"aria-label":t,variant:e,onClick:l})]})}),C7=K.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:i=!1,...s},r)=>(t=dn(t,"modal-header"),Q.jsx(S7,{ref:r,...s,className:qt(e,t),closeLabel:n,closeButton:i})));C7.displayName="ModalHeader";const ble=qS("h4"),k7=K.forwardRef(({className:t,bsPrefix:e,as:n=ble,...i},s)=>(e=dn(e,"modal-title"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));k7.displayName="ModalTitle";function xle(t){return Q.jsx(KS,{...t,timeout:null})}function wle(t){return Q.jsx(KS,{...t,timeout:null})}const I7=K.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:i,contentClassName:s,children:r,dialogAs:o=HR,"data-bs-theme":a,"aria-labelledby":l,"aria-describedby":c,"aria-label":u,show:h=!1,animation:d=!0,backdrop:p=!0,keyboard:m=!0,onEscapeKeyDown:g,onShow:y,onHide:v,container:b,autoFocus:w=!0,enforceFocus:S=!0,restoreFocus:k=!0,restoreFocusOptions:I,onEntered:T,onExit:E,onExiting:O,onEnter:F,onEntering:R,onExited:$,backdropClassName:U,manager:W,...te},H)=>{const[G,B]=K.useState({}),[Y,ne]=K.useState(!1),le=K.useRef(!1),M=K.useRef(!1),j=K.useRef(null),[q,X]=_ae(),Z=R0(H,X),ue=Uo(v),fe=Qoe();t=dn(t,"modal");const me=K.useMemo(()=>({onHide:ue}),[ue]);function Pe(){return W||x7({isRTL:fe})}function Ne(pt){if(!A0)return;const Ot=Pe().getScrollbarWidth()>0,Ht=pt.scrollHeight>GS(pt).documentElement.clientHeight;B({paddingRight:Ot&&!Ht?d4():void 0,paddingLeft:!Ot&&Ht?d4():void 0})}const Fe=Uo(()=>{q&&Ne(q.dialog)});n7(()=>{yE(window,"resize",Fe),j.current==null||j.current()});const qe=()=>{le.current=!0},Qe=pt=>{le.current&&q&&pt.target===q.dialog&&(M.current=!0),le.current=!1},xe=()=>{ne(!0),j.current=VV(q.dialog,()=>{ne(!1)})},he=pt=>{pt.target===pt.currentTarget&&xe()},ut=pt=>{if(p==="static"){he(pt);return}if(M.current||pt.target!==pt.currentTarget){M.current=!1;return}v==null||v()},ot=pt=>{m?g==null||g(pt):(pt.preventDefault(),p==="static"&&xe())},Je=(pt,Ot)=>{pt&&Ne(pt),F==null||F(pt,Ot)},it=pt=>{j.current==null||j.current(),E==null||E(pt)},ht=(pt,Ot)=>{R==null||R(pt,Ot),jV(window,"resize",Fe)},at=pt=>{pt&&(pt.style.display=""),$==null||$(pt),yE(window,"resize",Fe)},wt=K.useCallback(pt=>Q.jsx("div",{...pt,className:qt(`${t}-backdrop`,U,!d&&"show")}),[d,U,t]),Rt={...n,...G};Rt.display="block";const Ft=pt=>Q.jsx("div",{role:"dialog",...pt,style:Rt,className:qt(e,t,Y&&`${t}-static`,!d&&"show"),onClick:p?ut:void 0,onMouseUp:Qe,"data-bs-theme":a,"aria-label":u,"aria-labelledby":l,"aria-describedby":c,children:Q.jsx(o,{...te,onMouseDown:qe,className:i,contentClassName:s,children:r})});return Q.jsx(UR.Provider,{value:me,children:Q.jsx(y7,{show:h,ref:Z,backdrop:p,container:b,keyboard:!0,autoFocus:w,enforceFocus:S,restoreFocus:k,restoreFocusOptions:I,onEscapeKeyDown:ot,onShow:y,onHide:v,onEnter:Je,onEntering:ht,onEntered:T,onExit:it,onExiting:O,onExited:at,manager:Pe(),transition:d?xle:void 0,backdropTransition:d?wle:void 0,renderBackdrop:wt,renderDialog:Ft})})});I7.displayName="Modal";const Mo=Object.assign(I7,{Body:w7,Header:C7,Title:k7,Footer:_7,Dialog:HR,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var g4={exports:{}},xE={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(i){function s(o,a,l,c,u,h){var d=c||"<<anonymous>>",p=h||l;if(a[l]==null)return o?new Error("Required "+u+" `"+p+"` was not specified "+("in `"+d+"`.")):null;for(var m=arguments.length,g=Array(m>6?m-6:0),y=6;y<m;y++)g[y-6]=arguments[y];return i.apply(void 0,[a,l,d,u,p].concat(g))}var r=s.bind(null,!1);return r.isRequired=s.bind(null,!0),r}t.exports=e.default})(xE,xE.exports);var _le=xE.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=_le,i=s(n);function s(o){return o&&o.__esModule?o:{default:o}}function r(){for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];function c(){for(var u=arguments.length,h=Array(u),d=0;d<u;d++)h[d]=arguments[d];var p=null;return a.forEach(function(m){if(p==null){var g=m.apply(void 0,h);g!=null&&(p=g)}}),p}return(0,i.default)(c)}t.exports=e.default})(g4,g4.exports);const N7=K.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},s)=>(e=dn(e,"nav-item"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));N7.displayName="NavItem";const E7=K.forwardRef(({bsPrefix:t,className:e,as:n=HV,active:i,eventKey:s,disabled:r=!1,...o},a)=>{t=dn(t,"nav-link");const[l,c]=p7({key:MR(s,o.href),active:i,disabled:r,...o});return Q.jsx(n,{...o,...l,ref:a,disabled:r,className:qt(e,t,r&&"disabled",c.isActive&&"active")})});E7.displayName="NavLink";const T7=K.forwardRef((t,e)=>{const{as:n="div",bsPrefix:i,variant:s,fill:r=!1,justify:o=!1,navbar:a,navbarScroll:l,className:c,activeKey:u,...h}=DV(t,{activeKey:"onSelect"}),d=dn(i,"nav");let p,m,g=!1;const y=K.useContext(L0),v=K.useContext(OR);return y?(p=y.bsPrefix,g=a??!0):v&&({cardHeaderBsPrefix:m}=v),Q.jsx(ele,{as:n,ref:e,activeKey:u,className:qt(c,{[d]:!g,[`${p}-nav`]:g,[`${p}-nav-scroll`]:g&&l,[`${m}-${s}`]:!!m,[`${d}-${s}`]:!!s,[`${d}-fill`]:r,[`${d}-justified`]:o}),...h})});T7.displayName="Nav";const Qc=Object.assign(T7,{Item:N7,Link:E7}),A7=K.forwardRef(({bsPrefix:t,className:e,as:n,...i},s)=>{t=dn(t,"navbar-brand");const r=n||(i.href?"a":"span");return Q.jsx(r,{...i,ref:s,className:qt(e,t)})});A7.displayName="NavbarBrand";const R7=K.forwardRef(({children:t,bsPrefix:e,...n},i)=>{e=dn(e,"navbar-collapse");const s=K.useContext(L0);return Q.jsx(xae,{in:!!(s&&s.expanded),...n,children:Q.jsx("div",{ref:i,className:e,children:t})})});R7.displayName="NavbarCollapse";const L7=K.forwardRef(({bsPrefix:t,className:e,children:n,label:i="Toggle navigation",as:s="button",onClick:r,...o},a)=>{t=dn(t,"navbar-toggler");const{onToggle:l,expanded:c}=K.useContext(L0)||{},u=Uo(h=>{r&&r(h),l&&l()});return s==="button"&&(o.type="button"),Q.jsx(s,{...o,ref:a,onClick:u,"aria-label":i,className:qt(e,t,!c&&"collapsed"),children:n||Q.jsx("span",{className:`${t}-icon`})})});L7.displayName="NavbarToggle";const wE=new WeakMap,v4=(t,e)=>{if(!t||!e)return;const n=wE.get(e)||new Map;wE.set(e,n);let i=n.get(t);return i||(i=e.matchMedia(t),i.refCount=0,n.set(i.media,i)),i};function Sle(t,e=typeof window>"u"?void 0:window){const n=v4(t,e),[i,s]=K.useState(()=>n?n.matches:!1);return bE(()=>{let r=v4(t,e);if(!r)return s(!1);let o=wE.get(e);const a=()=>{s(r.matches)};return r.refCount++,r.addListener(a),a(),()=>{r.removeListener(a),r.refCount--,r.refCount<=0&&(o==null||o.delete(r.media)),r=void 0}},[t]),i}function Cle(t){const e=Object.keys(t);function n(a,l){return a===l?l:a?`${a} and ${l}`:l}function i(a){return e[Math.min(e.indexOf(a)+1,e.length-1)]}function s(a){const l=i(a);let c=t[l];return typeof c=="number"?c=`${c-.2}px`:c=`calc(${c} - 0.2px)`,`(max-width: ${c})`}function r(a){let l=t[a];return typeof l=="number"&&(l=`${l}px`),`(min-width: ${l})`}function o(a,l,c){let u;typeof a=="object"?(u=a,c=l,l=!0):(l=l||!0,u={[a]:l});let h=K.useMemo(()=>Object.entries(u).reduce((d,[p,m])=>((m==="up"||m===!0)&&(d=n(d,r(p))),(m==="down"||m===!0)&&(d=n(d,s(p))),d),""),[JSON.stringify(u)]);return Sle(h,c)}return o}const kle=Cle({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),P7=K.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},s)=>(e=dn(e,"offcanvas-body"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));P7.displayName="OffcanvasBody";const Ile={[dc]:"show",[Ju]:"show"},D7=K.forwardRef(({bsPrefix:t,className:e,children:n,in:i=!1,mountOnEnter:s=!1,unmountOnExit:r=!1,appear:o=!1,...a},l)=>(t=dn(t,"offcanvas"),Q.jsx(LR,{ref:l,addEndListener:RR,in:i,mountOnEnter:s,unmountOnExit:r,appear:o,...a,childRef:n.ref,children:(c,u)=>K.cloneElement(n,{...u,className:qt(e,n.props.className,(c===dc||c===ly)&&`${t}-toggling`,Ile[c])})})));D7.displayName="OffcanvasToggling";const $7=K.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:i=!1,...s},r)=>(t=dn(t,"offcanvas-header"),Q.jsx(S7,{ref:r,...s,className:qt(e,t),closeLabel:n,closeButton:i})));$7.displayName="OffcanvasHeader";const Nle=qS("h5"),O7=K.forwardRef(({className:t,bsPrefix:e,as:n=Nle,...i},s)=>(e=dn(e,"offcanvas-title"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));O7.displayName="OffcanvasTitle";function Ele(t){return Q.jsx(D7,{...t})}function Tle(t){return Q.jsx(KS,{...t})}const M7=K.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":i,placement:s="start",responsive:r,show:o=!1,backdrop:a=!0,keyboard:l=!0,scroll:c=!1,onEscapeKeyDown:u,onShow:h,onHide:d,container:p,autoFocus:m=!0,enforceFocus:g=!0,restoreFocus:y=!0,restoreFocusOptions:v,onEntered:b,onExit:w,onExiting:S,onEnter:k,onEntering:I,onExited:T,backdropClassName:E,manager:O,renderStaticNode:F=!1,...R},$)=>{const U=K.useRef();t=dn(t,"offcanvas");const[W,te]=K.useState(!1),H=Uo(d),G=kle(r||"xs","up");K.useEffect(()=>{te(r?o&&!G:o)},[o,r,G]);const B=K.useMemo(()=>({onHide:H}),[H]);function Y(){return O||(c?(U.current||(U.current=new b7({handleContainerOverflow:!1})),U.current):x7())}const ne=(q,...X)=>{q&&(q.style.visibility="visible"),k==null||k(q,...X)},le=(q,...X)=>{q&&(q.style.visibility=""),T==null||T(...X)},M=K.useCallback(q=>Q.jsx("div",{...q,className:qt(`${t}-backdrop`,E)}),[E,t]),j=q=>Q.jsx("div",{...q,...R,className:qt(e,r?`${t}-${r}`:t,`${t}-${s}`),"aria-labelledby":i,children:n});return Q.jsxs(Q.Fragment,{children:[!W&&(r||F)&&j({}),Q.jsx(UR.Provider,{value:B,children:Q.jsx(y7,{show:W,ref:$,backdrop:a,container:p,keyboard:l,autoFocus:m,enforceFocus:g&&!c,restoreFocus:y,restoreFocusOptions:v,onEscapeKeyDown:u,onShow:h,onHide:H,onEnter:ne,onEntering:I,onEntered:b,onExit:w,onExiting:S,onExited:le,manager:Y(),transition:Ele,backdropTransition:Tle,renderBackdrop:M,renderDialog:j})})]})});M7.displayName="Offcanvas";const Ale=Object.assign(M7,{Body:P7,Header:$7,Title:O7}),F7=K.forwardRef(({onHide:t,...e},n)=>{const i=K.useContext(L0),s=Uo(()=>{i==null||i.onToggle==null||i.onToggle(),t==null||t()});return Q.jsx(Ale,{ref:n,show:!!(i!=null&&i.expanded),...e,renderStaticNode:!0,onHide:s})});F7.displayName="NavbarOffcanvas";const B7=K.forwardRef(({className:t,bsPrefix:e,as:n="span",...i},s)=>(e=dn(e,"navbar-text"),Q.jsx(n,{ref:s,className:qt(t,e),...i})));B7.displayName="NavbarText";const z7=K.forwardRef((t,e)=>{const{bsPrefix:n,expand:i=!0,variant:s="light",bg:r,fixed:o,sticky:a,className:l,as:c="nav",expanded:u,onToggle:h,onSelect:d,collapseOnSelect:p=!1,...m}=DV(t,{expanded:"onToggle"}),g=dn(n,"navbar"),y=K.useCallback((...w)=>{d==null||d(...w),p&&u&&(h==null||h(!1))},[d,p,u,h]);m.role===void 0&&c!=="nav"&&(m.role="navigation");let v=`${g}-expand`;typeof i=="string"&&(v=`${v}-${i}`);const b=K.useMemo(()=>({onToggle:()=>h==null?void 0:h(!u),bsPrefix:g,expanded:!!u,expand:i}),[g,u,i,h]);return Q.jsx(L0.Provider,{value:b,children:Q.jsx(f_.Provider,{value:y,children:Q.jsx(c,{ref:e,...m,className:qt(l,g,i&&v,s&&`${g}-${s}`,r&&`bg-${r}`,a&&`sticky-${a}`,o&&`fixed-${o}`)})})})});z7.displayName="Navbar";const y4=Object.assign(z7,{Brand:A7,Collapse:R7,Offcanvas:F7,Text:B7,Toggle:L7}),or=K.forwardRef(({bsPrefix:t,className:e,as:n="div",...i},s)=>{const r=dn(t,"row"),o=$V(),a=OV(),l=`${r}-cols`,c=[];return o.forEach(u=>{const h=i[u];delete i[u];let d;h!=null&&typeof h=="object"?{cols:d}=h:d=h;const p=u!==a?`-${u}`:"";d!=null&&c.push(`${l}${p}-${d}`)}),Q.jsx(n,{ref:s,...i,className:qt(e,r,...c)})});or.displayName="Row";const j7=K.forwardRef(({bsPrefix:t,className:e,striped:n,bordered:i,borderless:s,hover:r,size:o,variant:a,responsive:l,...c},u)=>{const h=dn(t,"table"),d=qt(e,h,a&&`${h}-${a}`,o&&`${h}-${o}`,n&&`${h}-${typeof n=="string"?`striped-${n}`:"striped"}`,i&&`${h}-bordered`,s&&`${h}-borderless`,r&&`${h}-hover`),p=Q.jsx("table",{...c,className:d,ref:u});if(l){let m=`${h}-responsive`;return typeof l=="string"&&(m=`${m}-${l}`),Q.jsx("div",{className:m,children:p})}return p}),Rle=()=>{const t=UA(),e=localStorage.getItem("userData"),n=JSON.parse(e),i=()=>{localStorage.removeItem("userData"),t("/")};return Q.jsxs(y4,{bg:"dark",variant:"dark",className:"flex-column p-4 text-white position-fixed h-100",style:{width:"180px"},children:[Q.jsxs(y4.Brand,{className:"mb-4",children:[Q.jsx("h1",{className:"h5",children:"Water Quality"}),Q.jsx("h2",{className:"small",children:"System"})]}),Q.jsxs(Qc,{className:"flex-column flex-grow-1",children:[n.role==="Admin"&&Q.jsx(Qc.Item,{className:"my-3",children:Q.jsx(Zf,{to:"/dashboard",className:({isActive:s})=>s?"text-info":"text-white",children:"Dashboard"})}),n.role==="Client"&&Q.jsx(Qc.Item,{className:"my-3",children:Q.jsx(Zf,{to:"/sensor-data",className:({isActive:s})=>s?"text-info":"text-white",children:"Sensor Data"})}),n.role==="Client"&&Q.jsx(Qc.Item,{className:"my-3",children:Q.jsx(Zf,{to:"/data-visualization",className:({isActive:s})=>s?"text-info":"text-white",children:"DataVisualization"})}),n.role==="Admin"&&Q.jsx(Qc.Item,{className:"my-3",children:Q.jsx(Zf,{to:"/members",className:({isActive:s})=>s?"text-info":"text-white",children:"Members"})}),n.role==="Admin"&&Q.jsx(Qc.Item,{className:"my-3",children:Q.jsx(Zf,{to:"/client-data",className:({isActive:s})=>s?"text-info":"text-white",children:"Client Data"})}),n.role==="Client"&&Q.jsx(Qc.Item,{className:"my-3",children:Q.jsx(Zf,{to:"/reports",className:({isActive:s})=>s?"text-info":"text-white",children:"Reports"})}),Q.jsx(Qc.Item,{className:"my-3",children:Q.jsx(Zf,{to:"/settings",className:({isActive:s})=>s?"text-info":"text-white",children:"Setting"})})]}),Q.jsx(Qc,{className:"mt-auto",children:Q.jsx(Qc.Item,{className:"my-4",children:Q.jsx("span",{onClick:i,className:"text-white",style:{cursor:"pointer"},children:"Logout"})})})]})},Lle=()=>{const t=S0();let e="Dashboard";t.pathname==="/dashboard"?e="Dashboard":t.pathname==="/data-visualization"?e="Data Visualization":t.pathname==="/members"?e="Member Management":t.pathname==="/reports"?e="Reports":t.pathname==="/sensor-data"?e="Sensor Data":t.pathname==="/settings"?e="Settings":t.pathname==="/client-data"&&(e="Client Data");const[n,i]=K.useState(!1),s=()=>{i(!n)};return Q.jsxs("div",{className:"flex h-screen",children:[Q.jsx("div",{className:`absolute md:relative z-20 w-[180px] bg-white transition-transform transform ${n?"translate-x-0":"-translate-x-full"} md:translate-x-0`,children:Q.jsx(Rle,{})}),Q.jsxs("div",{className:"flex-1",children:[Q.jsx(Uoe,{title:e,className:"h-[60px]",toggleSideNav:s}),Q.jsx("div",{className:"p-2",children:Q.jsx(tte,{})})]}),n&&Q.jsx("div",{className:"fixed inset-0 bg-black z-10 md:hidden",onClick:s})]})},Ple=()=>{const[t,e]=K.useState(0),[n,i]=K.useState([]),[s,r]=K.useState({total:0,active:0,inactive:0});return K.useEffect(()=>{(async()=>{try{const a=Ia(Rl,"devices"),l=await mu(a);e(l.exists()?Object.keys(l.val()).length:0);const c=Ia(Rl,"members"),u=await mu(c);if(u.exists()){let h=0,d=0,p=0;const m=[];u.forEach(g=>{const y=g.val();y.role==="Client"&&(h++,y.status==="Active"?(d++,m.push({value:g.key,label:y.username})):y.status==="Inactive"&&p++)}),i(m),r({total:h,active:d,inactive:p})}}catch(a){console.error("Error fetching data:",a),jt.error("Error fetching data.")}})()},[]),Q.jsxs(Yy,{className:"mt-12",children:[Q.jsx(C0,{}),Q.jsxs(or,{className:"mb-4",children:[Q.jsx(jn,{xs:12,sm:6,lg:6,children:Q.jsx(oo,{className:"text-center shadow-lg",style:{backgroundColor:"#f8f9fa",borderColor:"#6c757d"},children:Q.jsxs(oo.Body,{children:[Q.jsx(oo.Title,{className:"text-primary",style:{fontSize:"1.5rem",fontWeight:"bold"},children:"Total Devices"}),Q.jsx(oo.Text,{className:"fs-1 text-success",style:{fontSize:"2.5rem",fontWeight:"700",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:t})]})})}),Q.jsx(jn,{xs:12,sm:6,lg:6,children:Q.jsx(oo,{className:"text-center shadow-lg",style:{backgroundColor:"#f8f9fa",borderColor:"#6c757d"},children:Q.jsxs(oo.Body,{children:[Q.jsx(oo.Title,{className:"text-primary",style:{fontSize:"1.5rem",fontWeight:"bold"},children:"Total Clients"}),Q.jsx(oo.Text,{className:"fs-1 text-success",style:{fontSize:"2.5rem",fontWeight:"700",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:s.total})]})})})]}),Q.jsxs(or,{className:"mb-4",children:[Q.jsx(jn,{xs:12,sm:6,lg:6,children:Q.jsx(oo,{className:"text-center shadow-lg",style:{backgroundColor:"#f8f9fa",borderColor:"#6c757d"},children:Q.jsxs(oo.Body,{children:[Q.jsx(oo.Title,{className:"text-primary",style:{fontSize:"1.5rem",fontWeight:"bold"},children:"Active Clients"}),Q.jsx(oo.Text,{className:"fs-1 text-success",style:{fontSize:"2.5rem",fontWeight:"700",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:s.active})]})})}),Q.jsx(jn,{xs:12,sm:6,lg:6,children:Q.jsx(oo,{className:"text-center shadow-lg",style:{backgroundColor:"#f8f9fa",borderColor:"#6c757d"},children:Q.jsxs(oo.Body,{children:[Q.jsx(oo.Title,{className:"text-primary",style:{fontSize:"1.5rem",fontWeight:"bold"},children:"Inactive Clients"}),Q.jsx(oo.Text,{className:"fs-1 text-success",style:{fontSize:"2.5rem",fontWeight:"700",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.2)"},children:s.inactive})]})})})]})]})};function qn(t){"@babel/helpers - typeof";return qn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qn(t)}function Dle(t,e){if(qn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(qn(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function V7(t){var e=Dle(t,"string");return qn(e)=="symbol"?e:e+""}function Vv(t,e,n){return(e=V7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b4(Object(n),!0).forEach(function(i){Vv(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b4(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $le(t){if(Array.isArray(t))return t}function Ole(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,s,r,o,a=[],l=!0,c=!1;try{if(r=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function _E(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function W7(t,e){if(t){if(typeof t=="string")return _E(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_E(t,e):void 0}}function Mle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mh(t,e){return $le(t)||Ole(t,e)||W7(t,e)||Mle()}function Ph(t,e){if(t==null)return{};var n,i,s=AR(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}var Fle=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Ble(t){var e=t.defaultInputValue,n=e===void 0?"":e,i=t.defaultMenuIsOpen,s=i===void 0?!1:i,r=t.defaultValue,o=r===void 0?null:r,a=t.inputValue,l=t.menuIsOpen,c=t.onChange,u=t.onInputChange,h=t.onMenuClose,d=t.onMenuOpen,p=t.value,m=Ph(t,Fle),g=K.useState(a!==void 0?a:n),y=mh(g,2),v=y[0],b=y[1],w=K.useState(l!==void 0?l:s),S=mh(w,2),k=S[0],I=S[1],T=K.useState(p!==void 0?p:o),E=mh(T,2),O=E[0],F=E[1],R=K.useCallback(function(B,Y){typeof c=="function"&&c(B,Y),F(B)},[c]),$=K.useCallback(function(B,Y){var ne;typeof u=="function"&&(ne=u(B,Y)),b(ne!==void 0?ne:B)},[u]),U=K.useCallback(function(){typeof d=="function"&&d(),I(!0)},[d]),W=K.useCallback(function(){typeof h=="function"&&h(),I(!1)},[h]),te=a!==void 0?a:v,H=l!==void 0?l:k,G=p!==void 0?p:O;return Yt(Yt({},m),{},{inputValue:te,menuIsOpen:H,onChange:R,onInputChange:$,onMenuClose:W,onMenuOpen:U,value:G})}function zle(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x4(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,V7(i.key),i)}}function jle(t,e,n){return e&&x4(t.prototype,e),n&&x4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vle(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h_(t,e)}function g_(t){return g_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g_(t)}function U7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U7=function(){return!!t})()}function Wle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ule(t,e){if(e&&(qn(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wle(t)}function Hle(t){var e=U7();return function(){var n,i=g_(t);if(e){var s=g_(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return Ule(this,n)}}function Gle(t){if(Array.isArray(t))return _E(t)}function qle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Kle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GR(t){return Gle(t)||qle(t)||W7(t)||Kle()}var Xle=!1;function Yle(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Zle(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Qle=function(){function t(n){var i=this;this._insertTag=function(s){var r;i.tags.length===0?i.insertionPoint?r=i.insertionPoint.nextSibling:i.prepend?r=i.container.firstChild:r=i.before:r=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(s,r),i.tags.push(s)},this.isSpeedy=n.speedy===void 0?!Xle:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Zle(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var r=Yle(s);try{r.insertRule(i,r.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var s;return(s=i.parentNode)==null?void 0:s.removeChild(i)}),this.tags=[],this.ctr=0},t}(),ho="-ms-",v_="-moz-",li="-webkit-",H7="comm",qR="rule",KR="decl",Jle="@import",G7="@keyframes",ece="@layer",tce=Math.abs,ZS=String.fromCharCode,nce=Object.assign;function ice(t,e){return jr(t,0)^45?(((e<<2^jr(t,0))<<2^jr(t,1))<<2^jr(t,2))<<2^jr(t,3):0}function q7(t){return t.trim()}function sce(t,e){return(t=e.exec(t))?t[0]:t}function ci(t,e,n){return t.replace(e,n)}function SE(t,e){return t.indexOf(e)}function jr(t,e){return t.charCodeAt(e)|0}function cy(t,e,n){return t.slice(e,n)}function ru(t){return t.length}function XR(t){return t.length}function r2(t,e){return e.push(t),t}function rce(t,e){return t.map(e).join("")}var QS=1,n0=1,K7=0,Na=0,Us=0,P0="";function JS(t,e,n,i,s,r,o){return{value:t,root:e,parent:n,type:i,props:s,children:r,line:QS,column:n0,length:o,return:""}}function Sv(t,e){return nce(JS("",null,null,"",null,null,0),t,{length:-t.length},e)}function oce(){return Us}function ace(){return Us=Na>0?jr(P0,--Na):0,n0--,Us===10&&(n0=1,QS--),Us}function Ya(){return Us=Na<K7?jr(P0,Na++):0,n0++,Us===10&&(n0=1,QS++),Us}function gu(){return jr(P0,Na)}function sw(){return Na}function Zy(t,e){return cy(P0,t,e)}function uy(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function X7(t){return QS=n0=1,K7=ru(P0=t),Na=0,[]}function Y7(t){return P0="",t}function rw(t){return q7(Zy(Na-1,CE(t===91?t+2:t===40?t+1:t)))}function lce(t){for(;(Us=gu())&&Us<33;)Ya();return uy(t)>2||uy(Us)>3?"":" "}function cce(t,e){for(;--e&&Ya()&&!(Us<48||Us>102||Us>57&&Us<65||Us>70&&Us<97););return Zy(t,sw()+(e<6&&gu()==32&&Ya()==32))}function CE(t){for(;Ya();)switch(Us){case t:return Na;case 34:case 39:t!==34&&t!==39&&CE(Us);break;case 40:t===41&&CE(t);break;case 92:Ya();break}return Na}function uce(t,e){for(;Ya()&&t+Us!==57;)if(t+Us===84&&gu()===47)break;return"/*"+Zy(e,Na-1)+"*"+ZS(t===47?t:Ya())}function hce(t){for(;!uy(gu());)Ya();return Zy(t,Na)}function dce(t){return Y7(ow("",null,null,null,[""],t=X7(t),0,[0],t))}function ow(t,e,n,i,s,r,o,a,l){for(var c=0,u=0,h=o,d=0,p=0,m=0,g=1,y=1,v=1,b=0,w="",S=s,k=r,I=i,T=w;y;)switch(m=b,b=Ya()){case 40:if(m!=108&&jr(T,h-1)==58){SE(T+=ci(rw(b),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:T+=rw(b);break;case 9:case 10:case 13:case 32:T+=lce(m);break;case 92:T+=cce(sw()-1,7);continue;case 47:switch(gu()){case 42:case 47:r2(fce(uce(Ya(),sw()),e,n),l);break;default:T+="/"}break;case 123*g:a[c++]=ru(T)*v;case 125*g:case 59:case 0:switch(b){case 0:case 125:y=0;case 59+u:v==-1&&(T=ci(T,/\f/g,"")),p>0&&ru(T)-h&&r2(p>32?_4(T+";",i,n,h-1):_4(ci(T," ","")+";",i,n,h-2),l);break;case 59:T+=";";default:if(r2(I=w4(T,e,n,c,u,s,a,w,S=[],k=[],h),r),b===123)if(u===0)ow(T,e,I,I,S,r,h,a,k);else switch(d===99&&jr(T,3)===110?100:d){case 100:case 108:case 109:case 115:ow(t,I,I,i&&r2(w4(t,I,I,0,0,s,a,w,s,S=[],h),k),s,k,h,a,i?S:k);break;default:ow(T,I,I,I,[""],k,0,a,k)}}c=u=p=0,g=v=1,w=T="",h=o;break;case 58:h=1+ru(T),p=m;default:if(g<1){if(b==123)--g;else if(b==125&&g++==0&&ace()==125)continue}switch(T+=ZS(b),b*g){case 38:v=u>0?1:(T+="\f",-1);break;case 44:a[c++]=(ru(T)-1)*v,v=1;break;case 64:gu()===45&&(T+=rw(Ya())),d=gu(),u=h=ru(w=T+=hce(sw())),b++;break;case 45:m===45&&ru(T)==2&&(g=0)}}return r}function w4(t,e,n,i,s,r,o,a,l,c,u){for(var h=s-1,d=s===0?r:[""],p=XR(d),m=0,g=0,y=0;m<i;++m)for(var v=0,b=cy(t,h+1,h=tce(g=o[m])),w=t;v<p;++v)(w=q7(g>0?d[v]+" "+b:ci(b,/&\f/g,d[v])))&&(l[y++]=w);return JS(t,e,n,s===0?qR:a,l,c,u)}function fce(t,e,n){return JS(t,e,n,H7,ZS(oce()),cy(t,2,-2),0)}function _4(t,e,n,i){return JS(t,e,n,KR,cy(t,0,i),cy(t,i+1,-1),i)}function Og(t,e){for(var n="",i=XR(t),s=0;s<i;s++)n+=e(t[s],s,t,e)||"";return n}function pce(t,e,n,i){switch(t.type){case ece:if(t.children.length)break;case Jle:case KR:return t.return=t.return||t.value;case H7:return"";case G7:return t.return=t.value+"{"+Og(t.children,i)+"}";case qR:t.value=t.props.join(",")}return ru(n=Og(t.children,i))?t.return=t.value+"{"+n+"}":""}function mce(t){var e=XR(t);return function(n,i,s,r){for(var o="",a=0;a<e;a++)o+=t[a](n,i,s,r)||"";return o}}function gce(t){return function(e){e.root||(e=e.return)&&t(e)}}function vce(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var yce=function(e,n,i){for(var s=0,r=0;s=r,r=gu(),s===38&&r===12&&(n[i]=1),!uy(r);)Ya();return Zy(e,Na)},bce=function(e,n){var i=-1,s=44;do switch(uy(s)){case 0:s===38&&gu()===12&&(n[i]=1),e[i]+=yce(Na-1,n,i);break;case 2:e[i]+=rw(s);break;case 4:if(s===44){e[++i]=gu()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=ZS(s)}while(s=Ya());return e},xce=function(e,n){return Y7(bce(X7(e),n))},S4=new WeakMap,wce=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,s=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!S4.get(i))&&!s){S4.set(e,!0);for(var r=[],o=xce(n,r),a=i.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=r[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},_ce=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function Z7(t,e){switch(ice(t,e)){case 5103:return li+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return li+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return li+t+v_+t+ho+t+t;case 6828:case 4268:return li+t+ho+t+t;case 6165:return li+t+ho+"flex-"+t+t;case 5187:return li+t+ci(t,/(\w+).+(:[^]+)/,li+"box-$1$2"+ho+"flex-$1$2")+t;case 5443:return li+t+ho+"flex-item-"+ci(t,/flex-|-self/,"")+t;case 4675:return li+t+ho+"flex-line-pack"+ci(t,/align-content|flex-|-self/,"")+t;case 5548:return li+t+ho+ci(t,"shrink","negative")+t;case 5292:return li+t+ho+ci(t,"basis","preferred-size")+t;case 6060:return li+"box-"+ci(t,"-grow","")+li+t+ho+ci(t,"grow","positive")+t;case 4554:return li+ci(t,/([^-])(transform)/g,"$1"+li+"$2")+t;case 6187:return ci(ci(ci(t,/(zoom-|grab)/,li+"$1"),/(image-set)/,li+"$1"),t,"")+t;case 5495:case 3959:return ci(t,/(image-set\([^]*)/,li+"$1$`$1");case 4968:return ci(ci(t,/(.+:)(flex-)?(.*)/,li+"box-pack:$3"+ho+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+li+t+t;case 4095:case 3583:case 4068:case 2532:return ci(t,/(.+)-inline(.+)/,li+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ru(t)-1-e>6)switch(jr(t,e+1)){case 109:if(jr(t,e+4)!==45)break;case 102:return ci(t,/(.+:)(.+)-([^]+)/,"$1"+li+"$2-$3$1"+v_+(jr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~SE(t,"stretch")?Z7(ci(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(jr(t,e+1)!==115)break;case 6444:switch(jr(t,ru(t)-3-(~SE(t,"!important")&&10))){case 107:return ci(t,":",":"+li)+t;case 101:return ci(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+li+(jr(t,14)===45?"inline-":"")+"box$3$1"+li+"$2$3$1"+ho+"$2box$3")+t}break;case 5936:switch(jr(t,e+11)){case 114:return li+t+ho+ci(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return li+t+ho+ci(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return li+t+ho+ci(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return li+t+ho+t+t}return t}var Sce=function(e,n,i,s){if(e.length>-1&&!e.return)switch(e.type){case KR:e.return=Z7(e.value,e.length);break;case G7:return Og([Sv(e,{value:ci(e.value,"@","@"+li)})],s);case qR:if(e.length)return rce(e.props,function(r){switch(sce(r,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Og([Sv(e,{props:[ci(r,/:(read-\w+)/,":"+v_+"$1")]})],s);case"::placeholder":return Og([Sv(e,{props:[ci(r,/:(plac\w+)/,":"+li+"input-$1")]}),Sv(e,{props:[ci(r,/:(plac\w+)/,":"+v_+"$1")]}),Sv(e,{props:[ci(r,/:(plac\w+)/,ho+"input-$1")]})],s)}return""})}},Cce=[Sce],kce=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(g){var y=g.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var s=e.stylisPlugins||Cce,r={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var y=g.getAttribute("data-emotion").split(" "),v=1;v<y.length;v++)r[y[v]]=!0;a.push(g)});var l,c=[wce,_ce];{var u,h=[pce,gce(function(g){u.insert(g)})],d=mce(c.concat(s,h)),p=function(y){return Og(dce(y),d)};l=function(y,v,b,w){u=b,p(y?y+"{"+v.styles+"}":v.styles),w&&(m.inserted[v.name]=!0)}}var m={key:n,sheet:new Qle({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:r,registered:{},insert:l};return m.sheet.hydrate(a),m},Q7={exports:{}},Ci={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rr=typeof Symbol=="function"&&Symbol.for,YR=Rr?Symbol.for("react.element"):60103,ZR=Rr?Symbol.for("react.portal"):60106,eC=Rr?Symbol.for("react.fragment"):60107,tC=Rr?Symbol.for("react.strict_mode"):60108,nC=Rr?Symbol.for("react.profiler"):60114,iC=Rr?Symbol.for("react.provider"):60109,sC=Rr?Symbol.for("react.context"):60110,QR=Rr?Symbol.for("react.async_mode"):60111,rC=Rr?Symbol.for("react.concurrent_mode"):60111,oC=Rr?Symbol.for("react.forward_ref"):60112,aC=Rr?Symbol.for("react.suspense"):60113,Ice=Rr?Symbol.for("react.suspense_list"):60120,lC=Rr?Symbol.for("react.memo"):60115,cC=Rr?Symbol.for("react.lazy"):60116,Nce=Rr?Symbol.for("react.block"):60121,Ece=Rr?Symbol.for("react.fundamental"):60117,Tce=Rr?Symbol.for("react.responder"):60118,Ace=Rr?Symbol.for("react.scope"):60119;function nl(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case YR:switch(t=t.type,t){case QR:case rC:case eC:case nC:case tC:case aC:return t;default:switch(t=t&&t.$$typeof,t){case sC:case oC:case cC:case lC:case iC:return t;default:return e}}case ZR:return e}}}function J7(t){return nl(t)===rC}Ci.AsyncMode=QR;Ci.ConcurrentMode=rC;Ci.ContextConsumer=sC;Ci.ContextProvider=iC;Ci.Element=YR;Ci.ForwardRef=oC;Ci.Fragment=eC;Ci.Lazy=cC;Ci.Memo=lC;Ci.Portal=ZR;Ci.Profiler=nC;Ci.StrictMode=tC;Ci.Suspense=aC;Ci.isAsyncMode=function(t){return J7(t)||nl(t)===QR};Ci.isConcurrentMode=J7;Ci.isContextConsumer=function(t){return nl(t)===sC};Ci.isContextProvider=function(t){return nl(t)===iC};Ci.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===YR};Ci.isForwardRef=function(t){return nl(t)===oC};Ci.isFragment=function(t){return nl(t)===eC};Ci.isLazy=function(t){return nl(t)===cC};Ci.isMemo=function(t){return nl(t)===lC};Ci.isPortal=function(t){return nl(t)===ZR};Ci.isProfiler=function(t){return nl(t)===nC};Ci.isStrictMode=function(t){return nl(t)===tC};Ci.isSuspense=function(t){return nl(t)===aC};Ci.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===eC||t===rC||t===nC||t===tC||t===aC||t===Ice||typeof t=="object"&&t!==null&&(t.$$typeof===cC||t.$$typeof===lC||t.$$typeof===iC||t.$$typeof===sC||t.$$typeof===oC||t.$$typeof===Ece||t.$$typeof===Tce||t.$$typeof===Ace||t.$$typeof===Nce)};Ci.typeOf=nl;Q7.exports=Ci;var Rce=Q7.exports,eW=Rce,Lce={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Pce={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},tW={};tW[eW.ForwardRef]=Lce;tW[eW.Memo]=Pce;var Dce=!0;function $ce(t,e,n){var i="";return n.split(" ").forEach(function(s){t[s]!==void 0?e.push(t[s]+";"):s&&(i+=s+" ")}),i}var nW=function(e,n,i){var s=e.key+"-"+n.name;(i===!1||Dce===!1)&&e.registered[s]===void 0&&(e.registered[s]=n.styles)},Oce=function(e,n,i){nW(e,n,i);var s=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var r=n;do e.insert(n===r?"."+s:"",r,e.sheet,!0),r=r.next;while(r!==void 0)}};function Mce(t){for(var e=0,n,i=0,s=t.length;s>=4;++i,s-=4)n=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Fce={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Bce=!1,zce=/[A-Z]|^ms/g,jce=/_EMO_([^_]+?)_([^]*?)_EMO_/g,iW=function(e){return e.charCodeAt(1)===45},C4=function(e){return e!=null&&typeof e!="boolean"},nN=vce(function(t){return iW(t)?t:t.replace(zce,"-$&").toLowerCase()}),k4=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(jce,function(i,s,r){return ou={name:s,styles:r,next:ou},s})}return Fce[e]!==1&&!iW(e)&&typeof n=="number"&&n!==0?n+"px":n},Vce="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function hy(t,e,n){if(n==null)return"";var i=n;if(i.__emotion_styles!==void 0)return i;switch(typeof n){case"boolean":return"";case"object":{var s=n;if(s.anim===1)return ou={name:s.name,styles:s.styles,next:ou},s.name;var r=n;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)ou={name:o.name,styles:o.styles,next:ou},o=o.next;var a=r.styles+";";return a}return Wce(t,e,n)}case"function":{if(t!==void 0){var l=ou,c=n(t);return ou=l,hy(t,e,c)}break}}var u=n;return u}function Wce(t,e,n){var i="";if(Array.isArray(n))for(var s=0;s<n.length;s++)i+=hy(t,e,n[s])+";";else for(var r in n){var o=n[r];if(typeof o!="object"){var a=o;C4(a)&&(i+=nN(r)+":"+k4(r,a)+";")}else{if(r==="NO_COMPONENT_SELECTOR"&&Bce)throw new Error(Vce);if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var l=0;l<o.length;l++)C4(o[l])&&(i+=nN(r)+":"+k4(r,o[l])+";");else{var c=hy(t,e,o);switch(r){case"animation":case"animationName":{i+=nN(r)+":"+c+";";break}default:i+=r+"{"+c+"}"}}}}return i}var I4=/label:\s*([^\s;{]+)\s*(;|$)/g,ou;function sW(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,s="";ou=void 0;var r=t[0];if(r==null||r.raw===void 0)i=!1,s+=hy(n,e,r);else{var o=r;s+=o[0]}for(var a=1;a<t.length;a++)if(s+=hy(n,e,t[a]),i){var l=r;s+=l[a]}I4.lastIndex=0;for(var c="",u;(u=I4.exec(s))!==null;)c+="-"+u[1];var h=Mce(s)+c;return{name:h,styles:s,next:ou}}var Uce=function(e){return e()},Hce=XN.useInsertionEffect?XN.useInsertionEffect:!1,Gce=Hce||Uce,qce=!1,rW=K.createContext(typeof HTMLElement<"u"?kce({key:"css"}):null);rW.Provider;var Kce=function(e){return K.forwardRef(function(n,i){var s=K.useContext(rW);return e(n,s,i)})},Xce=K.createContext({}),JR={}.hasOwnProperty,kE="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Yce=function(e,n){var i={};for(var s in n)JR.call(n,s)&&(i[s]=n[s]);return i[kE]=e,i},Zce=function(e){var n=e.cache,i=e.serialized,s=e.isStringTag;return nW(n,i,s),Gce(function(){return Oce(n,i,s)}),null},Qce=Kce(function(t,e,n){var i=t.css;typeof i=="string"&&e.registered[i]!==void 0&&(i=e.registered[i]);var s=t[kE],r=[i],o="";typeof t.className=="string"?o=$ce(e.registered,r,t.className):t.className!=null&&(o=t.className+" ");var a=sW(r,void 0,K.useContext(Xce));o+=e.key+"-"+a.name;var l={};for(var c in t)JR.call(t,c)&&c!=="css"&&c!==kE&&!qce&&(l[c]=t[c]);return l.className=o,n&&(l.ref=n),K.createElement(K.Fragment,null,K.createElement(Zce,{cache:e,serialized:a,isStringTag:typeof s=="string"}),K.createElement(s,l))}),Jce=Qce,Gt=function(e,n){var i=arguments;if(n==null||!JR.call(n,"css"))return K.createElement.apply(void 0,i);var s=i.length,r=new Array(s);r[0]=Jce,r[1]=Yce(e,n);for(var o=2;o<s;o++)r[o]=i[o];return K.createElement.apply(null,r)};function eL(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return sW(e)}var eue=function(){var e=eL.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function tue(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const nue=Math.min,iue=Math.max,y_=Math.round,o2=Math.floor,b_=t=>({x:t,y:t});function sue(t){const{x:e,y:n,width:i,height:s}=t;return{width:i,height:s,top:n,left:e,right:e+i,bottom:n+s,x:e,y:n}}function uC(){return typeof window<"u"}function oW(t){return lW(t)?(t.nodeName||"").toLowerCase():"#document"}function kh(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function aW(t){var e;return(e=(lW(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function lW(t){return uC()?t instanceof Node||t instanceof kh(t).Node:!1}function rue(t){return uC()?t instanceof Element||t instanceof kh(t).Element:!1}function tL(t){return uC()?t instanceof HTMLElement||t instanceof kh(t).HTMLElement:!1}function N4(t){return!uC()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof kh(t).ShadowRoot}function cW(t){const{overflow:e,overflowX:n,overflowY:i,display:s}=nL(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(s)}function oue(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function aue(t){return["html","body","#document"].includes(oW(t))}function nL(t){return kh(t).getComputedStyle(t)}function lue(t){if(oW(t)==="html")return t;const e=t.assignedSlot||t.parentNode||N4(t)&&t.host||aW(t);return N4(e)?e.host:e}function uW(t){const e=lue(t);return aue(e)?t.ownerDocument?t.ownerDocument.body:t.body:tL(e)&&cW(e)?e:uW(e)}function x_(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=uW(t),r=s===((i=t.ownerDocument)==null?void 0:i.body),o=kh(s);if(r){const a=IE(o);return e.concat(o,o.visualViewport||[],cW(s)?s:[],a&&n?x_(a):[])}return e.concat(s,x_(s,[],n))}function IE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function cue(t){const e=nL(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const s=tL(t),r=s?t.offsetWidth:n,o=s?t.offsetHeight:i,a=y_(n)!==r||y_(i)!==o;return a&&(n=r,i=o),{width:n,height:i,$:a}}function iL(t){return rue(t)?t:t.contextElement}function E4(t){const e=iL(t);if(!tL(e))return b_(1);const n=e.getBoundingClientRect(),{width:i,height:s,$:r}=cue(e);let o=(r?y_(n.width):n.width)/i,a=(r?y_(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const uue=b_(0);function hue(t){const e=kh(t);return!oue()||!e.visualViewport?uue:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function due(t,e,n){return!1}function T4(t,e,n,i){e===void 0&&(e=!1);const s=t.getBoundingClientRect(),r=iL(t);let o=b_(1);e&&(o=E4(t));const a=due()?hue(r):b_(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(r){const d=kh(r),p=i;let m=d,g=IE(m);for(;g&&i&&p!==m;){const y=E4(g),v=g.getBoundingClientRect(),b=nL(g),w=v.left+(g.clientLeft+parseFloat(b.paddingLeft))*y.x,S=v.top+(g.clientTop+parseFloat(b.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,h*=y.y,l+=w,c+=S,m=kh(g),g=IE(m)}}return sue({width:u,height:h,x:l,y:c})}function fue(t,e){let n=null,i;const s=aW(t);function r(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),r();const{left:c,top:u,width:h,height:d}=t.getBoundingClientRect();if(a||e(),!h||!d)return;const p=o2(u),m=o2(s.clientWidth-(c+h)),g=o2(s.clientHeight-(u+d)),y=o2(c),b={rootMargin:-p+"px "+-m+"px "+-g+"px "+-y+"px",threshold:iue(0,nue(1,l))||1};let w=!0;function S(k){const I=k[0].intersectionRatio;if(I!==l){if(!w)return o();I?o(!1,I):i=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(S,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(S,b)}n.observe(t)}return o(!0),r}function pue(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=iL(t),u=s||r?[...c?x_(c):[],...x_(e)]:[];u.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),r&&v.addEventListener("resize",n)});const h=c&&a?fue(c,n):null;let d=-1,p=null;o&&(p=new ResizeObserver(v=>{let[b]=v;b&&b.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let m,g=l?T4(t):null;l&&y();function y(){const v=T4(t);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&n(),g=v,m=requestAnimationFrame(y)}return n(),()=>{var v;u.forEach(b=>{s&&b.removeEventListener("scroll",n),r&&b.removeEventListener("resize",n)}),h==null||h(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(m)}}var NE=K.useLayoutEffect,mue=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],w_=function(){};function gue(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function vue(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];var r=[].concat(i);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&r.push("".concat(gue(t,o)));return r.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var A4=function(e){return Iue(e)?e.filter(Boolean):qn(e)==="object"&&e!==null?[e]:[]},hW=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Ph(e,mue);return Yt({},n)},Ss=function(e,n,i){var s=e.cx,r=e.getStyles,o=e.getClassNames,a=e.className;return{css:r(n,e),className:s(i??{},o(n,e),a)}};function hC(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function yue(t){return hC(t)?window.innerHeight:t.clientHeight}function dW(t){return hC(t)?window.pageYOffset:t.scrollTop}function __(t,e){if(hC(t)){window.scrollTo(0,e);return}t.scrollTop=e}function bue(t){var e=getComputedStyle(t),n=e.position==="absolute",i=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var s=t;s=s.parentElement;)if(e=getComputedStyle(s),!(n&&e.position==="static")&&i.test(e.overflow+e.overflowY+e.overflowX))return s;return document.documentElement}function xue(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e}function a2(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:w_,s=dW(t),r=e-s,o=10,a=0;function l(){a+=o;var c=xue(a,s,r,n);__(t,c),a<n?window.requestAnimationFrame(l):i(t)}l()}function R4(t,e){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),s=e.offsetHeight/3;i.bottom+s>n.bottom?__(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+s,t.scrollHeight)):i.top-s<n.top&&__(t,Math.max(e.offsetTop-s,0))}function wue(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function L4(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function _ue(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var fW=!1,Sue={get passive(){return fW=!0}},l2=typeof window<"u"?window:{};l2.addEventListener&&l2.removeEventListener&&(l2.addEventListener("p",w_,Sue),l2.removeEventListener("p",w_,!1));var Cue=fW;function kue(t){return t!=null}function Iue(t){return Array.isArray(t)}function c2(t,e,n){return t?e:n}var Nue=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var r=Object.entries(e).filter(function(o){var a=mh(o,1),l=a[0];return!i.includes(l)});return r.reduce(function(o,a){var l=mh(a,2),c=l[0],u=l[1];return o[c]=u,o},{})},Eue=["children","innerProps"],Tue=["children","innerProps"];function Aue(t){var e=t.maxHeight,n=t.menuEl,i=t.minHeight,s=t.placement,r=t.shouldScroll,o=t.isFixedPosition,a=t.controlHeight,l=bue(n),c={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return c;var u=l.getBoundingClientRect(),h=u.height,d=n.getBoundingClientRect(),p=d.bottom,m=d.height,g=d.top,y=n.offsetParent.getBoundingClientRect(),v=y.top,b=o?window.innerHeight:yue(l),w=dW(l),S=parseInt(getComputedStyle(n).marginBottom,10),k=parseInt(getComputedStyle(n).marginTop,10),I=v-k,T=b-g,E=I+w,O=h-w-g,F=p-b+w+S,R=w+g-k,$=160;switch(s){case"auto":case"bottom":if(T>=m)return{placement:"bottom",maxHeight:e};if(O>=m&&!o)return r&&a2(l,F,$),{placement:"bottom",maxHeight:e};if(!o&&O>=i||o&&T>=i){r&&a2(l,F,$);var U=o?T-S:O-S;return{placement:"bottom",maxHeight:U}}if(s==="auto"||o){var W=e,te=o?I:E;return te>=i&&(W=Math.min(te-S-a,e)),{placement:"top",maxHeight:W}}if(s==="bottom")return r&&__(l,F),{placement:"bottom",maxHeight:e};break;case"top":if(I>=m)return{placement:"top",maxHeight:e};if(E>=m&&!o)return r&&a2(l,R,$),{placement:"top",maxHeight:e};if(!o&&E>=i||o&&I>=i){var H=e;return(!o&&E>=i||o&&I>=i)&&(H=o?I-k:E-k),r&&a2(l,R,$),{placement:"top",maxHeight:H}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return c}function Rue(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var pW=function(e){return e==="auto"?"bottom":e},Lue=function(e,n){var i,s=e.placement,r=e.theme,o=r.borderRadius,a=r.spacing,l=r.colors;return Yt((i={label:"menu"},Vv(i,Rue(s),"100%"),Vv(i,"position","absolute"),Vv(i,"width","100%"),Vv(i,"zIndex",1),i),n?{}:{backgroundColor:l.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},mW=K.createContext(null),Pue=function(e){var n=e.children,i=e.minMenuHeight,s=e.maxMenuHeight,r=e.menuPlacement,o=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,c=K.useContext(mW)||{},u=c.setPortalPlacement,h=K.useRef(null),d=K.useState(s),p=mh(d,2),m=p[0],g=p[1],y=K.useState(null),v=mh(y,2),b=v[0],w=v[1],S=l.spacing.controlHeight;return NE(function(){var k=h.current;if(k){var I=o==="fixed",T=a&&!I,E=Aue({maxHeight:s,menuEl:k,minHeight:i,placement:r,shouldScroll:T,isFixedPosition:I,controlHeight:S});g(E.maxHeight),w(E.placement),u==null||u(E.placement)}},[s,r,o,a,i,u,S]),n({ref:h,placerProps:Yt(Yt({},e),{},{placement:b||pW(r),maxHeight:m})})},Due=function(e){var n=e.children,i=e.innerRef,s=e.innerProps;return Gt("div",Jt({},Ss(e,"menu",{menu:!0}),{ref:i},s),n)},$ue=Due,Oue=function(e,n){var i=e.maxHeight,s=e.theme.spacing.baseUnit;return Yt({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:s,paddingTop:s})},Mue=function(e){var n=e.children,i=e.innerProps,s=e.innerRef,r=e.isMulti;return Gt("div",Jt({},Ss(e,"menuList",{"menu-list":!0,"menu-list--is-multi":r}),{ref:s},i),n)},gW=function(e,n){var i=e.theme,s=i.spacing.baseUnit,r=i.colors;return Yt({textAlign:"center"},n?{}:{color:r.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},Fue=gW,Bue=gW,zue=function(e){var n=e.children,i=n===void 0?"No options":n,s=e.innerProps,r=Ph(e,Eue);return Gt("div",Jt({},Ss(Yt(Yt({},r),{},{children:i,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),i)},jue=function(e){var n=e.children,i=n===void 0?"Loading...":n,s=e.innerProps,r=Ph(e,Tue);return Gt("div",Jt({},Ss(Yt(Yt({},r),{},{children:i,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),i)},Vue=function(e){var n=e.rect,i=e.offset,s=e.position;return{left:n.left,position:s,top:i,width:n.width,zIndex:1}},Wue=function(e){var n=e.appendTo,i=e.children,s=e.controlElement,r=e.innerProps,o=e.menuPlacement,a=e.menuPosition,l=K.useRef(null),c=K.useRef(null),u=K.useState(pW(o)),h=mh(u,2),d=h[0],p=h[1],m=K.useMemo(function(){return{setPortalPlacement:p}},[]),g=K.useState(null),y=mh(g,2),v=y[0],b=y[1],w=K.useCallback(function(){if(s){var T=wue(s),E=a==="fixed"?0:window.pageYOffset,O=T[d]+E;(O!==(v==null?void 0:v.offset)||T.left!==(v==null?void 0:v.rect.left)||T.width!==(v==null?void 0:v.rect.width))&&b({offset:O,rect:T})}},[s,a,d,v==null?void 0:v.offset,v==null?void 0:v.rect.left,v==null?void 0:v.rect.width]);NE(function(){w()},[w]);var S=K.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),s&&l.current&&(c.current=pue(s,l.current,w,{elementResize:"ResizeObserver"in window}))},[s,w]);NE(function(){S()},[S]);var k=K.useCallback(function(T){l.current=T,S()},[S]);if(!n&&a!=="fixed"||!v)return null;var I=Gt("div",Jt({ref:k},Ss(Yt(Yt({},e),{},{offset:v.offset,position:a,rect:v.rect}),"menuPortal",{"menu-portal":!0}),r),i);return Gt(mW.Provider,{value:m},n?IS.createPortal(I,n):I)},Uue=function(e){var n=e.isDisabled,i=e.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},Hue=function(e){var n=e.children,i=e.innerProps,s=e.isDisabled,r=e.isRtl;return Gt("div",Jt({},Ss(e,"container",{"--is-disabled":s,"--is-rtl":r}),i),n)},Gue=function(e,n){var i=e.theme.spacing,s=e.isMulti,r=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Yt({alignItems:"center",display:s&&r&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},que=function(e){var n=e.children,i=e.innerProps,s=e.isMulti,r=e.hasValue;return Gt("div",Jt({},Ss(e,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":r}),i),n)},Kue=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Xue=function(e){var n=e.children,i=e.innerProps;return Gt("div",Jt({},Ss(e,"indicatorsContainer",{indicators:!0}),i),n)},P4,Yue=["size"],Zue=["innerProps","isRtl","size"],Que={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},vW=function(e){var n=e.size,i=Ph(e,Yue);return Gt("svg",Jt({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Que},i))},sL=function(e){return Gt(vW,Jt({size:20},e),Gt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},yW=function(e){return Gt(vW,Jt({size:20},e),Gt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},bW=function(e,n){var i=e.isFocused,s=e.theme,r=s.spacing.baseUnit,o=s.colors;return Yt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:i?o.neutral60:o.neutral20,padding:r*2,":hover":{color:i?o.neutral80:o.neutral40}})},Jue=bW,ehe=function(e){var n=e.children,i=e.innerProps;return Gt("div",Jt({},Ss(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),n||Gt(yW,null))},the=bW,nhe=function(e){var n=e.children,i=e.innerProps;return Gt("div",Jt({},Ss(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),n||Gt(sL,null))},ihe=function(e,n){var i=e.isDisabled,s=e.theme,r=s.spacing.baseUnit,o=s.colors;return Yt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:i?o.neutral10:o.neutral20,marginBottom:r*2,marginTop:r*2})},she=function(e){var n=e.innerProps;return Gt("span",Jt({},n,Ss(e,"indicatorSeparator",{"indicator-separator":!0})))},rhe=eue(P4||(P4=tue([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),ohe=function(e,n){var i=e.isFocused,s=e.size,r=e.theme,o=r.colors,a=r.spacing.baseUnit;return Yt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},n?{}:{color:i?o.neutral60:o.neutral20,padding:a*2})},iN=function(e){var n=e.delay,i=e.offset;return Gt("span",{css:eL({animation:"".concat(rhe," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},ahe=function(e){var n=e.innerProps,i=e.isRtl,s=e.size,r=s===void 0?4:s,o=Ph(e,Zue);return Gt("div",Jt({},Ss(Yt(Yt({},o),{},{innerProps:n,isRtl:i,size:r}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),Gt(iN,{delay:0,offset:i}),Gt(iN,{delay:160,offset:!0}),Gt(iN,{delay:320,offset:!i}))},lhe=function(e,n){var i=e.isDisabled,s=e.isFocused,r=e.theme,o=r.colors,a=r.borderRadius,l=r.spacing;return Yt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:i?o.neutral5:o.neutral0,borderColor:i?o.neutral10:s?o.primary:o.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:s?o.primary:o.neutral30}})},che=function(e){var n=e.children,i=e.isDisabled,s=e.isFocused,r=e.innerRef,o=e.innerProps,a=e.menuIsOpen;return Gt("div",Jt({ref:r},Ss(e,"control",{control:!0,"control--is-disabled":i,"control--is-focused":s,"control--menu-is-open":a}),o,{"aria-disabled":i||void 0}),n)},uhe=che,hhe=["data"],dhe=function(e,n){var i=e.theme.spacing;return n?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},fhe=function(e){var n=e.children,i=e.cx,s=e.getStyles,r=e.getClassNames,o=e.Heading,a=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,h=e.selectProps;return Gt("div",Jt({},Ss(e,"group",{group:!0}),l),Gt(o,Jt({},a,{selectProps:h,theme:u,getStyles:s,getClassNames:r,cx:i}),c),Gt("div",null,n))},phe=function(e,n){var i=e.theme,s=i.colors,r=i.spacing;return Yt({label:"group",cursor:"default",display:"block"},n?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:r.baseUnit*3,paddingRight:r.baseUnit*3,textTransform:"uppercase"})},mhe=function(e){var n=hW(e);n.data;var i=Ph(n,hhe);return Gt("div",Jt({},Ss(e,"groupHeading",{"group-heading":!0}),i))},ghe=fhe,vhe=["innerRef","isDisabled","isHidden","inputClassName"],yhe=function(e,n){var i=e.isDisabled,s=e.value,r=e.theme,o=r.spacing,a=r.colors;return Yt(Yt({visibility:i?"hidden":"visible",transform:s?"translateZ(0)":""},bhe),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:a.neutral80})},xW={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},bhe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Yt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},xW)},xhe=function(e){return Yt({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},xW)},whe=function(e){var n=e.cx,i=e.value,s=hW(e),r=s.innerRef,o=s.isDisabled,a=s.isHidden,l=s.inputClassName,c=Ph(s,vhe);return Gt("div",Jt({},Ss(e,"input",{"input-container":!0}),{"data-value":i||""}),Gt("input",Jt({className:n({input:!0},l),ref:r,style:xhe(a),disabled:o},c)))},_he=whe,She=function(e,n){var i=e.theme,s=i.spacing,r=i.borderRadius,o=i.colors;return Yt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:r/2,margin:s.baseUnit/2})},Che=function(e,n){var i=e.theme,s=i.borderRadius,r=i.colors,o=e.cropWithEllipsis;return Yt({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:s/2,color:r.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},khe=function(e,n){var i=e.theme,s=i.spacing,r=i.borderRadius,o=i.colors,a=e.isFocused;return Yt({alignItems:"center",display:"flex"},n?{}:{borderRadius:r/2,backgroundColor:a?o.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},wW=function(e){var n=e.children,i=e.innerProps;return Gt("div",i,n)},Ihe=wW,Nhe=wW;function Ehe(t){var e=t.children,n=t.innerProps;return Gt("div",Jt({role:"button"},n),e||Gt(sL,{size:14}))}var The=function(e){var n=e.children,i=e.components,s=e.data,r=e.innerProps,o=e.isDisabled,a=e.removeProps,l=e.selectProps,c=i.Container,u=i.Label,h=i.Remove;return Gt(c,{data:s,innerProps:Yt(Yt({},Ss(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),r),selectProps:l},Gt(u,{data:s,innerProps:Yt({},Ss(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},n),Gt(h,{data:s,innerProps:Yt(Yt({},Ss(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},a),selectProps:l}))},Ahe=The,Rhe=function(e,n){var i=e.isDisabled,s=e.isFocused,r=e.isSelected,o=e.theme,a=o.spacing,l=o.colors;return Yt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:r?l.primary:s?l.primary25:"transparent",color:i?l.neutral20:r?l.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:r?l.primary:l.primary50}})},Lhe=function(e){var n=e.children,i=e.isDisabled,s=e.isFocused,r=e.isSelected,o=e.innerRef,a=e.innerProps;return Gt("div",Jt({},Ss(e,"option",{option:!0,"option--is-disabled":i,"option--is-focused":s,"option--is-selected":r}),{ref:o,"aria-disabled":i},a),n)},Phe=Lhe,Dhe=function(e,n){var i=e.theme,s=i.spacing,r=i.colors;return Yt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:r.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},$he=function(e){var n=e.children,i=e.innerProps;return Gt("div",Jt({},Ss(e,"placeholder",{placeholder:!0}),i),n)},Ohe=$he,Mhe=function(e,n){var i=e.isDisabled,s=e.theme,r=s.spacing,o=s.colors;return Yt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:i?o.neutral40:o.neutral80,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},Fhe=function(e){var n=e.children,i=e.isDisabled,s=e.innerProps;return Gt("div",Jt({},Ss(e,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),s),n)},Bhe=Fhe,zhe={ClearIndicator:nhe,Control:uhe,DropdownIndicator:ehe,DownChevron:yW,CrossIcon:sL,Group:ghe,GroupHeading:mhe,IndicatorsContainer:Xue,IndicatorSeparator:she,Input:_he,LoadingIndicator:ahe,Menu:$ue,MenuList:Mue,MenuPortal:Wue,LoadingMessage:jue,NoOptionsMessage:zue,MultiValue:Ahe,MultiValueContainer:Ihe,MultiValueLabel:Nhe,MultiValueRemove:Ehe,Option:Phe,Placeholder:Ohe,SelectContainer:Hue,SingleValue:Bhe,ValueContainer:que},jhe=function(e){return Yt(Yt({},zhe),e.components)},D4=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Vhe(t,e){return!!(t===e||D4(t)&&D4(e))}function Whe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Vhe(t[n],e[n]))return!1;return!0}function Uhe(t,e){e===void 0&&(e=Whe);var n=null;function i(){for(var s=[],r=0;r<arguments.length;r++)s[r]=arguments[r];if(n&&n.lastThis===this&&e(s,n.lastArgs))return n.lastResult;var o=t.apply(this,s);return n={lastResult:o,lastArgs:s,lastThis:this},o}return i.clear=function(){n=null},i}var Hhe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Ghe=function(e){return Gt("span",Jt({css:Hhe},e))},$4=Ghe,qhe={guidance:function(e){var n=e.isSearchable,i=e.isMulti,s=e.tabSelectsValue,r=e.context,o=e.isInitialFocus;switch(r){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,i=e.label,s=i===void 0?"":i,r=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(r.length>1?"s":""," ").concat(r.join(","),", selected.");case"select-option":return o?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(e){var n=e.context,i=e.focused,s=e.options,r=e.label,o=r===void 0?"":r,a=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,h=function(g,y){return g&&g.length?"".concat(g.indexOf(y)+1," of ").concat(g.length):""};if(n==="value"&&a)return"value ".concat(o," focused, ").concat(h(a,i),".");if(n==="menu"&&u){var d=l?" disabled":"",p="".concat(c?" selected":"").concat(d);return"".concat(o).concat(p,", ").concat(h(s,i),".")}return""},onFilter:function(e){var n=e.inputValue,i=e.resultsMessage;return"".concat(i).concat(n?" for search term "+n:"",".")}},Khe=function(e){var n=e.ariaSelection,i=e.focusedOption,s=e.focusedValue,r=e.focusableOptions,o=e.isFocused,a=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,h=l.ariaLiveMessages,d=l.getOptionLabel,p=l.inputValue,m=l.isMulti,g=l.isOptionDisabled,y=l.isSearchable,v=l.menuIsOpen,b=l.options,w=l.screenReaderStatus,S=l.tabSelectsValue,k=l.isLoading,I=l["aria-label"],T=l["aria-live"],E=K.useMemo(function(){return Yt(Yt({},qhe),h||{})},[h]),O=K.useMemo(function(){var te="";if(n&&E.onChange){var H=n.option,G=n.options,B=n.removedValue,Y=n.removedValues,ne=n.value,le=function(fe){return Array.isArray(fe)?null:fe},M=B||H||le(ne),j=M?d(M):"",q=G||Y||void 0,X=q?q.map(d):[],Z=Yt({isDisabled:M&&g(M,a),label:j,labels:X},n);te=E.onChange(Z)}return te},[n,E,g,a,d]),F=K.useMemo(function(){var te="",H=i||s,G=!!(i&&a&&a.includes(i));if(H&&E.onFocus){var B={focused:H,label:d(H),isDisabled:g(H,a),isSelected:G,options:r,context:H===i?"menu":"value",selectValue:a,isAppleDevice:u};te=E.onFocus(B)}return te},[i,s,d,g,E,r,a,u]),R=K.useMemo(function(){var te="";if(v&&b.length&&!k&&E.onFilter){var H=w({count:r.length});te=E.onFilter({inputValue:p,resultsMessage:H})}return te},[r,p,v,E,b,w,k]),$=(n==null?void 0:n.action)==="initial-input-focus",U=K.useMemo(function(){var te="";if(E.guidance){var H=s?"value":v?"menu":"input";te=E.guidance({"aria-label":I,context:H,isDisabled:i&&g(i,a),isMulti:m,isSearchable:y,tabSelectsValue:S,isInitialFocus:$})}return te},[I,i,s,m,g,y,v,E,a,S,$]),W=Gt(K.Fragment,null,Gt("span",{id:"aria-selection"},O),Gt("span",{id:"aria-focused"},F),Gt("span",{id:"aria-results"},R),Gt("span",{id:"aria-guidance"},U));return Gt(K.Fragment,null,Gt($4,{id:c},$&&W),Gt($4,{"aria-live":T,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!$&&W))},Xhe=Khe,EE=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Yhe=new RegExp("["+EE.map(function(t){return t.letters}).join("")+"]","g"),_W={};for(var sN=0;sN<EE.length;sN++)for(var rN=EE[sN],oN=0;oN<rN.letters.length;oN++)_W[rN.letters[oN]]=rN.base;var SW=function(e){return e.replace(Yhe,function(n){return _W[n]})},Zhe=Uhe(SW),O4=function(e){return e.replace(/^\s+|\s+$/g,"")},Qhe=function(e){return"".concat(e.label," ").concat(e.value)},Jhe=function(e){return function(n,i){if(n.data.__isNew__)return!0;var s=Yt({ignoreCase:!0,ignoreAccents:!0,stringify:Qhe,trim:!0,matchFrom:"any"},e),r=s.ignoreCase,o=s.ignoreAccents,a=s.stringify,l=s.trim,c=s.matchFrom,u=l?O4(i):i,h=l?O4(a(n)):a(n);return r&&(u=u.toLowerCase(),h=h.toLowerCase()),o&&(u=Zhe(u),h=SW(h)),c==="start"?h.substr(0,u.length)===u:h.indexOf(u)>-1}},ede=["innerRef"];function tde(t){var e=t.innerRef,n=Ph(t,ede),i=Nue(n,"onExited","in","enter","exit","appear");return Gt("input",Jt({ref:e},i,{css:eL({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var nde=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function ide(t){var e=t.isEnabled,n=t.onBottomArrive,i=t.onBottomLeave,s=t.onTopArrive,r=t.onTopLeave,o=K.useRef(!1),a=K.useRef(!1),l=K.useRef(0),c=K.useRef(null),u=K.useCallback(function(y,v){if(c.current!==null){var b=c.current,w=b.scrollTop,S=b.scrollHeight,k=b.clientHeight,I=c.current,T=v>0,E=S-k-w,O=!1;E>v&&o.current&&(i&&i(y),o.current=!1),T&&a.current&&(r&&r(y),a.current=!1),T&&v>E?(n&&!o.current&&n(y),I.scrollTop=S,O=!0,o.current=!0):!T&&-v>w&&(s&&!a.current&&s(y),I.scrollTop=0,O=!0,a.current=!0),O&&nde(y)}},[n,i,s,r]),h=K.useCallback(function(y){u(y,y.deltaY)},[u]),d=K.useCallback(function(y){l.current=y.changedTouches[0].clientY},[]),p=K.useCallback(function(y){var v=l.current-y.changedTouches[0].clientY;u(y,v)},[u]),m=K.useCallback(function(y){if(y){var v=Cue?{passive:!1}:!1;y.addEventListener("wheel",h,v),y.addEventListener("touchstart",d,v),y.addEventListener("touchmove",p,v)}},[p,d,h]),g=K.useCallback(function(y){y&&(y.removeEventListener("wheel",h,!1),y.removeEventListener("touchstart",d,!1),y.removeEventListener("touchmove",p,!1))},[p,d,h]);return K.useEffect(function(){if(e){var y=c.current;return m(y),function(){g(y)}}},[e,m,g]),function(y){c.current=y}}var M4=["boxSizing","height","overflow","paddingRight","position"],F4={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function B4(t){t.cancelable&&t.preventDefault()}function z4(t){t.stopPropagation()}function j4(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function V4(){return"ontouchstart"in window||navigator.maxTouchPoints}var W4=!!(typeof window<"u"&&window.document&&window.document.createElement),Cv=0,ng={capture:!1,passive:!1};function sde(t){var e=t.isEnabled,n=t.accountForScrollbars,i=n===void 0?!0:n,s=K.useRef({}),r=K.useRef(null),o=K.useCallback(function(l){if(W4){var c=document.body,u=c&&c.style;if(i&&M4.forEach(function(m){var g=u&&u[m];s.current[m]=g}),i&&Cv<1){var h=parseInt(s.current.paddingRight,10)||0,d=document.body?document.body.clientWidth:0,p=window.innerWidth-d+h||0;Object.keys(F4).forEach(function(m){var g=F4[m];u&&(u[m]=g)}),u&&(u.paddingRight="".concat(p,"px"))}c&&V4()&&(c.addEventListener("touchmove",B4,ng),l&&(l.addEventListener("touchstart",j4,ng),l.addEventListener("touchmove",z4,ng))),Cv+=1}},[i]),a=K.useCallback(function(l){if(W4){var c=document.body,u=c&&c.style;Cv=Math.max(Cv-1,0),i&&Cv<1&&M4.forEach(function(h){var d=s.current[h];u&&(u[h]=d)}),c&&V4()&&(c.removeEventListener("touchmove",B4,ng),l&&(l.removeEventListener("touchstart",j4,ng),l.removeEventListener("touchmove",z4,ng)))}},[i]);return K.useEffect(function(){if(e){var l=r.current;return o(l),function(){a(l)}}},[e,o,a]),function(l){r.current=l}}var rde=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},ode={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function ade(t){var e=t.children,n=t.lockEnabled,i=t.captureEnabled,s=i===void 0?!0:i,r=t.onBottomArrive,o=t.onBottomLeave,a=t.onTopArrive,l=t.onTopLeave,c=ide({isEnabled:s,onBottomArrive:r,onBottomLeave:o,onTopArrive:a,onTopLeave:l}),u=sde({isEnabled:n}),h=function(p){c(p),u(p)};return Gt(K.Fragment,null,n&&Gt("div",{onClick:rde,css:ode}),e(h))}var lde={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},cde=function(e){var n=e.name,i=e.onFocus;return Gt("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:lde,value:"",onChange:function(){}})},ude=cde;function rL(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function hde(){return rL(/^iPhone/i)}function CW(){return rL(/^Mac/i)}function dde(){return rL(/^iPad/i)||CW()&&navigator.maxTouchPoints>1}function fde(){return hde()||dde()}function pde(){return CW()||fde()}var mde=function(e){return e.label},gde=function(e){return e.label},vde=function(e){return e.value},yde=function(e){return!!e.isDisabled},bde={clearIndicator:the,container:Uue,control:lhe,dropdownIndicator:Jue,group:dhe,groupHeading:phe,indicatorsContainer:Kue,indicatorSeparator:ihe,input:yhe,loadingIndicator:ohe,loadingMessage:Bue,menu:Lue,menuList:Oue,menuPortal:Vue,multiValue:She,multiValueLabel:Che,multiValueRemove:khe,noOptionsMessage:Fue,option:Rhe,placeholder:Dhe,singleValue:Mhe,valueContainer:Gue},xde={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},wde=4,kW=4,_de=38,Sde=kW*2,Cde={baseUnit:kW,controlHeight:_de,menuGutter:Sde},aN={borderRadius:wde,colors:xde,spacing:Cde},kde={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:L4(),captureMenuScroll:!L4(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Jhe(),formatGroupLabel:mde,getOptionLabel:gde,getOptionValue:vde,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:yde,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!_ue(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function U4(t,e,n,i){var s=EW(t,e,n),r=TW(t,e,n),o=NW(t,e),a=S_(t,e);return{type:"option",data:e,isDisabled:s,isSelected:r,label:o,value:a,index:i}}function aw(t,e){return t.options.map(function(n,i){if("options"in n){var s=n.options.map(function(o,a){return U4(t,o,e,a)}).filter(function(o){return G4(t,o)});return s.length>0?{type:"group",data:n,options:s,index:i}:void 0}var r=U4(t,n,e,i);return G4(t,r)?r:void 0}).filter(kue)}function IW(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,GR(n.options.map(function(i){return i.data}))):e.push(n.data),e},[])}function H4(t,e){return t.reduce(function(n,i){return i.type==="group"?n.push.apply(n,GR(i.options.map(function(s){return{data:s.data,id:"".concat(e,"-").concat(i.index,"-").concat(s.index)}}))):n.push({data:i.data,id:"".concat(e,"-").concat(i.index)}),n},[])}function Ide(t,e){return IW(aw(t,e))}function G4(t,e){var n=t.inputValue,i=n===void 0?"":n,s=e.data,r=e.isSelected,o=e.label,a=e.value;return(!RW(t)||!r)&&AW(t,{label:o,value:a,data:s},i)}function Nde(t,e){var n=t.focusedValue,i=t.selectValue,s=i.indexOf(n);if(s>-1){var r=e.indexOf(n);if(r>-1)return n;if(s<e.length)return e[s]}return null}function Ede(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var lN=function(e,n){var i,s=(i=e.find(function(r){return r.data===n}))===null||i===void 0?void 0:i.id;return s||null},NW=function(e,n){return e.getOptionLabel(n)},S_=function(e,n){return e.getOptionValue(n)};function EW(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function TW(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var i=S_(t,e);return n.some(function(s){return S_(t,s)===i})}function AW(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var RW=function(e){var n=e.hideSelectedOptions,i=e.isMulti;return n===void 0?i:n},Tde=1,LW=function(t){Vle(n,t);var e=Hle(n);function n(i){var s;if(zle(this,n),s=e.call(this,i),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.isAppleDevice=pde(),s.controlRef=null,s.getControlRef=function(l){s.controlRef=l},s.focusedOptionRef=null,s.getFocusedOptionRef=function(l){s.focusedOptionRef=l},s.menuListRef=null,s.getMenuListRef=function(l){s.menuListRef=l},s.inputRef=null,s.getInputRef=function(l){s.inputRef=l},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(l,c){var u=s.props,h=u.onChange,d=u.name;c.name=d,s.ariaOnChange(l,c),h(l,c)},s.setValue=function(l,c,u){var h=s.props,d=h.closeMenuOnSelect,p=h.isMulti,m=h.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:m}),d&&(s.setState({inputIsHiddenAfterUpdate:!p}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(l,{action:c,option:u})},s.selectOption=function(l){var c=s.props,u=c.blurInputOnSelect,h=c.isMulti,d=c.name,p=s.state.selectValue,m=h&&s.isOptionSelected(l,p),g=s.isOptionDisabled(l,p);if(m){var y=s.getOptionValue(l);s.setValue(p.filter(function(v){return s.getOptionValue(v)!==y}),"deselect-option",l)}else if(!g)h?s.setValue([].concat(GR(p),[l]),"select-option",l):s.setValue(l,"select-option");else{s.ariaOnChange(l,{action:"select-option",option:l,name:d});return}u&&s.blurInput()},s.removeValue=function(l){var c=s.props.isMulti,u=s.state.selectValue,h=s.getOptionValue(l),d=u.filter(function(m){return s.getOptionValue(m)!==h}),p=c2(c,d,d[0]||null);s.onChange(p,{action:"remove-value",removedValue:l}),s.focusInput()},s.clearValue=function(){var l=s.state.selectValue;s.onChange(c2(s.props.isMulti,[],null),{action:"clear",removedValues:l})},s.popValue=function(){var l=s.props.isMulti,c=s.state.selectValue,u=c[c.length-1],h=c.slice(0,c.length-1),d=c2(l,h,h[0]||null);u&&s.onChange(d,{action:"pop-value",removedValue:u})},s.getFocusedOptionId=function(l){return lN(s.state.focusableOptionsWithIds,l)},s.getFocusableOptionsWithIds=function(){return H4(aw(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return vue.apply(void 0,[s.props.classNamePrefix].concat(c))},s.getOptionLabel=function(l){return NW(s.props,l)},s.getOptionValue=function(l){return S_(s.props,l)},s.getStyles=function(l,c){var u=s.props.unstyled,h=bde[l](c,u);h.boxSizing="border-box";var d=s.props.styles[l];return d?d(h,c):h},s.getClassNames=function(l,c){var u,h;return(u=(h=s.props.classNames)[l])===null||u===void 0?void 0:u.call(h,c)},s.getElementId=function(l){return"".concat(s.state.instancePrefix,"-").concat(l)},s.getComponents=function(){return jhe(s.props)},s.buildCategorizedOptions=function(){return aw(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return IW(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(l,c){s.setState({ariaSelection:Yt({value:l},c)})},s.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(l){s.blockOptionHover=!1},s.onControlMouseDown=function(l){if(!l.defaultPrevented){var c=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&s.onMenuClose():c&&s.openMenu("first"):(c&&(s.openAfterFocus=!0),s.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},s.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!s.props.isDisabled){var c=s.props,u=c.isMulti,h=c.menuIsOpen;s.focusInput(),h?(s.setState({inputIsHiddenAfterUpdate:!u}),s.onMenuClose()):s.openMenu("first"),l.preventDefault()}},s.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(s.clearValue(),l.preventDefault(),s.openAfterFocus=!1,l.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(l){typeof s.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&hC(l.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(l)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(l){var c=l.touches,u=c&&c.item(0);u&&(s.initialTouchX=u.clientX,s.initialTouchY=u.clientY,s.userIsDragging=!1)},s.onTouchMove=function(l){var c=l.touches,u=c&&c.item(0);if(u){var h=Math.abs(u.clientX-s.initialTouchX),d=Math.abs(u.clientY-s.initialTouchY),p=5;s.userIsDragging=h>p||d>p}},s.onTouchEnd=function(l){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(l.target)&&s.menuListRef&&!s.menuListRef.contains(l.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(l){s.userIsDragging||s.onControlMouseDown(l)},s.onClearIndicatorTouchEnd=function(l){s.userIsDragging||s.onClearIndicatorMouseDown(l)},s.onDropdownIndicatorTouchEnd=function(l){s.userIsDragging||s.onDropdownIndicatorMouseDown(l)},s.handleInputChange=function(l){var c=s.props.inputValue,u=l.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(u,{action:"input-change",prevInputValue:c}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(l){s.props.onFocus&&s.props.onFocus(l),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(l){var c=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(l),s.onInputChange("",{action:"input-blur",prevInputValue:c}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(l){if(!(s.blockOptionHover||s.state.focusedOption===l)){var c=s.getFocusableOptions(),u=c.indexOf(l);s.setState({focusedOption:l,focusedOptionId:u>-1?s.getFocusedOptionId(l):null})}},s.shouldHideSelectedOptions=function(){return RW(s.props)},s.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),s.focus()},s.onKeyDown=function(l){var c=s.props,u=c.isMulti,h=c.backspaceRemovesValue,d=c.escapeClearsValue,p=c.inputValue,m=c.isClearable,g=c.isDisabled,y=c.menuIsOpen,v=c.onKeyDown,b=c.tabSelectsValue,w=c.openMenuOnFocus,S=s.state,k=S.focusedOption,I=S.focusedValue,T=S.selectValue;if(!g&&!(typeof v=="function"&&(v(l),l.defaultPrevented))){switch(s.blockOptionHover=!0,l.key){case"ArrowLeft":if(!u||p)return;s.focusValue("previous");break;case"ArrowRight":if(!u||p)return;s.focusValue("next");break;case"Delete":case"Backspace":if(p)return;if(I)s.removeValue(I);else{if(!h)return;u?s.popValue():m&&s.clearValue()}break;case"Tab":if(s.isComposing||l.shiftKey||!y||!b||!k||w&&s.isOptionSelected(k,T))return;s.selectOption(k);break;case"Enter":if(l.keyCode===229)break;if(y){if(!k||s.isComposing)return;s.selectOption(k);break}return;case"Escape":y?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:p}),s.onMenuClose()):m&&d&&s.clearValue();break;case" ":if(p)return;if(!y){s.openMenu("first");break}if(!k)return;s.selectOption(k);break;case"ArrowUp":y?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":y?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!y)return;s.focusOption("pageup");break;case"PageDown":if(!y)return;s.focusOption("pagedown");break;case"Home":if(!y)return;s.focusOption("first");break;case"End":if(!y)return;s.focusOption("last");break;default:return}l.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++Tde),s.state.selectValue=A4(i.value),i.menuIsOpen&&s.state.selectValue.length){var r=s.getFocusableOptionsWithIds(),o=s.buildFocusableOptions(),a=o.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=r,s.state.focusedOption=o[a],s.state.focusedOptionId=lN(r,o[a])}return s}return jle(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&R4(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(s){var r=this.props,o=r.isDisabled,a=r.menuIsOpen,l=this.state.isFocused;(l&&!o&&s.isDisabled||l&&a&&!s.menuIsOpen)&&this.focusInput(),l&&o&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!o&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(R4(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,r){this.props.onInputChange(s,r)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var r=this,o=this.state,a=o.selectValue,l=o.isFocused,c=this.buildFocusableOptions(),u=s==="first"?0:c.length-1;if(!this.props.isMulti){var h=c.indexOf(a[0]);h>-1&&(u=h)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[u],focusedOptionId:this.getFocusedOptionId(c[u])},function(){return r.onMenuOpen()})}},{key:"focusValue",value:function(s){var r=this.state,o=r.selectValue,a=r.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=o.indexOf(a);a||(l=-1);var c=o.length-1,u=-1;if(o.length){switch(s){case"previous":l===0?u=0:l===-1?u=c:u=l-1;break;case"next":l>-1&&l<c&&(u=l+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",r=this.props.pageSize,o=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var l=0,c=a.indexOf(o);o||(c=-1),s==="up"?l=c>0?c-1:a.length-1:s==="down"?l=(c+1)%a.length:s==="pageup"?(l=c-r,l<0&&(l=0)):s==="pagedown"?(l=c+r,l>a.length-1&&(l=a.length-1)):s==="last"&&(l=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(a[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(aN):Yt(Yt({},aN),this.props.theme):aN}},{key:"getCommonProps",value:function(){var s=this.clearValue,r=this.cx,o=this.getStyles,a=this.getClassNames,l=this.getValue,c=this.selectOption,u=this.setValue,h=this.props,d=h.isMulti,p=h.isRtl,m=h.options,g=this.hasValue();return{clearValue:s,cx:r,getStyles:o,getClassNames:a,getValue:l,hasValue:g,isMulti:d,isRtl:p,options:m,selectOption:c,selectProps:h,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,r=s.isClearable,o=s.isMulti;return r===void 0?o:r}},{key:"isOptionDisabled",value:function(s,r){return EW(this.props,s,r)}},{key:"isOptionSelected",value:function(s,r){return TW(this.props,s,r)}},{key:"filterOption",value:function(s,r){return AW(this.props,s,r)}},{key:"formatOptionLabel",value:function(s,r){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(s,{context:r,inputValue:o,selectValue:a})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var s=this.props,r=s.isDisabled,o=s.isSearchable,a=s.inputId,l=s.inputValue,c=s.tabIndex,u=s.form,h=s.menuIsOpen,d=s.required,p=this.getComponents(),m=p.Input,g=this.state,y=g.inputIsHidden,v=g.ariaSelection,b=this.commonProps,w=a||this.getElementId("input"),S=Yt(Yt(Yt({"aria-autocomplete":"list","aria-expanded":h,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":d,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},h&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(v==null?void 0:v.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?K.createElement(m,Jt({},b,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:w,innerRef:this.getInputRef,isDisabled:r,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:u,type:"text",value:l},S)):K.createElement(tde,Jt({id:w,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:w_,onFocus:this.onInputFocus,disabled:r,tabIndex:c,inputMode:"none",form:u,value:""},S))}},{key:"renderPlaceholderOrValue",value:function(){var s=this,r=this.getComponents(),o=r.MultiValue,a=r.MultiValueContainer,l=r.MultiValueLabel,c=r.MultiValueRemove,u=r.SingleValue,h=r.Placeholder,d=this.commonProps,p=this.props,m=p.controlShouldRenderValue,g=p.isDisabled,y=p.isMulti,v=p.inputValue,b=p.placeholder,w=this.state,S=w.selectValue,k=w.focusedValue,I=w.isFocused;if(!this.hasValue()||!m)return v?null:K.createElement(h,Jt({},d,{key:"placeholder",isDisabled:g,isFocused:I,innerProps:{id:this.getElementId("placeholder")}}),b);if(y)return S.map(function(E,O){var F=E===k,R="".concat(s.getOptionLabel(E),"-").concat(s.getOptionValue(E));return K.createElement(o,Jt({},d,{components:{Container:a,Label:l,Remove:c},isFocused:F,isDisabled:g,key:R,index:O,removeProps:{onClick:function(){return s.removeValue(E)},onTouchEnd:function(){return s.removeValue(E)},onMouseDown:function(U){U.preventDefault()}},data:E}),s.formatOptionLabel(E,"value"))});if(v)return null;var T=S[0];return K.createElement(u,Jt({},d,{data:T,isDisabled:g}),this.formatOptionLabel(T,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),r=s.ClearIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,u=this.state.isFocused;if(!this.isClearable()||!r||l||!this.hasValue()||c)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return K.createElement(r,Jt({},o,{innerProps:h,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),r=s.LoadingIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,u=this.state.isFocused;if(!r||!c)return null;var h={"aria-hidden":"true"};return K.createElement(r,Jt({},o,{innerProps:h,isDisabled:l,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),r=s.DropdownIndicator,o=s.IndicatorSeparator;if(!r||!o)return null;var a=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused;return K.createElement(o,Jt({},a,{isDisabled:l,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),r=s.DropdownIndicator;if(!r)return null;var o=this.commonProps,a=this.props.isDisabled,l=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return K.createElement(r,Jt({},o,{innerProps:c,isDisabled:a,isFocused:l}))}},{key:"renderMenu",value:function(){var s=this,r=this.getComponents(),o=r.Group,a=r.GroupHeading,l=r.Menu,c=r.MenuList,u=r.MenuPortal,h=r.LoadingMessage,d=r.NoOptionsMessage,p=r.Option,m=this.commonProps,g=this.state.focusedOption,y=this.props,v=y.captureMenuScroll,b=y.inputValue,w=y.isLoading,S=y.loadingMessage,k=y.minMenuHeight,I=y.maxMenuHeight,T=y.menuIsOpen,E=y.menuPlacement,O=y.menuPosition,F=y.menuPortalTarget,R=y.menuShouldBlockScroll,$=y.menuShouldScrollIntoView,U=y.noOptionsMessage,W=y.onMenuScrollToTop,te=y.onMenuScrollToBottom;if(!T)return null;var H=function(j,q){var X=j.type,Z=j.data,ue=j.isDisabled,fe=j.isSelected,me=j.label,Pe=j.value,Ne=g===Z,Fe=ue?void 0:function(){return s.onOptionHover(Z)},qe=ue?void 0:function(){return s.selectOption(Z)},Qe="".concat(s.getElementId("option"),"-").concat(q),xe={id:Qe,onClick:qe,onMouseMove:Fe,onMouseOver:Fe,tabIndex:-1,role:"option","aria-selected":s.isAppleDevice?void 0:fe};return K.createElement(p,Jt({},m,{innerProps:xe,data:Z,isDisabled:ue,isSelected:fe,key:Qe,label:me,type:X,value:Pe,isFocused:Ne,innerRef:Ne?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(j.data,"menu"))},G;if(this.hasOptions())G=this.getCategorizedOptions().map(function(M){if(M.type==="group"){var j=M.data,q=M.options,X=M.index,Z="".concat(s.getElementId("group"),"-").concat(X),ue="".concat(Z,"-heading");return K.createElement(o,Jt({},m,{key:Z,data:j,options:q,Heading:a,headingProps:{id:ue,data:M.data},label:s.formatGroupLabel(M.data)}),M.options.map(function(fe){return H(fe,"".concat(X,"-").concat(fe.index))}))}else if(M.type==="option")return H(M,"".concat(M.index))});else if(w){var B=S({inputValue:b});if(B===null)return null;G=K.createElement(h,m,B)}else{var Y=U({inputValue:b});if(Y===null)return null;G=K.createElement(d,m,Y)}var ne={minMenuHeight:k,maxMenuHeight:I,menuPlacement:E,menuPosition:O,menuShouldScrollIntoView:$},le=K.createElement(Pue,Jt({},m,ne),function(M){var j=M.ref,q=M.placerProps,X=q.placement,Z=q.maxHeight;return K.createElement(l,Jt({},m,ne,{innerRef:j,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:w,placement:X}),K.createElement(ade,{captureEnabled:v,onTopArrive:W,onBottomArrive:te,lockEnabled:R},function(ue){return K.createElement(c,Jt({},m,{innerRef:function(me){s.getMenuListRef(me),ue(me)},innerProps:{role:"listbox","aria-multiselectable":m.isMulti,id:s.getElementId("listbox")},isLoading:w,maxHeight:Z,focusedOption:g}),G)}))});return F||O==="fixed"?K.createElement(u,Jt({},m,{appendTo:F,controlElement:this.controlRef,menuPlacement:E,menuPosition:O}),le):le}},{key:"renderFormField",value:function(){var s=this,r=this.props,o=r.delimiter,a=r.isDisabled,l=r.isMulti,c=r.name,u=r.required,h=this.state.selectValue;if(u&&!this.hasValue()&&!a)return K.createElement(ude,{name:c,onFocus:this.onValueInputFocus});if(!(!c||a))if(l)if(o){var d=h.map(function(g){return s.getOptionValue(g)}).join(o);return K.createElement("input",{name:c,type:"hidden",value:d})}else{var p=h.length>0?h.map(function(g,y){return K.createElement("input",{key:"i-".concat(y),name:c,type:"hidden",value:s.getOptionValue(g)})}):K.createElement("input",{name:c,type:"hidden",value:""});return K.createElement("div",null,p)}else{var m=h[0]?this.getOptionValue(h[0]):"";return K.createElement("input",{name:c,type:"hidden",value:m})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,r=this.state,o=r.ariaSelection,a=r.focusedOption,l=r.focusedValue,c=r.isFocused,u=r.selectValue,h=this.getFocusableOptions();return K.createElement(Xhe,Jt({},s,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:a,focusedValue:l,isFocused:c,selectValue:u,focusableOptions:h,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),r=s.Control,o=s.IndicatorsContainer,a=s.SelectContainer,l=s.ValueContainer,c=this.props,u=c.className,h=c.id,d=c.isDisabled,p=c.menuIsOpen,m=this.state.isFocused,g=this.commonProps=this.getCommonProps();return K.createElement(a,Jt({},g,{className:u,innerProps:{id:h,onKeyDown:this.onKeyDown},isDisabled:d,isFocused:m}),this.renderLiveRegion(),K.createElement(r,Jt({},g,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:d,isFocused:m,menuIsOpen:p}),K.createElement(l,Jt({},g,{isDisabled:d}),this.renderPlaceholderOrValue(),this.renderInput()),K.createElement(o,Jt({},g,{isDisabled:d}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,r){var o=r.prevProps,a=r.clearFocusValueOnUpdate,l=r.inputIsHiddenAfterUpdate,c=r.ariaSelection,u=r.isFocused,h=r.prevWasFocused,d=r.instancePrefix,p=s.options,m=s.value,g=s.menuIsOpen,y=s.inputValue,v=s.isMulti,b=A4(m),w={};if(o&&(m!==o.value||p!==o.options||g!==o.menuIsOpen||y!==o.inputValue)){var S=g?Ide(s,b):[],k=g?H4(aw(s,b),"".concat(d,"-option")):[],I=a?Nde(r,b):null,T=Ede(r,S),E=lN(k,T);w={selectValue:b,focusedOption:T,focusedOptionId:E,focusableOptionsWithIds:k,focusedValue:I,clearFocusValueOnUpdate:!1}}var O=l!=null&&s!==o?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},F=c,R=u&&h;return u&&!R&&(F={value:c2(v,b,b[0]||null),options:b,action:"initial-input-focus"},R=!h),(c==null?void 0:c.action)==="initial-input-focus"&&(F=null),Yt(Yt(Yt({},w),O),{},{prevProps:s,ariaSelection:F,prevWasFocused:R})}}]),n}(K.Component);LW.defaultProps=kde;var Ade=K.forwardRef(function(t,e){var n=Ble(t);return K.createElement(LW,Jt({ref:e},n))}),i0=Ade;/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Qy(t){return t+.5|0}const Sd=(t,e,n)=>Math.max(Math.min(t,n),e);function Wv(t){return Sd(Qy(t*2.55),0,255)}function Vd(t){return Sd(Qy(t*255),0,255)}function Zu(t){return Sd(Qy(t/2.55)/100,0,1)}function q4(t){return Sd(Qy(t*100),0,100)}const gl={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},TE=[..."0123456789ABCDEF"],Rde=t=>TE[t&15],Lde=t=>TE[(t&240)>>4]+TE[t&15],u2=t=>(t&240)>>4===(t&15),Pde=t=>u2(t.r)&&u2(t.g)&&u2(t.b)&&u2(t.a);function Dde(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&gl[t[1]]*17,g:255&gl[t[2]]*17,b:255&gl[t[3]]*17,a:e===5?gl[t[4]]*17:255}:(e===7||e===9)&&(n={r:gl[t[1]]<<4|gl[t[2]],g:gl[t[3]]<<4|gl[t[4]],b:gl[t[5]]<<4|gl[t[6]],a:e===9?gl[t[7]]<<4|gl[t[8]]:255})),n}const $de=(t,e)=>t<255?e(t):"";function Ode(t){var e=Pde(t)?Rde:Lde;return t?"#"+e(t.r)+e(t.g)+e(t.b)+$de(t.a,e):void 0}const Mde=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function PW(t,e,n){const i=e*Math.min(n,1-n),s=(r,o=(r+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function Fde(t,e,n){const i=(s,r=(s+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Bde(t,e,n){const i=PW(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function zde(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}function oL(t){const n=t.r/255,i=t.g/255,s=t.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=zde(n,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function aL(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Vd)}function lL(t,e,n){return aL(PW,t,e,n)}function jde(t,e,n){return aL(Bde,t,e,n)}function Vde(t,e,n){return aL(Fde,t,e,n)}function DW(t){return(t%360+360)%360}function Wde(t){const e=Mde.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Wv(+e[5]):Vd(+e[5]));const s=DW(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=jde(s,r,o):e[1]==="hsv"?i=Vde(s,r,o):i=lL(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function Ude(t,e){var n=oL(t);n[0]=DW(n[0]+e),n=lL(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Hde(t){if(!t)return;const e=oL(t),n=e[0],i=q4(e[1]),s=q4(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${s}%, ${Zu(t.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const K4={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},X4={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Gde(){const t={},e=Object.keys(X4),n=Object.keys(K4);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,K4[r]);r=parseInt(X4[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let h2;function qde(t){h2||(h2=Gde(),h2.transparent=[0,0,0,0]);const e=h2[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Kde=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Xde(t){const e=Kde.exec(t);let n=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Wv(o):Sd(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?Wv(i):Sd(i,0,255)),s=255&(e[4]?Wv(s):Sd(s,0,255)),r=255&(e[6]?Wv(r):Sd(r,0,255)),{r:i,g:s,b:r,a:n}}}function Yde(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Zu(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const cN=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ig=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Zde(t,e,n){const i=ig(Zu(t.r)),s=ig(Zu(t.g)),r=ig(Zu(t.b));return{r:Vd(cN(i+n*(ig(Zu(e.r))-i))),g:Vd(cN(s+n*(ig(Zu(e.g))-s))),b:Vd(cN(r+n*(ig(Zu(e.b))-r))),a:t.a+n*(e.a-t.a)}}function d2(t,e,n){if(t){let i=oL(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=lL(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function $W(t,e){return t&&Object.assign(e||{},t)}function Y4(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Vd(t[3]))):(e=$W(t,{r:0,g:0,b:0,a:1}),e.a=Vd(e.a)),e}function Qde(t){return t.charAt(0)==="r"?Xde(t):Wde(t)}class dy{constructor(e){if(e instanceof dy)return e;const n=typeof e;let i;n==="object"?i=Y4(e):n==="string"&&(i=Dde(e)||qde(e)||Qde(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=$W(this._rgb);return e&&(e.a=Zu(e.a)),e}set rgb(e){this._rgb=Y4(e)}rgbString(){return this._valid?Yde(this._rgb):void 0}hexString(){return this._valid?Ode(this._rgb):void 0}hslString(){return this._valid?Hde(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,s=e.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=Zde(this._rgb,e._rgb,n)),this}clone(){return new dy(this.rgb)}alpha(e){return this._rgb.a=Vd(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Qy(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return d2(this._rgb,2,e),this}darken(e){return d2(this._rgb,2,-e),this}saturate(e){return d2(this._rgb,1,e),this}desaturate(e){return d2(this._rgb,1,-e),this}rotate(e){return Ude(this._rgb,e),this}}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Hu(){}const Jde=(()=>{let t=0;return()=>t++})();function ei(t){return t===null||typeof t>"u"}function is(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Mn(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ws(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function za(t,e){return ws(t)?t:e}function wn(t,e){return typeof t>"u"?e:t}const efe=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,OW=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Fi(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function xi(t,e,n,i){let s,r,o;if(is(t))for(r=t.length,s=0;s<r;s++)e.call(n,t[s],s);else if(Mn(t))for(o=Object.keys(t),r=o.length,s=0;s<r;s++)e.call(n,t[o[s]],o[s])}function C_(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function k_(t){if(is(t))return t.map(k_);if(Mn(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=k_(t[n[s]]);return e}return t}function MW(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function tfe(t,e,n,i){if(!MW(t))return;const s=e[t],r=n[t];Mn(s)&&Mn(r)?fy(s,r,i):e[t]=k_(r)}function fy(t,e,n){const i=is(e)?e:[e],s=i.length;if(!Mn(t))return t;n=n||{};const r=n.merger||tfe;let o;for(let a=0;a<s;++a){if(o=i[a],!Mn(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],t,o,n)}return t}function v1(t,e){return fy(t,e,{merger:nfe})}function nfe(t,e,n){if(!MW(t))return;const i=e[t],s=n[t];Mn(i)&&Mn(s)?v1(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=k_(s))}const Z4={"":t=>t,x:t=>t.x,y:t=>t.y};function ife(t){const e=t.split("."),n=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function sfe(t){const e=ife(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function nf(t,e){return(Z4[e]||(Z4[e]=sfe(e)))(t)}function cL(t){return t.charAt(0).toUpperCase()+t.slice(1)}const py=t=>typeof t<"u",sf=t=>typeof t=="function",Q4=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function rfe(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Zi=Math.PI,Xi=2*Zi,ofe=Xi+Zi,I_=Number.POSITIVE_INFINITY,afe=Zi/180,Ms=Zi/2,Qf=Zi/4,J4=Zi*2/3,Cd=Math.log10,vu=Math.sign;function y1(t,e,n){return Math.abs(t-e)<n}function eM(t){const e=Math.round(t);t=y1(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Cd(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function lfe(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((s,r)=>s-r).pop(),e}function s0(t){return!isNaN(parseFloat(t))&&isFinite(t)}function cfe(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function FW(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function vc(t){return t*(Zi/180)}function uL(t){return t*(180/Zi)}function tM(t){if(!ws(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function BW(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*Zi&&(r+=Xi),{angle:r,distance:s}}function AE(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ufe(t,e){return(t-e+ofe)%Xi-Zi}function Wa(t){return(t%Xi+Xi)%Xi}function my(t,e,n,i){const s=Wa(t),r=Wa(e),o=Wa(n),a=Wa(r-s),l=Wa(o-s),c=Wa(s-r),u=Wa(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function Er(t,e,n){return Math.max(e,Math.min(n,t))}function hfe(t){return Er(t,-32768,32767)}function sh(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function hL(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const rh=(t,e,n,i)=>hL(t,n,i?s=>{const r=t[s][e];return r<n||r===n&&t[s+1][e]===n}:s=>t[s][e]<n),dfe=(t,e,n)=>hL(t,n,i=>t[i][e]>=n);function ffe(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}const zW=["push","pop","shift","splice","unshift"];function pfe(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),zW.forEach(n=>{const i="_onData"+cL(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function nM(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(zW.forEach(r=>{delete t[r]}),delete t._chartjs)}function jW(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const VW=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function WW(t,e){let n=[],i=!1;return function(...s){n=s,i||(i=!0,VW.call(window,()=>{i=!1,t.apply(e,n)}))}}function mfe(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const dL=t=>t==="start"?"left":t==="end"?"right":"center",fo=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,gfe=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function UW(t,e,n){const i=e.length;let s=0,r=i;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(s=Er(Math.min(rh(a,l,c).lo,n?i:rh(e,l,o.getPixelForValue(c)).lo),0,i-1)),d?r=Er(Math.max(rh(a,o.axis,u,!0).hi+1,n?0:rh(e,l,o.getPixelForValue(u),!0).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function HW(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const f2=t=>t===0||t===1,iM=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Xi/n)),sM=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Xi/n)+1,b1={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ms)+1,easeOutSine:t=>Math.sin(t*Ms),easeInOutSine:t=>-.5*(Math.cos(Zi*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>f2(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>f2(t)?t:iM(t,.075,.3),easeOutElastic:t=>f2(t)?t:sM(t,.075,.3),easeInOutElastic(t){return f2(t)?t:t<.5?.5*iM(t*2,.1125,.45):.5+.5*sM(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-b1.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?b1.easeInBounce(t*2)*.5:b1.easeOutBounce(t*2-1)*.5+.5};function fL(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function rM(t){return fL(t)?t:new dy(t)}function uN(t){return fL(t)?t:new dy(t).saturate(.5).darken(.1).hexString()}const vfe=["x","y","borderWidth","radius","tension"],yfe=["color","borderColor","backgroundColor"];function bfe(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:yfe},numbers:{type:"number",properties:vfe}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function xfe(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const oM=new Map;function wfe(t,e){e=e||{};const n=t+JSON.stringify(e);let i=oM.get(n);return i||(i=new Intl.NumberFormat(t,e),oM.set(n,i)),i}function Jy(t,e,n){return wfe(e,n).format(t)}const GW={values(t){return is(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=_fe(t,n)}const o=Cd(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Jy(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Cd(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?GW.numeric.call(this,t,e,n):""}};function _fe(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var dC={formatters:GW};function Sfe(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:dC.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Zp=Object.create(null),RE=Object.create(null);function x1(t,e){if(!e)return t;const n=e.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];t=t[r]||(t[r]=Object.create(null))}return t}function hN(t,e,n){return typeof e=="string"?fy(x1(t,e),n):fy(x1(t,""),e)}class Cfe{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>uN(s.backgroundColor),this.hoverBorderColor=(i,s)=>uN(s.borderColor),this.hoverColor=(i,s)=>uN(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return hN(this,e,n)}get(e){return x1(this,e)}describe(e,n){return hN(RE,e,n)}override(e,n){return hN(Zp,e,n)}route(e,n,i,s){const r=x1(this,e),o=x1(this,i),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return Mn(l)?Object.assign({},c,l):wn(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var ss=new Cfe({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[bfe,xfe,Sfe]);function kfe(t){return!t||ei(t.size)||ei(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function N_(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function Ife(t,e,n,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],h!=null&&!is(h))o=N_(t,s,r,o,h);else if(is(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!is(d)&&(o=N_(t,s,r,o,d));t.restore();const p=r.length/2;if(p>n.length){for(l=0;l<p;l++)delete s[r[l]];r.splice(0,p)}return o}function Jf(t,e,n){const i=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function aM(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function LE(t,e,n,i){qW(t,e,n,i,null)}function qW(t,e,n,i,s){let r,o,a,l,c,u,h,d;const p=e.pointStyle,m=e.rotation,g=e.radius;let y=(m||0)*afe;if(p&&typeof p=="object"&&(r=p.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(y),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),p){default:s?t.ellipse(n,i,s/2,g,0,0,Xi):t.arc(n,i,g,0,Xi),t.closePath();break;case"triangle":u=s?s/2:g,t.moveTo(n+Math.sin(y)*u,i-Math.cos(y)*g),y+=J4,t.lineTo(n+Math.sin(y)*u,i-Math.cos(y)*g),y+=J4,t.lineTo(n+Math.sin(y)*u,i-Math.cos(y)*g),t.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(y+Qf)*l,h=Math.cos(y+Qf)*(s?s/2-c:l),a=Math.sin(y+Qf)*l,d=Math.sin(y+Qf)*(s?s/2-c:l),t.arc(n-h,i-a,c,y-Zi,y-Ms),t.arc(n+d,i-o,c,y-Ms,y),t.arc(n+h,i+a,c,y,y+Ms),t.arc(n-d,i+o,c,y+Ms,y+Zi),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,u=s?s/2:l,t.rect(n-u,i-l,2*u,2*l);break}y+=Qf;case"rectRot":h=Math.cos(y)*(s?s/2:g),o=Math.cos(y)*g,a=Math.sin(y)*g,d=Math.sin(y)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":y+=Qf;case"cross":h=Math.cos(y)*(s?s/2:g),o=Math.cos(y)*g,a=Math.sin(y)*g,d=Math.sin(y)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(y)*(s?s/2:g),o=Math.cos(y)*g,a=Math.sin(y)*g,d=Math.sin(y)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),y+=Qf,h=Math.cos(y)*(s?s/2:g),o=Math.cos(y)*g,a=Math.sin(y)*g,d=Math.sin(y)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=s?s/2:Math.cos(y)*g,a=Math.sin(y)*g,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(y)*(s?s/2:g),i+Math.sin(y)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function oh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function fC(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function pC(t){t.restore()}function Nfe(t,e,n,i,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else s==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Efe(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Tfe(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ei(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Afe(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Rfe(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Qp(t,e,n,i,s,r={}){const o=is(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,Tfe(t,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&Rfe(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),ei(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,i,r.maxWidth)),t.fillText(c,n,i,r.maxWidth),Afe(t,n,i,c,r),i+=Number(s.lineHeight);t.restore()}function Wd(t,e){const{x:n,y:i,w:s,h:r,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Zi,Zi,!0),t.lineTo(n,i+r-o.bottomLeft),t.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,Zi,Ms,!0),t.lineTo(n+s-o.bottomRight,i+r),t.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,Ms,0,!0),t.lineTo(n+s,i+o.topRight),t.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-Ms,!0),t.lineTo(n+o.topLeft,i)}const Lfe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Pfe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Dfe(t,e){const n=(""+t).match(Lfe);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const $fe=t=>+t||0;function pL(t,e){const n={},i=Mn(e),s=i?Object.keys(e):e,r=Mn(t)?i?o=>wn(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=$fe(r(o));return n}function KW(t){return pL(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ud(t){return pL(t,["topLeft","topRight","bottomLeft","bottomRight"])}function So(t){const e=KW(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function fr(t,e){t=t||{},e=e||ss.font;let n=wn(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=wn(t.style,e.style);i&&!(""+i).match(Pfe)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:wn(t.family,e.family),lineHeight:Dfe(wn(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:wn(t.weight,e.weight),string:""};return s.string=kfe(s),s}function Uv(t,e,n,i){let s,r,o;for(s=0,r=t.length;s<r;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function Ofe(t,e,n){const{min:i,max:s}=t,r=OW(e,(s-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function xf(t,e){return Object.assign(Object.create(t),e)}function mL(t,e=[""],n,i,s=()=>t[0]){const r=n||t;typeof i>"u"&&(i=QW("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>mL([a,...t],e,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return YW(a,l,()=>Ufe(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return cM(a).includes(l)},ownKeys(a){return cM(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function r0(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:XW(t,i),setContext:r=>r0(t,r,n,i),override:r=>r0(t.override(r),e,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return YW(r,o,()=>Ffe(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function XW(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:sf(n)?n:()=>n,isIndexable:sf(i)?i:()=>i}}const Mfe=(t,e)=>t?t+cL(e):e,gL=(t,e)=>Mn(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function YW(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function Ffe(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=t;let a=i[e];return sf(a)&&o.isScriptable(e)&&(a=Bfe(e,a,t,n)),is(a)&&a.length&&(a=zfe(e,a,t,o.isIndexable)),gL(e,a)&&(a=r0(a,s,r&&r[e],o)),a}function Bfe(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(r,o||i);return a.delete(t),gL(t,l)&&(l=vL(s._scopes,s,t,l)),l}function zfe(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&i(t))return e[r.index%e.length];if(Mn(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=vL(c,s,t,u);e.push(r0(h,r,o&&o[t],a))}}return e}function ZW(t,e,n){return sf(t)?t(e,n):t}const jfe=(t,e)=>t===!0?e:typeof t=="string"?nf(e,t):void 0;function Vfe(t,e,n,i,s){for(const r of e){const o=jfe(n,r);if(o){t.add(o);const a=ZW(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function vL(t,e,n,i){const s=e._rootScopes,r=ZW(e._fallback,n,i),o=[...t,...s],a=new Set;a.add(i);let l=lM(a,o,n,r||n,i);return l===null||typeof r<"u"&&r!==n&&(l=lM(a,o,r,l,i),l===null)?!1:mL(Array.from(a),[""],s,r,()=>Wfe(e,n,i))}function lM(t,e,n,i,s){for(;n;)n=Vfe(t,e,n,i,s);return n}function Wfe(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];return is(s)&&Mn(n)?n:s||{}}function Ufe(t,e,n,i){let s;for(const r of e)if(s=QW(Mfe(r,t),n),typeof s<"u")return gL(t,s)?vL(n,i,t,s):s}function QW(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function cM(t){let e=t._keys;return e||(e=t._keys=Hfe(t._scopes)),e}function Hfe(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}function JW(t,e,n,i){const{iScale:s}=t,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],o[a]={r:s.parse(nf(u,r),c)};return o}const Gfe=Number.EPSILON||1e-14,o0=(t,e)=>e<t.length&&!t[e].skip&&t[e],eU=t=>t==="x"?"y":"x";function qfe(t,e,n,i){const s=t.skip?e:t,r=e,o=n.skip?e:n,a=AE(r,s),l=AE(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:r.x-h*(o.x-s.x),y:r.y-h*(o.y-s.y)},next:{x:r.x+d*(o.x-s.x),y:r.y+d*(o.y-s.y)}}}function Kfe(t,e,n){const i=t.length;let s,r,o,a,l,c=o0(t,0);for(let u=0;u<i-1;++u)if(l=c,c=o0(t,u+1),!(!l||!c)){if(y1(e[u],0,Gfe)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=r*o*e[u])}}function Xfe(t,e,n="x"){const i=eU(n),s=t.length;let r,o,a,l=o0(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=o0(t,c+1),!a)continue;const u=a[n],h=a[i];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${i}`]=h-r*e[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${i}`]=h+r*e[c])}}function Yfe(t,e="x"){const n=eU(e),i=t.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=o0(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=o0(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?vu(s[o-1])!==vu(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}Kfe(t,s,r),Xfe(t,r,e)}function p2(t,e,n){return Math.max(Math.min(t,n),e)}function Zfe(t,e){let n,i,s,r,o,a=oh(t[0],e);for(n=0,i=t.length;n<i;++n)o=r,r=a,a=n<i-1&&oh(t[n+1],e),r&&(s=t[n],o&&(s.cp1x=p2(s.cp1x,e.left,e.right),s.cp1y=p2(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=p2(s.cp2x,e.left,e.right),s.cp2y=p2(s.cp2y,e.top,e.bottom)))}function Qfe(t,e,n,i,s){let r,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")Yfe(t,s);else{let c=i?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],l=qfe(c,a,t[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&Zfe(t,n)}function yL(){return typeof window<"u"&&typeof document<"u"}function bL(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function E_(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const mC=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Jfe(t,e){return mC(t).getPropertyValue(e)}const epe=["top","right","bottom","left"];function Pp(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=epe[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const tpe=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function npe(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(tpe(s,r,t.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function cp(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=mC(n),r=s.boxSizing==="border-box",o=Pp(s,"padding"),a=Pp(s,"border","width"),{x:l,y:c,box:u}=npe(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:p,height:m}=e;return r&&(p-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-h)/p*n.width/i),y:Math.round((c-d)/m*n.height/i)}}function ipe(t,e,n){let i,s;if(e===void 0||n===void 0){const r=t&&bL(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),a=mC(r),l=Pp(a,"border","width"),c=Pp(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=E_(a.maxWidth,r,"clientWidth"),s=E_(a.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:i||I_,maxHeight:s||I_}}const m2=t=>Math.round(t*10)/10;function spe(t,e,n,i){const s=mC(t),r=Pp(s,"margin"),o=E_(s.maxWidth,t,"clientWidth")||I_,a=E_(s.maxHeight,t,"clientHeight")||I_,l=ipe(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const d=Pp(s,"border","width"),p=Pp(s,"padding");c-=p.width+d.width,u-=p.height+d.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=m2(Math.min(c,o,l.maxWidth)),u=m2(Math.min(u,a,l.maxHeight)),c&&!u&&(u=m2(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=m2(Math.floor(u*i))),{width:c,height:u}}function uM(t,e,n){const i=e||1,s=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(t.currentDevicePixelRatio=i,o.height=s,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const rpe=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};yL()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function hM(t,e){const n=Jfe(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function up(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function ope(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function ape(t,e,n,i){const s={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=up(t,s,n),a=up(s,r,n),l=up(r,e,n),c=up(o,a,n),u=up(a,l,n);return up(c,u,n)}const lpe=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},cpe=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Mg(t,e,n){return t?lpe(e,n):cpe()}function tU(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function nU(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function iU(t){return t==="angle"?{between:my,compare:ufe,normalize:Wa}:{between:sh,compare:(e,n)=>e-n,normalize:e=>e}}function dM({start:t,end:e,count:n,loop:i,style:s}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:s}}function upe(t,e,n){const{property:i,start:s,end:r}=n,{between:o,normalize:a}=iU(i),l=e.length;let{start:c,end:u,loop:h}=t,d,p;if(h){for(c+=l,u+=l,d=0,p=l;d<p&&o(a(e[c%l][i]),s,r);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function sU(t,e,n){if(!n)return[t];const{property:i,start:s,end:r}=n,o=e.length,{compare:a,between:l,normalize:c}=iU(i),{start:u,end:h,loop:d,style:p}=upe(t,e,n),m=[];let g=!1,y=null,v,b,w;const S=()=>l(s,w,v)&&a(s,w)!==0,k=()=>a(r,v)===0||l(r,w,v),I=()=>g||S(),T=()=>!g||k();for(let E=u,O=u;E<=h;++E)b=e[E%o],!b.skip&&(v=c(b[i]),v!==w&&(g=l(v,s,r),y===null&&I()&&(y=a(v,s)===0?E:O),y!==null&&T()&&(m.push(dM({start:y,end:E,loop:d,count:o,style:p})),y=null),O=E,w=v));return y!==null&&m.push(dM({start:y,end:h,loop:d,count:o,style:p})),m}function rU(t,e){const n=[],i=t.segments;for(let s=0;s<i.length;s++){const r=sU(i[s],t.points,e);r.length&&n.push(...r)}return n}function hpe(t,e,n,i){let s=0,r=e-1;if(n&&!i)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(r+=s);r>s&&t[r%e].skip;)r--;return r%=e,{start:s,end:r}}function dpe(t,e,n,i){const s=t.length,r=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function fpe(t,e){const n=t.points,i=t.options.spanGaps,s=n.length;if(!s)return[];const r=!!t._loop,{start:o,end:a}=hpe(n,s,r,i);if(i===!0)return fM(t,[{start:o,end:a,loop:r}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return fM(t,dpe(n,o,l,c),n,e)}function fM(t,e,n,i){return!i||!i.setContext||!n?e:ppe(t,e,n,i)}function ppe(t,e,n,i){const s=t._chart.getContext(),r=pM(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=r,h=e[0].start,d=h;function p(m,g,y,v){const b=a?-1:1;if(m!==g){for(m+=l;n[m%l].skip;)m-=b;for(;n[g%l].skip;)g+=b;m%l!==g%l&&(c.push({start:m%l,end:g%l,loop:y,style:v}),u=v,h=g%l)}}for(const m of e){h=a?h:m.start;let g=n[h%l],y;for(d=h+1;d<=m.end;d++){const v=n[d%l];y=pM(i.setContext(xf(s,{type:"segment",p0:g,p1:v,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),mpe(y,u)&&p(h,d-1,m.loop,u),g=v,u=y}h<d-1&&p(h,d-1,m.loop,u)}return c}function pM(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function mpe(t,e){if(!e)return!1;const n=[],i=function(s,r){return fL(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(t,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class gpe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=VW.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var qu=new gpe;const mM="transparent",vpe={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=rM(t||mM),s=i.valid&&rM(e||mM);return s&&s.valid?s.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class ype{constructor(e,n,i,s){const r=n[i];s=Uv([e.to,s,r,e.from]);const o=Uv([e.from,r,s]);this._active=!0,this._fn=e.fn||vpe[e.type||typeof o],this._easing=b1[e.easing]||b1.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Uv([e.to,n,s,e.from]),this._from=Uv([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=r;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class oU{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Mn(e))return;const n=Object.keys(ss.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!Mn(r))return;const o={};for(const a of n)o[a]=r[a];(is(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,s=xpe(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&bpe(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,n){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let h=r[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}r[c]=h=new ype(d,e,c,u),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return qu.add(this._chart,i),!0}}function bpe(t,e){const n=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=t[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function xpe(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function gM(t,e){const n=t&&t.options||{},i=n.reverse,s=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function wpe(t,e,n){if(n===!1)return!1;const i=gM(t,n),s=gM(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function _pe(t){let e,n,i,s;return Mn(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:t===!1}}function aU(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function vM(t,e,n,i={}){const s=t.keys,r=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,i.all)continue;break}c=t.values[l],ws(c)&&(r||e===0||vu(e)===vu(c))&&(e+=c)}return!u&&!i.all?0:e}function Spe(t,e){const{iScale:n,vScale:i}=e,s=n.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[r]:t[u]};return a}function dN(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Cpe(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function kpe(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function Ipe(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function yM(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=t[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function bM(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=Cpe(r,o,i),h=e.length;let d;for(let p=0;p<h;++p){const m=e[p],{[l]:g,[c]:y}=m,v=m._stacks||(m._stacks={});d=v[c]=Ipe(s,u,g),d[a]=y,d._top=yM(d,o,!0,i.type),d._bottom=yM(d,o,!1,i.type);const b=d._visualValues||(d._visualValues={});b[a]=y}}function fN(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function Npe(t,e){return xf(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Epe(t,e,n){return xf(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function kv(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const pN=t=>t==="reset"||t==="none",xM=(t,e)=>e?t:Object.assign({},t),Tpe=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:aU(n,!0),values:null};class Ll{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=dN(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&kv(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(h,d,p,m)=>h==="x"?d:h==="r"?m:p,r=n.xAxisID=wn(i.xAxisID,fN(e,"x")),o=n.yAxisID=wn(i.yAxisID,fN(e,"y")),a=n.rAxisID=wn(i.rAxisID,fN(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,r,o,a),u=n.vAxisID=s(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&nM(this._data,this),e._stacked&&kv(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Mn(n)){const s=this._cachedMeta;this._data=Spe(n,s)}else if(i!==n){if(i){nM(i,this);const s=this._cachedMeta;kv(s),s._parsed=[]}n&&Object.isExtensible(n)&&pfe(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=dN(n.vScale,n),n.stack!==i.stack&&(s=!0,kv(n),n.stack=i.stack),this._resyncElements(e),(s||r!==n._stacked)&&(bM(this,n._parsed),n._stacked=dN(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&n===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=s,i._sorted=!0,d=s;else{is(s[e])?d=this.parseArrayData(i,s,e,n):Mn(s[e])?d=this.parseObjectData(i,s,e,n):d=this.parsePrimitiveData(i,s,e,n);const p=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=h=d[u],l&&(p()&&(l=!1),c=h);i._sorted=l}o&&bM(this,d)}parsePrimitiveData(e,n,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,h=new Array(s);let d,p,m;for(d=0,p=s;d<p;++d)m=d+i,h[d]={[a]:u||r.parse(c[m],m),[l]:o.parse(n[m],m)};return h}parseArrayData(e,n,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+i,h=n[u],a[l]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,d,p;for(u=0,h=s;u<h;++u)d=u+i,p=n[d],c[u]={x:r.parse(nf(p,a),d),y:o.parse(nf(p,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const s=this.chart,r=this._cachedMeta,o=n[e.axis],a={keys:aU(s,!0),values:n._stacks[e.axis]._visualValues};return vM(a,o,r.index,{mode:i})}updateRangeFromParsed(e,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,o=vM(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=Tpe(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=kpe(a);let d,p;function m(){p=s[d];const g=p[a.axis];return!ws(p[e.axis])||u>g||h<g}for(d=0;d<o&&!(!m()&&(this.updateRangeFromParsed(c,e,p,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!m()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][e.axis],ws(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=_pe(wn(this.options.clip,wpe(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=Epe(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=Npe(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=e+"-"+n,a=r[o],l=this.enableOptionSharing&&py(i);if(a)return xM(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),p=Object.keys(ss.elements[e]),m=()=>this.getContext(i,s,n),g=c.resolveNamedOptions(d,p,m,h);return g.$shared&&(g.$shared=l,r[o]=Object.freeze(xM(g,l))),g}_resolveAnimations(e,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,i,n))}const c=new oU(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||pN(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:o}}updateElement(e,n,i,s){pN(s)?Object.assign(e,i):this._resolveAnimations(n,s).update(e,i)}updateSharedOptions(e,n,i){e&&!pN(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,s){e.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,n,i=!0){const s=this._cachedMeta,r=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),i&&this.updateElements(r,e,n,"reset")}updateElements(e,n,i,s){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,n);i._stacked&&kv(i,s)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,s]=e;this[n](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ft(Ll,"defaults",{}),ft(Ll,"datasetElementType",null),ft(Ll,"dataElementType",null);function Ape(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=n.length;s<r;s++)i=i.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=jW(i.sort((s,r)=>s-r))}return t._cache.$bar}function Rpe(t){const e=t.iScale,n=Ape(e,t.type);let i=e._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(py(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=n.length;s<r;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function Lpe(t,e,n,i){const s=n.barThickness;let r,o;return ei(s)?(r=e.min*n.categoryPercentage,o=n.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[t]-r/2}}function Ppe(t,e,n,i){const s=e.pixels,r=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function Dpe(t,e,n,i){const s=n.parse(t[0],i),r=n.parse(t[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function lU(t,e,n,i){return is(t)?Dpe(t,e,n,i):e[n.axis]=n.parse(t,i),e}function wM(t,e,n,i){const s=t.iScale,r=t.vScale,o=s.getLabels(),a=s===r,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=e[c],h={},h[s.axis]=a||s.parse(o[c],c),l.push(lU(d,h,r,c));return l}function mN(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function $pe(t,e,n){return t!==0?vu(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function Ope(t){let e,n,i,s,r;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:e,top:s,bottom:r}}function Mpe(t,e,n,i){let s=e.borderSkipped;const r={};if(!s){t.borderSkipped=r;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=Ope(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?s=c:(n._bottom||0)===i?s=u:(r[_M(u,o,a,l)]=!0,s=c)),r[_M(s,o,a,l)]=!0,t.borderSkipped=r}function _M(t,e,n,i){return i?(t=Fpe(t,e,n),t=SM(t,n,e)):t=SM(t,e,n),t}function Fpe(t,e,n){return t===e?n:t===n?e:t}function SM(t,e,n){return t==="start"?e:t==="end"?n:t}function Bpe(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class lw extends Ll{parsePrimitiveData(e,n,i,s){return wM(e,n,i,s)}parseArrayData(e,n,i,s){return wM(e,n,i,s)}parseObjectData(e,n,i,s){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,p,m,g;for(d=i,p=i+s;d<p;++d)g=n[d],m={},m[r.axis]=r.parse(nf(g,c),d),h.push(lU(nf(g,u),m,o,d));return h}updateRangeFromParsed(e,n,i,s){super.updateRangeFromParsed(e,n,i,s);const r=i._custom;r&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:s}=n,r=this.getParsed(e),o=r._custom,a=mN(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,s);for(let p=n;p<n+i;p++){const m=this.getParsed(p),g=r||ei(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,u),v=(m._stacks||{})[a.axis],b={horizontal:c,base:g.base,enableBorderRadius:!v||mN(m._custom)||o===v._top||o===v._bottom,x:c?g.head:y.center,y:c?y.center:g.head,height:c?y.size:Math.abs(g.size),width:c?Math.abs(g.size):y.size};d&&(b.options=h||this.resolveDataElementOptions(p,e[p].active?"active":s));const w=b.options||e[p].options;Mpe(b,w,v,o),Bpe(b,w,u.ratio),this.updateElement(e[p],p,b,s)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],c=u=>{const h=u._parsed.find(p=>p[i.axis]===l),d=h&&h[u.vScale.axis];if(ei(d)||isNaN(d))return!0};for(const u of s)if(!(n!==void 0&&c(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const s=this._getStacks(e,i),r=n!==void 0?s.indexOf(n):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,s=[];let r,o;for(r=0,o=n.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=e.barThickness;return{min:a||Rpe(n),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(e),c=l._custom,u=mN(c);let h=l[n.axis],d=0,p=i?this.applyStack(n,l,i):h,m,g;p!==h&&(d=p-h,p=h),u&&(h=c.barStart,p=c.barEnd-c.barStart,h!==0&&vu(h)!==vu(c.barEnd)&&(d=0),d+=h);const y=!ei(r)&&!u?r:d;let v=n.getPixelForValue(y);if(this.chart.getDataVisibility(e)?m=n.getPixelForValue(d+p):m=v,g=m-v,Math.abs(g)<o){g=$pe(g,n,a)*o,h===a&&(v-=g/2);const b=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),S=Math.min(b,w),k=Math.max(b,w);v=Math.max(Math.min(v,k),S),m=v+g,i&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(m)-n.getValueForPixel(v))}if(v===n.getPixelForValue(a)){const b=vu(g)*n.getLineWidthForValue(a)/2;v+=b,g-=b}return{size:g,base:v,head:m,center:m+g/2}}_calculateBarIndexPixels(e,n){const i=n.scale,s=this.options,r=s.skipNull,o=wn(s.maxBarThickness,1/0);let a,l;if(n.grouped){const c=r?this._getStackCount(e):n.stackCount,u=s.barThickness==="flex"?Ppe(e,n,s,c):Lpe(e,n,s,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[n.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}ft(lw,"id","bar"),ft(lw,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ft(lw,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class cw extends Ll{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,i,s){const r=super.parsePrimitiveData(e,n,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(e,n,i,s){const r=super.parseArrayData(e,n,i,s);for(let o=0;o<r.length;o++){const a=n[i+o];r[o]._custom=wn(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(e,n,i,s){const r=super.parseObjectData(e,n,i,s);for(let o=0;o<r.length;o++){const a=n[i+o];r[o]._custom=wn(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let i=e.length-1;i>=0;--i)n=Math.max(n,e[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=n,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,s),u=o.axis,h=a.axis;for(let d=n;d<n+i;d++){const p=e[d],m=!r&&this.getParsed(d),g={},y=g[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(m[u]),v=g[h]=r?a.getBasePixel():a.getPixelForValue(m[h]);g.skip=isNaN(y)||isNaN(v),c&&(g.options=l||this.resolveDataElementOptions(d,p.active?"active":s),r&&(g.options.radius=0)),this.updateElement(p,d,g,s)}}resolveDataElementOptions(e,n){const i=this.getParsed(e);let s=super.resolveDataElementOptions(e,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return n!=="active"&&(s.radius=0),s.radius+=wn(i&&i._custom,r),s}}ft(cw,"id","bubble"),ft(cw,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ft(cw,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function zpe(t,e,n){let i=1,s=1,r=0,o=0;if(e<Xi){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),p=(w,S,k)=>my(w,a,l,!0)?1:Math.max(S,S*n,k,k*n),m=(w,S,k)=>my(w,a,l,!0)?-1:Math.min(S,S*n,k,k*n),g=p(0,c,h),y=p(Ms,u,d),v=m(Zi,c,h),b=m(Zi+Ms,u,d);i=(g-v)/2,s=(y-b)/2,r=-(g+v)/2,o=-(y+b)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class Cp extends Ll{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if(Mn(i[e])){const{key:l="value"}=this._parsing;r=c=>+nf(i[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return vc(this.options.rotation-90)}_getCircumference(){return vc(this.options.circumference)}_getRotationExtents(){let e=Xi,n=-Xi;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();e=Math.min(e,r),n=Math.max(n,r+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(efe(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:p,offsetX:m,offsetY:g}=zpe(h,u,l),y=(i.width-o)/d,v=(i.height-o)/p,b=Math.max(Math.min(y,v)/2,0),w=OW(this.options.radius,b),S=Math.max(w*l,0),k=(w-S)/this._getVisibleDatasetWeightTotal();this.offsetX=m*w,this.offsetY=g*w,s.total=this.calculateTotal(),this.outerRadius=w-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,n){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/Xi)}updateElements(e,n,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=r&&c.animateScale,p=d?0:this.innerRadius,m=d?0:this.outerRadius,{sharedOptions:g,includeOptions:y}=this._getSharedOptions(n,s);let v=this._getRotation(),b;for(b=0;b<n;++b)v+=this._circumference(b,r);for(b=n;b<n+i;++b){const w=this._circumference(b,r),S=e[b],k={x:u+this.offsetX,y:h+this.offsetY,startAngle:v,endAngle:v+w,circumference:w,outerRadius:m,innerRadius:p};y&&(k.options=g||this.resolveDataElementOptions(b,S.active?"active":s)),v+=w,this.updateElement(S,b,k,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,s;for(s=0;s<n.length;s++){const r=e._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Xi*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Jy(n._parsed[e],i.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let n=0;const i=this.chart;let s,r,o,a,l;if(!e){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,r=e.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,s=e.length;i<s;++i){const r=this.resolveDataElementOptions(i);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(wn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ft(Cp,"id","doughnut"),ft(Cp,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ft(Cp,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ft(Cp,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return n.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class w1 extends Ll{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=UW(n,s,o);this._drawStart=a,this._drawCount=l,HW(n)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,s),d=o.axis,p=a.axis,{spanGaps:m,segment:g}=this.options,y=s0(m)?m:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||s==="none",b=n+i,w=e.length;let S=n>0&&this.getParsed(n-1);for(let k=0;k<w;++k){const I=e[k],T=v?I:{};if(k<n||k>=b){T.skip=!0;continue}const E=this.getParsed(k),O=ei(E[p]),F=T[d]=o.getPixelForValue(E[d],k),R=T[p]=r||O?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[p],k);T.skip=isNaN(F)||isNaN(R)||O,T.stop=k>0&&Math.abs(E[d]-S[d])>y,g&&(T.parsed=E,T.raw=c.data[k]),h&&(T.options=u||this.resolveDataElementOptions(k,I.active?"active":s)),v||this.updateElement(I,k,T,s),S=E}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ft(w1,"id","line"),ft(w1,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ft(w1,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class _1 extends Ll{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Jy(n._parsed[e].r,i.options.locale);return{label:s[e]||"",value:r}}parseObjectData(e,n,i,s){return JW.bind(this)(e,n,i,s)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<n.min&&(n.min=r),r>n.max&&(n.max=r))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,i=e.options,s=Math.min(n.right-n.left,n.bottom-n.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,i,s){const r=s==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,d=c.getIndexAngle(0)-.5*Zi;let p=d,m;const g=360/this.countVisibleElements();for(m=0;m<n;++m)p+=this._computeAngle(m,s,g);for(m=n;m<n+i;m++){const y=e[m];let v=p,b=p+this._computeAngle(m,s,g),w=o.getDataVisibility(m)?c.getDistanceFromCenterForValue(this.getParsed(m).r):0;p=b,r&&(l.animateScale&&(w=0),l.animateRotate&&(v=b=d));const S={x:u,y:h,innerRadius:0,outerRadius:w,startAngle:v,endAngle:b,options:this.resolveDataElementOptions(m,y.active?"active":s)};this.updateElement(y,m,S,s)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(e,n,i){return this.chart.getDataVisibility(e)?vc(this.resolveDataElementOptions(e,n).angle||i):0}}ft(_1,"id","polarArea"),ft(_1,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ft(_1,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return n.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class PE extends Cp{}ft(PE,"id","pie"),ft(PE,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class uw extends Ll{getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,s){return JW.bind(this)(e,n,i,s)}update(e){const n=this._cachedMeta,i=n.dataset,s=n.data||[],r=n.iScale.getLabels();if(i.points=s,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=n;a<n+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=r.getPointPositionForValue(a,this.getParsed(a).r),h=o?r.xCenter:u.x,d=o?r.yCenter:u.y,p={x:h,y:d,angle:u.angle,skip:isNaN(h)||isNaN(d),options:c};this.updateElement(l,a,p,s)}}}ft(uw,"id","radar"),ft(uw,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ft(uw,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class hw extends Ll{getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=n,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:i=[]}=n,s=this.chart._animationsDisabled;let{start:r,count:o}=UW(n,i,s);if(this._drawStart=r,this._drawCount=o,HW(n)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,s),h=this.getSharedOptions(u),d=this.includeOptions(s,h),p=o.axis,m=a.axis,{spanGaps:g,segment:y}=this.options,v=s0(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||s==="none";let w=n>0&&this.getParsed(n-1);for(let S=n;S<n+i;++S){const k=e[S],I=this.getParsed(S),T=b?k:{},E=ei(I[m]),O=T[p]=o.getPixelForValue(I[p],S),F=T[m]=r||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,I,l):I[m],S);T.skip=isNaN(O)||isNaN(F)||E,T.stop=S>0&&Math.abs(I[p]-w[p])>v,y&&(T.parsed=I,T.raw=c.data[S]),d&&(T.options=h||this.resolveDataElementOptions(S,k.active?"active":s)),b||this.updateElement(k,S,T,s),w=I}this.updateSharedOptions(h,s,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!n.length)return s;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,r,o)/2}}ft(hw,"id","scatter"),ft(hw,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ft(hw,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var jpe=Object.freeze({__proto__:null,BarController:lw,BubbleController:cw,DoughnutController:Cp,LineController:w1,PieController:PE,PolarAreaController:_1,RadarController:uw,ScatterController:hw});function ep(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class xL{constructor(e){ft(this,"options");this.options=e||{}}static override(e){Object.assign(xL.prototype,e)}init(){}formats(){return ep()}parse(){return ep()}format(){return ep()}add(){return ep()}diff(){return ep()}startOf(){return ep()}endOf(){return ep()}}var Vpe={_date:xL};function Wpe(t,e,n,i){const{controller:s,data:r,_sorted:o}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const l=a._reversePixels?dfe:rh;if(i){if(s._sharedOptions){const c=r[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(r,e,n-u),d=l(r,e,n+u);return{lo:h.lo,hi:d.hi}}}}else return l(r,e,n)}return{lo:0,hi:r.length-1}}function eb(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:h,hi:d}=Wpe(r[a],e,o,s);for(let p=h;p<=d;++p){const m=u[p];m.skip||i(m,c,p)}}}function Upe(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function gN(t,e,n,i,s){const r=[];return!s&&!t.isPointInArea(e)||eb(t,n,e,function(a,l,c){!s&&!oh(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function Hpe(t,e,n,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=BW(o,{x:e.x,y:e.y});my(h,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return eb(t,n,e,r),s}function Gpe(t,e,n,i,s,r){let o=[];const a=Upe(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const p=u.inRange(e.x,e.y,s);if(i&&!p)return;const m=u.getCenterPoint(s);if(!(!!r||t.isPointInArea(m))&&!p)return;const y=a(e,m);y<l?(o=[{element:u,datasetIndex:h,index:d}],l=y):y===l&&o.push({element:u,datasetIndex:h,index:d})}return eb(t,n,e,c),o}function vN(t,e,n,i,s,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!i?Hpe(t,e,n,s):Gpe(t,e,n,i,s,r)}function CM(t,e,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return eb(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var qpe={evaluateInteractionItems:eb,modes:{index(t,e,n,i){const s=cp(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?gN(t,s,r,i,o):vN(t,s,r,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const s=cp(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?gN(t,s,r,i,o):vN(t,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const s=cp(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return gN(t,s,r,i,o)},nearest(t,e,n,i){const s=cp(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return vN(t,s,r,n.intersect,i,o)},x(t,e,n,i){const s=cp(e,t);return CM(t,s,"x",n.intersect,i)},y(t,e,n,i){const s=cp(e,t);return CM(t,s,"y",n.intersect,i)}}};const cU=["left","top","right","bottom"];function Iv(t,e){return t.filter(n=>n.pos===e)}function kM(t,e){return t.filter(n=>cU.indexOf(n.pos)===-1&&n.box.axis===e)}function Nv(t,e){return t.sort((n,i)=>{const s=e?i:n,r=e?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function Kpe(t){const e=[];let n,i,s,r,o,a;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function Xpe(t){const e={};for(const n of t){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!cU.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function Ype(t,e){const n=Xpe(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&e.availableHeight)}return n}function Zpe(t){const e=Kpe(t),n=Nv(e.filter(c=>c.box.fullSize),!0),i=Nv(Iv(e,"left"),!0),s=Nv(Iv(e,"right")),r=Nv(Iv(e,"top"),!0),o=Nv(Iv(e,"bottom")),a=kM(e,"x"),l=kM(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Iv(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function IM(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function uU(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Qpe(t,e,n,i){const{pos:s,box:r}=n,o=t.maxPadding;if(!Mn(s)){n.size&&(t[s]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?r.height:r.width),n.size=h.size/h.count,t[s]+=n.size}r.getPadding&&uU(o,r.getPadding());const a=Math.max(0,e.outerWidth-IM(o,t,"left","right")),l=Math.max(0,e.outerHeight-IM(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Jpe(t){const e=t.maxPadding;function n(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function eme(t,e){const n=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return i(t?["left","right"]:["top","bottom"])}function Hv(t,e,n,i){const s=[];let r,o,a,l,c,u;for(r=0,o=t.length,c=0;r<o;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,eme(a.horizontal,e));const{same:h,other:d}=Qpe(e,n,a,i);c|=h&&s.length,u=u||d,l.fullSize||s.push(a)}return c&&Hv(s,e,n,i)||u}function g2(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function NM(t,e,n,i){const s=n.padding;let{x:r,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;py(c.start)&&(o=c.start),l.fullSize?g2(l,s.left,o,n.outerWidth-s.right-s.left,d):g2(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;py(c.start)&&(r=c.start),l.fullSize?g2(l,r,s.top,d,n.outerHeight-s.bottom-s.top):g2(l,r,e.top+c.placed,d,h),c.start=r,c.placed+=h,r=l.right}}e.x=r,e.y=o}var xo={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=So(t.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=Zpe(t.boxes),l=a.vertical,c=a.horizontal;xi(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,y)=>y.box.options&&y.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},s);uU(d,So(i));const p=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),m=Ype(l.concat(c),h);Hv(a.fullSize,p,h,m),Hv(l,p,h,m),Hv(c,p,h,m)&&Hv(l,p,h,m),Jpe(p),NM(a.leftAndTop,p,h,m),p.x+=p.w,p.y+=p.h,NM(a.rightAndBottom,p,h,m),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},xi(a.chartArea,g=>{const y=g.box;Object.assign(y,t.chartArea),y.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class hU{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,s){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(e){return!0}updateConfig(e){}}class tme extends hU{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const dw="$chartjs",nme={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},EM=t=>t===null||t==="";function ime(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t[dw]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",EM(s)){const r=hM(t,"width");r!==void 0&&(t.width=r)}if(EM(i))if(t.style.height==="")t.height=t.width/(e||2);else{const r=hM(t,"height");r!==void 0&&(t.height=r)}return t}const dU=rpe?{passive:!0}:!1;function sme(t,e,n){t&&t.addEventListener(e,n,dU)}function rme(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,dU)}function ome(t,e){const n=nme[t.type]||t.type,{x:i,y:s}=cp(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:s!==void 0?s:null}}function T_(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function ame(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||T_(a.addedNodes,i),o=o&&!T_(a.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function lme(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||T_(a.removedNodes,i),o=o&&!T_(a.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const gy=new Map;let TM=0;function fU(){const t=window.devicePixelRatio;t!==TM&&(TM=t,gy.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function cme(t,e){gy.size||window.addEventListener("resize",fU),gy.set(t,e)}function ume(t){gy.delete(t),gy.size||window.removeEventListener("resize",fU)}function hme(t,e,n){const i=t.canvas,s=i&&bL(i);if(!s)return;const r=WW((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),cme(t,r),o}function yN(t,e,n){n&&n.disconnect(),e==="resize"&&ume(t)}function dme(t,e,n){const i=t.canvas,s=WW(r=>{t.ctx!==null&&n(ome(r,t))},t);return sme(i,e,s),s}class fme extends hU{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(ime(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[dw])return!1;const i=n[dw].initial;["height","width"].forEach(r=>{const o=i[r];ei(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[dw],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:ame,detach:lme,resize:hme}[n]||dme;s[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),s=i[n];if(!s)return;({attach:yN,detach:yN,resize:yN}[n]||rme)(e,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,s){return spe(e,n,i,s)}isAttached(e){const n=e&&bL(e);return!!(n&&n.isConnected)}}function pme(t){return!yL()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?tme:fme}var V2;let Au=(V2=class{constructor(){ft(this,"x");ft(this,"y");ft(this,"active",!1);ft(this,"options");ft(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return s0(this.x)&&s0(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},ft(V2,"defaults",{}),ft(V2,"defaultRoutes"),V2);function mme(t,e){const n=t.options.ticks,i=gme(t),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?yme(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return bme(e,c,r,o/s),c;const u=vme(r,e,s);if(o>0){let h,d;const p=o>1?Math.round((l-a)/(o-1)):null;for(v2(e,c,u,ei(p)?0:a-p,a),h=0,d=o-1;h<d;h++)v2(e,c,u,r[h],r[h+1]);return v2(e,c,u,l,ei(p)?e.length:l+p),c}return v2(e,c,u),c}function gme(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}function vme(t,e,n){const i=xme(t),s=e.length/n;if(!i)return Math.max(s,1);const r=lfe(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function yme(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function bme(t,e,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===r&&(e.push(t[o]),s++,r=n[s*i])}function v2(t,e,n,i,s){const r=wn(i,0),o=Math.min(wn(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-i,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(r+a*n))}function xme(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const wme=t=>t==="left"?"right":t==="right"?"left":t,AM=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,RM=(t,e)=>Math.min(e||t,t);function LM(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function _me(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(i===1?c=Math.max(l-r,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function Sme(t,e){xi(t,n=>{const i=n.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function Ev(t){return t.drawTicks?t.tickLength:0}function PM(t,e){if(!t.display)return 0;const n=fr(t.font,e),i=So(t.padding);return(is(t.text)?t.text.length:1)*n.lineHeight+i.height}function Cme(t,e){return xf(t,{scale:e,type:"scale"})}function kme(t,e,n){return xf(t,{tick:n,index:e,type:"tick"})}function Ime(t,e,n){let i=dL(t);return(n&&e!=="right"||!n&&e==="right")&&(i=wme(i)),i}function Nme(t,e,n,i){const{top:s,left:r,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,d,p,m;const g=o-s,y=a-r;if(t.isHorizontal()){if(p=fo(i,r,a),Mn(n)){const v=Object.keys(n)[0],b=n[v];m=u[v].getPixelForValue(b)+g-e}else n==="center"?m=(c.bottom+c.top)/2+g-e:m=AM(t,n,e);d=a-r}else{if(Mn(n)){const v=Object.keys(n)[0],b=n[v];p=u[v].getPixelForValue(b)-y+e}else n==="center"?p=(c.left+c.right)/2-y+e:p=AM(t,n,e);m=fo(i,o,s),h=n==="left"?-Ms:Ms}return{titleX:p,titleY:m,maxWidth:d,rotation:h}}class vm extends Au{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return e=za(e,Number.POSITIVE_INFINITY),n=za(n,Number.NEGATIVE_INFINITY),i=za(i,Number.POSITIVE_INFINITY),s=za(s,Number.NEGATIVE_INFINITY),{min:za(e,i),max:za(n,s),minDefined:ws(e),maxDefined:ws(n)}}getMinMax(e){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:za(n,za(i,n)),max:za(i,za(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Fi(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ofe(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?LM(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=mme(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Fi(this.options.afterUpdate,[this])}beforeSetDimensions(){Fi(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Fi(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Fi(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Fi(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=Fi(n.callback,[r.value,i,e],this)}afterTickToLabelConversion(){Fi(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Fi(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=RM(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,r=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,p=Er(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:p/(i-1),h+6>a&&(a=p/(i-(e.offset?.5:1)),l=this.maxHeight-Ev(e.grid)-n.padding-PM(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=uL(Math.min(Math.asin(Er((u.highest.height+6)/a,-1,1)),Math.asin(Er(l/c,-1,1))-Math.asin(Er(d/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Fi(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Fi(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=PM(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ev(r)+l):(e.height=this.maxHeight,e.width=Ev(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),p=i.padding*2,m=vc(this.labelRotation),g=Math.cos(m),y=Math.sin(m);if(a){const v=i.mirror?0:y*h.width+g*d.height;e.height=Math.min(this.maxHeight,e.height+v+p)}else{const v=i.mirror?0:g*h.width+y*d.height;e.width=Math.min(this.maxWidth,e.width+v+p)}this._calculatePadding(c,u,y,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,p=0;l?c?(d=s*e.width,p=i*n.height):(d=i*e.height,p=s*n.width):r==="start"?p=n.width:r==="end"?d=e.width:r!=="inner"&&(d=e.width/2,p=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Fi(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)ei(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=LM(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/RM(n,i));let c=0,u=0,h,d,p,m,g,y,v,b,w,S,k;for(h=0;h<n;h+=l){if(m=e[h].label,g=this._resolveTickFontOptions(h),s.font=y=g.string,v=r[y]=r[y]||{data:{},gc:[]},b=g.lineHeight,w=S=0,!ei(m)&&!is(m))w=N_(s,v.data,v.gc,w,m),S=b;else if(is(m))for(d=0,p=m.length;d<p;++d)k=m[d],!ei(k)&&!is(k)&&(w=N_(s,v.data,v.gc,w,k),S+=b);o.push(w),a.push(S),c=Math.max(w,c),u=Math.max(S,u)}Sme(r,n);const I=o.indexOf(c),T=a.indexOf(u),E=O=>({width:o[O]||0,height:a[O]||0});return{first:E(0),last:E(n-1),widest:E(I),highest:E(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return hfe(this._alignToPixels?Jf(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=kme(this.getContext(),e,i))}return this.$context||(this.$context=Cme(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=vc(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=Ev(r),p=[],m=a.setContext(this.getContext()),g=m.display?m.width:0,y=g/2,v=function(H){return Jf(i,H,g)};let b,w,S,k,I,T,E,O,F,R,$,U;if(o==="top")b=v(this.bottom),T=this.bottom-d,O=b-y,R=v(e.top)+y,U=e.bottom;else if(o==="bottom")b=v(this.top),R=e.top,U=v(e.bottom)-y,T=b+y,O=this.top+d;else if(o==="left")b=v(this.right),I=this.right-d,E=b-y,F=v(e.left)+y,$=e.right;else if(o==="right")b=v(this.left),F=e.left,$=v(e.right)-y,I=b+y,E=this.left+d;else if(n==="x"){if(o==="center")b=v((e.top+e.bottom)/2+.5);else if(Mn(o)){const H=Object.keys(o)[0],G=o[H];b=v(this.chart.scales[H].getPixelForValue(G))}R=e.top,U=e.bottom,T=b+y,O=T+d}else if(n==="y"){if(o==="center")b=v((e.left+e.right)/2);else if(Mn(o)){const H=Object.keys(o)[0],G=o[H];b=v(this.chart.scales[H].getPixelForValue(G))}I=b-y,E=I-d,F=e.left,$=e.right}const W=wn(s.ticks.maxTicksLimit,h),te=Math.max(1,Math.ceil(h/W));for(w=0;w<h;w+=te){const H=this.getContext(w),G=r.setContext(H),B=a.setContext(H),Y=G.lineWidth,ne=G.color,le=B.dash||[],M=B.dashOffset,j=G.tickWidth,q=G.tickColor,X=G.tickBorderDash||[],Z=G.tickBorderDashOffset;S=_me(this,w,l),S!==void 0&&(k=Jf(i,S,Y),c?I=E=F=$=k:T=O=R=U=k,p.push({tx1:I,ty1:T,tx2:E,ty2:O,x1:F,y1:R,x2:$,y2:U,width:Y,color:ne,borderDash:le,borderDashOffset:M,tickWidth:j,tickColor:q,tickBorderDash:X,tickBorderDashOffset:Z}))}return this._ticksLength=h,this._borderValue=b,p}_computeLabelItems(e){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=r,d=Ev(i.grid),p=d+u,m=h?-u:p,g=-vc(this.labelRotation),y=[];let v,b,w,S,k,I,T,E,O,F,R,$,U="middle";if(s==="top")I=this.bottom-m,T=this._getXAxisLabelAlignment();else if(s==="bottom")I=this.top+m,T=this._getXAxisLabelAlignment();else if(s==="left"){const te=this._getYAxisLabelAlignment(d);T=te.textAlign,k=te.x}else if(s==="right"){const te=this._getYAxisLabelAlignment(d);T=te.textAlign,k=te.x}else if(n==="x"){if(s==="center")I=(e.top+e.bottom)/2+p;else if(Mn(s)){const te=Object.keys(s)[0],H=s[te];I=this.chart.scales[te].getPixelForValue(H)+p}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")k=(e.left+e.right)/2-p;else if(Mn(s)){const te=Object.keys(s)[0],H=s[te];k=this.chart.scales[te].getPixelForValue(H)}T=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?U="top":l==="end"&&(U="bottom"));const W=this._getLabelSizes();for(v=0,b=a.length;v<b;++v){w=a[v],S=w.label;const te=r.setContext(this.getContext(v));E=this.getPixelForTick(v)+r.labelOffset,O=this._resolveTickFontOptions(v),F=O.lineHeight,R=is(S)?S.length:1;const H=R/2,G=te.color,B=te.textStrokeColor,Y=te.textStrokeWidth;let ne=T;o?(k=E,T==="inner"&&(v===b-1?ne=this.options.reverse?"left":"right":v===0?ne=this.options.reverse?"right":"left":ne="center"),s==="top"?c==="near"||g!==0?$=-R*F+F/2:c==="center"?$=-W.highest.height/2-H*F+F:$=-W.highest.height+F/2:c==="near"||g!==0?$=F/2:c==="center"?$=W.highest.height/2-H*F:$=W.highest.height-R*F,h&&($*=-1),g!==0&&!te.showLabelBackdrop&&(k+=F/2*Math.sin(g))):(I=E,$=(1-R)*F/2);let le;if(te.showLabelBackdrop){const M=So(te.backdropPadding),j=W.heights[v],q=W.widths[v];let X=$-M.top,Z=0-M.left;switch(U){case"middle":X-=j/2;break;case"bottom":X-=j;break}switch(T){case"center":Z-=q/2;break;case"right":Z-=q;break;case"inner":v===b-1?Z-=q:v>0&&(Z-=q/2);break}le={left:Z,top:X,width:q+M.width,height:j+M.height,color:te.backdropColor}}y.push({label:S,font:O,textOffset:$,options:{rotation:g,color:G,strokeColor:B,strokeWidth:Y,textAlign:ne,textBaseline:U,translation:[k,I],backdrop:le}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-vc(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const l=s[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=Jf(e,this.left,o)-o/2,u=Jf(e,this.right,a)+a/2,h=d=l):(h=Jf(e,this.top,o)-o/2,d=Jf(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&fC(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Qp(i,c,0,u,l,a)}s&&pC(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=fr(i.font),o=So(i.padding),a=i.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||Mn(n)?(l+=o.bottom,is(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=Nme(this,l,n,a);Qp(e,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:d,textAlign:Ime(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=wn(e.grid&&e.grid.z,-1),s=wn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==vm.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return fr(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class y2{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;Ame(n)&&(i=this.register(n));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,Eme(e,o,i),this.override&&ss.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,s=this.scope;i in n&&delete n[i],s&&i in ss[s]&&(delete ss[s][i],this.override&&delete Zp[i])}}function Eme(t,e,n){const i=fy(Object.create(null),[n?ss.get(n):{},ss.get(e),t.defaults]);ss.set(e,i),t.defaultRoutes&&Tme(e,t.defaultRoutes),t.descriptors&&ss.describe(e,t.descriptors)}function Tme(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");ss.route(r,s,l,a)})}function Ame(t){return"id"in t&&"defaults"in t}class Rme{constructor(){this.controllers=new y2(Ll,"datasets",!0),this.elements=new y2(Au,"elements"),this.plugins=new y2(Object,"plugins"),this.scales=new y2(vm,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):xi(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const s=cL(e);Fi(i["before"+s],[],i),n[e](i),Fi(i["after"+s],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var nu=new Rme;class Lme{constructor(){this._init=[]}notify(e,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,n,i);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[n,s,r.options];if(Fi(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){ei(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,s=wn(i.options&&i.options.plugins,{}),r=Pme(i);return s===!1&&!n?[]:$me(e,r,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,i),e,"stop"),this._notify(s(i,n),e,"start")}}function Pme(t){const e={},n=[],i=Object.keys(nu.plugins.items);for(let r=0;r<i.length;r++)n.push(nu.getPlugin(i[r]));const s=t.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Dme(t,e){return!e&&t===!1?null:t===!0?{}:t}function $me(t,{plugins:e,localIds:n},i,s){const r=[],o=t.getContext();for(const a of e){const l=a.id,c=Dme(i[l],s);c!==null&&r.push({plugin:a,options:Ome(t.config,{plugin:a,local:n[l]},c,o)})}return r}function Ome(t,{plugin:e,local:n},i,s){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(i,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function DE(t,e){const n=ss.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Mme(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Fme(t,e){return t===e?"_index_":"_value_"}function DM(t){if(t==="x"||t==="y"||t==="r")return t}function Bme(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function $E(t,...e){if(DM(t))return t;for(const n of e){const i=n.axis||Bme(n.position)||t.length>1&&DM(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function $M(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function zme(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return $M(t,"x",n[0])||$M(t,"y",n[0])}return{}}function jme(t,e){const n=Zp[t.type]||{scales:{}},i=e.scales||{},s=DE(t.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Mn(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=$E(o,a,zme(o,t),ss.scales[a.type]),c=Fme(l,s),u=n.scales||{};r[o]=v1(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||DE(a,e),u=(Zp[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=Mme(h,l),p=o[d+"AxisID"]||d;r[p]=r[p]||Object.create(null),v1(r[p],[{axis:d},i[p],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];v1(a,[ss.scales[a.type],ss.scale])}),r}function pU(t){const e=t.options||(t.options={});e.plugins=wn(e.plugins,{}),e.scales=jme(t,e)}function mU(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Vme(t){return t=t||{},t.data=mU(t.data),pU(t),t}const OM=new Map,gU=new Set;function b2(t,e){let n=OM.get(t);return n||(n=e(),OM.set(t,n),gU.add(n)),n}const Tv=(t,e,n)=>{const i=nf(e,n);i!==void 0&&t.add(i)};class Wme{constructor(e){this._config=Vme(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=mU(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),pU(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return b2(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return b2(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return b2(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return b2(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let s=i.get(e);return(!s||n)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,n,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Tv(l,e,h))),u.forEach(h=>Tv(l,s,h)),u.forEach(h=>Tv(l,Zp[r]||{},h)),u.forEach(h=>Tv(l,ss,h)),u.forEach(h=>Tv(l,RE,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),gU.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Zp[n]||{},ss.datasets[n]||{},{type:n},ss,RE]}resolveNamedOptions(e,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=MM(this._resolverCache,e,s);let l=o;if(Hme(o,n)){r.$shared=!1,i=sf(i)?i():i;const c=this.createResolver(e,i,a);l=r0(o,i,c)}for(const c of n)r[c]=l[c];return r}createResolver(e,n,i=[""],s){const{resolver:r}=MM(this._resolverCache,e,i);return Mn(n)?r0(r,n,void 0,s):r}}function MM(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);return r||(r={resolver:mL(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const Ume=t=>Mn(t)&&Object.getOwnPropertyNames(t).some(e=>sf(t[e]));function Hme(t,e){const{isScriptable:n,isIndexable:i}=XW(t);for(const s of e){const r=n(s),o=i(s),a=(o||r)&&t[s];if(r&&(sf(a)||Ume(a))||o&&is(a))return!0}return!1}var Gme="4.4.6";const qme=["top","bottom","left","right","chartArea"];function FM(t,e){return t==="top"||t==="bottom"||qme.indexOf(t)===-1&&e==="x"}function BM(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function zM(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Fi(n&&n.onComplete,[t],e)}function Kme(t){const e=t.chart,n=e.options.animation;Fi(n&&n.onProgress,[t],e)}function vU(t){return yL()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const fw={},jM=t=>{const e=vU(t);return Object.values(fw).filter(n=>n.canvas===e).pop()};function Xme(t,e,n){const i=Object.keys(t);for(const s of i){const r=+s;if(r>=e){const o=t[s];delete t[s],(n>0||r>e)&&(t[r+n]=o)}}}function Yme(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function x2(t,e,n){return t.options.clip?t[n]:e[n]}function Zme(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:x2(n,e,"left"),right:x2(n,e,"right"),top:x2(i,e,"top"),bottom:x2(i,e,"bottom")}:e}var ld;let ah=(ld=class{static register(...e){nu.add(...e),VM()}static unregister(...e){nu.remove(...e),VM()}constructor(e,n){const i=this.config=new Wme(n),s=vU(e),r=jM(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||pme(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Jde(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Lme,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=mfe(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],fw[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}qu.listen(this,"complete",zM),qu.listen(this,"progress",Kme),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return ei(e)?n&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return nu}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():uM(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return aM(this.canvas,this.ctx),this}stop(){return qu.stop(this),this}resize(e,n){qu.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,uM(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Fi(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};xi(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=$E(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),xi(r,o=>{const a=o.options,l=a.id,c=$E(l,a),u=wn(a.type,o.dtype);(a.position===void 0||FM(a.position,c)!==FM(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=nu.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),xi(s,(o,a)=>{o||delete i[a]}),xi(i,o=>{xo.configure(this,o,o.options),xo.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(BM("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||DE(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=nu.getController(a),{datasetElementType:c,dataElementType:u}=ss.datasets[a];Object.assign(l,{dataElementType:nu.getElement(u),datasetElementType:c&&nu.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){xi(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!s&&r.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||xi(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(BM("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){xi(this.scales,e=>{xo.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Q4(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;Xme(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!Q4(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;xo.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],xi(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,sf(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qu.has(this)?this.attached&&!qu.running(this)&&qu.start(this):(this.draw(),zM({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,s=!i.disabled,r=Zme(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&fC(n,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&pC(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return oh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,s){const r=qpe.modes[n];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=xf(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);py(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),qu.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),aM(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete fw[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};xi(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){xi(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},xi(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const s=i?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!C_(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(n,e),a=i?e:r(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:s=[],options:r}=this,o=n,a=this._getActiveElements(e,s,i,o),l=rfe(e),c=Yme(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Fi(r.onHover,[e,a,this],this),l&&Fi(r.onClick,[e,a,this],this));const u=!C_(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,s){if(e.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}},ft(ld,"defaults",ss),ft(ld,"instances",fw),ft(ld,"overrides",Zp),ft(ld,"registry",nu),ft(ld,"version",Gme),ft(ld,"getChart",jM),ld);function VM(){return xi(ah.instances,t=>t._plugins.invalidate())}function Qme(t,e,n){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(r,o,a,i-c,n+c),l>s?(c=s/l,t.arc(r,o,l,n+c,i-c,!0)):t.arc(r,o,s,n+Ms,i-Ms),t.closePath(),t.clip()}function Jme(t){return pL(t,["outerStart","outerEnd","innerStart","innerEnd"])}function ege(t,e,n,i){const s=Jme(t.options.borderRadius),r=(n-e)/2,o=Math.min(r,i*e/2),a=l=>{const c=(n-Math.min(r,l))*i/2;return Er(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Er(s.innerStart,0,o),innerEnd:Er(s.innerEnd,0,o)}}function sg(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function A_(t,e,n,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let p=0;const m=s-l;if(i){const te=u>0?u-i:0,H=h>0?h-i:0,G=(te+H)/2,B=G!==0?m*G/(G+i):m;p=(m-B)/2}const g=Math.max(.001,m*h-n/Zi)/h,y=(m-g)/2,v=l+y+p,b=s-y-p,{outerStart:w,outerEnd:S,innerStart:k,innerEnd:I}=ege(e,d,h,b-v),T=h-w,E=h-S,O=v+w/T,F=b-S/E,R=d+k,$=d+I,U=v+k/R,W=b-I/$;if(t.beginPath(),r){const te=(O+F)/2;if(t.arc(o,a,h,O,te),t.arc(o,a,h,te,F),S>0){const Y=sg(E,F,o,a);t.arc(Y.x,Y.y,S,F,b+Ms)}const H=sg($,b,o,a);if(t.lineTo(H.x,H.y),I>0){const Y=sg($,W,o,a);t.arc(Y.x,Y.y,I,b+Ms,W+Math.PI)}const G=(b-I/d+(v+k/d))/2;if(t.arc(o,a,d,b-I/d,G,!0),t.arc(o,a,d,G,v+k/d,!0),k>0){const Y=sg(R,U,o,a);t.arc(Y.x,Y.y,k,U+Math.PI,v-Ms)}const B=sg(T,v,o,a);if(t.lineTo(B.x,B.y),w>0){const Y=sg(T,O,o,a);t.arc(Y.x,Y.y,w,v-Ms,O)}}else{t.moveTo(o,a);const te=Math.cos(O)*h+o,H=Math.sin(O)*h+a;t.lineTo(te,H);const G=Math.cos(F)*h+o,B=Math.sin(F)*h+a;t.lineTo(G,B)}t.closePath()}function tge(t,e,n,i,s){const{fullCircles:r,startAngle:o,circumference:a}=e;let l=e.endAngle;if(r){A_(t,e,n,i,l,s);for(let c=0;c<r;++c)t.fill();isNaN(a)||(l=o+(a%Xi||Xi))}return A_(t,e,n,i,l,s),t.fill(),l}function nge(t,e,n,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,p=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=d,p?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let m=e.endAngle;if(r){A_(t,e,n,i,m,s);for(let g=0;g<r;++g)t.stroke();isNaN(a)||(m=o+(a%Xi||Xi))}p&&Qme(t,e,m),r||(A_(t,e,n,i,m,s),t.stroke())}class Gv extends Au{constructor(n){super();ft(this,"circumference");ft(this,"endAngle");ft(this,"fullCircles");ft(this,"innerRadius");ft(this,"outerRadius");ft(this,"pixelMargin");ft(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.getProps(["x","y"],s),{angle:o,distance:a}=BW(r,{x:n,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,m=wn(d,c-l),g=my(o,l,c)&&l!==c,y=m>=Xi||g,v=sh(a,u+p,h+p);return y&&v}getCenterPoint(n){const{x:i,y:s,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(r+o)/2,d=(a+l+u+c)/2;return{x:i+Math.cos(h)*d,y:s+Math.sin(h)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:s}=this,r=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>Xi?Math.floor(s/Xi):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(Zi,s||0)),u=r*c;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,tge(n,this,u,o,a),nge(n,this,u,o,a),n.restore()}}ft(Gv,"id","arc"),ft(Gv,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),ft(Gv,"defaultRoutes",{backgroundColor:"backgroundColor"}),ft(Gv,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function yU(t,e,n=e){t.lineCap=wn(n.borderCapStyle,e.borderCapStyle),t.setLineDash(wn(n.borderDash,e.borderDash)),t.lineDashOffset=wn(n.borderDashOffset,e.borderDashOffset),t.lineJoin=wn(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=wn(n.borderWidth,e.borderWidth),t.strokeStyle=wn(n.borderColor,e.borderColor)}function ige(t,e,n){t.lineTo(n.x,n.y)}function sge(t){return t.stepped?Nfe:t.tension||t.cubicInterpolationMode==="monotone"?Efe:ige}function bU(t,e,n={}){const i=t.length,{start:s=0,end:r=i-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function rge(t,e,n,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=bU(s,n,i),u=sge(r);let{move:h=!0,reverse:d}=i||{},p,m,g;for(p=0;p<=c;++p)m=s[(a+(d?c-p:p))%o],!m.skip&&(h?(t.moveTo(m.x,m.y),h=!1):u(t,g,m,d,r.stepped),g=m);return l&&(m=s[(a+(d?c:0))%o],u(t,g,m,d,r.stepped)),!!l}function oge(t,e,n,i){const s=e.points,{count:r,start:o,ilen:a}=bU(s,n,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,d,p,m,g,y,v;const b=S=>(o+(c?a-S:S))%r,w=()=>{g!==y&&(t.lineTo(u,y),t.lineTo(u,g),t.lineTo(u,v))};for(l&&(p=s[b(0)],t.moveTo(p.x,p.y)),d=0;d<=a;++d){if(p=s[b(d)],p.skip)continue;const S=p.x,k=p.y,I=S|0;I===m?(k<g?g=k:k>y&&(y=k),u=(h*u+S)/++h):(w(),t.lineTo(S,k),m=I,h=0,g=y=k),v=k}w()}function OE(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?oge:rge}function age(t){return t.stepped?ope:t.tension||t.cubicInterpolationMode==="monotone"?ape:up}function lge(t,e,n,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,i)&&s.closePath()),yU(t,e.options),t.stroke(s)}function cge(t,e,n,i){const{segments:s,options:r}=e,o=OE(e);for(const a of s)yU(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const uge=typeof Path2D=="function";function hge(t,e,n,i){uge&&!e.options.segment?lge(t,e,n,i):cge(t,e,n,i)}class lh extends Au{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;Qfe(this._points,i,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=fpe(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,s=e[n],r=this.points,o=rU(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=age(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],p=r[h],m=r[d];if(p===m){a.push(p);continue}const g=Math.abs((s-p[n])/(m[n]-p[n])),y=l(p,m,g,i.stepped);y[n]=e[n],a.push(y)}return a.length===1?a[0]:a}pathSegment(e,n,i){return OE(this)(e,this,n,i)}path(e,n,i){const s=this.segments,r=OE(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of s)o&=r(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),hge(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ft(lh,"id","line"),ft(lh,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ft(lh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ft(lh,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function WM(t,e,n,i){const s=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<s.radius+s.hitRadius}class S1 extends Au{constructor(n){super();ft(this,"parsed");ft(this,"skip");ft(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,i){return WM(this,n,"x",i)}inYRange(n,i){return WM(this,n,"y",i)}getCenterPoint(n){const{x:i,y:s}=this.getProps(["x","y"],n);return{x:i,y:s}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const s=i&&n.borderWidth||0;return(i+s)*2}draw(n,i){const s=this.options;this.skip||s.radius<.1||!oh(this,i,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,LE(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ft(S1,"id","point"),ft(S1,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ft(S1,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function xU(t,e){const{x:n,y:i,base:s,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,s),l=Math.max(n,s),c=i-h,u=i+h):(h=r/2,a=n-h,l=n+h,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function kd(t,e,n,i){return t?0:Er(e,n,i)}function dge(t,e,n){const i=t.options.borderWidth,s=t.borderSkipped,r=KW(i);return{t:kd(s.top,r.top,0,n),r:kd(s.right,r.right,0,e),b:kd(s.bottom,r.bottom,0,n),l:kd(s.left,r.left,0,e)}}function fge(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,r=Ud(s),o=Math.min(e,n),a=t.borderSkipped,l=i||Mn(s);return{topLeft:kd(!l||a.top||a.left,r.topLeft,0,o),topRight:kd(!l||a.top||a.right,r.topRight,0,o),bottomLeft:kd(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:kd(!l||a.bottom||a.right,r.bottomRight,0,o)}}function pge(t){const e=xU(t),n=e.right-e.left,i=e.bottom-e.top,s=dge(t,n/2,i/2),r=fge(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function bN(t,e,n,i){const s=e===null,r=n===null,a=t&&!(s&&r)&&xU(t,i);return a&&(s||sh(e,a.left,a.right))&&(r||sh(n,a.top,a.bottom))}function mge(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function gge(t,e){t.rect(e.x,e.y,e.w,e.h)}function xN(t,e,n={}){const i=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+i,y:t.y+s,w:t.w+r,h:t.h+o,radius:t.radius}}class pw extends Au{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=pge(this),a=mge(o.radius)?Wd:gge;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,xN(o,n,r)),e.clip(),a(e,xN(r,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,xN(r,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,i){return bN(this,e,n,i)}inXRange(e,n){return bN(this,e,null,n)}inYRange(e,n){return bN(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(n+s)/2:n,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ft(pw,"id","bar"),ft(pw,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ft(pw,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var vge=Object.freeze({__proto__:null,ArcElement:Gv,BarElement:pw,LineElement:lh,PointElement:S1});const ME=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],UM=ME.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function wU(t){return ME[t%ME.length]}function _U(t){return UM[t%UM.length]}function yge(t,e){return t.borderColor=wU(e),t.backgroundColor=_U(e),++e}function bge(t,e){return t.backgroundColor=t.data.map(()=>wU(e++)),e}function xge(t,e){return t.backgroundColor=t.data.map(()=>_U(e++)),e}function wge(t){let e=0;return(n,i)=>{const s=t.getDatasetMeta(i).controller;s instanceof Cp?e=bge(n,e):s instanceof _1?e=xge(n,e):s&&(e=yge(n,e))}}function HM(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function _ge(t){return t&&(t.borderColor||t.backgroundColor)}function Sge(){return ss.borderColor!=="rgba(0,0,0,0.1)"||ss.backgroundColor!=="rgba(0,0,0,0.1)"}var Cge={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:s}=t.config,{elements:r}=s,o=HM(i)||_ge(s)||r&&HM(r)||Sge();if(!n.forceOverride&&o)return;const a=wge(t);i.forEach(a)}};function kge(t,e,n,i,s){const r=s.samples||i;if(r>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(r-2);let l=0;const c=e+n-1;let u=e,h,d,p,m,g;for(o[l++]=t[u],h=0;h<r-2;h++){let y=0,v=0,b;const w=Math.floor((h+1)*a)+1+e,S=Math.min(Math.floor((h+2)*a)+1,n)+e,k=S-w;for(b=w;b<S;b++)y+=t[b].x,v+=t[b].y;y/=k,v/=k;const I=Math.floor(h*a)+1+e,T=Math.min(Math.floor((h+1)*a)+1,n)+e,{x:E,y:O}=t[u];for(p=m=-1,b=I;b<T;b++)m=.5*Math.abs((E-y)*(t[b].y-O)-(E-t[b].x)*(v-O)),m>p&&(p=m,d=t[b],g=b);o[l++]=d,u=g}return o[l++]=t[c],o}function Ige(t,e,n,i){let s=0,r=0,o,a,l,c,u,h,d,p,m,g;const y=[],v=e+n-1,b=t[e].x,S=t[v].x-b;for(o=e;o<e+n;++o){a=t[o],l=(a.x-b)/S*i,c=a.y;const k=l|0;if(k===u)c<m?(m=c,h=o):c>g&&(g=c,d=o),s=(r*s+a.x)/++r;else{const I=o-1;if(!ei(h)&&!ei(d)){const T=Math.min(h,d),E=Math.max(h,d);T!==p&&T!==I&&y.push({...t[T],x:s}),E!==p&&E!==I&&y.push({...t[E],x:s})}o>0&&I!==p&&y.push(t[I]),y.push(a),u=k,r=0,m=g=c,h=d=p=o}}return y}function SU(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function GM(t){t.data.datasets.forEach(e=>{SU(e)})}function Nge(t,e){const n=e.length;let i=0,s;const{iScale:r}=t,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=Er(rh(e,r.axis,o).lo,0,n-1)),c?s=Er(rh(e,r.axis,a).hi+1,i,n)-i:s=n-i,{start:i,count:s}}var Ege={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){GM(t);return}const i=t.width;t.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=t.getDatasetMeta(r),c=o||s.data;if(Uv([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:d}=Nge(l,c);const p=n.threshold||4*i;if(d<=p){SU(s);return}ei(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let m;switch(n.algorithm){case"lttb":m=kge(c,h,d,i,n);break;case"min-max":m=Ige(c,h,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}s._decimated=m})},destroy(t){GM(t)}};function Tge(t,e,n){const i=t.segments,s=t.points,r=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=wL(l,c,s);const u=FE(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const h=rU(e,u);for(const d of h){const p=FE(n,r[d.start],r[d.end],d.loop),m=sU(a,s,p);for(const g of m)o.push({source:g,target:d,start:{[n]:qM(u,p,"start",Math.max)},end:{[n]:qM(u,p,"end",Math.min)}})}}return o}function FE(t,e,n,i){if(i)return;let s=e[t],r=n[t];return t==="angle"&&(s=Wa(s),r=Wa(r)),{property:t,start:s,end:r}}function Age(t,e){const{x:n=null,y:i=null}=t||{},s=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=wL(o,a,s);const l=s[o],c=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):n!==null&&(r.push({x:n,y:l.y}),r.push({x:n,y:c.y}))}),r}function wL(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function qM(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function CU(t,e){let n=[],i=!1;return is(t)?(i=!0,n=t):n=Age(t,e),n.length?new lh({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function KM(t){return t&&t.fill!==!1}function Rge(t,e,n){let s=t[e].fill;const r=[e];let o;if(!n)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!ws(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function Lge(t,e,n){const i=Oge(t);if(Mn(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return ws(s)&&Math.floor(s)===s?Pge(i[0],e,s,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Pge(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function Dge(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Mn(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function $ge(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:Mn(t)?i=t.value:i=e.getBaseValue(),i}function Oge(t){const e=t.options,n=e.fill;let i=wn(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Mge(t){const{scale:e,index:n,line:i}=t,s=[],r=i.segments,o=i.points,a=Fge(e,n);a.push(CU({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)Bge(s,o[u],a)}return new lh({points:s,options:{}})}function Fge(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}function Bge(t,e,n){const i=[];for(let s=0;s<n.length;s++){const r=n[s],{first:o,last:a,point:l}=zge(r,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function zge(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const s=i[n],r=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],h=o[u.start][n],d=o[u.end][n];if(sh(s,h,d)){a=s===h,l=s===d;break}}return{first:a,last:l,point:i}}class kU{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:s,y:r,radius:o}=this;return n=n||{start:0,end:Xi},e.arc(s,r,o,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:s}=this,r=e.angle;return{x:n+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function jge(t){const{chart:e,fill:n,line:i}=t;if(ws(n))return Vge(e,n);if(n==="stack")return Mge(t);if(n==="shape")return!0;const s=Wge(t);return s instanceof kU?s:CU(s,i)}function Vge(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Wge(t){return(t.scale||{}).getPointPositionForValue?Hge(t):Uge(t)}function Uge(t){const{scale:e={},fill:n}=t,i=Dge(n,e);if(ws(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function Hge(t){const{scale:e,fill:n}=t,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=$ge(n,e,r),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new kU({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function wN(t,e,n){const i=jge(e),{line:s,scale:r,axis:o}=e,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};i&&s.points.length&&(fC(t,n),Gge(t,{line:s,target:i,above:u,below:h,area:n,scale:r,axis:o}),pC(t))}function Gge(t,e){const{line:n,target:i,above:s,below:r,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&r!==s&&(XM(t,i,o.top),YM(t,{line:n,target:i,color:s,scale:a,property:l}),t.restore(),t.save(),XM(t,i,o.bottom)),YM(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore()}function XM(t,e,n){const{segments:i,points:s}=e;let r=!0,o=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,u=s[l],h=s[wL(l,c,s)];r?(t.moveTo(u.x,u.y),r=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function YM(t,e){const{line:n,target:i,property:s,color:r,scale:o}=e,a=Tge(n,i,s);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:d=r}={}}=l,p=i!==!0;t.save(),t.fillStyle=d,qge(t,o,p&&FE(s,u,h)),t.beginPath();const m=!!n.pathSegment(t,l);let g;if(p){m?t.closePath():ZM(t,i,h,s);const y=!!i.pathSegment(t,c,{move:m,reverse:!0});g=m&&y,g||ZM(t,i,u,s)}t.closePath(),t.fill(g?"evenodd":"nonzero"),t.restore()}}function qge(t,e,n){const{top:i,bottom:s}=e.chart.chartArea,{property:r,start:o,end:a}=n||{};r==="x"&&(t.beginPath(),t.rect(o,i,a-o,s-i),t.clip())}function ZM(t,e,n,i){const s=e.interpolate(n,i);s&&t.lineTo(s.x,s.y)}var Kge={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=t.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof lh&&(l={visible:t.isDatasetVisible(o),index:o,fill:Lge(a,o,i),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=Rge(s,o,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&wN(t.ctx,a,r))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;KM(r)&&wN(t.ctx,r,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!KM(i)||n.drawTime!=="beforeDatasetDraw"||wN(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const QM=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},Xge=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class JM extends Au{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Fi(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=fr(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=QM(i,r);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=e;r.textAlign="left",r.textBaseline="middle";let d=-1,p=-u;return this.legendItems.forEach((m,g)=>{const y=i+n/2+r.measureText(m.text).width;(g===0||c[c.length-1]+y+2*a>o)&&(h+=u,c[c.length-(g>0?0:1)]=0,p+=u,d++),l[g]={left:0,top:p,row:d,width:y,height:s},c[c.length-1]+=y+a}),h}_fitCols(e,n,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,p=0,m=0,g=0;return this.legendItems.forEach((y,v)=>{const{itemWidth:b,itemHeight:w}=Yge(i,n,r,y,s);v>0&&p+w+2*a>u&&(h+=d+a,c.push({width:d,height:p}),m+=d+a,g++,d=p=0),l[v]={left:m,top:p,col:g,width:b,height:w},d=Math.max(d,b),p+=w+a}),h+=d,c.push({width:d,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Mg(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=fo(i,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=fo(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=fo(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=fo(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;fC(e,this),this._draw(),pC(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=ss.color,l=Mg(e.rtl,this.left,this.width),c=fr(o.font),{padding:u}=o,h=c.size,d=h/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:m,boxHeight:g,itemHeight:y}=QM(o,h),v=function(I,T,E){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;s.save();const O=wn(E.lineWidth,1);if(s.fillStyle=wn(E.fillStyle,a),s.lineCap=wn(E.lineCap,"butt"),s.lineDashOffset=wn(E.lineDashOffset,0),s.lineJoin=wn(E.lineJoin,"miter"),s.lineWidth=O,s.strokeStyle=wn(E.strokeStyle,a),s.setLineDash(wn(E.lineDash,[])),o.usePointStyle){const F={radius:g*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:O},R=l.xPlus(I,m/2),$=T+d;qW(s,F,R,$,o.pointStyleWidth&&m)}else{const F=T+Math.max((h-g)/2,0),R=l.leftForLtr(I,m),$=Ud(E.borderRadius);s.beginPath(),Object.values($).some(U=>U!==0)?Wd(s,{x:R,y:F,w:m,h:g,radius:$}):s.rect(R,F,m,g),s.fill(),O!==0&&s.stroke()}s.restore()},b=function(I,T,E){Qp(s,E.text,I,T+y/2,c,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},w=this.isHorizontal(),S=this._computeTitleHeight();w?p={x:fo(r,this.left+u,this.right-i[0]),y:this.top+u+S,line:0}:p={x:this.left+u,y:fo(r,this.top+S+u,this.bottom-n[0].height),line:0},tU(this.ctx,e.textDirection);const k=y+u;this.legendItems.forEach((I,T)=>{s.strokeStyle=I.fontColor,s.fillStyle=I.fontColor;const E=s.measureText(I.text).width,O=l.textAlign(I.textAlign||(I.textAlign=o.textAlign)),F=m+d+E;let R=p.x,$=p.y;l.setWidth(this.width),w?T>0&&R+F+u>this.right&&($=p.y+=k,p.line++,R=p.x=fo(r,this.left+u,this.right-i[p.line])):T>0&&$+k>this.bottom&&(R=p.x=R+n[p.line].width+u,p.line++,$=p.y=fo(r,this.top+S+u,this.bottom-n[p.line].height));const U=l.x(R);if(v(U,$,I),R=gfe(O,R+m+d,w?R+F:this.right,e.rtl),b(l.x(R),$,I),w)p.x+=F+u;else if(typeof I.text!="string"){const W=c.lineHeight;p.y+=IU(I,W)+u}else p.y+=k}),nU(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=fr(n.font),s=So(n.padding);if(!n.display)return;const r=Mg(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=s.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=fo(e.align,h,this.right-d);else{const m=this.columnSizes.reduce((g,y)=>Math.max(g,y.height),0);u=c+fo(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=fo(a,h,h+d);o.textAlign=r.textAlign(dL(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Qp(o,n.text,p,u,i)}_computeTitleHeight(){const e=this.options.title,n=fr(e.font),i=So(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,s,r;if(sh(e,this.left,this.right)&&sh(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],sh(e,s.left,s.left+s.width)&&sh(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!Jge(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=Xge(s,i);s&&!r&&Fi(n.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&Fi(n.onHover,[e,i,this],this)}else i&&Fi(n.onClick,[e,i,this],this)}}function Yge(t,e,n,i,s){const r=Zge(i,t,e,n),o=Qge(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function Zge(t,e,n,i){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+n.size/2+i.measureText(s).width}function Qge(t,e,n){let i=t;return typeof e.text!="string"&&(i=IU(e,n)),i}function IU(t,e){const n=t.text?t.text.length:0;return e*n}function Jge(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var NU={id:"legend",_element:JM,start(t,e,n){const i=t.legend=new JM({ctx:t.ctx,options:n,chart:t});xo.configure(t,i,n),xo.addBox(t,i)},stop(t){xo.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;xo.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=So(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class _L extends Au{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=is(i.text)?i.text.length:1;this._padding=So(i.padding);const r=s*fr(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=fo(a,i,r),h=n+e,c=r-i):(o.position==="left"?(u=i+e,h=fo(a,s,n),l=Zi*-.5):(u=r-e,h=fo(a,n,s),l=Zi*.5),c=s-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=fr(n.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Qp(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:dL(n.align),textBaseline:"middle",translation:[o,a]})}}function e0e(t,e){const n=new _L({ctx:t.ctx,options:e,chart:t});xo.configure(t,n,e),xo.addBox(t,n),t.titleBlock=n}var EU={id:"title",_element:_L,start(t,e,n){e0e(t,n)},stop(t){const e=t.titleBlock;xo.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;xo.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const w2=new WeakMap;var t0e={id:"subtitle",start(t,e,n){const i=new _L({ctx:t.ctx,options:n,chart:t});xo.configure(t,i,n),xo.addBox(t,i),w2.set(t,i)},stop(t){xo.removeBox(t,w2.get(t)),w2.delete(t)},beforeUpdate(t,e,n){const i=w2.get(t);xo.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qv={average(t){if(!t.length)return!1;let e,n,i=new Set,s=0,r=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const l=t[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=AE(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Jc(t,e){return e&&(is(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ku(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function n0e(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:t,label:o,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function eF(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:o,boxHeight:a}=e,l=fr(e.bodyFont),c=fr(e.titleFont),u=fr(e.footerFont),h=r.length,d=s.length,p=i.length,m=So(e.padding);let g=m.height,y=0,v=i.reduce((S,k)=>S+k.before.length+k.lines.length+k.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){const S=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=p*S+(v-p)*l.lineHeight+(v-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let b=0;const w=function(S){y=Math.max(y,n.measureText(S).width+b)};return n.save(),n.font=c.string,xi(t.title,w),n.font=l.string,xi(t.beforeBody.concat(t.afterBody),w),b=e.displayColors?o+2+e.boxPadding:0,xi(i,S=>{xi(S.before,w),xi(S.lines,w),xi(S.after,w)}),b=0,n.font=u.string,xi(t.footer,w),n.restore(),y+=m.width,{width:y,height:g}}function i0e(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function s0e(t,e,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&s+r+o>e.width||t==="right"&&s-r-o<0)return!0}function r0e(t,e,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),s0e(c,t,e,n)&&(c="center"),c}function tF(t,e,n){const i=n.yAlign||e.yAlign||i0e(t,n);return{xAlign:n.xAlign||e.xAlign||r0e(t,e,n,i),yAlign:i}}function o0e(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function a0e(t,e,n){let{y:i,height:s}=t;return e==="top"?i+=n:e==="bottom"?i-=s+n:i-=s/2,i}function nF(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:p}=Ud(o);let m=o0e(e,a);const g=a0e(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,d)+s:a==="right"&&(m+=Math.max(h,p)+s),{x:Er(m,0,i.width-e.width),y:Er(g,0,i.height-e.height)}}function _2(t,e,n){const i=So(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function iF(t){return Jc([],Ku(t))}function l0e(t,e,n){return xf(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function sF(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const TU={beforeTitle:Hu,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Hu,beforeBody:Hu,beforeLabel:Hu,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ei(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Hu,afterBody:Hu,beforeFooter:Hu,footer:Hu,afterFooter:Hu};function pa(t,e,n,i){const s=t[e].call(n,i);return typeof s>"u"?TU[e].call(n,i):s}class BE extends Au{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new oU(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=l0e(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,s=pa(i,"beforeTitle",this,e),r=pa(i,"title",this,e),o=pa(i,"afterTitle",this,e);let a=[];return a=Jc(a,Ku(s)),a=Jc(a,Ku(r)),a=Jc(a,Ku(o)),a}getBeforeBody(e,n){return iF(pa(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,s=[];return xi(e,r=>{const o={before:[],lines:[],after:[]},a=sF(i,r);Jc(o.before,Ku(pa(a,"beforeLabel",this,r))),Jc(o.lines,pa(a,"label",this,r)),Jc(o.after,Ku(pa(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,n){return iF(pa(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,s=pa(i,"beforeFooter",this,e),r=pa(i,"footer",this,e),o=pa(i,"afterFooter",this,e);let a=[];return a=Jc(a,Ku(s)),a=Jc(a,Ku(r)),a=Jc(a,Ku(o)),a}_createItems(e){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(n0e(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),xi(a,u=>{const h=sF(e.callbacks,u);s.push(pa(h,"labelColor",this,u)),r.push(pa(h,"labelPointStyle",this,u)),o.push(pa(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=qv[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=eF(this,i),c=Object.assign({},a,l),u=tF(this.chart,i,c),h=nF(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,s){const r=this.getCaretPosition(e,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Ud(a),{x:d,y:p}=e,{width:m,height:g}=n;let y,v,b,w,S,k;return r==="center"?(S=p+g/2,s==="left"?(y=d,v=y-o,w=S+o,k=S-o):(y=d+m,v=y+o,w=S-o,k=S+o),b=y):(s==="left"?v=d+Math.max(l,u)+o:s==="right"?v=d+m-Math.max(c,h)-o:v=this.caretX,r==="top"?(w=p,S=w-o,y=v-o,b=v+o):(w=p+g,S=w+o,y=v+o,b=v-o),k=w),{x1:y,x2:v,x3:b,y1:w,y2:S,y3:k}}drawTitle(e,n,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=Mg(i.rtl,this.x,this.width);for(e.x=_2(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=fr(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,u=fr(r.bodyFont),h=_2(this,"left",r),d=s.x(h),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=n.y+p;if(r.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=s.leftForLtr(d,c)+c/2,v=m+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,LE(e,g,y,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,LE(e,g,y,v)}else{e.lineWidth=Mn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=s.leftForLtr(d,c),y=s.leftForLtr(s.xPlus(d,1),c-2),v=Ud(o.borderRadius);Object.values(v).some(b=>b!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Wd(e,{x:g,y:m,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Wd(e,{x:y,y:m+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(g,m,c,l),e.strokeRect(g,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(y,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=fr(i.bodyFont);let d=h.lineHeight,p=0;const m=Mg(i.rtl,this.x,this.width),g=function(E){n.fillText(E,m.x(e.x+p),e.y+d/2),e.y+=d+r},y=m.textAlign(o);let v,b,w,S,k,I,T;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=_2(this,y,i),n.fillStyle=i.bodyColor,xi(this.beforeBody,g),p=a&&y!=="right"?o==="center"?c/2+u:c+2+u:0,S=0,I=s.length;S<I;++S){for(v=s[S],b=this.labelTextColors[S],n.fillStyle=b,xi(v.before,g),w=v.lines,a&&w.length&&(this._drawColorBox(n,e,S,m,i),d=Math.max(h.lineHeight,l)),k=0,T=w.length;k<T;++k)g(w[k]),d=h.lineHeight;xi(v.after,g)}p=0,d=h.lineHeight,xi(this.afterBody,g),e.y-=r}drawFooter(e,n,i){const s=this.footer,r=s.length;let o,a;if(r){const l=Mg(i.rtl,this.x,this.width);for(e.x=_2(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=fr(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:m}=Ud(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,i,s),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(e,n,i,s),n.lineTo(a+c,l+u-m),n.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(e,n,i,s),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&r==="left"&&this.drawCaret(e,n,i,s),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=qv[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=eF(this,e),l=Object.assign({},o,this._size),c=tF(n,e,l),u=nF(e,l,c,n);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=So(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,n),tU(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),nU(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!C_(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,i),a=this._positionChanged(o,e),l=n||!C_(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:s,options:r}=this,o=qv[r.position].call(this,e,n);return o!==!1&&(i!==o.x||s!==o.y)}}ft(BE,"positioners",qv);var AU={id:"tooltip",_element:BE,positioners:qv,afterInit(t,e,n){n&&(t.tooltip=new BE({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:TU},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},c0e=Object.freeze({__proto__:null,Colors:Cge,Decimation:Ege,Filler:Kge,Legend:NU,SubTitle:t0e,Title:EU,Tooltip:AU});const u0e=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function h0e(t,e,n,i){const s=t.indexOf(e);if(s===-1)return u0e(t,e,n,i);const r=t.lastIndexOf(e);return s!==r?n:s}const d0e=(t,e)=>t===null?null:Er(Math.round(t),0,e);function rF(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class R_ extends vm{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ei(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:h0e(i,e,wn(n,e),this._addedLabels),d0e(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return rF.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ft(R_,"id","category"),ft(R_,"defaults",{ticks:{callback:rF}});function f0e(t,e){const n=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,p=r||1,m=u-1,{min:g,max:y}=e,v=!ei(o),b=!ei(a),w=!ei(c),S=(y-g)/(h+1);let k=eM((y-g)/m/p)*p,I,T,E,O;if(k<1e-14&&!v&&!b)return[{value:g},{value:y}];O=Math.ceil(y/k)-Math.floor(g/k),O>m&&(k=eM(O*k/m/p)*p),ei(l)||(I=Math.pow(10,l),k=Math.ceil(k*I)/I),s==="ticks"?(T=Math.floor(g/k)*k,E=Math.ceil(y/k)*k):(T=g,E=y),v&&b&&r&&cfe((a-o)/r,k/1e3)?(O=Math.round(Math.min((a-o)/k,u)),k=(a-o)/O,T=o,E=a):w?(T=v?o:T,E=b?a:E,O=c-1,k=(E-T)/O):(O=(E-T)/k,y1(O,Math.round(O),k/1e3)?O=Math.round(O):O=Math.ceil(O));const F=Math.max(tM(k),tM(T));I=Math.pow(10,ei(l)?F:l),T=Math.round(T*I)/I,E=Math.round(E*I)/I;let R=0;for(v&&(d&&T!==o?(n.push({value:o}),T<o&&R++,y1(Math.round((T+R*k)*I)/I,o,oF(o,S,t))&&R++):T<o&&R++);R<O;++R){const $=Math.round((T+R*k)*I)/I;if(b&&$>a)break;n.push({value:$})}return b&&d&&E!==a?n.length&&y1(n[n.length-1].value,a,oF(a,S,t))?n[n.length-1].value=a:n.push({value:a}):(!b||E===a)&&n.push({value:E}),n}function oF(t,e,{horizontal:n,minRotation:i}){const s=vc(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class L_ extends vm{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ei(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=n?s:l,a=l=>r=i?r:l;if(e){const l=vu(s),c=vu(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=f0e(s,r);return e.bounds==="ticks"&&FW(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-n)/Math.max(e.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Jy(e,this.chart.options.locale,this.options.ticks.format)}}class P_ extends L_{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ws(e)?e:0,this.max=ws(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=vc(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ft(P_,"id","linear"),ft(P_,"defaults",{ticks:{callback:dC.formatters.numeric}});const vy=t=>Math.floor(Cd(t)),tp=(t,e)=>Math.pow(10,vy(t)+e);function aF(t){return t/Math.pow(10,vy(t))===1}function lF(t,e,n){const i=Math.pow(10,n),s=Math.floor(t/i);return Math.ceil(e/i)-s}function p0e(t,e){const n=e-t;let i=vy(n);for(;lF(t,e,i)>10;)i++;for(;lF(t,e,i)<10;)i--;return Math.min(i,vy(t))}function m0e(t,{min:e,max:n}){e=za(t.min,e);const i=[],s=vy(e);let r=p0e(e,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,r)),d=za(t.min,Math.round((l+u+h*Math.pow(10,r))*o)/o);for(;d<n;)i.push({value:d,major:aF(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),d=Math.round((l+u+h*Math.pow(10,r))*o)/o;const p=za(t.max,d);return i.push({value:p,major:aF(p),significand:h}),i}class zE extends vm{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=L_.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return ws(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ws(e)?Math.max(0,e):null,this.max=ws(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ws(this._userMin)&&(this.min=e===tp(this.min,0)?tp(this.min,-1):tp(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=n?s:a;i===s&&(i<=0?(r(1),o(10)):(r(tp(i,-1)),o(tp(s,1)))),i<=0&&r(tp(s,-1)),s<=0&&o(tp(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=m0e(n,this);return e.bounds==="ticks"&&FW(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Jy(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Cd(e),this._valueRange=Cd(this.max)-Cd(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Cd(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}ft(zE,"id","logarithmic"),ft(zE,"defaults",{ticks:{callback:dC.formatters.logarithmic,major:{enabled:!0}}});function jE(t){const e=t.ticks;if(e.display&&t.display){const n=So(e.backdropPadding);return wn(e.font&&e.font.size,ss.font.size)+n.height}return 0}function g0e(t,e,n){return n=is(n)?n:[n],{w:Ife(t,e.string,n),h:n.length*e.lineHeight}}function cF(t,e,n,i,s){return t===i||t===s?{start:e-n/2,end:e+n/2}:t<i||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function v0e(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],s=[],r=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Zi/r:0;for(let l=0;l<r;l++){const c=o.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],a),h=fr(c.font),d=g0e(t.ctx,h,t._pointLabels[l]);i[l]=d;const p=Wa(t.getIndexAngle(l)+a),m=Math.round(uL(p)),g=cF(m,u.x,d.w,0,180),y=cF(m,u.y,d.h,90,270);y0e(n,e,p,g,y)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=w0e(t,i,s)}function y0e(t,e,n,i,s){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function b0e(t,e,n){const i=t.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=n,l=t.getPointPosition(e,i+s+o,r),c=Math.round(uL(Wa(l.angle+Ms))),u=C0e(l.y,a.h,c),h=_0e(c),d=S0e(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function x0e(t,e){if(!e)return!0;const{left:n,top:i,right:s,bottom:r}=t;return!(oh({x:n,y:i},e)||oh({x:n,y:r},e)||oh({x:s,y:i},e)||oh({x:s,y:r},e))}function w0e(t,e,n){const i=[],s=t._pointLabels.length,r=t.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:jE(r)/2,additionalAngle:o?Zi/s:0};let c;for(let u=0;u<s;u++){l.padding=n[u],l.size=e[u];const h=b0e(t,u,l);i.push(h),a==="auto"&&(h.visible=x0e(h,c),h.visible&&(c=h))}return i}function _0e(t){return t===0||t===180?"center":t<180?"left":"right"}function S0e(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function C0e(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function k0e(t,e,n){const{left:i,top:s,right:r,bottom:o}=n,{backdropColor:a}=e;if(!ei(a)){const l=Ud(e.borderRadius),c=So(e.backdropPadding);t.fillStyle=a;const u=i-c.left,h=s-c.top,d=r-i+c.width,p=o-s+c.height;Object.values(l).some(m=>m!==0)?(t.beginPath(),Wd(t,{x:u,y:h,w:d,h:p,radius:l}),t.fill()):t.fillRect(u,h,d,p)}}function I0e(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let s=e-1;s>=0;s--){const r=t._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(t.getPointLabelContext(s));k0e(n,o,r);const a=fr(o.font),{x:l,y:c,textAlign:u}=r;Qp(n,t._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function RU(t,e,n,i){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,Xi);else{let r=t.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=t.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function N0e(t,e,n,i,s){const r=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),RU(t,n,o,i),r.closePath(),r.stroke(),r.restore())}function E0e(t,e,n){return xf(t,{label:n,index:e,type:"pointLabel"})}class Kv extends L_{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=So(jE(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ws(e)&&!isNaN(e)?e:0,this.max=ws(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/jE(this.options))}generateTickLabels(e){L_.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const s=Fi(this.options.pointLabels.callback,[n,i],this);return s||s===0?s:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?v0e(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,s))}getIndexAngle(e){const n=Xi/(this._pointLabels.length||1),i=this.options.startAngle||0;return Wa(e*n+vc(i))}getDistanceFromCenterForValue(e){if(ei(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(ei(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return E0e(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const s=this.getIndexAngle(e)-Ms+i;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:n,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),RU(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:s,border:r}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&I0e(this,o),s.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),p=s.setContext(d),m=r.setContext(d);N0e(this,p,l,o,m)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=fr(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=So(c.backdropPadding);e.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}Qp(e,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}ft(Kv,"id","radialLinear"),ft(Kv,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:dC.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ft(Kv,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ft(Kv,"descriptors",{angleLines:{_fallback:"grid"}});const gC={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ya=Object.keys(gC);function uF(t,e){return t-e}function hF(t,e){if(ei(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),ws(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(s0(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function dF(t,e,n,i){const s=ya.length;for(let r=ya.indexOf(t);r<s-1;++r){const o=gC[ya[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return ya[r]}return ya[s-1]}function T0e(t,e,n,i,s){for(let r=ya.length-1;r>=ya.indexOf(n);r--){const o=ya[r];if(gC[o].common&&t._adapter.diff(s,i,o)>=e-1)return o}return ya[n?ya.indexOf(n):0]}function A0e(t){for(let e=ya.indexOf(t)+1,n=ya.length;e<n;++e)if(gC[ya[e]].common)return ya[e]}function fF(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:s}=hL(n,e),r=n[i]>=e?n[i]:n[s];t[r]=!0}}function R0e(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function pF(t,e,n){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!n?i:R0e(t,i,s,n)}class yy extends vm{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),s=this._adapter=new Vpe._date(e.adapters.date);s.init(n),v1(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:hF(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ws(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=ws(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=ffe(s,r,o);return this._unit=n.unit||(i.autoSkip?dF(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):T0e(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:A0e(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),pF(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Er(n,0,o),i=Er(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||dF(r.minUnit,n,i,this._getLabelCapacity(n)),a=wn(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=s0(l)||l===!0,u={};let h=n,d,p;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const m=s.ticks.source==="data"&&this.getDataTimestamps();for(d=h,p=0;d<i;d=+e.add(d,a,o),p++)fF(u,d,m);return(d===i||s.bounds==="ticks"||p===1)&&fF(u,d,m),Object.keys(u).sort(uF).map(g=>+g)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,r=this._unit,o=n||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,s){const r=this.options,o=r.ticks.callback;if(o)return Fi(o,[e,n,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[n],p=c&&h&&d&&d.major;return this._adapter.format(e,s||(p?h:u))}generateTickLabels(e){let n,i,s;for(n=0,i=e.length;n<i;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,s=vc(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(e,0,pF(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)e.push(hF(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return jW(e.sort(uF))}}ft(yy,"id","time"),ft(yy,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function S2(t,e,n){let i=0,s=t.length-1,r,o,a,l;n?(e>=t[i].pos&&e<=t[s].pos&&({lo:i,hi:s}=rh(t,"pos",e)),{pos:r,time:a}=t[i],{pos:o,time:l}=t[s]):(e>=t[i].time&&e<=t[s].time&&({lo:i,hi:s}=rh(t,"time",e)),{time:r,pos:a}=t[i],{time:o,pos:l}=t[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class VE extends yy{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=S2(n,this.min),this._tableRange=S2(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(S2(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return S2(this._table,i*this._tableRange+this._minPos,!0)}}ft(VE,"id","timeseries"),ft(VE,"defaults",yy.defaults);var L0e=Object.freeze({__proto__:null,CategoryScale:R_,LinearScale:P_,LogarithmicScale:zE,RadialLinearScale:Kv,TimeScale:yy,TimeSeriesScale:VE});const P0e=[jpe,vge,c0e,L0e],LU="label";function mF(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function D0e(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function PU(t,e){t.labels=e}function DU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:LU;const i=[];t.datasets=e.map(s=>{const r=t.datasets.find(o=>o[n]===s[n]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function $0e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:LU;const n={labels:[],datasets:[]};return PU(n,t.labels),DU(n,t.datasets,e),n}function O0e(t,e){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:r,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...d}=t,p=K.useRef(null),m=K.useRef(),g=()=>{p.current&&(m.current=new ah(p.current,{type:o,data:$0e(a,r),options:l&&{...l},plugins:c}),mF(e,m.current))},y=()=>{mF(e,null),m.current&&(m.current.destroy(),m.current=null)};return K.useEffect(()=>{!s&&m.current&&l&&D0e(m.current,l)},[s,l]),K.useEffect(()=>{!s&&m.current&&PU(m.current.config.data,a.labels)},[s,a.labels]),K.useEffect(()=>{!s&&m.current&&a.datasets&&DU(m.current.config.data,a.datasets,r)},[s,a.datasets]),K.useEffect(()=>{m.current&&(s?(y(),setTimeout(g)):m.current.update(h))},[s,l,a.labels,a.datasets,h]),K.useEffect(()=>{m.current&&(y(),setTimeout(g))},[o]),K.useEffect(()=>(g(),()=>y()),[]),xn.createElement("canvas",Object.assign({ref:p,role:"img",height:n,width:i},d),u)}const M0e=K.forwardRef(O0e);function F0e(t,e){return ah.register(e),K.forwardRef((n,i)=>xn.createElement(M0e,Object.assign({},n,{ref:i,type:t})))}const B0e=F0e("line",w1);ah.register(R_,P_,S1,lh,EU,AU,NU);const z0e=()=>{const[t,e]=K.useState([]),[n,i]=K.useState([]),[s,r]=K.useState([]),[o,a]=K.useState([]),[l,c]=K.useState({}),[u,h]=K.useState(null),[d,p]=K.useState("");K.useEffect(()=>{const w=JSON.parse(localStorage.getItem("userData"));if(w&&(p(w.username),w.devices)){const S=new Set,k={};w.devices.forEach(T=>{T.dates.forEach(E=>{S.add(E.location),k[E.location]||(k[E.location]=new Set),k[E.location].add(E.date)})}),e(Array.from(S).map(T=>({label:T,value:T})));const I={};Object.keys(k).forEach(T=>{I[T]=Array.from(k[T])}),c(I)}},[]);const m=w=>{if(r(w),w.length>0){const S=w.map(I=>I.value),k=new Set;S.forEach(I=>{var T;(T=l[I])==null||T.forEach(E=>k.add(E))}),i(Array.from(k).map(I=>({label:I,value:I})))}else i([]),a([])},g=async()=>{if(s.length===0)jt.warning("Please select at least one location.");else if(o.length===0)jt.warning("Please select at least one date.");else{const w=o.map(I=>I.value.replace(/-/g,"")),S=TR(),k=Ia(S,"devices");try{const I=await mu(k);if(I.exists()){const T=I.val(),E=[];Object.keys(T).forEach(O=>{const F=T[O],R={deviceId:O,dates:[]};Object.keys(F).forEach($=>{$===d&&w.forEach(U=>{if(F[$][U]){const W={date:`${U.slice(0,4)}.${U.slice(4,6)}.${U.slice(6,8)}`,locations:[]};Object.keys(F[$][U]).forEach(()=>{const te=F[$][U];if(s.some(H=>H.value===te.location.coordinates)){const H={ph:[],tds:[],turbidity:[]};te.location.sensor_data&&(te.location.sensor_data.ph&&Object.entries(te.location.sensor_data.ph).forEach(([G,B])=>{H.ph.push({time:G,value:B})}),te.location.sensor_data.tds&&Object.entries(te.location.sensor_data.tds).forEach(([G,B])=>{H.tds.push({time:G,value:B})}),te.location.sensor_data.turbidity&&Object.entries(te.location.sensor_data.turbidity).forEach(([G,B])=>{H.turbidity.push({time:G,value:B})})),W.locations.push({coordinates:te.location.coordinates,sensorData:H})}}),W.locations.length>0&&R.dates.push(W)}})}),R.dates.length>0&&E.push(R)}),h(E)}else console.log("No data available")}catch(I){console.error("Error fetching data:",I),jt.error("Error fetching data.")}}},y=()=>{if(!u||u.length===0)return{ph:"N/A",tds:"N/A",turbidity:"N/A",sensorCount:0};const w=[],S=[],k=[];let I=0;u.forEach(E=>E.dates.forEach(O=>O.locations.forEach(F=>{F.sensorData.ph.forEach(({value:R})=>w.push(R)),F.sensorData.tds.forEach(({value:R})=>S.push(R)),F.sensorData.turbidity.forEach(({value:R})=>k.push(R)),I+=1})));const T=E=>E.length?(E.reduce((O,F)=>O+F,0)/E.length).toFixed(2):"N/A";return{ph:T(w),tds:T(S),turbidity:T(k),sensorCount:I}},v=w=>{const S=[],k=[];u.forEach(T=>T.dates.forEach(E=>E.locations.forEach(O=>{O.sensorData[w].forEach(F=>{S.push(F.time),k.push(F.value)})})));const I={labels:S,datasets:[{label:`${w.toUpperCase()} over Time`,data:k,fill:!1,backgroundColor:"rgb(75, 192, 192)",borderColor:"rgba(75, 192, 192, 0.2)"}]};return Q.jsx(B0e,{data:I,options:{responsive:!0}})},b=y();return Q.jsxs(Yy,{className:"mt-4",children:[Q.jsxs(or,{className:"my-3",children:[Q.jsxs(jn,{xs:12,md:6,className:"mb-3 mb-md-0",children:[Q.jsx("label",{children:"Select Location(s):"}),Q.jsx(i0,{isMulti:!0,options:t,value:s,onChange:m,placeholder:"Select Locations..."})]}),Q.jsxs(jn,{xs:12,md:6,children:[Q.jsx("label",{children:"Select Date(s):"}),Q.jsx(i0,{isMulti:!0,options:n,value:o,onChange:a,placeholder:"Select Dates...",isDisabled:s.length===0})]})]}),Q.jsx(or,{className:"mb-4",children:Q.jsx(jn,{className:"text-center",children:Q.jsx(Ho,{variant:"primary",onClick:g,children:"Get Data"})})}),u&&Q.jsxs(Q.Fragment,{children:[Q.jsxs(or,{className:"mt-5",children:[Q.jsxs(jn,{xs:12,lg:6,className:"mb-4 mb-lg-0",children:[Q.jsx("h4",{className:"mb-3 font-bold text-xl lg:text-2xl",children:"Overall Sensor Summary"}),Q.jsx("div",{className:"flex items-center justify-center",children:Q.jsxs("div",{children:[Q.jsxs("p",{className:"mb-4 mt-4",children:[Q.jsx("strong",{children:"Sensor Count:"})," ",b.sensorCount]}),Q.jsxs("p",{className:"mb-4",children:[Q.jsx("strong",{children:"Average pH:"})," ",b.ph]}),Q.jsxs("p",{className:"mb-4",children:[Q.jsx("strong",{children:"Average TDS:"})," ",b.tds]}),Q.jsxs("p",{children:[Q.jsx("strong",{children:"Average Turbidity:"})," ",b.turbidity]})]})})]}),Q.jsxs(jn,{xs:12,lg:6,children:[Q.jsx("h4",{className:"text-center text-lg lg:text-xl",children:"pH Levels Over Time"}),v("ph")]})]}),Q.jsxs(or,{className:"mt-5",children:[Q.jsxs(jn,{xs:12,lg:6,className:"mb-4 mb-lg-0",children:[Q.jsx("h4",{className:"text-center text-lg lg:text-xl",children:"TDS Levels Over Time"}),v("tds")]}),Q.jsxs(jn,{xs:12,lg:6,children:[Q.jsx("h4",{className:"text-center text-lg lg:text-xl",children:"Turbidity Levels Over Time"}),v("turbidity")]})]})]}),Q.jsx(C0,{})]})},j0e=()=>{const[t,e]=K.useState(!1),[n,i]=K.useState(!1),[s,r]=K.useState(""),[o,a]=K.useState(""),[l,c]=K.useState("Client"),[u,h]=K.useState("Active"),[d,p]=K.useState([]),[m,g]=K.useState(null),y=()=>{e(!1),i(!1)},v=()=>e(!0),b=async()=>{const I={username:s,password:o,role:l,status:u};try{const T=Ia(Rl,"members");await woe(T,I),e(!1),k()}catch(T){console.error("Error saving member:",T)}},w=I=>{g(I.id),r(I.username),c(I.role),h(I.status),i(!0)},S=async()=>{const I={role:l,status:u};try{const T=Ia(Rl,`members/${m}`);await LV(T,I),i(!1),k()}catch(T){console.error("Error updating member:",T)}},k=()=>{r(""),a(""),c("Client"),h("Active")};return K.useEffect(()=>{const I=Ia(Rl,"members");Coe(I,T=>{const E=T.val(),O=E?Object.keys(E).map(F=>({id:F,...E[F]})):[];p(O)})},[]),Q.jsxs("div",{className:"p-4",children:[Q.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[Q.jsxs("div",{children:[Q.jsx("h3",{className:"text-start font-semibold text-xl",children:"Member Management"}),Q.jsx("p",{children:"Be sure to manage your members correctly."})]}),Q.jsx("div",{className:"mt-4 sm:mt-0",children:Q.jsx("button",{className:"bg-sky-600 hover:bg-sky-900 text-white font-bold py-2 px-4 rounded w-full sm:w-auto",onClick:v,children:"Add Member"})})]}),Q.jsx("div",{className:"mt-10 overflow-x-auto",children:Q.jsxs("table",{className:"table-auto border w-full",children:[Q.jsx("thead",{className:"bg-gray-200",children:Q.jsxs("tr",{children:[Q.jsx("th",{className:"px-4 py-2 w-1/4 border",children:"User Name"}),Q.jsx("th",{className:"px-4 py-2 w-1/4 border",children:"Role"}),Q.jsx("th",{className:"px-4 py-2 w-1/4 border",children:"Status"}),Q.jsx("th",{className:"px-4 py-2 w-1/4 border",children:"Action"})]})}),Q.jsx("tbody",{children:d.length>0?d.map(I=>Q.jsxs("tr",{children:[Q.jsx("td",{className:"border px-4 py-2",children:I.username}),Q.jsx("td",{className:"border px-4 py-2",children:I.role}),Q.jsx("td",{className:"border px-4 py-2",children:I.status}),Q.jsx("td",{className:"border px-4 py-2 text-center",children:Q.jsx("button",{className:"bg-lime-600 hover:bg-lime-800 text-white font-bold py-1 px-3 rounded",onClick:()=>w(I),children:"Edit"})})]},I.id)):Q.jsx("tr",{children:Q.jsx("td",{colSpan:"4",className:"text-center py-4",children:"No data to display"})})})]})}),Q.jsxs(Mo,{show:t,onHide:y,centered:!0,children:[Q.jsx(Mo.Header,{closeButton:!0,children:Q.jsx(Mo.Title,{children:"Add New Member"})}),Q.jsx(Mo.Body,{children:Q.jsxs("form",{children:[Q.jsxs("div",{className:"mb-3",children:[Q.jsx("label",{htmlFor:"username",className:"form-label",children:"User Name"}),Q.jsx("input",{type:"text",className:"form-control",id:"username",placeholder:"Enter user name",value:s,onChange:I=>r(I.target.value)})]}),Q.jsxs("div",{className:"mb-3",children:[Q.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),Q.jsx("input",{type:"password",className:"form-control",id:"password",placeholder:"Enter password",value:o,onChange:I=>a(I.target.value)})]}),Q.jsxs("div",{className:"mb-3",children:[Q.jsx("label",{htmlFor:"role",className:"form-label",children:"Role"}),Q.jsxs("select",{className:"form-select",id:"role",value:l,onChange:I=>c(I.target.value),children:[Q.jsx("option",{children:"Client"}),Q.jsx("option",{children:"Admin"})]})]}),Q.jsxs("div",{className:"mb-3",children:[Q.jsx("label",{htmlFor:"status",className:"form-label",children:"Status"}),Q.jsxs("select",{className:"form-select",id:"status",value:u,onChange:I=>h(I.target.value),children:[Q.jsx("option",{children:"Active"}),Q.jsx("option",{children:"Inactive"})]})]})]})}),Q.jsxs(Mo.Footer,{children:[Q.jsx(Ho,{variant:"secondary",onClick:y,children:"Close"}),Q.jsx(Ho,{variant:"primary",onClick:b,children:"Save Changes"})]})]}),Q.jsxs(Mo,{show:n,onHide:y,centered:!0,children:[Q.jsx(Mo.Header,{closeButton:!0,children:Q.jsx(Mo.Title,{children:"Edit Member"})}),Q.jsx(Mo.Body,{children:Q.jsxs("form",{children:[Q.jsxs("div",{className:"mb-3",children:[Q.jsx("label",{htmlFor:"username",className:"form-label",children:"User Name"}),Q.jsx("input",{type:"text",className:"form-control",id:"username",value:s,readOnly:!0})]}),Q.jsxs("div",{className:"mb-3",children:[Q.jsx("label",{htmlFor:"role",className:"form-label",children:"Role"}),Q.jsxs("select",{className:"form-select",id:"role",value:l,onChange:I=>c(I.target.value),children:[Q.jsx("option",{children:"Client"}),Q.jsx("option",{children:"Admin"}),Q.jsx("option",{children:"Member"})]})]}),Q.jsxs("div",{className:"mb-3",children:[Q.jsx("label",{htmlFor:"status",className:"form-label",children:"Status"}),Q.jsxs("select",{className:"form-select",id:"status",value:u,onChange:I=>h(I.target.value),children:[Q.jsx("option",{children:"Active"}),Q.jsx("option",{children:"Inactive"})]})]})]})}),Q.jsxs(Mo.Footer,{children:[Q.jsx(Ho,{variant:"secondary",onClick:y,children:"Close"}),Q.jsx(Ho,{variant:"primary",onClick:S,children:"Save Changes"})]})]})]})};ah.register(...P0e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V0e=1e-7,W0e=1e-4;class $U{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class SL{refCount(e){return ma("refCount")}incRef(e){return ma("incRef")}timerAvailable(){return!0}time(e){return ma("time")}read(e){return ma("read")}readSync(e){return ma("readSync")}readToGPU(e,n){return ma("readToGPU")}numDataIds(){return ma("numDataIds")}disposeData(e,n){return ma("disposeData")}write(e,n,i){return ma("write")}move(e,n,i,s,r){return ma("move")}createTensorFromGPUData(e,n,i){return ma("createTensorFromGPUData")}memory(){return ma("memory")}floatPrecision(){return ma("floatPrecision")}epsilon(){return this.floatPrecision()===32?V0e:W0e}dispose(){return ma("dispose")}}function ma(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U0e(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,cg(t,e,n)}function Jp(t,e,n){return Math.max(t,Math.min(e,n))}function CL(t){return t%2===0?t:t+1}function cg(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function H0e(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function ce(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function kL(t,e,n=""){ce(ri(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function OU(t){ce(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function He(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function ri(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function a0(t){return t%1===0}function WE(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Fg(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function gF(t,e=s=>0,n,i){return new Promise((s,r)=>{let o=0;const a=()=>{if(t()){s();return}o++;const l=e(o);if(n!=null&&o>=n){r();return}i!=null?i(a,l):setTimeout(a,l)};a()})}function MU(t,e){let n=1,i=-1;for(let r=0;r<t.length;++r)if(t[r]>=0)n*=t[r];else if(t[r]===-1){if(i!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${i} and dim ${r}`);i=r}else if(t[r]<0)throw Error(`Shapes can not be < 0. Found ${t[r]} at dim ${r}`);if(i===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[i]=e/n,s}function In(t,e){const n=e.length;return t=t==null?e.map((i,s)=>s):[].concat(t),ce(t.every(i=>i>=-n&&i<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),ce(t.every(i=>a0(i)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(i=>i<0?n+i:i)}function wf(t,e){const n=[],i=[],s=e!=null&&Array.isArray(e)&&e.length===0,r=e==null||s?null:In(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(r!=null){if(r[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(r[o]==null||r[o]>a)&&t[a]===1&&(n.push(t[a]),i.push(a)),r[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),i.push(a))}return{newShape:n,keptDims:i}}function Gr(t,e){return _s(t,e)}function _s(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function G0e(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(isNaN(i)||!isFinite(i))throw Error(`A tensor of type ${e} being uploaded contains ${i}.`)}}function q0e(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function FU(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function D_(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function K0e(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function tb(t){return typeof t=="string"||t instanceof String}function X0e(t){return typeof t=="boolean"}function UE(t){return typeof t=="number"}function D0(t){return Array.isArray(t)?D0(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":UE(t)?"float32":tb(t)?"string":X0e(t)?"bool":"float32"}function HE(t){return!!(t&&t.constructor&&t.call&&t.apply)}function GE(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function zt(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let i=e-3;i>=0;--i)n[i]=n[i+1]*t[i+1];return n}function BU(t,e,n,i=!1){const s=new Array;if(e.length===1){const r=e[0]*(i?2:1);for(let o=0;o<r;o++)s[o]=n[t+o]}else{const r=e[0],o=e.slice(1),a=o.reduce((l,c)=>l*c)*(i?2:1);for(let l=0;l<r;l++)s[l]=BU(t+l*a,o,n,i)}return s}function Sc(t,e,n=!1){if(t.length===0)return e[0];const i=t.reduce((s,r)=>s*r)*(n?2:1);if(i===0)return[];if(i!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return BU(0,t,e,n)}function Y0e(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function IL(t,e){const n=qr(t,e);for(let i=0;i<n.length;i++)n[i]=1;return n}function qr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function zU(t,e){const n=t.reduce((i,s)=>i*s,1);if(e==null||e==="float32")return Sc(t,new Float32Array(n));if(e==="int32")return Sc(t,new Int32Array(n));if(e==="bool")return Sc(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Dh(t){t.forEach(e=>{ce(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function yu(t,e,n){if(e===0)return 0;if(e===1)return t[0];let i=t[t.length-1];for(let s=0;s<t.length-1;++s)i+=n[s]*t[s];return i}function $0(t,e,n){if(e===0)return[];if(e===1)return[t];const i=new Array(e);for(let s=0;s<i.length-1;++s)i[s]=Math.floor(t/n[s]),t-=i[s]*n[s];return i[i.length-1]=t,i}function NL(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vF="tfjsflags";class Z0e{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Q0e,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(ze().getBool("IS_TEST")||ze().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,i){if(this.flagRegistry[e]={evaluationFn:n,setHook:i},this.urlFlags[e]!=null){const s=this.urlFlags[e];ze().getBool("IS_TEST")||ze().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(NL(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);vF in e&&e[vF].split(",").forEach(i=>{const[s,r]=i.split(":");this.urlFlags[s]=eve(s,r)})}}function Q0e(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...i)=>(J0e(e,i[0],i[1]),i.join("="))),e}function J0e(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function eve(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function ze(){return jU}let jU=null;function tve(t){jU=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let _N;function VU(){if(_N==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");_N=t}return _N}function nve(){const t=VU();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function EL(t,e){const n=nve();if(n.has(t))return n.get(t);{const i=e();return n.set(t,i),n.get(t)}}const vC="Abs",nb="Acos",ib="Acosh",O0="Add",TL="AddN",AL="All",RL="Any",yC="ArgMax",bC="ArgMin",sb="Asin",rb="Asinh",ob="Atan",ab="Atanh",lb="Atan2",xC="AvgPool",LL="AvgPoolGrad",wC="AvgPool3D",PL="AvgPool3DGrad",_C="BatchMatMul",SC="BatchToSpaceND",DL="Bincount",$L="BitwiseAnd",ive="BroadcastTo",WU="BroadcastArgs",cb="Cast",ub="Ceil",hb="ClipByValue",OL="Complex",CC="ComplexAbs",kC="Concat",IC="Conv2D",ML="Conv2DBackpropFilter",NC="Conv2DBackpropInput",EC="Conv3D",FL="Conv3DBackpropFilterV2",BL="Conv3DBackpropInputV2",db="Cos",fb="Cosh",zL="Cumprod",TC="Cumsum",jL="CropAndResize",VL="DenseBincount",WL="DepthToSpace",AC="DepthwiseConv2dNative",UL="DepthwiseConv2dNativeBackpropFilter",HL="DepthwiseConv2dNativeBackpropInput",UU="Diag",RC="Dilation2D",qE="Dilation2DBackpropInput",KE="Dilation2DBackpropFilter",sve="Draw",pb="RealDiv",GL="Einsum",mb="Elu",qL="EluGrad",gb="Erf",LC="Equal",vb="Exp",PC="ExpandDims",yb="Expm1",KL="FFT",XL="Fill",YL="FlipLeftRight",bb="Floor",xb="FloorDiv",DC="FusedBatchNorm",$C="GatherV2",HU="GatherNd",OC="Greater",wb="GreaterEqual",_b="Identity",ZL="IFFT",QL="Imag",Sb="IsFinite",Cb="IsInf",kb="IsNan",MC="LeakyRelu",FC="Less",BC="LessEqual",GU="LinSpace",Ib="Log",Nb="Log1p",zC="LogicalAnd",jC="LogicalNot",VC="LogicalOr",rve="LogSoftmax",WC="LRN",JL="LRNGrad",UC="Max",Eb="Maximum",HC="MaxPool",e3="MaxPoolGrad",GC="MaxPool3D",t3="MaxPool3DGrad",qU="MaxPoolWithArgmax",qC="Mean",KC="Min",Tb="Minimum",XC="MirrorPad",Ab="Mod",KU="Multinomial",Rb="Multiply",YC="Neg",ZC="NotEqual",n3="NonMaxSuppressionV3",i3="NonMaxSuppressionV4",s3="NonMaxSuppressionV5",QC="OnesLike",JC="OneHot",ek="Pack",tk="PadV2",Lb="Pow",nk="Prelu",ik="Prod",XU="RaggedGather",YU="RaggedRange",ZU="RaggedTensorToTensor",r3="Range",o3="Real",Pb="Reciprocal",Db="Relu",sk="Reshape",rk="ResizeNearestNeighbor",a3="ResizeNearestNeighborGrad",ok="ResizeBilinear",l3="ResizeBilinearGrad",$b="Relu6",ak="Reverse",Ob="Round",Mb="Rsqrt",QU="ScatterNd",JU="TensorScatterUpdate",eH="SearchSorted",lk="Select",Fb="Selu",ck="Slice",Bb="Sin",zb="Sinh",jb="Sign",Vb="Sigmoid",Wb="Softplus",Ub="Sqrt",uk="Sum",hk="SpaceToBatchND",dk="SplitV",fk="Softmax",tH="SparseFillEmptyRows",nH="SparseReshape",iH="SparseSegmentMean",sH="SparseSegmentSum",rH="SparseToDense",Hb="SquaredDifference",c3="Square",u3="StaticRegexReplace",h3="StridedSlice",oH="StringNGrams",aH="StringSplit",lH="StringToHashBucketFast",Gb="Sub",qb="Tan",Kb="Tanh",Xb="Tile",d3="TopK",f3="Transform",Bg="Transpose",p3="Unique",pk="Unpack",mk="UnsortedSegmentSum",gk="ZerosLike",Yb="Step",ove="FromPixels",m3="RotateWithOffset",$_="_FusedMatMul",O_="FusedConv2D",cH="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ua(...t){ze().getBool("IS_TEST")||ze().getBool("PROD")||console.warn(...t)}function ave(...t){ze().getBool("IS_TEST")||ze().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M_=EL("kernelRegistry",()=>new Map),XE=EL("gradRegistry",()=>new Map);function yF(t,e){const n=hH(t,e);return M_.get(n)}function bF(t){return XE.get(t)}function xF(t){const e=M_.entries(),n=[];for(;;){const{done:i,value:s}=e.next();if(i)break;const[r,o]=s,[a]=r.split("_");a===t&&n.push(o)}return n}function uH(t){const{kernelName:e,backendName:n}=t,i=hH(e,n);M_.has(i)&&Ua(`The kernel '${e}' for backend '${n}' is already registered`),M_.set(i,t)}function lve(t){const{kernelName:e}=t;XE.has(e)&&ze().getBool("DEBUG")&&Ua(`Overriding the gradient for '${e}'`),XE.set(e,t)}function hH(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dH(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var fH=Wi,kl=null;try{kl=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Wi(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Wi.prototype.__isLong__;Object.defineProperty(Wi.prototype,"__isLong__",{value:!0});function Ra(t){return(t&&t.__isLong__)===!0}Wi.isLong=Ra;var wF={},_F={};function ym(t,e){var n,i,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(i=_F[t],i)?i:(n=Ui(t,(t|0)<0?-1:0,!0),s&&(_F[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(i=wF[t],i)?i:(n=Ui(t,t<0?-1:0,!1),s&&(wF[t]=n),n))}Wi.fromInt=ym;function Il(t,e){if(isNaN(t))return e?kp:Nl;if(e){if(t<0)return kp;if(t>=pH)return vH}else{if(t<=-CF)return _a;if(t+1>=CF)return gH}return t<0?Il(-t,e).neg():Ui(t%l0|0,t/l0|0,e)}Wi.fromNumber=Il;function Ui(t,e,n){return new Wi(t,e,n)}Wi.fromBits=Ui;var F_=Math.pow;function g3(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Nl;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var i;if((i=t.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return g3(t.substring(1),e,n).neg();for(var s=Il(F_(n,8)),r=Nl,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var c=Il(F_(n,a));r=r.mul(c).add(Il(l))}else r=r.mul(s),r=r.add(Il(l))}return r.unsigned=e,r}Wi.fromString=g3;function Ac(t,e){return typeof t=="number"?Il(t,e):typeof t=="string"?g3(t,e):Ui(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Wi.fromValue=Ac;var SF=65536,cve=1<<24,l0=SF*SF,pH=l0*l0,CF=pH/2,kF=ym(cve),Nl=ym(0);Wi.ZERO=Nl;var kp=ym(0,!0);Wi.UZERO=kp;var Ng=ym(1);Wi.ONE=Ng;var mH=ym(1,!0);Wi.UONE=mH;var YE=ym(-1);Wi.NEG_ONE=YE;var gH=Ui(-1,2147483647,!1);Wi.MAX_VALUE=gH;var vH=Ui(-1,-1,!0);Wi.MAX_UNSIGNED_VALUE=vH;var _a=Ui(0,-2147483648,!1);Wi.MIN_VALUE=_a;var yt=Wi.prototype;yt.toInt=function(){return this.unsigned?this.low>>>0:this.low};yt.toNumber=function(){return this.unsigned?(this.high>>>0)*l0+(this.low>>>0):this.high*l0+(this.low>>>0)};yt.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(_a)){var n=Il(e),i=this.div(n),s=i.mul(n).sub(this);return i.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var r=Il(F_(e,6),this.unsigned),o=this,a="";;){var l=o.div(r),c=o.sub(l.mul(r)).toInt()>>>0,u=c.toString(e);if(o=l,o.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};yt.getHighBits=function(){return this.high};yt.getHighBitsUnsigned=function(){return this.high>>>0};yt.getLowBits=function(){return this.low};yt.getLowBitsUnsigned=function(){return this.low>>>0};yt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_a)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};yt.isZero=function(){return this.high===0&&this.low===0};yt.eqz=yt.isZero;yt.isNegative=function(){return!this.unsigned&&this.high<0};yt.isPositive=function(){return this.unsigned||this.high>=0};yt.isOdd=function(){return(this.low&1)===1};yt.isEven=function(){return(this.low&1)===0};yt.equals=function(e){return Ra(e)||(e=Ac(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};yt.eq=yt.equals;yt.notEquals=function(e){return!this.eq(e)};yt.neq=yt.notEquals;yt.ne=yt.notEquals;yt.lessThan=function(e){return this.comp(e)<0};yt.lt=yt.lessThan;yt.lessThanOrEqual=function(e){return this.comp(e)<=0};yt.lte=yt.lessThanOrEqual;yt.le=yt.lessThanOrEqual;yt.greaterThan=function(e){return this.comp(e)>0};yt.gt=yt.greaterThan;yt.greaterThanOrEqual=function(e){return this.comp(e)>=0};yt.gte=yt.greaterThanOrEqual;yt.ge=yt.greaterThanOrEqual;yt.compare=function(e){if(Ra(e)||(e=Ac(e)),this.eq(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};yt.comp=yt.compare;yt.negate=function(){return!this.unsigned&&this.eq(_a)?_a:this.not().add(Ng)};yt.neg=yt.negate;yt.add=function(e){Ra(e)||(e=Ac(e));var n=this.high>>>16,i=this.high&65535,s=this.low>>>16,r=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,h=0,d=0,p=0;return p+=r+c,d+=p>>>16,p&=65535,d+=s+l,h+=d>>>16,d&=65535,h+=i+a,u+=h>>>16,h&=65535,u+=n+o,u&=65535,Ui(d<<16|p,u<<16|h,this.unsigned)};yt.subtract=function(e){return Ra(e)||(e=Ac(e)),this.add(e.neg())};yt.sub=yt.subtract;yt.multiply=function(e){if(this.isZero())return Nl;if(Ra(e)||(e=Ac(e)),kl){var n=kl.mul(this.low,this.high,e.low,e.high);return Ui(n,kl.get_high(),this.unsigned)}if(e.isZero())return Nl;if(this.eq(_a))return e.isOdd()?_a:Nl;if(e.eq(_a))return this.isOdd()?_a:Nl;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(kF)&&e.lt(kF))return Il(this.toNumber()*e.toNumber(),this.unsigned);var i=this.high>>>16,s=this.high&65535,r=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,h=0,d=0,p=0,m=0;return m+=o*u,p+=m>>>16,m&=65535,p+=r*u,d+=p>>>16,p&=65535,p+=o*c,d+=p>>>16,p&=65535,d+=s*u,h+=d>>>16,d&=65535,d+=r*c,h+=d>>>16,d&=65535,d+=o*l,h+=d>>>16,d&=65535,h+=i*u+s*c+r*l+o*a,h&=65535,Ui(p<<16|m,h<<16|d,this.unsigned)};yt.mul=yt.multiply;yt.divide=function(e){if(Ra(e)||(e=Ac(e)),e.isZero())throw Error("division by zero");if(kl){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?kl.div_u:kl.div_s)(this.low,this.high,e.low,e.high);return Ui(n,kl.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?kp:Nl;var i,s,r;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return kp;if(e.gt(this.shru(1)))return mH;r=kp}else{if(this.eq(_a)){if(e.eq(Ng)||e.eq(YE))return _a;if(e.eq(_a))return Ng;var o=this.shr(1);return i=o.div(e).shl(1),i.eq(Nl)?e.isNegative()?Ng:YE:(s=this.sub(e.mul(i)),r=i.add(s.div(e)),r)}else if(e.eq(_a))return this.unsigned?kp:Nl;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=Nl}for(s=this;s.gte(e);){i=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(i)/Math.LN2),l=a<=48?1:F_(2,a-48),c=Il(i),u=c.mul(e);u.isNegative()||u.gt(s);)i-=l,c=Il(i,this.unsigned),u=c.mul(e);c.isZero()&&(c=Ng),r=r.add(c),s=s.sub(u)}return r};yt.div=yt.divide;yt.modulo=function(e){if(Ra(e)||(e=Ac(e)),kl){var n=(this.unsigned?kl.rem_u:kl.rem_s)(this.low,this.high,e.low,e.high);return Ui(n,kl.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};yt.mod=yt.modulo;yt.rem=yt.modulo;yt.not=function(){return Ui(~this.low,~this.high,this.unsigned)};yt.and=function(e){return Ra(e)||(e=Ac(e)),Ui(this.low&e.low,this.high&e.high,this.unsigned)};yt.or=function(e){return Ra(e)||(e=Ac(e)),Ui(this.low|e.low,this.high|e.high,this.unsigned)};yt.xor=function(e){return Ra(e)||(e=Ac(e)),Ui(this.low^e.low,this.high^e.high,this.unsigned)};yt.shiftLeft=function(e){return Ra(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Ui(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Ui(0,this.low<<e-32,this.unsigned)};yt.shl=yt.shiftLeft;yt.shiftRight=function(e){return Ra(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Ui(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Ui(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};yt.shr=yt.shiftRight;yt.shiftRightUnsigned=function(e){if(Ra(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var i=this.low;return Ui(i>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Ui(n,0,this.unsigned):Ui(n>>>e-32,0,this.unsigned)};yt.shru=yt.shiftRightUnsigned;yt.shr_u=yt.shiftRightUnsigned;yt.toSigned=function(){return this.unsigned?Ui(this.low,this.high,!1):this};yt.toUnsigned=function(){return this.unsigned?this:Ui(this.low,this.high,!0)};yt.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};yt.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};yt.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Wi.fromBytes=function(e,n,i){return i?Wi.fromBytesLE(e,n):Wi.fromBytesBE(e,n)};Wi.fromBytesLE=function(e,n){return new Wi(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Wi.fromBytesBE=function(e,n){return new Wi(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const yH=Py(fH),uve=VT({__proto__:null,default:yH},[fH]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mp=yH||uve;function vk(t){return mp.fromString(t,!0,16)}const bH=vk("c3a5c85c97cb3127"),hp=vk("b492b66fbe98f273"),vo=vk("9ae16a3b2f90404f");function ZE(t){return t.xor(t.shru(47))}function xH(t,e,n){const i=t.slice(e,e+n);return mp.fromBytes(Array.from(i),!0,!0)}function Pi(t,e){return xH(t,e,8)}function IF(t,e){return xH(t,e,4)}function cr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Hd(t,e,n=vk("9ddfea08eb382d69")){let i=t.xor(e).mul(n);i=i.xor(i.shru(47));let s=e.xor(i).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function hve(t,e,n,i,s,r){s=s.add(t),r=cr(r.add(s).add(i),21);const o=s;return s=s.add(e),s=s.add(n),r=r.add(cr(s,44)),[s.add(i),r.add(o)]}function C2(t,e,n,i){return hve(Pi(t,e),Pi(t,e+8),Pi(t,e+16),Pi(t,e+24),n,i)}function dve(t,e=t.length){if(e>=8){const n=vo.add(e*2),i=Pi(t,0).add(vo),s=Pi(t,e-8),r=cr(s,37).mul(n).add(i),o=cr(i,25).add(s).mul(n);return Hd(r,o,n)}if(e>=4){const n=vo.add(e*2),i=IF(t,0);return Hd(i.shl(3).add(e),IF(t,e-4),n)}if(e>0){const n=t[0],i=t[e>>1],s=t[e-1],r=n+(i<<8),o=e+(s<<2);return ZE(vo.mul(r).xor(bH.mul(o))).mul(vo)}return vo}function fve(t,e=t.length){const n=vo.add(e*2),i=Pi(t,0).mul(hp),s=Pi(t,8),r=Pi(t,e-8).mul(n),o=Pi(t,e-16).mul(vo);return Hd(cr(i.add(s),43).add(cr(r,30)).add(o),i.add(cr(s.add(vo),18)).add(r),n)}function pve(t,e=t.length){const n=vo.add(e*2),i=Pi(t,0).mul(vo),s=Pi(t,8),r=Pi(t,e-8).mul(n),o=Pi(t,e-16).mul(vo),a=cr(i.add(s),43).add(cr(r,30)).add(o),l=Hd(a,i.add(cr(s.add(vo),18)).add(r),n),c=Pi(t,16).mul(n),u=Pi(t,24),h=a.add(Pi(t,e-32)).mul(n),d=l.add(Pi(t,e-24)).mul(n);return Hd(cr(c.add(u),43).add(cr(h,30)).add(d),c.add(cr(u.add(i),18)).add(h),n)}function mve(t,e=t.length){const n=mp.fromNumber(81,!0);if(e<=32)return e<=16?dve(t,e):fve(t,e);if(e<=64)return pve(t,e);let i=n,s=n.mul(hp).add(113),r=ZE(s.mul(vo).add(113)).mul(vo),o=[mp.UZERO,mp.UZERO],a=[mp.UZERO,mp.UZERO];i=i.mul(vo).add(Pi(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do i=cr(i.add(s).add(o[0]).add(Pi(t,l+8)),37).mul(hp),s=cr(s.add(o[1]).add(Pi(t,l+48)),42).mul(hp),i=i.xor(a[1]),s=s.add(o[0]).add(Pi(t,l+40)),r=cr(r.add(a[0]),33).mul(hp),o=C2(t,l,o[1].mul(hp),i.add(a[0])),a=C2(t,l+32,r.add(a[1]),s.add(Pi(t,l+16))),[r,i]=[i,r],l+=64;while(l!==c);const h=hp.add(r.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),i=cr(i.add(s).add(o[0]).add(Pi(t,l+8)),37).mul(h),s=cr(s.add(o[1]).add(Pi(t,l+48)),42).mul(h),i=i.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(Pi(t,l+40))),r=cr(r.add(a[0]),33).mul(h),o=C2(t,l,o[1].mul(h),i.add(a[0])),a=C2(t,l+32,r.add(a[1]),s.add(Pi(t,l+16))),[r,i]=[i,r],Hd(Hd(o[0],a[0],h).add(ZE(s).mul(bH)).add(r),Hd(o[1],a[1],h).add(i),h)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _f(t,e){return e==="string"?Gd(t):bm([t],e)}function gve(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function bm(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=em(t)),ze().getBool("DEBUG")&&G0e(t,e),gve(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let i=0;i<n.length;++i)Math.round(t[i])!==0&&(n[i]=1);return n}else throw new Error(`Unknown data type ${e}`)}function zo(){return ze().platform.now()}function Gd(t,e="utf-8"){return e=e||"utf-8",ze().platform.encode(t,e)}function rf(t,e="utf-8"){return e=e||"utf-8",ze().platform.decode(t,e)}function Ol(t){return ze().platform.isTypedArray!=null?ze().platform.isTypedArray(t):dH(t)}function em(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||NL(t)||t==null||Ol(t)&&n)e.push(t);else if(Array.isArray(t)||Ol(t))for(let i=0;i<t.length;++i)em(t[i],e,n);else{let i=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(i=Math.max(i,Number(s)));for(let s=0;s<=i;s++)em(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vve{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new bve)}profileKernel(e,n,i){let s;const r=()=>{s=i()};let o;const a=zo();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(r);else{r();for(const c of s)c.dataSync();o=Promise.resolve({kernelMs:zo()-a})}if(ze().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const u=s[c];u.data().then(h=>{yve(h,u.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:i,timeMs:s,inputs:r,extraInfo:o}=e;i.forEach(a=>{Promise.all([a.data(),s,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],r,l[2])})})}}function yve(t,e,n){if(e!=="float32")return!1;for(let i=0;i<t.length;i++){const s=t[i];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class bve{logKernelProfile(e,n,i,s,r,o){const a=typeof s=="number"?Fg(`${s}ms`,9):s.error,l=Fg(e,25),c=n.rank,u=n.size,h=Fg(n.shape.toString(),14);let d="";for(const p in r){const m=r[p];if(m!=null){const g=m.shape||n.shape,y=g.length;d+=`${p}: ${y}D ${y>0?g:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${h}	%c${u}	%c${d}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xve(t,e,n){const i={},s={};for(let l=0;l<e.length;l++)i[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const h in u){const d=u[h];let p=!1;for(let m=0;m<e.length;m++)if(i[d.id]){c.outputs.forEach(g=>i[g.id]=!0),p=!0,s[c.id]=!0;break}if(p)break}}const r={};r[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let h=0;h<c.outputs.length;h++)if(r[c.outputs[h].id]){for(const d in u)r[u[d].id]=!0,o[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&o[c.id]){const u={};for(const d in c.inputs){const p=c.inputs[d];i[p.id]&&(u[d]=p)}const h=Object.assign({},c);h.inputs=u,h.outputs=c.outputs,a.push(h)}}return a}function wve(t,e,n,i){for(let s=e.length-1;s>=0;s--){const r=e[s],o=[];if(r.outputs.forEach(l=>{const c=t[l.id];c!=null?o.push(c):o.push(null)}),r.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${r.kernelName}.`);const a=r.gradient(o);for(const l in r.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=r.inputs[l];if(!ri(c.shape,u.shape))throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const h=t[u.id];t[u.id]=i(h,c),h.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NF=20,Av=3,SN=7;function _ve(t,e,n,i){const s=zt(e),r=Sve(t,e,n,s),o=e.length,a=mw(t,e,n,s,r),l=["Tensor"];return i&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function Sve(t,e,n,i){const s=He(e),r=i[i.length-1],o=new Array(r).fill(0),a=e.length,l=n==="complex64"?Yv(t):t;if(a>1)for(let c=0;c<s/r;c++){const u=c*r;for(let h=0;h<r;h++)o[h]=Math.max(o[h],Xv(l[u+h],0,n).length)}return o}function Xv(t,e,n){let i;return Array.isArray(t)?i=`${parseFloat(t[0].toFixed(SN))} + ${parseFloat(t[1].toFixed(SN))}j`:tb(t)?i=`'${t}'`:n==="bool"?i=wH(t):i=parseFloat(t.toFixed(SN)).toString(),Fg(i,e)}function wH(t){return t===0?"false":"true"}function mw(t,e,n,i,s,r=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const g=Yv(t);return[Xv(g[0],0,n)]}return n==="bool"?[wH(t[0])]:[t[0].toString()]}if(l===1){if(a>NF){const y=Av*o;let v=Array.from(t.slice(0,y)),b=Array.from(t.slice((a-Av)*o,a*o));return n==="complex64"&&(v=Yv(v),b=Yv(b)),["["+v.map((w,S)=>Xv(w,s[S],n)).join(", ")+", ..., "+b.map((w,S)=>Xv(w,s[a-Av+S],n)).join(", ")+"]"]}return["["+(n==="complex64"?Yv(t):Array.from(t)).map((y,v)=>Xv(y,s[v],n)).join(", ")+"]"]}const c=e.slice(1),u=i.slice(1),h=i[0]*o,d=[];if(a>NF){for(let g=0;g<Av;g++){const y=g*h,v=y+h;d.push(...mw(t.slice(y,v),c,n,u,s,!1))}d.push("...");for(let g=a-Av;g<a;g++){const y=g*h,v=y+h;d.push(...mw(t.slice(y,v),c,n,u,s,g===a-1))}}else for(let g=0;g<a;g++){const y=g*h,v=y+h;d.push(...mw(t.slice(y,v),c,n,u,s,g===a-1))}const p=l===2?",":"";d[0]="["+(a>0?d[0]+p:"");for(let g=1;g<d.length-1;g++)d[g]=" "+d[g]+p;let m=`,
`;for(let g=2;g<l;g++)m+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(r?"":m),d}function Yv(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ar{constructor(e,n,i){if(this.dtype=n,this.shape=e.slice(),this.size=He(e),i!=null){const s=i.length;ce(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=i||_s(n,this.size),this.strides=zt(e)}set(e,...n){n.length===0&&(n=[0]),ce(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const i=this.locToIndex(n);this.values[i]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const r=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(r)}n++}let i=e[e.length-1];for(let s=0;s<e.length-1;++s)i+=this.strides[s]*e[s];return this.values[i]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let i=0;i<e.length-1;++i)n+=this.strides[i]*e[i];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let i=0;i<n.length-1;++i)n[i]=Math.floor(e/this.strides[i]),e-=n[i]*this.strides[i];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return fc().makeTensor(this.values,this.shape,this.dtype)}}let fc=null,ug=null;function Cve(t){fc=t}function kve(t){ug=t}class Hs{constructor(e,n,i,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=He(e),this.strides=zt(e),this.dataId=i,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return ug.buffer(this.shape,this.dtype,e)}bufferSync(){return ug.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Sc(this.shape,e,this.dtype==="complex64")}arraySync(){return Sc(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=fc().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(i=>rf(i))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),fc().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=fc().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>rf(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await fc().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),fc().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return ug.print(this,e)}clone(){return this.throwIfDisposed(),ug.clone(this)}toString(e=!1){const n=this.dataSync();return _ve(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),ug.cast(this,e)}variable(e=!0,n,i){return this.throwIfDisposed(),fc().makeVariable(this,e,n,i)}}Object.defineProperty(Hs,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Ve(){return EL("Tensor",()=>Hs)}Ve();class B_ extends Hs{constructor(e,n,i,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=i}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!ri(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);fc().disposeTensor(this),this.dataId=e.dataId,fc().incRef(this,null)}dispose(){fc().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(B_,Symbol.hasInstance,{value:t=>t instanceof Hs&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var EF;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(EF||(EF={}));var QE;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(QE||(QE={}));var JE;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(JE||(JE={}));var eT;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(eT||(eT={}));var tT;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(tT||(tT={}));const Ive={float32:eT,int32:QE,bool:JE,complex64:tT};function Ea(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Ive[t][e]}function v3(t){return Ea(t,"int32")}function _H(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function SH(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ks(t,e){if(t.dtype===e.dtype)return[t,e];const n=Ea(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function CH(t){const e=[];return kH(t,e,new Set),e}function kH(t,e,n){if(t==null)return;if(t instanceof Hs){e.push(t);return}if(!Nve(t))return;const i=t;for(const s in i){const r=i[s];n.has(r)||(n.add(r),kH(r,e,n))}}function Nve(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CN(t){return t.kernelName!=null}class TF{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class c0{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new TF}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const i=e[n];if(await this.initializeBackend(i).success){await this.setBackend(i);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,i=1){return e in this.registryFactory?(Ua(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:i},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:i}=this.initializeBackend(e);if(!(i?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new vve(this.backendInstance),!0}setupRegisteredKernels(){xF(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){xF(e).forEach(i=>{i.disposeFunc!=null&&i.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const i=n.factory();if(i&&!(i instanceof SL)&&typeof i.then=="function"){const s=++this.pendingBackendInitId,r=i.then(o=>s<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,Ua(`Initialization of backend ${e} failed`),Ua(o.stack||o.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}else return this.registry[e]=i,{success:!0,asyncInit:!1}}catch(i){return Ua(`Initialization of backend ${e} failed`),Ua(i.stack||i.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const i=e[n],{success:s,asyncInit:r}=this.initializeBackend(i);if(r||s)return{name:i,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const i=this.state.tensorInfo.get(n),s=i.backend,r=this.readSync(n),o=s.refCount(n);s.disposeData(n,!0),i.backend=e,e.move(n,r,i.shape,i.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let i=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}let s;return this.scopedRun(()=>this.startScope(i),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,i){e();try{const s=i();return n(),s}catch(s){throw n(),s}}nextTensorId(){return c0.nextTensorId++}nextVariableId(){return c0.nextVariableId++}clone(e){const n=ke.runKernel(_b,{x:e}),i={x:e},s=o=>({x:()=>{const a="float32",l={x:o},c={dtype:a};return ke.runKernel(cb,l,c)}}),r=[];return this.addTapeNode(this.state.activeScope.name,i,[n],s,r,{}),n}runKernel(e,n,i){if(this.backendName==null&&this.backend,!(yF(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:i})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,i){const s=this.backend.numDataIds();let r=0;i.forEach(l=>{r+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-r-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,i=[];const s=this.isTapeOn(),r=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=CN(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(CN(e)){const{kernelName:m,inputs:g,attrs:y}=e;this.backendName==null&&this.backend;const v=yF(m,this.backendName);ce(v!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),a=()=>{const b=this.backend.numDataIds();l=v.kernelFunc({inputs:g,attrs:y,backend:this.backend});const w=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,b,w);const S=w.map(k=>k.rank!=null?k:this.makeTensorFromTensorInfo(k));if(s){const k=this.getTensorsForGradient(m,g,S);i=this.saveTensorsForBackwardMode(k)}return S}}else{const{forwardFunc:m}=e,g=y=>{s&&(i=y.map(v=>this.keep(this.clone(v))))};a=()=>{const y=this.backend.numDataIds();l=this.tidy(()=>m(this.backend,g));const v=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,y,v),v}}const{inputs:u,attrs:h}=e,d=CN(e)?null:e.backwardsFunc;let p;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(p=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),n=p.outputs)}),s&&this.addTapeNode(c,u,n,d,i,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(m=>u[m]!=null?u[m].shape:null),outputShapes:n.map(m=>m.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(i=>this.keep(this.clone(i)))}getTensorsForGradient(e,n,i){const s=bF(e);if(s!=null){const r=s.inputsToSave||[],o=s.outputsToSave||[];let a;s.saveAllInputs?(ce(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=r.map(c=>n[c]);const l=i.filter((c,u)=>o[u]);return a.concat(l)}return[]}makeTensor(e,n,i,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");i=i||"float32",s=s||this.backend;let r=e;i==="string"&&tb(e[0])&&(r=e.map(l=>Gd(l)));const o=s.write(r,n,i),a=new Hs(n,i,o,this.nextTensorId());if(this.trackTensor(a,s),i==="string"){const l=this.state.tensorInfo.get(o),c=K0e(r);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,i,s){i=i||"float32";const r={dataId:e,shape:n,dtype:i};return this.makeTensorFromTensorInfo(r,s)}makeTensorFromTensorInfo(e,n){const{dataId:i,shape:s,dtype:r}=e,o=new Hs(s,r,i,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,i,s){i=i||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const r=new B_(e,n,i,this.nextTensorId());if(this.state.registeredVariables[r.name]!=null)throw new Error(`Variable with name ${r.name} was already registered`);return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let i=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(i=e.size*D_(e.dtype)),this.state.numBytes+=i,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:i})),e instanceof B_||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const i=e.size*D_(e.dtype);this.state.numBytes-=i}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,i=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-i;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,i,s,r,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:i,saved:r},l=bF(e);l!=null&&(s=l.gradFunc),s!=null&&(a.gradient=c=>(c=c.map((u,h)=>{if(u==null){const d=i[h],p=qr(d.size,d.dtype);return this.makeTensor(p,d.shape,d.dtype)}return u}),s(c.length>1?c:c[0],r,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=CH(e),i=new Set(n.map(r=>r.id));for(let r=0;r<this.state.activeScope.track.length;r++){const o=this.state.activeScope.track[r];!o.kept&&!i.has(o.id)&&o.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(r=>{!r.kept&&r.scopeId===s.id&&this.track(r)})}gradients(e,n,i,s=!1){if(ce(n.length>0,()=>"gradients() received an empty list of xs."),i!=null&&i.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${i.dtype}'`);const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));ce(r instanceof Hs,()=>"The result y returned by f() must be a tensor.");const o=xve(this.state.activeTape,n,r);if(!s&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[r.id]=i??Eve(r.shape),wve(a,o,c=>this.tidy(c),Tve);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:r,grads:l}})}customGrad(e){return ce(HE(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{ce(n.every(a=>a instanceof Hs),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let i;const s={};n.forEach((a,l)=>{s[l]=a});const r=(a,l)=>(i=e(...n,l),ce(i.value instanceof Hs,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),ce(HE(i.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),i.value),o=(a,l)=>{const c=i.gradFunc(a,l),u=Array.isArray(c)?c:[c];ce(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),ce(u.every(d=>d instanceof Hs),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const h={};return u.forEach((d,p)=>{h[p]=()=>d}),h};return this.runKernelFunc({forwardFunc:r,backwardsFunc:o,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=zo(),i=await this.backend.time(e);return i.wallMs=zo()-n,i}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new TF;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}c0.nextTensorId=0;c0.nextVariableId=0;function Eve(t){const e=IL(He(t),"float32");return ke.makeTensor(e,t,"float32")}function IH(){const t=VU();if(t._tfengine==null){const e=new Z0e(t);t._tfengine=new c0(e)}return tve(t._tfengine.ENV),Cve(()=>t._tfengine),t._tfengine}const ke=IH();function Tve(t,e){const n={a:t,b:e};return ke.runKernel(O0,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ave(){return typeof navigator<"u"&&navigator!=null}function NH(t){if(t||Ave()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function EH(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zo=ze();Zo.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Zo.registerFlag("IS_BROWSER",()=>EH());Zo.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Zo.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Zo.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Zo.registerFlag("PROD",()=>!1);Zo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Zo.getBool("DEBUG"));Zo.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Zo.registerFlag("IS_TEST",()=>!1);Zo.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Zo.getBool("DEBUG"));Zo.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Zo.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Zo.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yk(t,e){let n=t;if(Ol(t))return e==="string"?[]:[t.length];if(_H(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(SH(t))return[t.buffer.size/(e==null?4:D_(e))];if(!Array.isArray(t))return[];const i=[];for(;Array.isArray(n)||Ol(n)&&e!=="string";)i.push(n.length),n=n[0];return Array.isArray(t)&&ze().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&TH(t,i,[]),i}function TH(t,e,n){if(n=n||[],!Array.isArray(t)&&!Ol(t)){ce(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}ce(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),ce(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const i=e.slice(1);for(let s=0;s<t.length;++s)TH(t[s],i,n.concat(s))}function AF(t,e,n,i){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${i}' must be ${t} tensor, but got ${e} tensor`)}}function ve(t,e,n,i="numeric"){if(t instanceof Ve())return AF(i,t.dtype,e,n),t;let s=D0(t);if(s!=="string"&&["bool","int32","float32"].indexOf(i)>=0&&(s=i),AF(i,s,e,n),t==null||!Ol(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const r=yk(t,s);!Ol(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?bm(t,s):em(t,[],!0);return ke.makeTensor(a,r,s)}function AH(t,e,n,i="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((r,o)=>ve(r,`${e}[${o}]`,n,i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rve="__op";function Re(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const i=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Rve;const s=(...r)=>{ke.startScope(n);try{const o=i(...r);return NL(o)&&console.error("Cannot return a Promise inside of tidy."),ke.endScope(o),o}catch(o){throw ke.endScope(null),o}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lve(t,e){const n=ve(t,"real","complex"),i=ve(e,"imag","complex");kL(n.shape,i.shape,`real and imag shapes, ${n.shape} and ${i.shape}, must match in call to tf.complex().`);const s={real:n,imag:i};return ke.runKernel(OL,s)}const u0=Re({complex_:Lve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bk(t,e,n,i){if(i==null)i=D0(t);else if(i==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(SH(t)||_H(t)){if(i!=="float32"&&i!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${i}.`);return ke.backend.createTensorFromGPUData(t,e||n,i)}if(!Ol(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Dh(e);const s=He(e),r=He(n);ce(s===r,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${r}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==He(e.slice(o)):!0;ce(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Ol(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=i!=="string"?bm(t,i):em(t,[],!0),ke.makeTensor(t,e,i)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RH(t,e,n){const i=yk(t,n);return bk(t,e,i,n)}class M0{static join(e){return new M0(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(i=>Ol(i)?i.buffer:i),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let i=0;i<e.length;i++){const s=e[i];i!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const r=n+s.byteLength;this.shards.push({buffer:s,start:n,end:r}),n=r}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const i=this.findShardForByte(e);if(i===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,r=new ArrayBuffer(s),o=new Uint8Array(r);let a=0;for(let l=i;l<this.shards.length;l++){const c=this.shards[l],h=e+a-c.start,d=a,m=Math.min(n,c.end)-c.start,g=new Uint8Array(c.buffer,h,m-h);if(o.set(g,d),a+=g.length,n<c.end)break}return r}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const i=Pve(this.shards,n);return i===-1?-1:(this.previousShardIndex=i,this.previousShardIndex)}}function Pve(t,e){let n=0,i=t.length;for(;n<=i;){const s=Math.floor((i-n)/2)+n,r=e(t[s]);if(r===0)return s;r<0?i=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iu(){return ke}function RF(){return ke.memory()}function $e(t,e){return ke.tidy(t,e)}function An(t){CH(t).forEach(n=>n.dispose())}function bu(t){return ke.keep(t)}function LH(t,e,n=1){return ke.registerBackend(t,e,n)}function Dve(){return ke.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LF=4;async function PF(t,e){const n=[],i=[],s=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<s.length;++o){const a=s[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async h=>{const d=await l.bytes(),p=d.reduce((y,v)=>y+v.length,0)+LF*d.length,m=new Uint8Array(p);let g=0;for(let y=0;y<d.length;y++){const v=d[y],b=new Uint8Array(new Uint32Array([v.length]).buffer);m.set(b,g),g+=LF,m.set(v,g),g+=v.length}h(m)});i.push(u)}else i.push(l.data());e!=null&&(c.group=e),n.push(c)}const r=await Promise.all(i);return{data:$ve(r),specs:n}}function $ve(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(r=>{if(e+=r.byteLength,n.push(r.byteLength===r.buffer.byteLength?r:new r.constructor(r)),!(r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${r.constructor.name}`)});const i=new Uint8Array(e);let s=0;return n.forEach(r=>{i.set(new Uint8Array(r.buffer),s),s+=r.byteLength}),i.buffer}const y3=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function DF(t){return y3?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Ove(t){if(y3)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let i=0,s=e.length;i<s;i++)n+=String.fromCharCode(e[i]);return btoa(n)}function Mve(t){if(y3){const i=Buffer.from(t,"base64");return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let i=0;i<e.length;++i)n.set([e.charCodeAt(i)],i);return n.buffer}function Fve(t){return M0.join(t)}function PH(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:DF(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:DF(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new M0(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class po{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return po.instance==null&&(po.instance=new po),po.instance}static registerSaveRouter(e){po.getInstance().saveRouters.push(e)}static registerLoadRouter(e){po.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return po.getHandlers(e,"save")}static getLoadHandlers(e,n){return po.getHandlers(e,"load",n)}static getHandlers(e,n,i){const s=[];return(n==="load"?po.getInstance().loadRouters:po.getInstance().saveRouters).forEach(o=>{const a=o(e,i);a!==null&&s.push(a)}),s}}const Bve=t=>po.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nT="tensorflowjs",iT=1,Ip="models_store",Id="model_info_store";function DH(){if(!ze().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function sT(t){const e=t.result;e.createObjectStore(Ip,{keyPath:"modelPath"}),e.createObjectStore(Id,{keyPath:"modelPath"})}class tm{constructor(e){if(this.indexedDB=DH(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((i,s)=>{const r=this.indexedDB.open(nT,iT);r.onupgradeneeded=()=>sT(r),r.onsuccess=()=>{const o=r.result;if(n==null){const a=o.transaction(Ip,"readonly"),c=a.objectStore(Ip).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return o.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));i(c.result.modelArtifacts)},c.onerror=u=>(o.close(),s(c.error)),a.oncomplete=()=>o.close()}else{n.weightData=M0.join(n.weightData);const a=PH(n),l=o.transaction(Id,"readwrite");let c=l.objectStore(Id),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(d){return s(d)}let h;u.onsuccess=()=>{h=o.transaction(Ip,"readwrite");const d=h.objectStore(Ip);let p;try{p=d.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(m){return s(m)}p.onsuccess=()=>i({modelArtifactsInfo:a}),p.onerror=m=>{c=l.objectStore(Id);const g=c.delete(this.modelPath);g.onsuccess=()=>(o.close(),s(p.error)),g.onerror=y=>(o.close(),s(p.error))}},u.onerror=d=>(o.close(),s(u.error)),l.oncomplete=()=>{h==null?o.close():h.oncomplete=()=>o.close()}}},r.onerror=o=>s(r.error)})}}tm.URL_SCHEME="indexeddb://";const $H=t=>ze().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(tm.URL_SCHEME)?zve(t.slice(tm.URL_SCHEME.length)):null;po.registerSaveRouter($H);po.registerLoadRouter($H);function zve(t){return new tm(t)}function jve(t){return t.startsWith(tm.URL_SCHEME)?t.slice(tm.URL_SCHEME.length):t}class Vve{constructor(){this.indexedDB=DH()}async listModels(){return new Promise((e,n)=>{const i=this.indexedDB.open(nT,iT);i.onupgradeneeded=()=>sT(i),i.onsuccess=()=>{const s=i.result,r=s.transaction(Id,"readonly"),a=r.objectStore(Id).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(s.close(),n(a.error)),r.oncomplete=()=>s.close()},i.onerror=s=>n(i.error)})}async removeModel(e){return e=jve(e),new Promise((n,i)=>{const s=this.indexedDB.open(nT,iT);s.onupgradeneeded=()=>sT(s),s.onsuccess=()=>{const r=s.result,o=r.transaction(Id,"readwrite"),a=o.objectStore(Id),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return r.close(),i(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),h=()=>{c=r.transaction(Ip,"readwrite");const p=c.objectStore(Ip).delete(e);p.onsuccess=()=>n(l.result.modelArtifactsInfo),p.onerror=m=>i(l.error)};u.onsuccess=h,u.onerror=d=>(h(),r.close(),i(l.error))}},l.onerror=u=>(r.close(),i(l.error)),o.oncomplete=()=>{c==null?r.close():c.oncomplete=()=>r.close()}},s.onerror=r=>i(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eh="/",hg="tensorflowjs_models",OH="info",Wve="model_topology",Uve="weight_specs",Hve="weight_data",Gve="model_metadata";function MH(t){return{info:[hg,t,OH].join(eh),topology:[hg,t,Wve].join(eh),weightSpecs:[hg,t,Uve].join(eh),weightData:[hg,t,Hve].join(eh),modelMetadata:[hg,t,Gve].join(eh)}}function FH(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function qve(t){const e=t.split(eh);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(eh)}function Kve(t){return t.startsWith(nm.URL_SCHEME)?t.slice(nm.URL_SCHEME.length):t}class nm{constructor(e){if(!ze().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=MH(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),i=JSON.stringify(e.weightSpecs),s=PH(e),r=M0.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,i),this.LS.setItem(this.keys.weightData,Ove(r));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:s}}catch{throw FH(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},i=JSON.parse(this.LS.getItem(this.keys.topology));if(i==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=i;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const r=this.LS.getItem(this.keys.modelMetadata);if(r!=null){const a=JSON.parse(r);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Mve(o),n}}nm.URL_SCHEME="localstorage://";const BH=t=>ze().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(nm.URL_SCHEME)?Xve(t.slice(nm.URL_SCHEME.length)):null;po.registerSaveRouter(BH);po.registerLoadRouter(BH);function Xve(t){return new nm(t)}class Yve{constructor(){ce(ze().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),ce(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=hg+eh,i=eh+OH;for(let s=0;s<this.LS.length;++s){const r=this.LS.key(s);if(r.startsWith(n)&&r.endsWith(i)){const o=qve(r);e[o]=JSON.parse(this.LS.getItem(r))}}return e}async removeModel(e){e=Kve(e);const n=MH(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const i=JSON.parse(this.LS.getItem(n.info));return FH(n),i}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $F="://";class su{constructor(){this.managers={}}static getInstance(){return su.instance==null&&(su.instance=new su),su.instance}static registerManager(e,n){ce(e!=null,()=>"scheme must not be undefined or null."),e.endsWith($F)&&(e=e.slice(0,e.indexOf($F))),ce(e.length>0,()=>"scheme must not be an empty string.");const i=su.getInstance();ce(i.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),i.managers[e]=n}static getManager(e){const n=su.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(su.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zve{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!ze().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",i=>{if(i.source===window&&i.data.name===this.messageName){i.stopPropagation();const s=this.functionRefs[i.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return dH(e)}}if(ze().get("IS_BROWSER")){ze().setPlatform("browser",new Zve);try{su.registerManager(nm.URL_SCHEME,new Yve)}catch{}try{su.registerManager(tm.URL_SCHEME,new Vve)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qve={importFetch:()=>require("node-fetch")};let kN;class Jve{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return ze().global.fetch!=null?ze().global.fetch(e,n):(kN==null&&(kN=Qve.importFetch()),kN(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}ze().get("IS_NODE")&&!ze().get("IS_BROWSER")&&ze().setPlatform("node",new Jve);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kn(t,e="float32",n){return e=e||"float32",Dh(t),new Ar(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e1e(t,e){const n=ve(t,"x","cast");if(!q0e(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const i={x:n},s={dtype:e};return ke.runKernel(cb,i,s)}const It=Re({cast_:e1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t1e(t){const n={x:ve(t,"x","clone","string_or_numeric")};return ke.runKernel(_b,n)}const Dp=Re({clone_:t1e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n1e(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */IH();const i1e={buffer:kn,cast:It,clone:Dp,print:n1e};kve(i1e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s1e(t,e){let n=ve(t,"a","add"),i=ve(e,"b","add");[n,i]=ks(n,i);const s={a:n,b:i};return ke.runKernel(O0,s)}const rt=Re({add_:s1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r1e(t,e){let n=ve(t,"a","floorDiv"),i=ve(e,"b","floorDiv");[n,i]=ks(n,i);const s={a:n,b:i};return ke.runKernel(xb,s)}const zH=Re({floorDiv_:r1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o1e(t,e){let n=ve(t,"a","div"),i=ve(e,"b","div");if([n,i]=ks(n,i),n.dtype==="int32"&&i.dtype==="int32")return zH(n,i);const s={a:n,b:i},r={};return ke.runKernel(pb,s,r)}const Ut=Re({div_:o1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1e(t,e){let n=ve(t,"a","mul"),i=ve(e,"b","mul");[n,i]=ks(n,i);const s={a:n,b:i};return ke.runKernel(Rb,s)}const Ce=Re({mul_:a1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l1e(t){const e=ve(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return ke.runKernel(CC,n)}else{const n={x:e};return ke.runKernel(vC,n)}}const mo=Re({abs_:l1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c1e(t){const n={x:ve(t,"x","acos")};return ke.runKernel(nb,n)}const u1e=Re({acos_:c1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h1e(t){const n={x:ve(t,"x","acosh")};return ke.runKernel(ib,n)}const d1e=Re({acosh_:h1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f1e(t,e=null,n=!1){const s={x:ve(t,"x","all","bool")},r={axis:e,keepDims:n};return ke.runKernel(AL,s,r)}const jH=Re({all_:f1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p1e(t,e=null,n=!1){const s={x:ve(t,"x","any","bool")},r={axis:e,keepDims:n};return ke.runKernel(RL,s,r)}const rT=Re({any_:p1e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m1e(t,e=0){const i={x:ve(t,"x","argMax")},s={axis:e};return ke.runKernel(yC,i,s)}const by=Re({argMax_:m1e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g1e(t,e=0){const i={x:ve(t,"x","argMin")},s={axis:e};return ke.runKernel(bC,i,s)}const v1e=Re({argMin_:g1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y1e(t){const n={x:ve(t,"x","asin")};return ke.runKernel(sb,n)}const b1e=Re({asin_:y1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x1e(t){const n={x:ve(t,"x","asinh")};return ke.runKernel(rb,n)}const w1e=Re({asinh_:x1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _1e(t){const n={x:ve(t,"x","atan")};return ke.runKernel(ob,n)}const S1e=Re({atan_:_1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C1e(t,e){let n=ve(t,"a","atan2"),i=ve(e,"b","atan2");[n,i]=ks(n,i);const s={a:n,b:i};return ke.runKernel(lb,s)}const k1e=Re({atan2_:C1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I1e(t){const n={x:ve(t,"x","atanh")};return ke.runKernel(ab,n)}const N1e=Re({atanh_:I1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zb(t,e,n,i,s="NHWC",r){const o=t[3],a=[...e,o],l=Oh(s);return Lr(t,a,n,r,i,null,null,l)}function Fl(t,e,n,i,s,r,o="channelsLast"){const[a,l]=xy(e);let c;if(o==="channelsLast")c=[a,l,t[3],t[3]];else if(o==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Lr(t,c,n,i,s,r,!1,o)}function $h(t,e,n,i,s,r,o="NDHWC"){const[a,l,c]=oT(e);let u,h;if(o==="NDHWC")h="channelsLast",u=[a,l,c,t[4],t[4]];else if(o==="NCDHW")h="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Sf(t,u,n,i,s,!1,h,r)}function Lr(t,e,n,i,s,r,o=!1,a="channelsLast"){let[l,c,u,h]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,h]=t;else if(a==="channelsFirst")[l,h,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[d,p,,m]=e,[g,y]=xy(n),[v,b]=xy(i),w=zg(d,v),S=zg(p,b),{padInfo:k,outHeight:I,outWidth:T}=A1e(s,c,u,g,y,w,S,r,a),E=o?m*h:m;let O;return a==="channelsFirst"?O=[l,E,I,T]:a==="channelsLast"&&(O=[l,I,T,E]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:h,outHeight:I,outWidth:T,outChannels:E,padInfo:k,strideHeight:g,strideWidth:y,filterHeight:d,filterWidth:p,effectiveFilterHeight:w,effectiveFilterWidth:S,dilationHeight:v,dilationWidth:b,inShape:t,outShape:O,filterShape:e}}function Sf(t,e,n,i,s,r=!1,o="channelsLast",a){let[l,c,u,h,d]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,h,d]=t;else if(o==="channelsFirst")[l,d,c,u,h]=t;else throw new Error(`Unknown dataFormat ${o}`);const[p,m,g,,y]=e,[v,b,w]=oT(n),[S,k,I]=oT(i),T=zg(p,S),E=zg(m,k),O=zg(g,I),{padInfo:F,outDepth:R,outHeight:$,outWidth:U}=R1e(s,c,u,h,v,b,w,T,E,O,a),W=r?y*d:y;let te;return o==="channelsFirst"?te=[l,W,R,$,U]:o==="channelsLast"&&(te=[l,R,$,U,W]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:h,inChannels:d,outDepth:R,outHeight:$,outWidth:U,outChannels:W,padInfo:F,strideDepth:v,strideHeight:b,strideWidth:w,filterDepth:p,filterHeight:m,filterWidth:g,effectiveFilterDepth:T,effectiveFilterHeight:E,effectiveFilterWidth:O,dilationDepth:S,dilationHeight:k,dilationWidth:I,inShape:t,outShape:te,filterShape:e}}function E1e(t,e,n,i,s){i==null&&(i=b3(t,e,n));const r=t[0],o=t[1],a=wy((r-e+2*i)/n+1,s),l=wy((o-e+2*i)/n+1,s);return[a,l]}function T1e(t,e,n,i,s,r){s==null&&(s=b3(t,e[0],i[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(o[a]=wy((t[a]-e[a]+2*s)/i[a]+1,r));return o}function b3(t,e,n,i=1){const s=zg(e,i);return Math.floor((t[0]*(n-1)-n+s)/2)}function xy(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function oT(t){return typeof t=="number"?[t,t,t]:t}function zg(t,e){return e<=1?t:t+(t-1)*(e-1)}function A1e(t,e,n,i,s,r,o,a,l){let c,u,h;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const p=E1e([e,n],r,i,t,a);u=p[0],h=p[1]}else if(t==="same"){u=Math.ceil(e/i),h=Math.ceil(n/s);const d=Math.max(0,(u-1)*i+r-e),p=Math.max(0,(h-1)*s+o-n),m=Math.floor(d/2),g=d-m,y=Math.floor(p/2),v=p-y;c={top:m,bottom:g,left:y,right:v,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-r+1)/i),h=Math.ceil((n-o+1)/s);else if(typeof t=="object"){const d=l==="channelsLast"?t[1][0]:t[2][0],p=l==="channelsLast"?t[1][1]:t[2][1],m=l==="channelsLast"?t[2][0]:t[3][0],g=l==="channelsLast"?t[2][1]:t[3][1];c={top:d,bottom:p,left:m,right:g,type:d===0&&p===0&&m===0&&g===0?"VALID":"EXPLICIT"},u=wy((e-r+d+p)/i+1,a),h=wy((n-o+m+g)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:h}}function R1e(t,e,n,i,s,r,o,a,l,c,u){let h,d,p,m;if(t==="valid"&&(t=0),typeof t=="number"){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=T1e([e,n,i,1],[a,l,c],1,[s,r,o],t,u);d=y[0],p=y[1],m=y[2]}else if(t==="same"){d=Math.ceil(e/s),p=Math.ceil(n/r),m=Math.ceil(i/o);const g=(d-1)*s+a-e,y=(p-1)*r+l-n,v=(m-1)*o+c-i,b=Math.floor(g/2),w=g-b,S=Math.floor(y/2),k=y-S,I=Math.floor(v/2),T=v-I;h={top:S,bottom:k,left:I,right:T,front:b,back:w,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:h,outDepth:d,outHeight:p,outWidth:m}}function wy(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function im(t){const[e,n,i]=xy(t);return e===1&&n===1&&i===1}function Xr(t,e){return im(t)||im(e)}function sm(t){return xy(t).every(e=>e>0)}function Oh(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function ta(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")ce(a0(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(i=>{i.forEach(s=>{ce(a0(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L1e(t,e){const i={x:ve(t,"x","reshape","string_or_numeric")},s={shape:e};return ke.runKernel(sk,i,s)}const Ae=Re({reshape_:L1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P1e(t,e,n,i,s){const r=ve(t,"x","avgPool","float32"),o=1;ce(Xr(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=r,l=!1;r.rank===3&&(l=!0,a=Ae(r,[1,r.shape[0],r.shape[1],r.shape[2]])),ce(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),ta("avgPool",i,s);const c={x:a},u={filterSize:e,strides:n,pad:i,dimRoundingMode:s};let h=ke.runKernel(xC,c,u);return h=It(h,r.dtype),l?Ae(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const x3=Re({avgPool_:P1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D1e(t,e,n,i,s,r="NDHWC"){const o=ve(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=Ae(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ce(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),ce(r==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),ce(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),ta("avgPool3d",i,s);const c={x:a},u={filterSize:e,strides:n,pad:i,dimRoundingMode:s,dataFormat:r};let h=ke.runKernel(wC,c,u);return h=It(h,a.dtype),l?Ae(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const $1e=Re({avgPool3d_:D1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O1e(t,e=0){ce(t.length>=1,()=>"Pass at least one tensor to concat");const n=AH(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(r=>{if(r.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${r.dtype}. `)}),n.length===1)return Dp(n[0]);const i=n,s={axis:e};return ke.runKernel(kC,i,s)}const Yo=Re({concat_:O1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M1e(t,e,n=!1,i=!1){let s=ve(t,"a","matMul"),r=ve(e,"b","matMul");[s,r]=ks(s,r);const o={a:s,b:r},a={transposeA:n,transposeB:i};return ke.runKernel(_C,o,a)}const ni=Re({matMul_:M1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F1e(t){const n={x:ve(t,"x","sigmoid","float32")};return ke.runKernel(Vb,n)}const F0=Re({sigmoid_:F1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B1e(t,e,n){const i=ve(t,"x","slice","string_or_numeric");if(i.rank===0)throw new Error("Slicing scalar is not possible");const s={x:i},r={begin:e,size:n};return ke.runKernel(ck,s,r)}const Di=Re({slice_:B1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z1e(t){const n={x:ve(t,"x","tanh","float32")};return ke.runKernel(Kb,n)}const xk=Re({tanh_:z1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j1e(t,e,n){const i=ve(t,"x","batchToSpaceND"),s=e.reduce((a,l)=>a*l);ce(i.rank>=1+e.length,()=>`input rank is ${i.rank} but should be > than blockShape.length ${e.length}`),ce(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),ce(i.shape[0]%s===0,()=>`input tensor batch is ${i.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const r={x:i},o={blockShape:e,crops:n};return ke.runKernel(SC,r,o)}const w3=Re({batchToSpaceND_:j1e});function V1e(t){let e;return t.rank===0||t.rank===1?e=Ae(t,[1,1,1,t.size]):t.rank===2?e=Ae(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=Ae(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W1e(t,e,n,i,s,r){r==null&&(r=.001);const o=ve(t,"x","batchNorm"),a=ve(e,"mean","batchNorm"),l=ve(n,"variance","batchNorm");let c;s!=null&&(c=ve(s,"scale","batchNorm"));let u;i!=null&&(u=ve(i,"offset","batchNorm")),ce(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ce(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ce(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:V1e(o),scale:c,offset:u,mean:a,variance:l},p={varianceEpsilon:r},m=ke.runKernel(DC,d,p);return Ae(m,o.shape)}const wk=Re({batchNorm_:W1e});function U1e(t,e,n,i,s,r){const o=ve(t,"x","batchNorm"),a=ve(e,"mean","batchNorm"),l=ve(n,"variance","batchNorm");let c;s!=null&&(c=ve(s,"scale","batchNorm"));let u;return i!=null&&(u=ve(i,"offset","batchNorm")),ce(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),ce(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),ce(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&ce(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&ce(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),wk(o,a,l,u,c,r)}const H1e=Re({batchNorm2d_:U1e});function G1e(t,e,n,i,s,r){const o=ve(t,"x","batchNorm"),a=ve(e,"mean","batchNorm"),l=ve(n,"variance","batchNorm");let c;s!=null&&(c=ve(s,"scale","batchNorm"));let u;return i!=null&&(u=ve(i,"offset","batchNorm")),ce(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),ce(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),ce(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&ce(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&ce(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),wk(o,a,l,u,c,r)}const q1e=Re({batchNorm3d_:G1e});function K1e(t,e,n,i,s,r){const o=ve(t,"x","batchNorm"),a=ve(e,"mean","batchNorm"),l=ve(n,"variance","batchNorm");let c;s!=null&&(c=ve(s,"scale","batchNorm"));let u;return i!=null&&(u=ve(i,"offset","batchNorm")),ce(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),ce(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),ce(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&ce(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&ce(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),wk(o,a,l,u,c,r)}const X1e=Re({batchNorm4d_:K1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y1e(t,e,n){const i=ve(t,"x","bincount"),s=ve(e,"weights","bincount");ce(i.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${i.dtype}`),ce(n>=0,()=>`size must be non-negative, but got ${n}.`),ce(s.size===i.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${i.shape}, weights shape: ${s.shape}.`);const r={x:i,weights:s},o={size:n};return ke.runKernel(DL,r,o)}const Z1e=Re({bincount_:Y1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q1e(t,e){let n=ve(t,"broadcastTo","x");const i=n.shape;if(Dh(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=Ae(n,c)}const s=n.shape,r=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])r[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${e}].`);if(r.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return Dp(n);const a={x:n},l={reps:r};return ke.runKernel(Xb,a,l)}const C1=Re({broadcastTo_:Q1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J1e(t){const n={x:ve(t,"x","ceil","float32")};return ke.runKernel(ub,n)}const eye=Re({ceil_:J1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _k(t,e,n){Dh(t),n=n||D0(e);const i={shape:t,value:e,dtype:n};return ke.runKernel(XL,{},i)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tye(t,e,n){const i=ve(t,"x","clipByValue");if(ce(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return _k(i.shape,e,i.dtype);const s={x:i},r={clipValueMin:e,clipValueMax:n};return ke.runKernel(hb,s,r)}const Ja=Re({clipByValue_:tye});function nye(t){return Yo(t,0)}const iye=Re({concat1d_:nye});function sye(t,e){return Yo(t,e)}const rye=Re({concat2d_:sye});function oye(t,e){return Yo(t,e)}const aye=Re({concat3d_:oye});function lye(t,e){return Yo(t,e)}const cye=Re({concat4d_:lye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uye(t,e,n,i,s="NHWC",r=[1,1],o){const a=ve(t,"x","conv2d","float32"),l=ve(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=Ae(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ce(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),ce(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),ta("conv2d",i,o);const h=s==="NHWC"?c.shape[3]:c.shape[1];ce(h===l.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`),ce(Xr(n,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`),ce(sm(r),()=>"Error in conv2D: Dilated rates should be larger than 0."),ce(sm(n),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:c,filter:l},p={strides:n,pad:i,dataFormat:s,dilations:r,dimRoundingMode:o},m=ke.runKernel(IC,d,p);return u?Ae(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const rm=Re({conv2d_:uye});function hye(t,e,n,i,s="NWC",r=1,o){const a=ve(t,"x","conv1d"),l=ve(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=Ae(a,[1,a.shape[0],a.shape[1]])),ce(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),ce(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),ta("conv1d",i,o),ce(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),ce(Xr(n,r),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${r}'`),ce(sm(r),()=>"Error in conv1D: Dilated rates should be larger than 0."),ce(sm(n),()=>"Error in conv1D: Stride should be larger than 0."),ce(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const h=Ae(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=Ae(c,[c.shape[0],1,c.shape[1],c.shape[2]]),y=rm(d,h,[1,n],i,"NHWC",[1,r],o);return u?Ae(y,[y.shape[2],y.shape[3]]):Ae(y,[y.shape[0],y.shape[2],y.shape[3]])}const VH=Re({conv1d_:hye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dye(t,e,n,i,s,r="NHWC",o){ce(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=Ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),ce(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),ce(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),ce(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=r==="NHWC"?a[3]:a[1],h=r==="NHWC"?l.shape[3]:l.shape[1];ce(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),ce(h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`),ta("conv2dDerInput",s,o);const d={dy:l,filter:n},p={strides:i,pad:s,dataFormat:r,dimRoundingMode:o,inputShape:a},m=ke.runKernel(NC,d,p);return c?Ae(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const _3=Re({conv2DBackpropInput_:dye});function fye(t,e,n,i,s,r){const o=ve(t,"x","conv2dTranspose"),a=ve(e,"filter","conv2dTranspose");return _3(n,o,a,i,s,"NHWC",r)}const WH=Re({conv2dTranspose_:fye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pye(t,e,n,i,s="NDHWC",r=[1,1,1]){const o=ve(t,"x","conv3d"),a=ve(e,"filter","conv3d");let l=o,c=!1;o.rank===4&&(c=!0,l=Ae(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ce(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),ce(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),ce(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),ce(Xr(n,r),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`),ce(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),ce(sm(r),()=>"Error in conv3D: Dilated rates should be larger than 0."),ce(sm(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},h={strides:n,pad:i,dataFormat:s,dilations:r},d=ke.runKernel(EC,u,h);return c?Ae(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const mye=Re({conv3d_:pye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gye(t,e,n,i,s){ce(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let r=t,o=e,a=!1;e.rank===4&&(a=!0,o=Ae(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),r=[1,t[0],t[1],t[2],t[3]]);const l=r[4],c=o.shape[4];ce(r.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${r.length}.`),ce(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),ce(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),ce(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),ce(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:o,filter:n},h={pad:s,strides:i,inputShape:r},d=ke.runKernel(BL,u,h);return a?Ae(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const UH=Re({conv3DBackpropInput_:gye});function vye(t,e,n,i,s){const r=ve(t,"x","conv3dTranspose"),o=ve(e,"filter","conv3dTranspose");return UH(n,r,o,i,s)}const yye=Re({conv3dTranspose_:vye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bye(t){const n={x:ve(t,"x","cos","float32")};return ke.runKernel(db,n)}const S3=Re({cos_:bye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xye(t){const n={x:ve(t,"x","cosh","float32")};return ke.runKernel(fb,n)}const HH=Re({cosh_:xye});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wye(t,e=0,n=!1,i=!1){const r={x:ve(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:i};return ke.runKernel(zL,r,o)}const aT=Re({cumprod_:wye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ye(t,e=0,n=!1,i=!1){const r={x:ve(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:i};return ke.runKernel(TC,r,o)}const GH=Re({cumsum_:_ye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sye(t,e,n,i=!1){const s=ve(t,"x","denseBincount"),r=ve(e,"weights","denseBincount");ce(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),ce(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),ce(n>=0,()=>`size must be non-negative, but got ${n}.`),ce(r.size===s.size||r.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${r.shape}.`);const o={x:s,weights:r},a={size:n,binaryOutput:i};return ke.runKernel(VL,o,a)}const OF=Re({denseBincount_:Sye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cye(t,e,n="NHWC"){const i=ve(t,"x","depthToSpace","float32"),s=n==="NHWC"?i.shape[1]:i.shape[2],r=n==="NHWC"?i.shape[2]:i.shape[3],o=n==="NHWC"?i.shape[3]:i.shape[1];ce(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),ce(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${i.shape}`),ce(r*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${e} for depthToSpace with input shape
        ${i.shape}`),ce(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${i.shape}`);const a={x:i},l={blockSize:e,dataFormat:n};return ke.runKernel(WL,a,l)}const kye=Re({depthToSpace_:Cye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iye(t,e,n,i,s="NHWC",r=[1,1],o){const a=ve(t,"x","depthwiseConv2d","float32"),l=ve(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=Ae(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ce(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),ce(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const h=s==="NHWC"?c.shape[3]:c.shape[1];ce(h===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${l.shape[2]}.`),ta("depthwiseConv2d",i,o);const d={x:c,filter:l},p={strides:n,pad:i,dataFormat:s,dilations:r,dimRoundingMode:o},m=ke.runKernel(AC,d,p);return u?Ae(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const C3=Re({depthwiseConv2d_:Iye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nye(t,e,n,i,s=[1,1],r="NHWC"){const o=ve(t,"x","dilation2d"),a=ve(e,"filter","dilation2d");ce(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),ce(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),ce(r==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${r}`);let l=o,c=!1;o.rank===3&&(l=Ae(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),ce(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},h={strides:n,pad:i,dilations:s},d=ke.runKernel(RC,u,h);return c?Ae(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Eye=Re({dilation2d_:Nye});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h0(t,e){const n=t.length,i=[];for(let s=0;s<n;s++){const r=n-1-s,o=t[r]||1;(e[e.length-1-s]||1)>1&&o===1&&i.unshift(r)}return i}function Zs(t,e){const n=[];for(let i=0;i<e.length;i++){const s=t[t.length-i-1],r=e.length-i-1,o=e[r];(s==null||s===1&&o>1)&&n.unshift(r)}return n}function mn(t,e){const n=Math.max(t.length,e.length),i=new Array(n);for(let s=0;s<n;s++){let r=t[t.length-s-1];r==null&&(r=1);let o=e[e.length-s-1];if(o==null&&(o=1),r===1)i[n-s-1]=o;else if(o===1)i[n-s-1]=r;else if(r!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else i[n-s-1]=r}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tye(t,e){let n=ve(t,"a","equal","string_or_numeric"),i=ve(e,"b","equal","string_or_numeric");[n,i]=ks(n,i),mn(n.shape,i.shape);const s={a:n,b:i};return ke.runKernel(LC,s)}const Cu=Re({equal_:Tye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aye(t,e,n){const i=ve(e,"a","where"),s=ve(n,"b","where"),r=ve(t,"condition","where","bool"),o=mn(mn(r.shape,i.shape),s.shape),a=C1(r,o),l=C1(i,o),c=C1(s,o),u={condition:a,t:l,e:c};return ke.runKernel(lk,u)}const wo=Re({where_:Aye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rye(t){const n={x:ve(t,"x","zerosLike")};return ke.runKernel(gk,n)}const Hn=Re({zerosLike_:Rye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lye(t,e){let n=ve(t,"a","div"),i=ve(e,"b","div");[n,i]=ks(n,i);const s=Ut(n,i),r=Hn(s),o=Cu(i,r);return wo(o,r,s)}const Pye=Re({divNoNan_:Lye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dye(t,e){const n=ve(t,"t1","dot"),i=ve(e,"t2","dot");ce((n.rank===1||n.rank===2)&&(i.rank===1||i.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${i.rank}.`);const s=n.rank===1?n.size:n.shape[1],r=i.rank===1?i.size:i.shape[0];if(ce(s===r,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${r}.`),n.rank===1&&i.rank===1){const o=Ae(n,[1,-1]),a=Ae(i,[-1,1]),l=ni(o,a);return Ae(l,[])}else if(n.rank===1&&i.rank===2){const o=Ae(n,[1,-1]),a=Ae(i,[i.shape[0],i.shape[1]]),l=ni(o,a);return Ae(l,[l.size])}else if(n.rank===2&&i.rank===1){const o=Ae(i,[-1,1]),a=ni(n,o);return Ae(a,[a.size])}else{const o=Ae(i,[i.shape[0],i.shape[1]]);return ni(n,o)}}const $ye=Re({dot_:Dye});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oye(t,...e){const n=e.map((s,r)=>ve(s,`tensors${r}`,"einsum")),i={equation:t};return ke.runKernel(GL,n,i)}const Rv=Re({einsum_:Oye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mye(t){const n={x:ve(t,"x","elu","float32")};return ke.runKernel(mb,n)}const Sk=Re({elu_:Mye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fye(t){let e=ve(t,"x","erf");ce(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=It(e,"float32"));const n={x:e};return ke.runKernel(gb,n)}const qH=Re({erf_:Fye});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k3(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function KH(t,e,n){const i=t.length+e.length,s=[];let r=0,o=0;for(let a=0;a<i;a++)n.indexOf(a)===-1?s.push(t[r++]):s.push(e[o++]);return s}function mr(t,e){const n=[],i=t.length;for(let r=0;r<i;r++)e.indexOf(r)===-1&&n.push(t[r]);const s=e.map(r=>t[r]);return[n,s]}function Fs(t,e){const n=e.map(i=>1);return KH(t,n,e)}function Pr(t,e,n){ce(k3(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function os(t,e){if(k3(t,e))return null;const n=[];for(let i=0;i<e;++i)t.indexOf(i)===-1&&n.push(i);return t.forEach(i=>n.push(i)),n}function Cf(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Is(t,e){const n=[];for(let i=e-t;i<e;++i)n.push(i);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bye(t,e=null,n=!1){const s={x:ve(t,"x","max")},r={reductionIndices:e,keepDims:n};return ke.runKernel(UC,s,r)}const Cc=Re({max_:Bye});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zye(t,e=null,n=!1){const s={x:ve(t,"x","min")},r={axis:e,keepDims:n};return ke.runKernel(KC,s,r)}const z_=Re({min_:zye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jye(t,e){let n=ve(t,"base","pow"),i=ve(e,"exp","pow");[n,i]=ks(n,i);const s={a:n,b:i};return ke.runKernel(Lb,s)}const om=Re({pow_:jye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function si(t,e){if((Ol(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Ol(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return bk(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vye(t){const n={x:ve(t,"x","sqrt","float32")};return ke.runKernel(Ub,n)}const Kr=Re({sqrt_:Vye});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wye(t){const e=ve(t,"x","square"),n={};return ke.runKernel("Square",{x:e},n)}const Vi=Re({square_:Wye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uye(t,e=null,n=!1){let i=ve(t,"x","sum");i.dtype==="bool"&&(i=It(i,"int32"));const s={x:i},r={axis:e,keepDims:n};return ke.runKernel(uk,s,r)}const Vt=Re({sum_:Uye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hye(t,e="euclidean",n=null,i=!1){t=ve(t,"x","norm");const s=XH(t,e,n);let r=s.shape;if(i){const o=In(n,t.shape);r=Fs(s.shape,o)}return Ae(s,r)}function XH(t,e,n=null){if(t.rank===0)return mo(t);if(t.rank!==1&&n===null)return XH(Ae(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Vt(mo(t),n);if(e===1/0)return Cc(mo(t),n);if(e===-1/0)return z_(mo(t),n);if(e==="euclidean"||e===2)return Kr(Vt(om(mo(t),si(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Cc(Vt(mo(t),n[0]),n[1]-1);if(e===1/0)return Cc(Vt(mo(t),n[1]),n[0]);if(e===-1/0)return z_(Vt(mo(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Kr(Vt(Vi(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Ck=Re({norm_:Hye});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gye(t,e=null,n=!1){return Ck(t,"euclidean",e,n)}const qye=Re({euclideanNorm_:Gye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kye(t){const n={x:ve(t,"x","exp")};return ke.runKernel(vb,n)}const ku=Re({exp_:Kye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xye(t,e=0){const n=ve(t,"x","expandDims","string_or_numeric");ce(e<=n.rank,()=>"Axis must be <= rank of the tensor");const i={input:n},s={dim:e};return ke.runKernel(PC,i,s)}const jo=Re({expandDims_:Xye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yye(t){const n={x:ve(t,"x","expm1")};return ke.runKernel(yb,n)}const Zye=Re({expm1_:Yye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qye(t,e){const n=ve(t,"x","tile","string_or_numeric");ce(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const i={x:n},s={reps:e};return ke.runKernel(Xb,i,s)}const yc=Re({tile_:Qye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jye(t,e,n,i="float32"){e==null&&(e=t);const s=kn([t,e],i),r=t<=e?t:e;for(let a=0;a<r;++a)s.set(1,a,a);const o=Ae(s.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return yc(jo(o,0),[n[0],1,1]);if(n.length===2)return yc(jo(jo(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return yc(jo(jo(jo(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const YH=Re({eye_:Jye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ebe(t){const n={x:ve(t,"x","floor","float32")};return ke.runKernel(bb,n)}const kk=Re({floor_:ebe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tbe(t,e,n=0,i=0){const s=ve(t,"x","gather"),r=ve(e,"indices","gather","int32"),o={x:s,indices:r},a={axis:n,batchDims:i};return ke.runKernel($C,o,a)}const I3=Re({gather_:tbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nbe(t,e){let n=ve(t,"a","greater","string_or_numeric"),i=ve(e,"b","greater","string_or_numeric");[n,i]=ks(n,i),mn(n.shape,i.shape);const s={a:n,b:i};return ke.runKernel(OC,s)}const il=Re({greater_:nbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ibe(t,e){let n=ve(t,"a","greaterEqual","string_or_numeric"),i=ve(e,"b","greaterEqual","string_or_numeric");[n,i]=ks(n,i),mn(n.shape,i.shape);const s={a:n,b:i};return ke.runKernel(wb,s)}const xm=Re({greaterEqual_:ibe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sbe(t){const n={input:ve(t,"input","imag")};return ke.runKernel(QL,n)}const N3=Re({imag_:sbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rbe(t){const n={x:ve(t,"x","isFinite")};return ke.runKernel(Sb,n)}const obe=Re({isFinite_:rbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function abe(t){const n={x:ve(t,"x","isInf")};return ke.runKernel(Cb,n)}const lbe=Re({isInf_:abe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cbe(t){const n={x:ve(t,"x","isNaN")};return ke.runKernel(kb,n)}const ube=Re({isNaN_:cbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hbe(t,e=.2){const i={x:ve(t,"x","leakyRelu")},s={alpha:e};return ke.runKernel(MC,i,s)}const E3=Re({leakyRelu_:hbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dbe(t,e){let n=ve(t,"a","less","string_or_numeric"),i=ve(e,"b","less","string_or_numeric");[n,i]=ks(n,i),mn(n.shape,i.shape);const s={a:n,b:i};return ke.runKernel(FC,s)}const j_=Re({less_:dbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fbe(t,e){let n=ve(t,"a","lessEqual","string_or_numeric"),i=ve(e,"b","lessEqual","string_or_numeric");[n,i]=ks(n,i),mn(n.shape,i.shape);const s={a:n,b:i};return ke.runKernel(BC,s)}const B0=Re({lessEqual_:fbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pbe(t,e=5,n=1,i=1,s=.5){const r=ve(t,"x","localResponseNormalization");ce(r.rank===4||r.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${r.rank}.`),ce(a0(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=r,a=!1;r.rank===3&&(a=!0,o=Ae(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const l={x:o},c={depthRadius:e,bias:n,alpha:i,beta:s},u=ke.runKernel(WC,l,c);return a?Ae(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const mbe=Re({localResponseNormalization_:pbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gbe(t){const n={x:ve(t,"x","log","float32")};return ke.runKernel(Ib,n)}const Iu=Re({log_:gbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vbe(t){const n={x:ve(t,"x","log1p")};return ke.runKernel(Nb,n)}const ZH=Re({log1p_:vbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ybe(t,e){ce(HE(t),()=>"The f passed in variableGrads(f) must be a function"),ce(e==null||Array.isArray(e)&&e.every(c=>c instanceof B_),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in ke.registeredVariables)e.push(ke.registeredVariables[c])}const i=n?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),ce(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const r=!0,{value:o,grads:a}=ke.gradients(t,e,null,r);ce(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),ce(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),i!=null&&i.forEach(c=>l[c.name]=null),{value:o,grads:l}}function d0(t){return ke.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bbe(t){const n={x:ve(t,"x","neg")};return ke.runKernel(YC,n)}const Cs=Re({neg_:bbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xbe(t){const n={x:ve(t,"x","softplus")};return ke.runKernel(Wb,n)}const Qb=Re({softplus_:xbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wbe(t){const e=ve(t,"x","logSigmoid");return d0(i=>({value:Cs(Qb(Cs(i))),gradFunc:o=>Ce(o,F0(Cs(i)))}))(e)}const _be=Re({logSigmoid_:wbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sbe(t,e){let n=ve(t,"a","sub"),i=ve(e,"b","sub");[n,i]=ks(n,i);const s={a:n,b:i};return ke.runKernel(Gb,s)}const en=Re({sub_:Sbe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cbe(t,e=-1){const n=ve(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return d0((s,r)=>{const a=Cc(s,e,!0),l=en(s,a),c=en(It(l,"float32"),Iu(Vt(ku(l),e,!0)));return r([c]),{value:c,gradFunc:(h,d)=>{const[p]=d,m=!0,g=ku(p);return en(h,Ce(Vt(h,e,m),g))}}})(n)}const QH=Re({logSoftmax_:Cbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kbe(t,e=null,n=!1){const i=ve(t,"x","logSumExp"),s=In(e,i.shape),r=Cc(i,s,!0),o=en(i,r),a=ku(o),l=Vt(a,s),c=Iu(l),u=rt(Ae(r,c.shape),c);if(n){const h=Fs(u.shape,s);return Ae(u,h)}return u}const JH=Re({logSumExp_:kbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ibe(t,e){const n=ve(t,"a","logicalAnd","bool"),i=ve(e,"b","logicalAnd","bool");mn(n.shape,i.shape);const s={a:n,b:i};return ke.runKernel(zC,s)}const Ih=Re({logicalAnd_:Ibe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nbe(t){const n={x:ve(t,"x","logicalNot","bool")};return ke.runKernel(jC,n)}const T3=Re({logicalNot_:Nbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ebe(t,e){const n=ve(t,"a","logicalOr","bool"),i=ve(e,"b","logicalOr","bool");mn(n.shape,i.shape);const s={a:n,b:i};return ke.runKernel(VC,s)}const e9=Re({logicalOr_:Ebe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tbe(t,e){const n=ve(t,"a","logicalXor","bool"),i=ve(e,"b","logicalXor","bool");return mn(n.shape,i.shape),Ih(e9(t,e),T3(Ih(t,e)))}const Abe=Re({logicalXor_:Tbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rbe(t,e,n,i,s){const r=ve(t,"x","maxPool"),o=1;let a=r,l=!1;r.rank===3&&(l=!0,a=Ae(r,[1,r.shape[0],r.shape[1],r.shape[2]])),ce(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),ce(Xr(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),ta("maxPool",i,s);const c={x:a},u={filterSize:e,strides:n,pad:i,dimRoundingMode:s},h=ke.runKernel(HC,c,u);return l?Ae(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const A3=Re({maxPool_:Rbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lbe(t,e=[1,1,1],n,i,s,r="NDHWC"){const o=ve(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=Ae(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ce(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),ce(r==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),ta("maxPool3d",i,s);const c={x:a},u={filterSize:e,strides:n,pad:i,dimRoundingMode:s,dataFormat:r},h=ke.runKernel(GC,c,u);return l?Ae(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const Pbe=Re({maxPool3d_:Lbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dbe(t,e){let n=ve(t,"a","maximum"),i=ve(e,"b","maximum");[n,i]=ks(n,i),n.dtype==="bool"&&(n=It(n,"int32"),i=It(i,"int32")),mn(n.shape,i.shape);const s={a:n,b:i};return ke.runKernel(Eb,s)}const kf=Re({maximum_:Dbe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $be(t,e=null,n=!1){const s={x:ve(t,"x","mean")},r={axis:e,keepDims:n};return ke.runKernel(qC,s,r)}const Os=Re({mean_:$be});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hr(t,e="float32"){if(Dh(t),e==="complex64"){const i=hr(t,"float32"),s=hr(t,"float32");return u0(i,s)}const n=qr(He(t),e);return ke.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function If(t,e="float32"){if(Dh(t),e==="complex64"){const i=If(t,"float32"),s=hr(t,"float32");return u0(i,s)}const n=IL(He(t),e);return ke.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Obe(t,e){let n=ve(t,"a","minimum"),i=ve(e,"b","minimum");[n,i]=ks(n,i),n.dtype==="bool"&&(n=It(n,"int32"),i=It(i,"int32")),mn(n.shape,i.shape);const s={a:n,b:i};return ke.runKernel(Tb,s)}const _y=Re({minimum_:Obe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mbe(t,e,n){ce(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const i=ve(t,"x","mirrorPad");if(i.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");ce(e.length===i.rank,()=>`Padding doesn't match input. Must be ${i.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let a=0;a<i.rank;a++)ce(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ce(e[a][0]>=0&&e[a][0]<=i.shape[a]-s&&e[a][1]>=0&&e[a][1]<=i.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${i.shape[a]-s} or less than 0 for input of shape ${i.shape}`);const r={paddings:e,mode:n},o={x:i};return ke.runKernel(XC,o,r)}const Fbe=Re({mirrorPad_:Mbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bbe(t,e){let n=ve(t,"a","mod"),i=ve(e,"b","mod");[n,i]=ks(n,i);const s={a:n,b:i};return ke.runKernel(Ab,s)}const zbe=Re({mod_:Bbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jbe(t,e=null,n=!1){t=ve(t,"x","moments");const i=In(e,t.shape),s=Os(t,i,n);let r=s.shape;n||(r=Fs(s.shape,i));const o=Vi(en(It(t,"float32"),Ae(s,r))),a=Os(o,i,n);return{mean:s,variance:a}}const R3=Re({moments_:jbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vbe(t,e){let n=ve(t,"a","notEqual","string_or_numeric"),i=ve(e,"b","notEqual","string_or_numeric");[n,i]=ks(n,i),mn(n.shape,i.shape);const s={a:n,b:i};return ke.runKernel(ZC,s)}const V_=Re({notEqual_:Vbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wbe(t,e,n=1,i=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:ve(t,"indices","oneHot","int32")},a={dtype:s,depth:e,onValue:n,offValue:i};return ke.runKernel(JC,o,a)}const L3=Re({oneHot_:Wbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ube(t){const n={x:ve(t,"x","onesLike")};return ke.runKernel(QC,n)}const Ml=Re({onesLike_:Ube});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hbe(t,e,n=0){const i=ve(t,"x","pad");if(i.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},r={x:i};return ke.runKernel(tk,r,s)}const P3=Re({pad_:Hbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gbe(t,e,n){const i=ve(t,"x","spaceToBatchND");ce(i.rank>=1+e.length,()=>`input rank ${i.rank} should be > than [blockShape] ${e.length}`),ce(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),ce(i.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${i.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:i},r={blockShape:e,paddings:n};return ke.runKernel(hk,s,r)}const D3=Re({spaceToBatchND_:Gbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qbe(t,e,n,i,s,r,o){s==null&&(s=[1,1]),r==null&&(r=1),i===0&&(i="valid");const a=ve(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=Ae(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ce(Xr(r,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${r} and dilations '${s}'`);const u=Fl(l.shape,e,r,s,i),h=[u.dilationHeight,u.dilationWidth];let d;i==="same"?d=Xbe([u.filterHeight,u.filterWidth],h):d=[[0,0],[0,0]];const p=h[0]===1&&h[1]===1,[m,g]=Kbe([u.inHeight,u.inWidth],h,d),y=p?i:"valid",v=p?l:D3(l,h,m),w=(n==="avg"?()=>x3(v,e,r,y,o):()=>A3(v,e,r,y,o))(),S=p?w:w3(w,h,g);return c?Ae(S,[S.shape[1],S.shape[2],S.shape[3]]):S}function Kbe(t,e,n){const i=n.map(u=>u[0]),s=n.map(u=>u[1]),r=t.concat(i,s),o=e.map((u,h)=>(u-r[h]%u)%u),a=s.map((u,h)=>u+o[h]),l=e.map((u,h)=>[i[h],a[h]]),c=e.map((u,h)=>[0,o[h]]);return[l,c]}function Xbe(t,e){const i=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),s=i.map(o=>Math.floor(o/2)),r=i.map((o,a)=>o-s[a]);return i.map((o,a)=>[s[a],r[a]])}const Ybe=Re({pool_:qbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zbe(t,e){const n=ve(t,"x","prelu"),i=ve(e,"alpha","prelu"),s={x:n,alpha:i};return ke.runKernel(nk,s)}const $3=Re({prelu_:Zbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qbe(t,e=null,n=!1){let i=ve(t,"x","prod");i.dtype==="bool"&&(i=It(i,"int32"));const s={x:i},r={axis:e,keepDims:n};return ke.runKernel(ik,s,r)}const Jbe=Re({prod_:Qbe});var O3={exports:{}};O3.exports;(function(t){(function(e,n,i){function s(l){var c=this,u=a();c.next=function(){var h=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=h-(c.c=h|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function r(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new s(l),h=c&&c.state,d=u.next;return d.int32=function(){return u.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,h&&(typeof h=="object"&&r(h,u),d.state=function(){return r(u,{})}),d}function a(){var l=4022871197,c=function(u){u=String(u);for(var h=0;h<u.length;h++){l+=u.charCodeAt(h);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:this.alea=o})(bc,t)})(O3);var exe=O3.exports,M3={exports:{}};M3.exports;(function(t){(function(e,n,i){function s(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var d=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&r(u,c),h.state=function(){return r(c,{})}),h}n&&n.exports?n.exports=o:this.xor128=o})(bc,t)})(M3);var txe=M3.exports,F3={exports:{}};F3.exports;(function(t){(function(e,n,i){function s(a){var l=this,c="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var d=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&r(u,c),h.state=function(){return r(c,{})}),h}n&&n.exports?n.exports=o:this.xorwow=o})(bc,t)})(F3);var nxe=F3.exports,B3={exports:{}};B3.exports;(function(t){(function(e,n,i){function s(a){var l=this;l.next=function(){var u=l.x,h=l.i,d,p;return d=u[h],d^=d>>>7,p=d^d<<24,d=u[h+1&7],p^=d^d>>>10,d=u[h+3&7],p^=d^d>>>3,d=u[h+4&7],p^=d^d<<7,d=u[h+7&7],d=d^d<<13,p^=d^d<<9,u[h]=p,l.i=h+1&7,p};function c(u,h){var d,p=[];if(h===(h|0))p[0]=h;else for(h=""+h,d=0;d<h.length;++d)p[d&7]=p[d&7]<<15^h.charCodeAt(d)+p[d+1&7]<<13;for(;p.length<8;)p.push(0);for(d=0;d<8&&p[d]===0;++d);for(d==8?p[7]=-1:p[d],u.x=p,u.i=0,d=256;d>0;--d)u.next()}c(l,a)}function r(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var d=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(u.x&&r(u,c),h.state=function(){return r(c,{})}),h}n&&n.exports?n.exports=o:this.xorshift7=o})(bc,t)})(B3);var ixe=B3.exports,z3={exports:{}};z3.exports;(function(t){(function(e,n,i){function s(a){var l=this;l.next=function(){var u=l.w,h=l.X,d=l.i,p,m;return l.w=u=u+1640531527|0,m=h[d+34&127],p=h[d=d+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,m=h[d]=m^p,l.i=d,m+(u^u>>>16)|0};function c(u,h){var d,p,m,g,y,v=[],b=128;for(h===(h|0)?(p=h,h=null):(h=h+"\0",p=0,b=Math.max(b,h.length)),m=0,g=-32;g<b;++g)h&&(p^=h.charCodeAt((g+32)%h.length)),g===0&&(y=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,g>=0&&(y=y+1640531527|0,d=v[g&127]^=p+y,m=d==0?m+1:0);for(m>=128&&(v[(h&&h.length||0)&127]=-1),m=127,g=4*128;g>0;--g)p=v[m+34&127],d=v[m=m+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,v[m]=p^d;u.w=y,u.X=v,u.i=m}c(l,a)}function r(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var d=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(u.X&&r(u,c),h.state=function(){return r(c,{})}),h}n&&n.exports?n.exports=o:this.xor4096=o})(bc,t)})(z3);var sxe=z3.exports,j3={exports:{}};j3.exports;(function(t){(function(e,n,i){function s(a){var l=this,c="";l.next=function(){var h=l.b,d=l.c,p=l.d,m=l.a;return h=h<<25^h>>>7^d,d=d-p|0,p=p<<24^p>>>8^m,m=m-h|0,l.b=h=h<<20^h>>>12^d,l.c=d=d-p|0,l.d=p<<16^d>>>16^m,l.a=m-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function r(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var d=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&r(u,c),h.state=function(){return r(c,{})}),h}n&&n.exports?n.exports=o:this.tychei=o})(bc,t)})(j3);var rxe=j3.exports,t9={exports:{}};const oxe={},axe=Object.freeze(Object.defineProperty({__proto__:null,default:oxe},Symbol.toStringTag,{value:"Module"})),lxe=_B(axe);(function(t){(function(e,n,i){var s=256,r=6,o=52,a="random",l=i.pow(s,r),c=i.pow(2,o),u=c*2,h=s-1,d;function p(S,k,I){var T=[];k=k==!0?{entropy:!0}:k||{};var E=v(y(k.entropy?[S,w(n)]:S??b(),3),T),O=new m(T),F=function(){for(var R=O.g(r),$=l,U=0;R<c;)R=(R+U)*s,$*=s,U=O.g(1);for(;R>=u;)R/=2,$/=2,U>>>=1;return(R+U)/$};return F.int32=function(){return O.g(4)|0},F.quick=function(){return O.g(4)/4294967296},F.double=F,v(w(O.S),n),(k.pass||I||function(R,$,U,W){return W&&(W.S&&g(W,O),R.state=function(){return g(O,{})}),U?(i[a]=R,$):R})(F,E,"global"in k?k.global:this==i,k.state)}function m(S){var k,I=S.length,T=this,E=0,O=T.i=T.j=0,F=T.S=[];for(I||(S=[I++]);E<s;)F[E]=E++;for(E=0;E<s;E++)F[E]=F[O=h&O+S[E%I]+(k=F[E])],F[O]=k;(T.g=function(R){for(var $,U=0,W=T.i,te=T.j,H=T.S;R--;)$=H[W=h&W+1],U=U*s+H[h&(H[W]=H[te=h&te+$])+(H[te]=$)];return T.i=W,T.j=te,U})(s)}function g(S,k){return k.i=S.i,k.j=S.j,k.S=S.S.slice(),k}function y(S,k){var I=[],T=typeof S,E;if(k&&T=="object")for(E in S)try{I.push(y(S[E],k-1))}catch{}return I.length?I:T=="string"?S:S+"\0"}function v(S,k){for(var I=S+"",T,E=0;E<I.length;)k[h&E]=h&(T^=k[h&E]*19)+I.charCodeAt(E++);return w(k)}function b(){try{var S;return d&&(S=d.randomBytes)?S=S(s):(S=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(S)),w(S)}catch{var k=e.navigator,I=k&&k.plugins;return[+new Date,e,I,e.screen,w(n)]}}function w(S){return String.fromCharCode.apply(0,S)}if(v(i.random(),n),t.exports){t.exports=p;try{d=lxe}catch{}}else i["seed"+a]=p})(typeof self<"u"?self:bc,[],Math)})(t9);var cxe=t9.exports,uxe=exe,hxe=txe,dxe=nxe,fxe=ixe,pxe=sxe,mxe=rxe,wm=cxe;wm.alea=uxe;wm.xor128=hxe;wm.xorwow=dxe;wm.xorshift7=fxe;wm.xor4096=pxe;wm.tychei=mxe;var V3=wm;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n9{constructor(e,n,i,s,r){this.mean=e,this.stdDev=n,this.dtype=i,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=r||Math.random();this.random=V3.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,i=!1;for(;!i;){let s,r,o;do s=2*this.random()-1,r=2*this.random()-1,o=s*s+r*r;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*r*a,(!this.truncated||this.isValidTruncated(e))&&(i=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class gxe{constructor(e=0,n=1,i,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=i,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=V3.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vxe(t,e=0,n=1,i,s){if(Dh(t),i!=null&&i==="bool")throw new Error(`Unsupported data type ${i}`);const r=new n9(e,n,i,!1,s),o=kn(t,i);for(let a=0;a<o.values.length;a++)o.values[a]=r.nextValue();return o.toTensor()}const yxe=Re({randomNormal_:vxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bxe(t,e=0,n=1,i="float32",s){Dh(t);const r=kn(t,i),o=new gxe(e,n,null,s);for(let a=0;a<r.values.length;a++)r.values[a]=o.nextValue();return r.toTensor()}const Jb=Re({randomUniform_:bxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sy(t,e,n=1,i="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:i};return ke.runKernel(r3,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xxe(t){const n={input:ve(t,"input","real")};return ke.runKernel(o3,n)}const W_=Re({real_:xxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wxe(t){const n={x:ve(t,"x","reciprocal")};return ke.runKernel(Pb,n)}const _xe=Re({reciprocal_:wxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sxe(t){const n={x:ve(t,"x","relu")};return ke.runKernel(Db,n)}const _m=Re({relu_:Sxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cxe(t){const n={x:ve(t,"x","relu6")};return ke.runKernel($b,n)}const i9=Re({relu6_:Cxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kxe(t,e){const i={x:ve(t,"x","reverse")},s={dims:e};return ke.runKernel(ak,i,s)}const am=Re({reverse_:kxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ixe(t){const n={x:ve(t,"x","round")};return ke.runKernel(Ob,n)}const s9=Re({round_:Ixe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nxe(t){const n={x:ve(t,"x","rsqrt","float32")};return ke.runKernel(Mb,n)}const r9=Re({rsqrt_:Nxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Exe(t){const n={x:ve(t,"x","selu")};return ke.runKernel(Fb,n)}const o9=Re({selu_:Exe});function Txe(t,e,n,i,s,r=[1,1],o="NHWC"){const a=ve(t,"x","separableConv2d"),l=ve(e,"depthwiseFilter","separableConv2d"),c=ve(n,"pointwiseFilter","separableConv2d");let u=a,h=!1;if(a.rank===3&&(h=!0,u=Ae(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ce(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),ce(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),ce(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),ce(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),ce(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const d=l.shape[2],p=l.shape[3];ce(c.shape[2]===d*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*p}, but got ${c.shape[2]}.`);const m=C3(u,l,i,s,o,r),y=rm(m,c,1,"valid",o);return h?Ae(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const a9=Re({separableConv2d_:Txe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Axe(t){const n={x:ve(t,"x","sign")};return ke.runKernel(jb,n)}const Rxe=Re({sign_:Axe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lxe(t){const n={x:ve(t,"x","sin","float32")};return ke.runKernel(Bb,n)}const l9=Re({sin_:Lxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pxe(t){const n={x:ve(t,"x","sinh")};return ke.runKernel(zb,n)}const c9=Re({sinh_:Pxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dxe(t,e,n){const i=ve(t,"x","slice1d");return ce(i.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${i.rank} tensor`),Di(i,[e],[n])}const W3=Re({slice1d_:Dxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $xe(t,e,n){const i=ve(t,"x","slice2d");return ce(i.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${i.rank} tensor`),Di(i,e,n)}const u9=Re({slice2d_:$xe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oxe(t,e,n){const i=ve(t,"x","slice3d");return ce(i.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${i.rank} tensor`),Di(i,e,n)}const U3=Re({slice3d_:Oxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mxe(t,e,n){const i=ve(t,"x","slice4d");return ce(i.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${i.rank} tensor`),Di(i,e,n)}const U_=Re({slice4d_:Mxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fxe(t,e=-1){const n=ve(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const i={logits:n},s={dim:e};return ke.runKernel(fk,i,s)}const H3=Re({softmax_:Fxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bxe(t){ce(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ke.runKernel(KL,e)}const h9=Re({fft_:Bxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zxe(t){ce(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ke.runKernel(ZL,e)}const lT=Re({ifft_:zxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jxe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let i;if(e<=2){const s=Ae(t,[n,e]);i=lT(s)}else{const s=[n,2*(e-1)],r=Ae(W_(t),[n,e]),o=Ae(N3(t),[n,e]),a=am(Di(r,[0,1],[n,e-2]),1),l=Ce(am(Di(o,[0,1],[n,e-2]),1),si(-1)),c=Yo([r,a],1),u=Yo([o,l],1),h=Ae(u0(c,u),[s[0],s[1]]);i=lT(h)}if(i=W_(i),t.rank===3&&t.shape[0]!==0){const s=i,r=t.shape[0];i=Ae(i,[r,i.shape[0]/r,i.shape[1]]),s.dispose()}return i}const Vxe=Re({irfft_:jxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wxe(t,e,n=0){const s={x:ve(t,"x","split")},r={numOrSizeSplits:e,axis:n};return ke.runKernel(dk,s,r)}const Za=Re({split_:Wxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uxe(t,e){ce(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const i=t.size/n;let s;if(e!=null&&e<n){const m=t.shape.map(y=>0),g=t.shape.map(y=>y);g[t.shape.length-1]=e,s=Di(t,m,g),n=e}else if(e!=null&&e>n){const m=t.shape.map(g=>g);m[t.shape.length-1]=e-n,s=Yo([t,hr(m)],t.shape.length-1),n=e}else s=t;const r=Hn(s),o=Ae(u0(s,r),[i,n]),a=h9(o),l=Math.floor(n/2)+1,c=W_(a),u=N3(a),h=Za(c,[l,n-l],c.shape.length-1),d=Za(u,[l,n-l],u.shape.length-1),p=s.shape.slice();return p[s.shape.length-1]=l,Ae(u0(h[0],d[0]),p)}const Hxe=Re({rfft_:Uxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gxe(t,e){let n=ve(t,"a","squaredDifference"),i=ve(e,"b","squaredDifference");[n,i]=ks(n,i),mn(n.shape,i.shape);const s={a:n,b:i},r={};return ke.runKernel(Hb,s,r)}const qxe=Re({squaredDifference_:Gxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kxe(t,e){const n=ve(t,"x","squeeze","string_or_numeric");return Ae(n,wf(n.shape,e).newShape)}const ex=Re({squeeze_:Kxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xxe(t,e=0){const n=AH(t,"tensors","stack","string_or_numeric");ce(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&ce(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const i=n,s={axis:e};return ke.runKernel(ek,i,s)}const Nh=Re({stack_:Xxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yxe(t,e=0){const i={x:ve(t,"x","step")},s={alpha:e};return ke.runKernel(Yb,i,s)}const tx=Re({step_:Yxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zxe(t,e,n,i,s=0,r=0,o=0,a=0,l=0){const u={x:ve(t,"x","stridedSlice","string_or_numeric")},h={begin:e,end:n,strides:i,beginMask:s,endMask:r,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return ke.runKernel(h3,u,h)}const Qxe=Re({stridedSlice_:Zxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jxe(t){const n={x:ve(t,"x","tan","float32")};return ke.runKernel(qb,n)}const e2e=Re({tan_:Jxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qo(t,e){OU(t);const n=yk(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return bk(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gw(t,e,n){if(OU(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const i=yk(t,n);if(i.length!==2&&i.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(i.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return bk(t,e,i,n)}function d9(t,e,n){const i=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,r=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${i}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(r+` update.rank < ${s}. `);if(t.length<i+(n.rank-s))throw new Error(r+` Output shape length < ${i+(n.rank-s)}`);if(n.rank!==s+t.length-i)throw new Error(r+` update.rank != ${s+t.length-i}`);for(let o=0;o<s;++o)if(n.shape[o]!==e.shape[o])throw new Error(r+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-s;++o)if(n.shape[o+s]!==t[o+i])throw new Error(r+` updates.shape[${o+s}] (${n.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function t2e(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}d9(n,e,t)}function Sm(t,e,n){const i=e.shape.length,s=i>1?e.shape[i-1]:1,r=n.length;let o=1;for(let h=s;h<r;++h)o*=n[h];const a=s<1?1:s,l=He(e.shape)/a,c=[...zt(n.slice(0,s)),1],u=He(n);return{sliceRank:s,numUpdates:l,sliceSize:o,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n2e(t,e=1,n=!0){const i=ve(t,"x","topk");if(i.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=i.shape[i.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const r={x:i},o={k:e,sorted:n},[a,l]=ke.runKernel(d3,r,o);return{values:a,indices:l}}const i2e=Re({topk_:n2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2e(t,e=0,n=1,i,s){if(Dh(t),i!=null&&i==="bool")throw new Error("Unsupported data type $ { dtype }");const r=new n9(e,n,i,!0,s),o=kn(t,i);for(let a=0;a<o.values.length;a++)o.values[a]=r.nextValue();return o.toTensor()}const f9=Re({truncatedNormal_:s2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2e(t,e=0){const n=ve(t,"x","unique","string_or_numeric");ce(n.rank>0,()=>"The input tensor must be at least 1D");const i={x:n},s={axis:e},[r,o]=ke.runKernel(p3,i,s);return{values:r,indices:o}}const o2e=Re({unique_:r2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a2e(t,e,n){const i=ve(t,"x","unsortedSegmentSum"),s=ve(e,"segmentIds","unsortedSegmentSum","int32");ce(a0(n),()=>"numSegments must be of dtype int");const r={x:i,segmentIds:s},o={numSegments:n};return ke.runKernel(mk,r,o)}const p9=Re({unsortedSegmentSum_:a2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l2e(t,e=0){const n=ve(t,"x","unstack","string_or_numeric");ce(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const i={value:n},s={axis:e};return ke.runKernel(pk,i,s)}const lm=Re({unstack_:l2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c2e(t,e=!0,n,i){return ke.makeVariable(t,e,n,i)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m9(t,e){const n=[];for(let r=0;r<e.length;r++)e[r]&&n.push(r);const i=kn(t,"int32"),s=kn([n.length,t.length],"int32");for(let r=0;r<n.length;r++){const o=i.indexToLoc(n[r]),a=r*t.length;s.values.set(o,a)}return s.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u2e(t,e,n){const i=ve(t,"x","transpose");if(e==null&&(e=i.shape.map((o,a)=>a).reverse()),ce(i.rank===e.length,()=>`Error in transpose: rank of input ${i.rank} must match length of perm ${e}.`),e.forEach(o=>{ce(o>=0&&o<i.rank,()=>`All entries in 'perm' must be between 0 and ${i.rank-1} but got ${e}`)}),i.rank<=1)return i.clone();const s={x:i},r={perm:e};return i.dtype==="complex64"?$e(()=>{let o=W_(i),a=N3(i);return o=ke.runKernel(Bg,{x:o},r),a=ke.runKernel(Bg,{x:a},r),n&&(a=Cs(a)),u0(o,a)}):ke.runKernel(Bg,s,r)}const Un=Re({transpose_:u2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h2e(t,e){if(e==null)return t.shape.slice();if(ri(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let i=0;i<t.shape.length;i++)e[i]==null&&t.shape[i]!=null?n.push(t.shape[i]):n.push(e[i]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2e(t,e,n,i){const s=ve(t,"x","dropout");if(ce(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),ce(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Hs?s.clone():s;const r=h2e(s,n),o=1-e,a=Ut(kk(rt(Jb(r,0,1,"float32",i),o)),o);return Ce(s,a)}const f2e=Re({dropout_:d2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p2e(t,e,n,i,s,r="NHWC",o){let a=t;t.rank===3&&(a=Ae(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Ae(e,[1,e.shape[0],e.shape[1],e.shape[2]])),ce(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),ce(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),ce(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=r==="NHWC"?a.shape[3]:a.shape[1],u=r==="NHWC"?l.shape[3]:l.shape[1];ce(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),ce(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),ta("conv2dDerFilter",s,o);const h={x:a,dy:l},d={strides:i,pad:s,dataFormat:r,dimRoundingMode:o,filterShape:n};return ke.runKernel(ML,h,d)}const G3=Re({conv2DBackpropFilter_:p2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q3(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return Ce(t,tx(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function K3(t,e){let n=e;const i=Zs(t.shape,e.shape);return i.length>0&&(n=Vt(n,i)),Ae(n,t.shape)}function X3(t,e,n,i){if(e==="linear")return t;if(e==="relu")return _m(t);if(e==="elu")return Sk(t);if(e==="relu6")return i9(t);if(e==="prelu")return $3(t,n);if(e==="leakyrelu")return E3(t,i);if(e==="sigmoid")return F0(t);throw new Error(`Unknown fused activation ${e}.`)}const Y3=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m2e({x:t,filter:e,strides:n,pad:i,dataFormat:s="NHWC",dilations:r=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",Y3(ke.state.gradientDepth,l)===!1){ce(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let I=rm(t,e,n,i,s,r,o);return a!=null&&(I=rt(I,a)),X3(I,l,c,u)}const h=ve(t,"x","conv2d","float32"),d=ve(e,"filter","conv2d","float32");let p=h,m=!1;h.rank===3&&(m=!0,p=Ae(h,[1,h.shape[0],h.shape[1],h.shape[2]])),ce(p.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),ce(d.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),ta("fused conv2d",i,o);const g=s==="NHWC"?p.shape[3]:p.shape[1];ce(d.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${d.shape[2]}.`),ce(Xr(n,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`);const y=Lr(p.shape,d.shape,n,r,i,o);let v;a!=null&&(v=ve(a,"bias","fused conv2d"),[v]=ks(v,h),s==="NHWC"?mn(y.outShape,v.shape):(ce(v.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`),ce(v.shape.length===0||v.shape[0]===y.outChannels||v.shape[0]===1,()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let b;if(c!=null){const I=c.shape;if(ce(I.length<=1||I.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${I.length}.`),I.length===1)ce(I[0]===1||I[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${I}) is not compatible with the number of output channels (${y.outChannels}).`);else if(I.length===3)try{mn(I,y.outShape)}catch{const E=`Error in fused conv2d: PReLU activation weights (${I}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(E)}b=ve(c,"prelu weights","fused conv2d")}const w=(I,T)=>{ce(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[E,O,F,R]=T,$=q3(I,F,l);ce(im(r),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const U=_3(O.shape,$,E,n,i),W=G3(O,$,E.shape,n,i),te=[U,W];if(R!=null){const H=K3(R,$);te.push(H)}return te},S={x:p,filter:d,bias:v,preluActivationWeights:b},k={strides:n,pad:i,dataFormat:s,dilations:r,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?d0((T,E,O)=>{let F=ke.runKernel(O_,S,k);return O([E,T,F]),m&&(F=Ae(F,[F.shape[1],F.shape[2],F.shape[3]])),{value:F,gradFunc:w}})(p,d):d0((T,E,O,F)=>{let R=ke.runKernel(O_,S,k);return F([E,T,R,O]),m&&(R=Ae(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:w}})(p,d,v)}const g2e=Re({fusedConv2d_:m2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2e(t,e,n,i,s,r=[1,1],o){let a=t;t.rank===3&&(a=Ae(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:i,pad:s,dimRoundingMode:o,dilations:r,filterShape:n};return ke.runKernel(UL,c,u)}const y2e=Re({depthwiseConv2dNativeBackpropFilter_:v2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(t,e,n,i,s,r=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=Ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:i,pad:s,dimRoundingMode:o,dilations:r,inputShape:t},h=ke.runKernel(HL,c,u);return l?Ae(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const x2e=Re({depthwiseConv2dNativeBackpropInput_:b2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w2e({a:t,b:e,transposeA:n=!1,transposeB:i=!1,bias:s,activation:r="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(Y3(ke.state.gradientDepth,r)===!1){let R=ni(t,e,n,i);return s!=null&&(R=rt(R,s)),X3(R,r,o,a)}let l=ve(t,"a","fused matMul"),c=ve(e,"b","fused matMul");[l,c]=ks(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],h=i?c.shape[c.rank-1]:c.shape[c.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],p=i?c.shape[c.rank-2]:c.shape[c.rank-1],m=l.shape.slice(0,-2),g=c.shape.slice(0,-2),y=He(m),v=He(g);ce(u===h,()=>`Error in fused matMul: inner shapes (${u}) and (${h}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${i} must match.`);const w=mn(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([d,p]),S=n?Ae(l,[y,u,d]):Ae(l,[y,d,u]),k=i?Ae(c,[v,p,h]):Ae(c,[v,h,p]);let I;s!=null&&(I=ve(s,"bias","fused matMul"),[I]=ks(I,l),mn(w,I.shape));let T;o!=null&&(T=ve(o,"prelu weights","fused matMul"));const E=(R,$)=>{const[U,W,te,H]=$,G=q3(Ae(R,te.shape),te,r);let B,Y;if(!n&&!i?(B=ni(G,W,!1,!0),Y=ni(U,G,!0,!1)):!n&&i?(B=ni(G,W,!1,!1),Y=ni(G,U,!0,!1)):n&&!i?(B=ni(W,G,!1,!0),Y=ni(U,G,!1,!1)):(B=ni(W,G,!0,!0),Y=ni(G,U,!0,!0)),s!=null){const ne=K3(H,G);return[B,Y,ne]}else return[B,Y]},O={a:S,b:k,bias:I,preluActivationWeights:T},F={transposeA:n,transposeB:i,activation:r,leakyreluAlpha:a};return s==null?d0(($,U,W)=>{const te=ke.runKernel($_,O,F);return W([$,U,te]),{value:Ae(te,w),gradFunc:E}})(S,k):d0(($,U,W,te)=>{const H=ke.runKernel($_,O,F);return te([$,U,H,W]),{value:Ae(H,w),gradFunc:E}})(S,k,I)}const MF=Re({fusedMatMul_:w2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _2e(t,e,n,i,s="bilinear",r=0){const o=ve(t,"image","cropAndResize"),a=ve(e,"boxes","cropAndResize","float32"),l=ve(n,"boxInd","cropAndResize","int32"),c=a.shape[0];ce(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),ce(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),ce(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),ce(i.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${i.length}.`),ce(i[0]>=1&&i[1]>=1,()=>`cropSize must be atleast [1,1], but was ${i}`),ce(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const u={image:o,boxes:a,boxInd:l},h={method:s,extrapolationValue:r,cropSize:i};return ke.runKernel(jL,u,h)}const S2e=Re({cropAndResize_:_2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2e(t){const e=ve(t,"image","flipLeftRight","float32");ce(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return ke.runKernel(YL,n,{})}const k2e=Re({flipLeftRight_:C2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I2e(t){const e=ve(t,"image","grayscaleToRGB"),n=e.rank-1,i=e.shape[n];ce(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),ce(i===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${i}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,yc(e,s)}const N2e=Re({grayscaleToRGB_:I2e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E2e(t){const e=ve(t,"image","RGBToGrayscale"),n=e.rank-1,i=e.shape[n];ce(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),ce(i===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${i}.`);const s=e.dtype,r=It(e,"float32"),o=qo([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Rv("ij,j->i",r,o);break;case 3:a=Rv("ijk,k->ij",r,o);break;case 4:a=Rv("ijkl,l->ijk",r,o);break;case 5:a=Rv("ijklm,m->ijkl",r,o);break;case 6:a=Rv("ijklmn,n->ijklm",r,o);break;default:throw new Error("Not a valid tensor rank.")}return a=jo(a,-1),It(a,s)}const T2e=Re({rgbToGrayscale_:E2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2e(t,e,n=0,i=.5){const s=ve(t,"image","rotateWithOffset","float32");ce(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const r={image:s},o={radians:e,fillValue:n,center:i};return ke.runKernel(m3,r,o)}const R2e=Re({rotateWithOffset_:A2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z0(t,e,n,i,s,r){i==null&&(i=.5),s==null&&(s=Number.NEGATIVE_INFINITY),r==null&&(r=0);const o=t.shape[0];return n=Math.min(n,o),ce(0<=i&&i<=1,()=>`iouThreshold must be in [0, 1], but was '${i}'`),ce(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),ce(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),ce(e.rank===1,()=>"scores must be a 1D tensor"),ce(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),ce(0<=r&&r<=1,()=>`softNmsSigma must be in [0, 1], but was '${r}'`),{maxOutputSize:n,iouThreshold:i,scoreThreshold:s,softNmsSigma:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L2e(t,e,n,i=.5,s=Number.NEGATIVE_INFINITY){const r=ve(t,"boxes","nonMaxSuppression","float32"),o=ve(e,"scores","nonMaxSuppression","float32"),a=z0(r,o,n,i,s);n=a.maxOutputSize,i=a.iouThreshold,s=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:i,scoreThreshold:s};return ke.runKernel(n3,{boxes:r,scores:o},l)}const P2e=Re({nonMaxSuppression_:L2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2e(t,e,n){const i=$2e(t,e,n),s=i<0?-(i+1):i;t.splice(s,0,e)}function $2e(t,e,n){return M2e(t,e,n||O2e)}function O2e(t,e){return t>e?1:t<e?-1:0}function M2e(t,e,n){let i=0,s=t.length,r=0,o=!1;for(;i<s;){r=i+(s-i>>>1);const a=n(e,t[r]);a>0?i=r+1:(s=r,o=!a)}return o?i:-i-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z3(t,e,n,i,s){return eP(t,e,n,i,s,0)}function Q3(t,e,n,i,s,r){return eP(t,e,n,i,s,0,!1,r,!0)}function J3(t,e,n,i,s,r){return eP(t,e,n,i,s,r,!0)}function eP(t,e,n,i,s,r,o=!1,a=!1,l=!1){const c=[];for(let y=0;y<e.length;y++)e[y]>s&&c.push({score:e[y],boxIndex:y,suppressBeginIndex:0});c.sort(FF);const u=r>0?-.5/r:0,h=[],d=[];for(;h.length<n&&c.length>0;){const y=c.pop(),{score:v,boxIndex:b,suppressBeginIndex:w}=y;if(v<s)break;let S=!1;for(let k=h.length-1;k>=w;--k){const I=F2e(t,b,h[k]);if(I>=i){S=!0;break}if(y.score=y.score*B2e(i,u,I),y.score<=s)break}y.suppressBeginIndex=h.length,S||(y.score===v?(h.push(b),d.push(y.score)):y.score>s&&D2e(c,y,FF))}const p=h.length,m=n-p;a&&m>0&&(h.push(...new Array(m).fill(0)),d.push(...new Array(m).fill(0)));const g={selectedIndices:h};return o&&(g.selectedScores=d),l&&(g.validOutputs=p),g}function F2e(t,e,n){const i=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),r=Math.min(i[0],i[2]),o=Math.min(i[1],i[3]),a=Math.max(i[0],i[2]),l=Math.max(i[1],i[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),h=Math.max(s[0],s[2]),d=Math.max(s[1],s[3]),p=(a-r)*(l-o),m=(h-c)*(d-u);if(p<=0||m<=0)return 0;const g=Math.max(r,c),y=Math.max(o,u),v=Math.min(a,h),b=Math.min(l,d),w=Math.max(v-g,0)*Math.max(b-y,0);return w/(p+m-w)}function B2e(t,e,n){const i=Math.exp(e*n*n);return n<=t?i:0}function FF(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function z2e(t,e,n,i=.5,s=Number.NEGATIVE_INFINITY){const r=ve(t,"boxes","nonMaxSuppressionAsync"),o=ve(e,"scores","nonMaxSuppressionAsync"),a=z0(r,o,n,i,s);n=a.maxOutputSize,i=a.iouThreshold,s=a.scoreThreshold;const l=await Promise.all([r.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:h}=Z3(c,u,n,i,s);return r!==t&&r.dispose(),o!==e&&o.dispose(),qo(h,"int32")}const j2e=z2e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V2e(t,e,n,i=.5,s=Number.NEGATIVE_INFINITY,r=0){const o=ve(t,"boxes","nonMaxSuppression"),a=ve(e,"scores","nonMaxSuppression"),l=z0(o,a,n,i,s,r);n=l.maxOutputSize,i=l.iouThreshold,s=l.scoreThreshold,r=l.softNmsSigma;const c={boxes:o,scores:a},u={maxOutputSize:n,iouThreshold:i,scoreThreshold:s,softNmsSigma:r},h=ke.runKernel(s3,c,u);return{selectedIndices:h[0],selectedScores:h[1]}}const W2e=Re({nonMaxSuppressionWithScore_:V2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function U2e(t,e,n,i=.5,s=Number.NEGATIVE_INFINITY,r=0){const o=ve(t,"boxes","nonMaxSuppressionAsync"),a=ve(e,"scores","nonMaxSuppressionAsync"),l=z0(o,a,n,i,s,r);n=l.maxOutputSize,i=l.iouThreshold,s=l.scoreThreshold,r=l.softNmsSigma;const c=await Promise.all([o.data(),a.data()]),u=c[0],h=c[1],{selectedIndices:d,selectedScores:p}=J3(u,h,n,i,s,r);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:qo(d,"int32"),selectedScores:qo(p)}}const H2e=U2e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2e(t,e,n,i=.5,s=Number.NEGATIVE_INFINITY,r=!1){const o=ve(t,"boxes","nonMaxSuppression"),a=ve(e,"scores","nonMaxSuppression"),l=z0(o,a,n,i,s,null),c=l.maxOutputSize,u=l.iouThreshold,h=l.scoreThreshold,d={boxes:o,scores:a},p={maxOutputSize:c,iouThreshold:u,scoreThreshold:h,padToMaxOutputSize:r},m=ke.runKernel(i3,d,p);return{selectedIndices:m[0],validOutputs:m[1]}}const q2e=Re({nonMaxSuppressionPadded_:G2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function K2e(t,e,n,i=.5,s=Number.NEGATIVE_INFINITY,r=!1){const o=ve(t,"boxes","nonMaxSuppressionAsync"),a=ve(e,"scores","nonMaxSuppressionAsync"),l=z0(o,a,n,i,s,null),c=l.maxOutputSize,u=l.iouThreshold,h=l.scoreThreshold,[d,p]=await Promise.all([o.data(),a.data()]),{selectedIndices:m,validOutputs:g}=Q3(d,p,c,u,h,r);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:qo(m,"int32"),validOutputs:si(g,"int32")}}const X2e=K2e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2e(t,e,n=!1,i=!1){const s=ve(t,"images","resizeBilinear");ce(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),ce(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),ce(i===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let r=s,o=!1;s.rank===3&&(o=!0,r=Ae(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:r},l={alignCorners:n,halfPixelCenters:i,size:e},c=ke.runKernel(ok,a,l);return o?Ae(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const g9=Re({resizeBilinear_:Y2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z2e(t,e,n=!1,i=!1){const s=ve(t,"images","resizeNearestNeighbor");ce(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),ce(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),ce(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),ce(i===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let r=s,o=!1;s.rank===3&&(o=!0,r=Ae(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:r},l={alignCorners:n,halfPixelCenters:i,size:e},c=ke.runKernel(rk,a,l);return o?Ae(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const v9=Re({resizeNearestNeighbor_:Z2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2e(t,e="binary",n=!1,i=.5){const s=ve(t,"image","threshold"),r=.2989,o=.587,a=.114,l=s.shape[0]*s.shape[1];let c=Ce(qo([i]),255),u,h,d,p;if(ce(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),ce(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),ce(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),ce(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[u,h,d]=Za(s,[1,1,1],-1);const y=Ce(u,r),v=Ce(h,o),b=Ce(d,a);p=rt(rt(y,v),b)}else p=t;if(e==="otsu"){const y=Z1e(It(s9(p),"int32"),RH([]),256);c=J2e(y,l)}const m=n?B0(p,c):il(p,c);return It(Ce(m,255),"int32")}function J2e(t,e){let n=qo([-1]),i=qo([0]),s=qo([0]),r,o,a,l,c,u;for(let h=0;h<t.size-1;h++){r=Di(t,0,h+1),o=Di(t,h+1),c=Ut(Vt(r),e),u=Ut(Vt(o),e);const d=Vt(Ce(r,Sy(0,r.size)));a=Ut(d,Vt(r));const p=_k(o.shape,r.size),m=rt(Sy(0,o.size),p),g=Ce(o,m);l=Ut(Vt(g),Vt(o));const y=en(a,l),v=en(a,l),b=Ce(c,u);s=Ce(Ce(b,y),v);const w=il(s,i);i=wo(w,s,i),n=wo(w,qo([h]),n)}return n}const ewe=Re({threshold_:Q2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function twe(t,e,n="nearest",i="constant",s=0,r){const o=ve(t,"image","transform","float32"),a=ve(e,"transforms","transform","float32");ce(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),ce(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),ce(r==null||r.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${r}.`);const l={image:o,transforms:a},c={interpolation:n,fillMode:i,fillValue:s,outputShape:r};return ke.runKernel(f3,l,c)}const nwe=Re({transform_:twe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iwe(t,e,n){const i=ve(t,"a","bandPart");ce(i.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${i.rank}.`);const s=i.shape,[r,o]=i.shape.slice(-2);let a,l;typeof e=="number"?(ce(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),ce(e<=r,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${r}).`),a=ve(e<0?r:e,"numLower","bandPart")):(ce(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=wo(j_(e,0),r,_y(e,r))),typeof n=="number"?(ce(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),ce(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=ve(n<0?o:n,"numUpper","bandPart")):(ce(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=wo(j_(n,0),o,_y(n,o)));const c=Ae(Sy(0,r,1,"int32"),[-1,1]),u=Sy(0,o,1,"int32"),h=en(c,u),d=Ih(B0(h,a),xm(h,Cs(l))),p=hr([r,o],i.dtype);return Ae(Nh(lm(Ae(i,[-1,r,o])).map(m=>wo(d,m,p))),s)}const swe=Re({bandPart_:iwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rwe(t){let e;if(Array.isArray(t)){e=!1,ce(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let r=1;r<t.length;++r)ce(t[r].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[r].shape[0]} vs. ${s})`)}else e=!0,t=Za(t,t.shape[0],0).map(s=>ex(s,[0]));ce(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],i=t;for(let s=0;s<t.length;++s)n.push(ke.tidy(()=>{let r=i[s];if(s>0)for(let o=0;o<s;++o){const a=Ce(Vt(Ce(n[o],r)),n[o]);r=en(r,a)}return Ut(r,Ck(r,"euclidean"))}));return e?Nh(n,0):n}const owe=Re({gramSchmidt_:rwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function awe(t,e=!1){if(ce(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return BF(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),i=lm(Ae(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],r=[];i.forEach(l=>{const[c,u]=BF(l,e);s.push(c),r.push(u)});const o=Ae(Nh(s,0),t.shape),a=Ae(Nh(r,0),t.shape);return[o,a]}}function BF(t,e=!1){return ke.tidy(()=>{ce(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],i=t.shape[1];let s=YH(n),r=Dp(t);const o=gw([[1]],[1,1]);let a=Dp(o);const l=n>=i?i:n;for(let c=0;c<l;++c){const u=r,h=a,d=s;[a,r,s]=ke.tidy(()=>{const p=Di(r,[c,c],[n-c,1]),m=Ck(p),g=Di(r,[c,c],[1,1]),y=wo(il(g,0),gw([[-1]]),gw([[1]])),v=en(g,Ce(y,m)),b=Ut(p,v);b.shape[0]===1?a=Dp(o):a=Yo([o,Di(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const w=Cs(Ut(ni(y,v),m)),S=Di(r,[c,0],[n-c,i]),k=Ce(w,a),I=Un(a);if(c===0)r=en(S,ni(k,ni(I,S)));else{const O=en(S,ni(k,ni(I,S)));r=Yo([Di(r,[0,0],[c,i]),O],0)}const T=Un(k),E=Di(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=en(E,ni(ni(E,a),T));else{const O=en(E,ni(ni(E,a),T));s=Yo([Di(s,[0,0],[n,c]),O],1)}return[a,r,s]}),An([u,h,d])}return!e&&n>i&&(s=Di(s,[0,0],[n,i]),r=Di(r,[0,0],[i,i])),[s,r]})}const lwe=Re({qr_:awe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ch={flipLeftRight:k2e,grayscaleToRGB:N2e,resizeNearestNeighbor:v9,resizeBilinear:g9,rgbToGrayscale:T2e,rotateWithOffset:R2e,cropAndResize:S2e,nonMaxSuppression:P2e,nonMaxSuppressionAsync:j2e,nonMaxSuppressionWithScore:W2e,nonMaxSuppressionWithScoreAsync:H2e,nonMaxSuppressionPadded:q2e,nonMaxSuppressionPaddedAsync:X2e,threshold:ewe,transform:nwe},cwe={bandPart:swe,gramSchmidt:owe,qr:lwe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uwe=new Map,hwe=new Map;class j0{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class _l{constructor(){this.classNameMap={}}static getMap(){return _l.instance==null&&(_l.instance=new _l),_l.instance}static register(e){_l.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function nt(t,e,n){ce(t.className!=null,()=>"Class being registered does not have the static className property defined."),ce(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),ce(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const i=n,s=e+">"+i;return _l.register(t),uwe.set(s,t),hwe.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nf extends j0{minimize(e,n=!1,i){const{value:s,grads:r}=this.computeGradients(e,i);if(i!=null){const o=i.map(a=>({name:a.name,tensor:r[a.name]}));this.applyGradients(o)}else this.applyGradients(r);return An(r),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return ybe(e,n)}dispose(){this.iterations_!=null&&An(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:si(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Nf,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y9 extends Nf{static get className(){return"Adadelta"}constructor(e,n,i=null){super(),this.learningRate=e,this.rho=n,this.epsilon=i,this.accumulatedGrads=[],this.accumulatedUpdates=[],i==null&&(this.epsilon=ke.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(i=>i.name):Object.keys(e)).forEach((i,s)=>{const r=ke.registeredVariables[i],o=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${i}/accum_grad`,variable:$e(()=>Hn(r).variable(o))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${i}/accum_var`,variable:$e(()=>Hn(r).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[i];if(a==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;$e(()=>{const u=rt(Ce(l,this.rho),Ce(Vi(a),1-this.rho)),h=Ce(Ut(Kr(rt(c,this.epsilon)),Kr(rt(l,this.epsilon))),a),d=rt(Ce(c,this.rho),Ce(Vi(h),1-this.rho));l.assign(u),c.assign(d);const p=rt(Ce(h,-this.learningRate),r);r.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(An(this.accumulatedGrads.map(e=>e.variable)),An(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,i=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(i)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(i)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b9 extends Nf{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(i=>i.name):Object.keys(e)).forEach((i,s)=>{const r=ke.registeredVariables[i];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${i}/accumulator`,variable:$e(()=>_k(r.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[s].tensor:e[i];if(o==null)return;const a=this.accumulatedGrads[s].variable;$e(()=>{const l=rt(a,Vi(o));a.assign(l);const c=rt(Ce(Ut(o,Kr(rt(l,ke.backend.epsilon()))),-this.learningRate),r);r.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&An(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(i=>({originalName:i.name,variable:i.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x9 extends Nf{static get className(){return"Adam"}constructor(e,n,i,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=i,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],$e(()=>{this.accBeta1=si(n).variable(),this.accBeta2=si(i).variable()}),s==null&&(this.epsilon=ke.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(i=>i.name):Object.keys(e);$e(()=>{const i=en(1,this.accBeta1),s=en(1,this.accBeta2);n.forEach((r,o)=>{const a=ke.registeredVariables[r],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${r}/m`,variable:$e(()=>Hn(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${r}/v`,variable:$e(()=>Hn(a).variable(l))});const c=Array.isArray(e)?e[o].tensor:e[r];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,h=this.accumulatedSecondMoment[o].variable,d=rt(Ce(u,this.beta1),Ce(c,1-this.beta1)),p=rt(Ce(h,this.beta2),Ce(Vi(c),1-this.beta2)),m=Ut(d,i),g=Ut(p,s);u.assign(d),h.assign(p);const y=rt(Ce(Ut(m,rt(Kr(g),this.epsilon)),-this.learningRate),a);a.assign(y)}),this.accBeta1.assign(Ce(this.accBeta1,this.beta1)),this.accBeta2.assign(Ce(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&An(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&An(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),$e(()=>{this.accBeta1.assign(om(this.beta1,this.iterations_+1)),this.accBeta2.assign(om(this.beta2,this.iterations_+1))});const n=e.length/2,i=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(i)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(i)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w9 extends Nf{static get className(){return"Adamax"}constructor(e,n,i,s=null,r=0){super(),this.learningRate=e,this.beta1=n,this.beta2=i,this.epsilon=s,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],$e(()=>{this.iteration=si(0).variable(),this.accBeta1=si(n).variable()}),s==null&&(this.epsilon=ke.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(i=>i.name):Object.keys(e);$e(()=>{const i=en(1,this.accBeta1),s=Ut(-this.learningRate,rt(Ce(this.iteration,this.decay),1));n.forEach((r,o)=>{const a=ke.registeredVariables[r],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${r}/m`,variable:Hn(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${r}/v`,variable:Hn(a).variable(l)});const c=Array.isArray(e)?e[o].tensor:e[r];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,h=this.accumulatedWeightedInfNorm[o].variable,d=rt(Ce(u,this.beta1),Ce(c,1-this.beta1)),p=Ce(h,this.beta2),m=mo(c),g=kf(p,m);u.assign(d),h.assign(g);const y=rt(Ce(Ut(s,i),Ut(d,rt(g,this.epsilon))),a);a.assign(y)}),this.iteration.assign(rt(this.iteration,1)),this.accBeta1.assign(Ce(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&An(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&An(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tP extends Nf{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(i=>i.name):Object.keys(e)).forEach((i,s)=>{const r=Array.isArray(e)?e[s].tensor:e[i];if(r==null)return;const o=ke.registeredVariables[i];$e(()=>{const a=rt(Ce(this.c,r),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=bu(si(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _9 extends tP{static get className(){return"Momentum"}constructor(e,n,i=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=i,this.accumulations=[],this.m=si(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(i=>i.name):Object.keys(e)).forEach((i,s)=>{const r=ke.registeredVariables[i];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${i}/momentum`,variable:$e(()=>Hn(r).variable(!1))});const o=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[i];a!=null&&$e(()=>{let l;const c=rt(Ce(this.m,o),a);this.useNesterov?l=rt(Ce(this.c,rt(a,Ce(c,this.m))),r):l=rt(Ce(this.c,c),r),o.assign(c),r.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&An(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(i=>({originalName:i.name,variable:i.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S9 extends Nf{static get className(){return"RMSProp"}constructor(e,n=.9,i=0,s=null,r=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=i,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,s==null&&(this.epsilon=ke.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(i=>i.name):Object.keys(e)).forEach((i,s)=>{const r=ke.registeredVariables[i],o=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${i}/rms`,variable:$e(()=>Hn(r).variable(o))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${i}/momentum`,variable:$e(()=>Hn(r).variable(o))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${i}/mg`,variable:$e(()=>Hn(r).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[i];if(a==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;$e(()=>{const u=rt(Ce(l,this.decay),Ce(Vi(a),1-this.decay));if(this.centered){const h=this.accumulatedMeanGrads[s].variable,d=rt(Ce(h,this.decay),Ce(a,1-this.decay)),p=Ut(Ce(a,this.learningRate),Kr(en(u,rt(Vi(d),this.epsilon)))),m=rt(Ce(c,this.momentum),p);l.assign(u),h.assign(d),c.assign(m);const g=en(r,m);r.assign(g)}else{const h=rt(Ce(l,this.decay),Ce(Vi(a),1-this.decay)),d=rt(Ce(c,this.momentum),Ut(Ce(a,this.learningRate),Kr(rt(h,this.epsilon))));l.assign(h),c.assign(d);const p=en(r,d);r.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&An(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&An(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&An(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,i=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(i)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(i)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(i)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dwe=[y9,b9,x9,w9,_9,S9,tP];function fwe(){for(const t of dwe)nt(t)}function nP(t,e){const n=t.shape.length,i=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(i<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${i}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[i-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[i-1]} vs. ${n}`);if(He(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,r=s[s.length-1];let o=1;for(let h=0;h<s.length-1;++h)o*=s[h];const a=t.shape,l=s.slice();l.pop();let c=1;for(let h=r;h<n;++h)c*=a[h],l.push(a[h]);const u=[...zt(t.shape).map(h=>h/c),1].slice(0,r);return[l,o,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cT=-2,pwe=-1;function iP(t,e,n){const i=t.shape.length;ce(i===e.length,()=>`Error in slice${i}D: Length of begin ${e} must match the rank of the array (${i}).`),ce(i===n.length,()=>`Error in slice${i}D: Length of size ${n} must match the rank of the array (${i}).`);for(let s=0;s<i;++s)ce(e[s]+n[s]<=t.shape[s],()=>`Error in slice${i}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function mwe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function sP(t,e,n){const i=[];for(let s=0;s<t.length;s++)i[s]=Math.ceil((e[s]-t[s])/n[s]);return i}function C9(t,e,n,i){const s=[...t];for(let r=s.length;r<i.length;r++)s.push(1);for(let r=0;r<n;r++)r===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function k9(t,e,n){return n<=t?n:n-(e-1)}function I9(t,e){const n=[];for(let i=0;i<t;i++)n.push(e+i);return n}function gwe(t,e,n,i,s,r,o,a,l){const c=t.length;let u=new Array(c),h=new Array(c),d=new Array(c);if(e.length&&n>0){const p=e[0],m=n+1;u=N9(o,p,m,i,t),h=E9(a,p,m,s,t),d=C9(r,p,m,t)}else for(let p=0;p<c;p++)u[p]=A9(o,i,r,t,p,l),h[p]=R9(a,s,r,t,p,l),d[p]=T9(r,p,l);return{begin:u,end:h,strides:d}}function N9(t,e,n,i,s){const r=[...s],o=I9(n,e);for(let a=0;a<r.length;a++)if(o.indexOf(a)>-1)r[a]=0;else{const l=k9(e,n,a);let c=i[l];t&1<<l&&(c=0),r[a]=c}return r}function E9(t,e,n,i,s){const r=[...s],o=I9(n,e);for(let a=0;a<r.length;a++)if(o.indexOf(a)>-1)r[a]=Number.MAX_SAFE_INTEGER;else{const l=k9(e,n,a);let c=i[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),r[a]=c}for(let a=0;a<r.length;a++){const l=s[a];r[a]<0&&(r[a]+=l),r[a]=Jp(0,r[a],s[a])}return r}function T9(t,e,n){let i=t[e];return(n&1<<e||i==null)&&(i=1),i}function A9(t,e,n,i,s,r){let o=e[s];const a=n[s]||1;(t&1<<s||r&1<<s||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=i[s];return o<0&&(o+=l),o=Jp(0,o,l-1),o}function R9(t,e,n,i,s,r){let o=e[s];const a=n[s]||1;(t&1<<s||r&1<<s||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=i[s];return o<0&&(o+=l),a>0?o=Jp(0,o,l):o=Jp(-1,o,l-1),o}function rP(t,e,n){let i=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){i=s;break}for(let s=i+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function oP(t,e){let n=t.length>0?t[t.length-1]:1;for(let i=0;i<t.length-1;i++)n+=t[i]*e[i];return n}function Ik(t,e,n){let i;const s=t.shape.length;typeof e=="number"?i=[e,...new Array(s-1).fill(0)]:e.length<s?i=e.concat(new Array(s-e.length).fill(0)):i=e.slice(),i.forEach(o=>{ce(o!==-1,()=>"slice() does not support negative begin indexing.")});let r;return n==null?r=new Array(s).fill(-1):typeof n=="number"?r=[n,...new Array(s-1).fill(-1)]:n.length<s?r=n.concat(new Array(s-n.length).fill(-1)):r=n,r=r.map((o,a)=>o>=0?o:(ce(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-i[a])),[i,r]}function aP(t,e,n,i,s,r,o,a,l){let c;if(i==null?(c=new Array(e.length),c.fill(1)):c=i,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const h={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:r,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let w=0;w<h.dims;w++)u&&1<<w&a&&h.numAddAxisAfterEllipsis++,1<<w&o&&(u=!0);u||(h.ellipsisMask|=1<<h.dims,h.dims++);const d={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};vwe(h,d);let p=!0,m=!0,g=!0;const y=[],v=[];for(let w=0;w<t.length;++w){if(d.strides[w]===0)throw Error(`strides[${w}] must be non-zero`);const S=!!(d.shrinkAxisMask&1<<w),k=t[w];if(k===-1){y.push(S?1:-1);continue}const I=[d.beginMask&1<<w,d.endMask&1<<w],T=[d.strides[w]>0?0:-1,d.strides[w]>0?k:k-1];if(S&&d.strides[w]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&d.strides[w]===1;const E=!!(d.beginMask&1<<w&&d.endMask&1<<w);if(d.beginValid&&d.endValid){if(S){const $=d.begin[w]<0?k+d.begin[w]:d.begin[w];if(d.begin[w]=$,d.end[w]=d.begin[w]+1,$<0||$>=k)throw Error(`slice index ${d.begin[w]} of dimension ${w} out of bounds.`)}else d.begin[w]=zF(d.begin[w],0,d.strides[w],k,I,T),d.end[w]=zF(d.end[w],1,d.strides[w],k,I,T);const R=d.strides[w]===1&&d.begin[w]===0&&d.end[w]===k;p=p&&R,m=m&&(w===0&&d.strides[w]===1||R)}else p=p&&d.strides[w]===1&&E,m=m&&(w===0&&d.strides[w]===1||E);let O,F=!1;if(d.beginValid&&d.endValid?(O=d.end[w]-d.begin[w],F=!0):S?(O=1,F=!0):E&&k>=0&&(d.strides[w]<0?O=-k:O=k,F=!0),F){let R;O===0||O<0!=d.strides[w]<0?R=0:R=Math.trunc(O/d.strides[w])+(O%d.strides[w]!==0?1:0),y.push(R)}else y.push(-1)}for(let w=0;w<d.finalShapeGatherIndices.length;++w){const S=d.finalShapeGatherIndices[w];S>=0?v.push(y[S]):S===cT&&v.push(1)}return{finalShapeSparse:v.filter((w,S)=>d.finalShapeGatherIndices[S]!==cT),finalShape:v,isIdentity:p,sliceDim0:m,isSimpleSlice:g,begin:d.begin,end:d.end,strides:d.strides}}function vwe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let i=0;i<t.dims;i++)if(1<<i&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-i)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=i}else if(1<<i&t.newAxisMask)e.finalShapeGatherIndices.push(cT),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[i]),t.end!=null&&(e.end[n]=t.end[i]),e.strides[n]=t.strides[i],t.beginMask&1<<i&&(e.beginMask|=1<<n),t.endMask&1<<i&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<i?(e.finalShapeGatherIndices.push(pwe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(i)),e.inputShapeGatherIndicesSparse[n]=i,n++}}function zF(t,e,n,i,s,r){if(s[e])return n>0?r[e]:r[e+1&1];{const o=t<0?i+t:t;return o<r[0]?r[0]:o>r[1]?r[1]:o}}const ywe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:iP,computeFlatOffset:oP,computeOutShape:sP,getNormalizedAxes:gwe,isSliceContinous:rP,maskToAxes:mwe,parseSliceParams:Ik,sliceInfo:aP,startForAxis:A9,startIndicesWithElidedDims:N9,stopForAxis:R9,stopIndicesWithElidedDims:E9,stridesForAxis:T9,stridesWithElidedDims:C9},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bwe{static sgd(e){return new tP(e)}static momentum(e,n,i=!1){return new _9(e,n,i)}static rmsprop(e,n=.9,i=0,s=null,r=!1){return new S9(e,n,i,s,r)}static adam(e=.001,n=.9,i=.999,s=null){return new x9(e,n,i,s)}static adadelta(e=.001,n=.95,i=null){return new y9(e,n,i)}static adamax(e=.002,n=.9,i=.999,s=null,r=0){return new w9(e,n,i,s,r)}static adagrad(e,n=.1){return new b9(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fd=bwe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xwe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function L9(){return new Promise(t=>xwe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lP(t,e){const n=t[0].length;t.forEach((s,r)=>{ce(s.length===n,()=>`Error in concat${n}D: rank of tensors[${r}] must be the same as the rank of the rest (${n})`)}),ce(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const i=t[0];t.forEach((s,r)=>{for(let o=0;o<n;o++)ce(o===e||s[o]===i[o],()=>`Error in concat${n}D: Shape of tensors[${r}] (${s}) does not match the shape of the rest (${i}) along the non-concatenated axis ${r}.`)})}function xu(t,e){const n=t[0].slice();for(let i=1;i<t.length;i++)n[e]+=t[i][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var pc;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(pc||(pc={}));function P9(t,e,n){let i=new Array;if(n==null&&e==null)return i;if(e==null)for(;i.length<t+n.length;)i.push(-1);else i=e.slice();if(n==null)return i;if(t+n.length!==i.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${i.length}`);for(let s=1;s<n.length;++s){const r=n[s],o=i[i.length-n.length+s],a=i[o];if(r>=0)if(a>=0){if(a!==r)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${r} but shape[${s+t}] = ${a}`)}else i[o]=r}return i}function D9(t){const e={FIRST_DIM_SIZE:pc.FIRST_DIM_SIZE,VALUE_ROWIDS:pc.VALUE_ROWIDS,ROW_LENGTHS:pc.ROW_LENGTHS,ROW_SPLITS:pc.ROW_SPLITS,ROW_LIMITS:pc.ROW_LIMITS,ROW_STARTS:pc.ROW_STARTS},n=[];for(const i of t)if(i in e)n.push(e[i]);else break;return n}function $9(t){return t.length===0?0:t[0]===pc.FIRST_DIM_SIZE?t.length-1:t.length}function O9(t,e){if(t==null||e==null)return;const n=t.length,i=e.length;if(n>=i)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${i})`);for(let s=0;s<Math.min(n,i-1);++s){const r=t[s],o=e[s+1];if(r>=0&&o>=0&&r!==1&&r!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${r} but ragged tensor input.flatValues.shape[${s-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cP=30;function Nk(t){return t<=cP?t:GE(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uP(t,e,n){const i=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[i,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nx(t,e,n,i=!0){let s=[];if(i)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const r=e.length;for(let o=0;o<r;++o)s=s.concat([t[o+1]/e[o],e[o]]);s=s.concat(t.slice(r+1))}return s}function ix(t,e,n=!0){const i=[];if(n){i.push(e);for(let s=e+1;s<t;++s)s<=2*e?(i.push(s),i.push(s-(e+1))):i.push(s)}else{const s=[],r=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?r.push(o):s.push(o);i.push(...s),i.push(0),i.push(...r)}return i}function sx(t,e,n,i=!0){const s=[];i?s.push(t[0]/n):s.push(t[0]*n);for(let r=1;r<t.length;++r)r<=e.length?i?s.push(e[r-1]*t[r]):s.push(t[r]/e[r-1]):s.push(t[r]);return s}function hP(t,e){const n=[0];for(let i=0;i<e;++i)n.push(t[i][0]);return n}function dP(t,e,n){const i=t.slice(0,1);for(let s=0;s<n;++s)i.push(t[s+1]-e[s][0]-e[s][1]);return i}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ek=1.7580993408473768,Tk=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fP=.3275911,pP=.254829592,mP=-.284496736,gP=1.421413741,vP=-1.453152027,yP=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eh(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let i=0;i<n.length;i+=2)n[i]=t[i/2],n[i+1]=e[i/2];return n}function M9(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let i=0;i<t.length;i+=2)e[i/2]=t[i],n[i/2]=t[i+1];return{real:e,imag:n}}function F9(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),i=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],i[Math.floor(s/4)]=t[s+1];return{real:n,imag:i}}function B9(t){const e=Math.floor(t.length/4),n=new Float32Array(e),i=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],i[Math.floor(s/4)]=t[s+1];return{real:n,imag:i}}function bP(t,e){const n=t[e*2],i=t[e*2+1];return{real:n,imag:i}}function z9(t,e,n,i){t[i*2]=e,t[i*2+1]=n}function j9(t,e){const n=new Float32Array(t/2),i=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const r=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(r),i[s]=Math.sin(r)}return{real:n,imag:i}}function V9(t,e,n){const i=(n?2:-2)*Math.PI*(t/e),s=Math.cos(i),r=Math.sin(i);return{real:s,imag:r}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IN="->",wwe=/->/g,jF=",",VF="...";function xP(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(wwe,"").length)/IN.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${IN}").`);const[i,s]=t.split(IN);ce(i.indexOf(VF)===-1,()=>`The ellipsis notation ("${VF}") is not supported yet.`);const r=i.split(jF),o=r.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let d=0;d<s.length;++d){const p=s[d];if(!r.some(m=>m.indexOf(p)!==-1))throw new Error(`Output subscripts contain the label ${p} not present in the input subscripts.`);a.indexOf(p)===-1&&a.push(p)}for(let d=0;d<i.length;++d){const p=i[d];a.indexOf(p)===-1&&p!==jF&&a.push(p)}const l=new Array(r.length);for(let d=0;d<o;++d){if(new Set(r[d].split("")).size!==r[d].length)throw new Error(`Found duplicate axes in input component ${r[d]}. Support for duplicate axes in input is not implemented yet.`);l[d]=[];for(let p=0;p<r[d].length;++p)l[d].push(a.indexOf(r[d][p]))}const c=a.length,u=s.length,h=[];for(let d=u;d<c;++d)h.push(d);return{allDims:a,summedDims:h,idDims:l}}function wP(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const i=[];for(let s=0;s<t;++s)n[s]===-1&&i.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:i}}function _P(t,e,n){const i=new Array(t);for(let s=0;s<n.length;++s){const r=n[s].shape;for(let o=0;o<e[s].length;++o)i[e[s][o]]===void 0?i[e[s][o]]=r[o]:ce(i[e[s][o]]===r[o],()=>`Expected dimension ${i[e[s][o]]} at axis ${o} of input shaped ${JSON.stringify(r)}, but got dimension ${r[o]}`)}}function SP(t,e){const n=t,i=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let o=0;o<s;++o)i.push([]);const r=[];for(let o=0;o<n.length;++o){const a=n[o],l=_we(e,a);for(const c of l)r.indexOf(c)===-1&&(i[o].push(c),r.push(c))}return{path:n,steps:i}}function CP(t){return t.every((e,n)=>e===n)}function _we(t,e){const n=[];for(let i=0;i<t.length;++i)(t[i].length===0||t[i].indexOf(e)!==-1||e===-1)&&n.push(i);return n}function kP(t,e,n=0){let i=[];if(typeof e=="number")ce(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),i=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);ce(s<=1,()=>"There should be only one negative value in split array.");const r=e.indexOf(-1);if(r!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[r]=t.shape[n]-o}ce(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),i=e}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W9(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function U9(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function H9(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G9(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function q9(t,e){return`size ${t} must be non-negative, not ${e}`}function K9(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function X9(t,e){const n=He(t),i=He(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${i}. inputShape=${t} outputShape= ${e}`}function Y9(t,e){const n=He(t),i=He(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${i}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uT(){return"segment ids must be >= 0"}function Z9(){return"segment ids are not increasing"}function Q9(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function J9(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eG(t,e){let n=!1,i;for(t<=cP?(i=t,n=!0):i=GE(t,Math.floor(Math.sqrt(t)));!n;)i>e||i===t?n=!0:i=GE(t,i+1);return i}function tG(t,e,n){const i=[],s=t.length;for(let r=0;r<s;r++)r!==e?i.push(t[r]):i.push(n);return i}function IP(t,e,n,i){const s=e.shape.length,r=t.shape.length;if(i!==0&&(i<-s||i>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${i}`);if(i<0&&(i+=s),i>r)throw new Error(`batchDims (${i}) must be less than rank(x) (
    ${r}).`);if(n<i)throw new Error(`batchDims (${i}) must be less than or equal to axis (${n}).`);for(let h=0;h<i;++h)if(t.shape[h]!==e.shape[h])throw new Error(`x.shape[${h}]: ${t.shape[h]} should be equal to indices.shape[${h}]: ${e.shape[h]}.`);const o=t.shape[n],a=[];let l=1,c=1,u=1;for(let h=0;h<i;++h)a.push(t.shape[h]),l*=t.shape[h];for(let h=i;h<n;h++)a.push(t.shape[h]),c*=t.shape[h];for(let h=i;h<s;h++)a.push(e.shape[h]);for(let h=n+1;h<r;h++)a.push(t.shape[h]),u*=t.shape[h];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:a}}const Swe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:IP,computeOutShape:tG,segOpComputeOptimalWindowSize:eG},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Th(t){try{return t.map(e=>rf(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function nG(t){return t.map(e=>Gd(e))}const Cwe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:pP,ERF_A2:mP,ERF_A3:gP,ERF_A4:vP,ERF_A5:yP,ERF_P:fP,PARALLELIZE_THRESHOLD:cP,get RowPartitionType(){return pc},SELU_SCALE:Tk,SELU_SCALEALPHA:Ek,applyActivation:X3,assertAndGetBroadcastShape:mn,assertAxesAreInnerMostDims:Pr,assertParamsConsistent:lP,assignToTypedArray:z9,axesAreInnerMostDims:k3,calculateShapes:Sm,checkEinsumDimSizes:_P,checkPadOnDimRoundingMode:ta,combineLocations:KH,combineRaggedTensorToTensorShapes:P9,complexWithEvenIndex:F9,complexWithOddIndex:B9,computeConv2DInfo:Lr,computeConv3DInfo:Sf,computeDefaultPad:b3,computeDilation2DInfo:Zb,computeOptimalWindowSize:Nk,computeOutAndReduceShapes:mr,computeOutShape:xu,computePool2DInfo:Fl,computePool3DInfo:$h,convertConv2DDataFormat:Oh,decodeEinsumEquation:xP,eitherStridesOrDilationsAreOne:Xr,expandShapeToKeepDim:Fs,exponent:V9,exponents:j9,fromStringArrayToUint8:nG,fromUint8ToStringArray:Th,getAxesPermutation:os,getBroadcastDims:h0,getComplexWithIndex:bP,getEinsumComputePath:SP,getEinsumPermutation:wP,getFusedBiasGradient:K3,getFusedDyActivation:q3,getImageCenter:uP,getInnerMostAxes:Is,getPermuted:ix,getRaggedRank:$9,getReductionAxes:Zs,getReshaped:nx,getReshapedPermuted:sx,getRowPartitionTypesHelper:D9,getSliceBeginCoords:hP,getSliceSize:dP,getSparseFillEmptyRowsIndicesDenseShapeMismatch:W9,getSparseFillEmptyRowsNegativeIndexErrorMessage:U9,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:H9,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:K9,getSparseReshapeInputOutputMismatchErrorMessage:Y9,getSparseReshapeInputOutputMultipleErrorMessage:X9,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:G9,getSparseReshapeNegativeOutputDimErrorMessage:q9,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:J9,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:uT,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:Z9,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:Q9,getUndoAxesPermutation:Cf,isIdentityPermutation:CP,log:ave,mergeRealAndImagArrays:Eh,prepareAndValidate:nP,prepareSplitSize:kP,segment_util:Swe,shouldFuse:Y3,slice_util:ywe,splitRealAndImagArrays:M9,stridesOrDilationsArePositive:sm,tupleValuesAreOne:im,upcastType:Ea,validateDefaultValueShape:O9,validateInput:t2e,validateUpdateShape:d9,warn:Ua},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fwe();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iG={kernelName:vC,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ce(t,tx(It(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kwe={kernelName:nb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const i=Vi(It(n,"float32")),s=Kr(en(si(1),i));return Cs(Ut(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iwe={kernelName:ib,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const i=Kr(en(Vi(It(n,"float32")),1));return Ut(t,i)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nwe={kernelName:O0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,i]=e,s=mn(n.shape,i.shape);return{a:()=>{let a=t;const l=Zs(n.shape,s);return l.length>0&&(a=Vt(a,l)),Ae(a,n.shape)},b:()=>{let a=t;const l=Zs(i.shape,s);return l.length>0&&(a=Vt(a,l)),Ae(a,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ewe={kernelName:TL,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((i,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Twe={kernelName:yC,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Hn(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Awe={kernelName:bC,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Hn(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rwe={kernelName:sb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ut(t,Kr(en(si(1),Vi(It(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lwe={kernelName:rb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const i=Kr(rt(si(1),Vi(It(n,"float32"))));return Ut(t,i)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pwe={kernelName:lb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,i]=e,s=mn(n.shape,i.shape);return{a:()=>{const a=rt(Vi(n),Vi(i));let l=Ce(t,Ut(i,a));const c=Zs(n.shape,s);return c.length>0&&(l=Vt(l,c)),Ae(l,n.shape)},b:()=>{const a=rt(Vi(n),Vi(i));let l=Cs(Ce(t,Ut(n,a)));const c=Zs(i.shape,s);return c.length>0&&(l=Vt(l,c)),Ae(l,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dwe={kernelName:ob,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ut(t,rt(Vi(It(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $we={kernelName:ab,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ut(t,en(si(1),Vi(It(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Owe(t,e,n,i,s,r){const o=ve(t,"dy","avgPool3dGrad"),a=ve(e,"input","avgPool3dGrad");let l=o,c=a,u=!1;a.rank===4&&(u=!0,l=Ae(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=Ae(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),ce(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),ce(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),ta("avgPool3dGrad",s,r);const h={dy:l,input:c},d={filterSize:n,strides:i,pad:s,dimRoundingMode:r},p=ke.runKernel(PL,h,d);return u?Ae(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const Mwe=Re({avgPool3dGrad_:Owe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fwe={kernelName:wC,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[i]=e,{filterSize:s,strides:r,pad:o,dimRoundingMode:a}=n;return{x:()=>Mwe(t,i,s,r,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bwe(t,e,n,i,s){const r=ve(t,"dy","avgPoolGrad"),o=ve(e,"input","avgPoolGrad");ce(o.rank===r.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${r.rank})`);let a=o,l=r,c=!1;o.rank===3&&(c=!0,a=Ae(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=Ae(r,[1,r.shape[0],r.shape[1],r.shape[2]])),ce(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),ce(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:l,input:a},h={filterSize:n,strides:i,pad:s},d=ke.runKernel(LL,u,h);return c?Ae(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const zwe=Re({avgPoolGrad_:Bwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jwe={kernelName:xC,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[i]=e,{filterSize:s,strides:r,pad:o}=n;return{x:()=>zwe(t,i,s,r,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vwe={kernelName:_C,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[i,s]=e,{transposeA:r,transposeB:o}=n;return!r&&!o?{a:()=>ni(t,s,!1,!0),b:()=>ni(i,t,!0,!1)}:!r&&o?{a:()=>ni(t,s,!1,!1),b:()=>ni(t,i,!0,!1)}:r&&!o?{a:()=>ni(s,t,!1,!0),b:()=>ni(i,t,!1,!1)}:{a:()=>ni(s,t,!0,!0),b:()=>ni(t,i,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wwe={kernelName:SC,gradFunc:(t,e,n)=>{const{blockShape:i,crops:s}=n;return{x:()=>D3(t,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uwe={kernelName:ive,gradFunc:(t,e,n)=>{const i=n,s=i.inputShape,r=i.shape,o=Array.from(r);for(let l=s.length-1;l>=0;l--)if(s[l]===r[l])o[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${r}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>Vt(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hwe={kernelName:cb,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gwe={kernelName:ub,gradFunc:t=>({x:()=>Hn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qwe={kernelName:hb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[i]=e,{clipValueMin:s,clipValueMax:r}=n;return{x:()=>wo(Ih(xm(i,s),B0(i,r)),t,Hn(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kwe={kernelName:CC,inputsToSave:["x"],gradFunc:iG.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xwe={kernelName:kC,saveAllInputs:!0,gradFunc:(t,e,n)=>{const i=e.map(l=>l.shape),{axis:s}=n,r=In(s,e[0].shape)[0],o=i.map(l=>l[r]);return Za(t,o,r).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ywe={kernelName:IC,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[i,s]=e,{dilations:r,strides:o,pad:a,dataFormat:l}=n;return ce(im(r),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`),{x:()=>_3(i.shape,t,s,o,a,l),filter:()=>G3(i,t,s.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zwe={kernelName:NC,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[i,s]=e,{strides:r,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>rm(t,s,r,o,a,1,l),filter:()=>G3(t,i,s.shape,r,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qwe(t,e,n,i,s){let r=t;t.rank===4&&(r=Ae(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=Ae(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),ce(r.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${r.shape}.`),ce(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),ce(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),ce(r.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${r.shape[4]}) must match input depth in filter (${n[3]}.`),ce(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:r,dy:o},l={strides:i,pad:s,filterShape:n};return ke.runKernel(FL,a,l)}const Jwe=Re({conv3DBackpropFilter_:Qwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e_e={kernelName:EC,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:i,strides:s,pad:r}=n;ce(im(i),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const[o,a]=e;return{x:()=>UH(o.shape,t,a,s,r),filter:()=>Jwe(o,t,a.shape,s,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t_e={kernelName:db,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ce(Cs(l9(It(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n_e={kernelName:fb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ce(c9(It(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i_e={kernelName:TC,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[i]=e,{axis:s,exclusive:r,reverse:o}=n;return{x:()=>{const a=os([s],i.rank);let l=GH(t,s,r,!o);return a!=null&&(l=Un(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s_e={kernelName:AC,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:i,strides:s,pad:r,dimRoundingMode:o}=n,a=i??[1,1];ce(im(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return ce(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),ce(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),ce(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),ce(Xr(s,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${a}'.`),ta("depthwiseConv2d",r,o),{x:()=>x2e(l.shape,t,c,s,r,a,o),filter:()=>y2e(l,t,c.shape,s,r,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r_e={kernelName:RC,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[i,s]=e,r={x:i,filter:s,dy:t},o={x:i,filter:s,dy:t};return{x:()=>ke.runKernel(qE,r,n),filter:()=>ke.runKernel(KE,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o_e={kernelName:mb,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,i={dy:t,y:n};return{x:()=>ke.runKernel(qL,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a_e={kernelName:gb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,i=Ce(ku(Cs(Vi(n))),2/Math.sqrt(Math.PI));return{x:()=>Ce(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l_e={kernelName:vb,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ce(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c_e={kernelName:PC,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>Ae(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u_e={kernelName:yb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ce(t,ku(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h_e={kernelName:bb,gradFunc:t=>({x:()=>Hn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d_e={kernelName:xb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,i]=e,s=mn(n.shape,i.shape);return{a:()=>{const a=Ut(t,It(i,"float32")),l=Zs(n.shape,s);return l.length>0?Ae(Vt(a,l),n.shape):a},b:()=>{let a=Ce(t,It(n,"float32"));const l=Zs(i.shape,s);l.length>0&&(a=Ae(Vt(a,l),i.shape));const c=Vi(i);return Cs(Ut(a,It(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f_e={kernelName:DC,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:i}=n,[s,r,o,a]=e,l=a??si(1),c=Zs(r.shape,s.shape),u=[];if(r.rank===1){for(let S=0;S<s.shape.length-1;++S)u.push(s.shape[S]);u.push(1)}const h=en(s,r),d=Ce(t,l),p=r9(rt(o,si(i))),m=Ce(Ce(Ce(p,p),p),si(-.5));return{x:()=>r.rank===1?Ae(Ce(Ce(t,yc(Ae(p,[1,1,1,r.shape[0]]),u)),l),s.shape):Ae(Ce(Ce(t,p),l),s.shape),mean:()=>{let S=Ce(Ce(p,si(-1)),d);return r.rank===1&&(S=Vt(S,c)),Ae(S,r.shape)},variance:()=>{let S=Ce(Ce(m,h),d);return r.rank===1&&(S=Vt(S,c)),Ae(S,r.shape)},scale:()=>{const S=Ce(h,p);let k=Ce(t,S);return r.rank===1&&(k=Vt(k,c)),Ae(k,r.shape)},offset:()=>{let S=t;return r.rank===1&&(S=Vt(S,c)),Ae(S,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p_e={kernelName:$C,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[i,s]=e,{axis:r,batchDims:o}=n,a=In(r,i.shape)[0],l=(c,u,h)=>()=>{const d=c.shape,p=u.size,m=d.slice(0,a),g=m.length,y=d.slice(r,d.length).slice(1),v=y.length,b=WF(0,g),w=WF(g+1,g+1+v),S=UF([m,[p],y]),k=Ae(h,S),I=Ae(u,[p]),T=UF([[g],b,w]),E=Un(k,T);let O=p9(E,I,c.shape[a]);const F=Cf(T);return O=Un(O,F),O};if(o===1){const c=i.shape[0],u=i.split(c,0);return{x:()=>Nh(u.map((p,m)=>l(p,s.slice(m,1),t.slice(m,1))())).reshape(i.shape),indices:()=>s}}else return{x:l(i,s,t),indices:()=>s}}};function WF(t,e){const n=[];for(let i=t;i<e;++i)n.push(i);return n}function UF(t){const e=[];for(let n=0;n<t.length;++n)for(let i=0;i<t[n].length;++i)e.push(t[n][i]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m_e={kernelName:wb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,i]=e;return{a:()=>Hn(n),b:()=>Hn(i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g_e={kernelName:_b,gradFunc:t=>({x:()=>It(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v_e={kernelName:Sb,gradFunc:t=>({x:()=>Hn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y_e={kernelName:Cb,gradFunc:t=>({x:()=>Hn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b_e={kernelName:kb,gradFunc:t=>({x:()=>Hn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x_e={kernelName:MC,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[i]=e,{alpha:s}=n,r=il(i,0);return{x:()=>wo(r,t,Ce(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w_e={kernelName:Nb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ut(t,rt(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const __e={kernelName:Ib,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ut(t,It(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S_e={kernelName:rve,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[i]=e,{axis:s}=n;return{logits:()=>{const o=ku(i);return en(t,Ce(Vt(t,s,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C_e(t,e,n,i=5,s=1,r=1,o=.5){const a={x:t,y:e,dy:n},l={depthRadius:i,bias:s,alpha:r,beta:o};return ke.runKernel(JL,a,l)}const k_e=Re({localResponseNormalizationBackprop_:C_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I_e={kernelName:WC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[i,s]=e,{depthRadius:r,bias:o,alpha:a,beta:l}=n;return{x:()=>k_e(i,s,t,r,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sG(t,e,n,i){return e.rank<n.rank&&(e=Ae(e,Fs(e.shape,i))),t.rank<n.rank&&(t=Ae(t,Fs(t.shape,i))),{x:()=>Ce(t,It(Cu(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HF={kernelName:UC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const i=n,{reductionIndices:s}=i,r=e[0],o=e[1],a=In(s,r.shape),l=sG(t,o,r,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N_e={kernelName:Eb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,i]=e;return{a:()=>Ce(t,It(xm(n,i),"float32")),b:()=>Ce(t,It(j_(n,i),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E_e(t,e,n,i,s,r,o){const a=ve(t,"dy","maxPool3dGrad"),l=ve(e,"input","maxPool3dGrad"),c=ve(n,"output","maxPool3dGrad");let u=a,h=l,d=c,p=!1;l.rank===4&&(p=!0,u=Ae(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),h=Ae(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=Ae(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),ce(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),ce(h.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),ce(d.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),ta("maxPool3dGrad",r,o);const m={dy:u,input:h,output:d},g={filterSize:i,strides:s,pad:r,dimRoundingMode:o},y=ke.runKernel(t3,m,g);return p?Ae(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const T_e=Re({maxPool3dGrad_:E_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A_e={kernelName:GC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[i,s]=e,{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>T_e(t,i,s,r,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R_e(t,e,n,i,s,r,o){const a=ve(t,"dy","maxPoolGrad"),l=ve(e,"input","maxPoolGrad"),c=ve(n,"output","maxPoolGrad");ce(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),ce(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),ce(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),ta("maxPoolGrad",r,o);const u={dy:a,input:l,output:c},h={filterSize:i,strides:s,pad:r,dimRoundingMode:o};return ke.runKernel(e3,u,h)}const L_e=Re({maxPoolGrad_:R_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P_e={kernelName:HC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[i,s]=e,{filterSize:r,strides:o,pad:a}=n;return{x:()=>L_e(t,i,s,r,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D_e={kernelName:qC,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[i]=e,{axis:s}=n,r=In(s,i.shape),a=mr(i.shape,r)[1],l=He(a);return{x:()=>{const u=i.shape.slice();r.forEach(p=>{u[p]=1});const h=Ae(t,u);return Ut(Ce(h,If(i.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $_e={kernelName:KC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const i=n,{axis:s}=i,[r,o]=e,a=In(s,r.shape),l=sG(t,o,r,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O_e={kernelName:Tb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,i]=e;return{a:()=>Ce(t,It(B0(n,i),"float32")),b:()=>Ce(t,It(il(n,i),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M_e={kernelName:XC,inputsToSave:["x"],gradFunc:(t,e,n)=>{const i=e[0],{paddings:s}=n,r=s.map(o=>o[0]);return{x:()=>Di(t,r,i.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F_e={kernelName:Ab,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,i]=e,s=mn(n.shape,i.shape);return{a:()=>{const a=Zs(n.shape,s);return a.length>0?Ae(Vt(t,a),n.shape):t},b:()=>{const a=Ce(t,Cs(kk(Ut(n,i)))),l=Zs(i.shape,s);return l.length>0?Ae(Vt(a,l),i.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B_e={kernelName:Rb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,i]=e,s=mn(n.shape,i.shape);return{a:()=>{const a=Ce(t,It(i,"float32")),l=Zs(n.shape,s);return l.length>0?Ae(Vt(a,l),n.shape):a},b:()=>{const a=Ce(t,It(n,"float32")),l=Zs(i.shape,s);return l.length>0?Ae(Vt(a,l),i.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z_e={kernelName:YC,gradFunc:t=>({x:()=>Cs(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j_e={kernelName:JC,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>hr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V_e={kernelName:QC,gradFunc:t=>({x:()=>Hn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W_e={kernelName:ek,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:i}=n;return lm(t,i).map(r=>()=>r)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GF={kernelName:tk,inputsToSave:["x"],gradFunc:(t,e,n)=>{const i=e[0],{paddings:s}=n,r=s.map(o=>o[0]);return{x:()=>Di(t,r,i.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U_e={kernelName:Lb,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,i,s]=e,r=n,o=i,a=mn(r.shape,o.shape);return{a:()=>{const u=It(o,"float32");let h=Ce(t,Ce(u,om(r,en(u,si(1)))));const d=Zs(r.shape,a);return d.length>0&&(h=Vt(h,d)),Ae(h,r.shape)},b:()=>{const u=il(r,0),h=wo(u,Iu(r),Hn(r));let d=Ce(t,Ce(s,h));const p=Zs(o.shape,a);return p.length>0&&(d=Vt(d,p)),Ae(d,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H_e={kernelName:nk,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,i]=e,s=il(n,0);return{x:()=>wo(s,t,Ce(t,i)),alpha:()=>{let r=wo(s,Hn(t),Ce(t,n));const o=Zs(i.shape,t.shape);return o.length>0&&(r=Vt(r,o)),Ae(r,i.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G_e(t,e,n){const i=t.shape.slice();i[n]=1;const s=Ae(e,i),r=aT(t,n,!0,!1),o=aT(t,n,!0,!0),a=Ce(r,o);return Ce(s,a)}function q_e(t,e,n){const i=t.shape.length,s=i-n.length,r=os(n,i);let o=t;r!=null&&(o=Un(t,r));const a=o.shape.slice(),c=a.splice(i-n.length,n.length).reduce((d,p)=>d*p,1);a.push(c);const u=o.reshape(a);let h=G_e(u,e,s);if(h=h.reshape(o.shape),r!=null){const d=Cf(r);h=Un(h,d)}return h}const K_e={kernelName:ik,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[i]=e,{axis:s}=n;let r=[];return s==null?r=i.shape.map((o,a)=>a):typeof s=="number"?r=[s]:r=s,{x:()=>q_e(i,t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X_e={kernelName:pb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,i]=e,s=mn(n.shape,i.shape);return{a:()=>{const a=Ut(t,It(i,"float32")),l=Zs(n.shape,s);return l.length>0?Ae(Vt(a,l),n.shape):a},b:()=>{let a=Ce(t,It(n,"float32"));const l=Zs(i.shape,s);l.length>0&&(a=Ae(Vt(a,l),i.shape));const c=Vi(i);return Cs(Ut(a,It(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y_e={kernelName:Pb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ut(t,Cs(Vi(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z_e={kernelName:$b,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,i=Ce(B0(n,6),tx(n));return{x:()=>Ce(t,It(i,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q_e={kernelName:Db,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ce(t,It(tx(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J_e={kernelName:sk,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ae(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eSe={kernelName:ok,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[i]=e,s={dy:t,images:i};return{images:()=>ke.runKernel(l3,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tSe={kernelName:rk,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[i]=e,s={dy:t,images:i};return{images:()=>ke.runKernel(a3,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nSe={kernelName:ak,gradFunc:(t,e,n)=>{const{dims:i}=n,s=In(i,t.shape);return{x:()=>am(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iSe={kernelName:Ob,gradFunc:t=>({x:()=>Hn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sSe={kernelName:Mb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Cs(Ut(t,Ce(om(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rSe={kernelName:lk,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>It(Hn(n),"float32"),t:()=>Ce(t,It(n,t.dtype)),e:()=>Ce(t,It(T3(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oSe={kernelName:Fb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const i=il(n,si(0)),s=si(Ek),r=si(Tk),o=Ce(t,r),a=Ce(Ce(t,s),ku(It(n,"float32")));return wo(i,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aSe={kernelName:Vb,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ce(t,Ce(n,en(si(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lSe={kernelName:jb,gradFunc:t=>({x:()=>Hn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cSe={kernelName:Bb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ce(S3(It(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uSe={kernelName:zb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ce(HH(It(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hSe={kernelName:ck,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[i]=e,{begin:s,size:r}=n,o=i.shape,[a,l]=Ik(i,s,r),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],o[u]-a[u]-l[u]]);return{x:()=>P3(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dSe={kernelName:fk,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[i]=e,{dim:s}=n,r=!0,o=Ce(t,i);return{logits:()=>en(o,Ce(Vt(o,[s],r),i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fSe={kernelName:Wb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ce(t,F0(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qF={kernelName:hk,gradFunc:(t,e,n)=>{const{blockShape:i,paddings:s}=n;return{x:()=>w3(t,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KF={kernelName:dk,gradFunc:(t,e,n)=>{const{axis:i}=n;return{x:()=>Yo(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pSe={kernelName:Ub,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ut(t,Ce(Kr(It(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mSe={kernelName:c3,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ce(t,Ce(It(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gSe={kernelName:Hb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,i]=e,s=si(2);return{a:()=>Ce(t,Ce(s,en(n,i))),b:()=>Ce(t,Ce(s,en(i,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vSe={kernelName:Yb,gradFunc:t=>({x:()=>Hn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ySe={kernelName:Gb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,i]=e,s=mn(n.shape,i.shape);return{a:()=>{let a=t;const l=Zs(n.shape,s);return l.length>0&&(a=Vt(a,l)),Ae(a,n.shape)},b:()=>{let a=t;const l=Zs(i.shape,s);return l.length>0&&(a=Vt(a,l)),Ae(Cs(a),i.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bSe={kernelName:uk,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[i]=e,s=i.shape.slice(),{axis:r}=n;In(r,i.shape).forEach(c=>{s[c]=1});const a=Ae(t,s),l=Ce(a,If(i.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xSe={kernelName:qb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ut(t,Vi(S3(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wSe={kernelName:Kb,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ce(en(si(1),Vi(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Se={kernelName:Xb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[i]=e,{reps:s}=n;return{x:()=>{let o=Hn(i);if(i.rank===1)for(let a=0;a<s[0];++a)o=rt(o,Di(t,[a*i.shape[0]],[i.shape[0]]));else if(i.rank===2)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)o=rt(o,Di(t,[a*i.shape[0],l*i.shape[1]],[i.shape[0],i.shape[1]]));else if(i.rank===3)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)o=rt(o,Di(t,[a*i.shape[0],l*i.shape[1],c*i.shape[2]],[i.shape[0],i.shape[1],i.shape[2]]));else if(i.rank===4)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let u=0;u<s[3];++u)o=rt(o,Di(t,[a*i.shape[0],l*i.shape[1],c*i.shape[2],u*i.shape[3]],[i.shape[0],i.shape[1],i.shape[2],i.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${i.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SSe={kernelName:Bg,gradFunc:(t,e,n)=>{const i=n,{perm:s}=i,r=Cf(s);return{x:()=>Un(t,r)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CSe={kernelName:pk,gradFunc:(t,e,n)=>{const i=n,{axis:s}=i;return{value:()=>Nh(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kSe={kernelName:mk,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ISe(t,n)}}};function ISe(t,e){const n=kf(e,Hn(e)),i=I3(t,n);let s=xm(e,si(0,"int32"));const r=i.rank-s.rank;for(let a=0;a<r;++a)s=jo(s,a+1);s=Ih(s,If(i.shape,"bool"));const o=Hn(i);return wo(s,i,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NSe={kernelName:gk,gradFunc:t=>({x:()=>Hn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ESe=[iG,kwe,Iwe,Nwe,Ewe,Twe,Awe,Rwe,Lwe,Pwe,Dwe,$we,Fwe,jwe,Vwe,Wwe,Uwe,Hwe,Gwe,qwe,Kwe,Xwe,Zwe,Ywe,e_e,t_e,n_e,i_e,s_e,r_e,X_e,o_e,a_e,l_e,c_e,u_e,d_e,h_e,f_e,p_e,m_e,g_e,v_e,y_e,b_e,x_e,w_e,__e,S_e,I_e,HF,HF,N_e,A_e,P_e,D_e,$_e,O_e,M_e,F_e,B_e,z_e,j_e,V_e,W_e,GF,GF,U_e,H_e,K_e,Y_e,Z_e,Q_e,J_e,eSe,tSe,nSe,iSe,sSe,rSe,oSe,aSe,lSe,cSe,uSe,hSe,dSe,fSe,qF,qF,KF,KF,pSe,gSe,mSe,vSe,ySe,bSe,xSe,wSe,_Se,SSe,CSe,kSe,NSe];for(const t of ESe)lve(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.abs=function(){return this.throwIfDisposed(),mo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.acos=function(){return this.throwIfDisposed(),u1e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.acosh=function(){return this.throwIfDisposed(),d1e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.add=function(t){return this.throwIfDisposed(),rt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.all=function(t,e){return this.throwIfDisposed(),jH(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.any=function(t,e){return this.throwIfDisposed(),rT(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.argMax=function(t){return this.throwIfDisposed(),by(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.argMin=function(t){return this.throwIfDisposed(),v1e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.asScalar=function(){return this.throwIfDisposed(),ce(this.size===1,()=>"The array must have only 1 element."),Ae(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.asType=function(t){return this.throwIfDisposed(),It(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as1D=function(){return this.throwIfDisposed(),Ae(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as2D=function(t,e){return this.throwIfDisposed(),Ae(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),Ae(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as4D=function(t,e,n,i){return this.throwIfDisposed(),Ae(this,[t,e,n,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as5D=function(t,e,n,i,s){return this.throwIfDisposed(),Ae(this,[t,e,n,i,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.asin=function(){return this.throwIfDisposed(),b1e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.asinh=function(){return this.throwIfDisposed(),w1e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.atan=function(){return this.throwIfDisposed(),S1e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.atan2=function(t){return this.throwIfDisposed(),k1e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.atanh=function(){return this.throwIfDisposed(),N1e(this)};Ve().prototype.avgPool=function(t,e,n,i){return this.throwIfDisposed(),x3(this,t,e,n,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),w3(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.batchNorm=function(t,e,n,i,s){return this.throwIfDisposed(),wk(this,t,e,n,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.broadcastTo=function(t){return this.throwIfDisposed(),C1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.cast=function(t){return this.throwIfDisposed(),It(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.ceil=function(){return this.throwIfDisposed(),eye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Ja(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Hs&&(t=[t]),Yo([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.conv1d=function(t,e,n,i,s,r){return this.throwIfDisposed(),VH(this,t,e,n,i,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.conv2dTranspose=function(t,e,n,i,s){return this.throwIfDisposed(),WH(this,t,e,n,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.conv2d=function(t,e,n,i,s,r){return this.throwIfDisposed(),rm(this,t,e,n,i,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.cos=function(){return this.throwIfDisposed(),S3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.cosh=function(){return this.throwIfDisposed(),HH(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),aT(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),GH(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),kye(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.depthwiseConv2d=function(t,e,n,i,s,r){return this.throwIfDisposed(),C3(this,t,e,n,i,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.dilation2d=function(t,e,n,i,s){return this.throwIfDisposed(),Eye(this,t,e,n,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.divNoNan=function(t){return this.throwIfDisposed(),Pye(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.div=function(t){return this.throwIfDisposed(),Ut(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.dot=function(t){return this.throwIfDisposed(),$ye(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.elu=function(){return this.throwIfDisposed(),Sk(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.equal=function(t){return this.throwIfDisposed(),Cu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.erf=function(){return this.throwIfDisposed(),qH(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),qye(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.exp=function(){return this.throwIfDisposed(),ku(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.expandDims=function(t){return this.throwIfDisposed(),jo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.expm1=function(){return this.throwIfDisposed(),Zye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.fft=function(){return this.throwIfDisposed(),h9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.flatten=function(){return this.throwIfDisposed(),Ae(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.floor=function(){return this.throwIfDisposed(),kk(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.floorDiv=function(t){return this.throwIfDisposed(),zH(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.gather=function(t,e,n){return this.throwIfDisposed(),I3(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.greaterEqual=function(t){return this.throwIfDisposed(),xm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.greater=function(t){return this.throwIfDisposed(),il(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.ifft=function(){return this.throwIfDisposed(),lT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.irfft=function(){return this.throwIfDisposed(),Vxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.isFinite=function(){return this.throwIfDisposed(),obe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.isInf=function(){return this.throwIfDisposed(),lbe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.isNaN=function(){return this.throwIfDisposed(),ube(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.leakyRelu=function(t){return this.throwIfDisposed(),E3(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.lessEqual=function(t){return this.throwIfDisposed(),B0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.less=function(t){return this.throwIfDisposed(),j_(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.localResponseNormalization=function(t,e,n,i){return this.throwIfDisposed(),mbe(this,t,e,n,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logSigmoid=function(){return this.throwIfDisposed(),_be(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logSoftmax=function(t){return this.throwIfDisposed(),QH(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),JH(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.log=function(){return this.throwIfDisposed(),Iu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.log1p=function(){return this.throwIfDisposed(),ZH(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Ih(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logicalNot=function(){return this.throwIfDisposed(),T3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logicalOr=function(t){return this.throwIfDisposed(),e9(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logicalXor=function(t){return this.throwIfDisposed(),Abe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),ni(this,t,e,n)};Ve().prototype.maxPool=function(t,e,n,i){return this.throwIfDisposed(),A3(this,t,e,n,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.max=function(t,e){return this.throwIfDisposed(),Cc(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.maximum=function(t){return this.throwIfDisposed(),kf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.mean=function(t,e){return this.throwIfDisposed(),Os(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.min=function(t,e){return this.throwIfDisposed(),z_(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.minimum=function(t){return this.throwIfDisposed(),_y(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),Fbe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.mod=function(t){return this.throwIfDisposed(),zbe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.mul=function(t){return this.throwIfDisposed(),Ce(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.neg=function(){return this.throwIfDisposed(),Cs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.norm=function(t,e,n){return this.throwIfDisposed(),Ck(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.notEqual=function(t){return this.throwIfDisposed(),V_(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),L3(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.onesLike=function(){return this.throwIfDisposed(),Ml(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.pad=function(t,e){return this.throwIfDisposed(),P3(this,t,e)};Ve().prototype.pool=function(t,e,n,i,s,r){return this.throwIfDisposed(),Ybe(this,t,e,n,i,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.pow=function(t){return this.throwIfDisposed(),om(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.prelu=function(t){return this.throwIfDisposed(),$3(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.prod=function(t,e){return this.throwIfDisposed(),Jbe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.reciprocal=function(){return this.throwIfDisposed(),_xe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.relu=function(){return this.throwIfDisposed(),_m(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.relu6=function(){return this.throwIfDisposed(),i9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.reshapeAs=function(t){return this.throwIfDisposed(),Ae(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.reshape=function(t){return this.throwIfDisposed(),Ae(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),g9(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),v9(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.reverse=function(t){return this.throwIfDisposed(),am(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.rfft=function(){return this.throwIfDisposed(),Hxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.round=function(){return this.throwIfDisposed(),s9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.rsqrt=function(){return this.throwIfDisposed(),r9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.selu=function(){return this.throwIfDisposed(),o9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.separableConv2d=function(t,e,n,i,s,r){return this.throwIfDisposed(),a9(this,t,e,n,i,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sigmoid=function(){return this.throwIfDisposed(),F0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sign=function(){return this.throwIfDisposed(),Rxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sin=function(){return this.throwIfDisposed(),l9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sinh=function(){return this.throwIfDisposed(),c9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.slice=function(t,e){return this.throwIfDisposed(),Di(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.softmax=function(t){return this.throwIfDisposed(),H3(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.softplus=function(){return this.throwIfDisposed(),Qb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),D3(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.split=function(t,e){return this.throwIfDisposed(),Za(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sqrt=function(){return this.throwIfDisposed(),Kr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.square=function(){return this.throwIfDisposed(),Vi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.squaredDifference=function(t){return this.throwIfDisposed(),qxe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.squeeze=function(t){return this.throwIfDisposed(),ex(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Hs?[this,t]:[this,...t];return Nh(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.step=function(t){return this.throwIfDisposed(),tx(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.stridedSlice=function(t,e,n,i,s,r,o,a){return this.throwIfDisposed(),Qxe(this,t,e,n,i,s,r,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sub=function(t){return this.throwIfDisposed(),en(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sum=function(t,e){return this.throwIfDisposed(),Vt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.tan=function(){return this.throwIfDisposed(),e2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.tanh=function(){return this.throwIfDisposed(),xk(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.tile=function(t){return this.throwIfDisposed(),yc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.toBool=function(){return this.throwIfDisposed(),It(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.toFloat=function(){return this.throwIfDisposed(),It(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.toInt=function(){return this.throwIfDisposed(),It(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.topk=function(t,e){return this.throwIfDisposed(),i2e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.transpose=function(t){return this.throwIfDisposed(),Un(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.unique=function(t){return this.throwIfDisposed(),o2e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),p9(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.unstack=function(t){return this.throwIfDisposed(),lm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.where=function(t,e){return this.throwIfDisposed(),wo(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.zerosLike=function(){return this.throwIfDisposed(),Hn(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class au extends Error{constructor(e){super(e),Object.setPrototypeOf(this,au.prototype)}}class El extends Error{constructor(e){super(e),Object.setPrototypeOf(this,El.prototype)}}class we extends Error{constructor(e){super(e),Object.setPrototypeOf(this,we.prototype)}}class _n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,_n.prototype)}}class NP extends Error{constructor(e){super(e),Object.setPrototypeOf(this,NP.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rG{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const i=this.cache.keys().next().value;this.cache.delete(i)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cm(t,e){if(Array.isArray(t)){let n=[];for(let i=0;i<e;i++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function lu(t,e){if(!t)throw new NP(e)}function XF(t,e){let n=0;for(const i of t)i===e&&n++;return n}function Vo(t){return t.length===1?t[0]:t}function ui(t){return Array.isArray(t)?t:[t]}function Qu(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function gp(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let vl={};function EP(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function hT(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>hT(e));else{const e=Object.keys(t);for(const n of e){const i=t[n];i!=null&&typeof i=="object"&&(!Array.isArray(i)&&i.type==="ndarray"&&typeof i.value=="number"?t[n]=i.value:hT(i))}}}function rx(t,e={},n={},i="object",s=!1){if(typeof t=="string"){const r=t;let o;if(r in n)o=n[r];else if(r in vl)o=vl[r];else if(o=e[r],o==null)throw new we(`Unknown ${i}: ${t}. This may be due to one of the following reasons:
1. The ${i} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${i} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const r=t;if(r.className==null||r.config==null)throw new we(`${i}: Improper config format: ${JSON.stringify(r)}.
'className' and 'config' must set.`);const o=r.className;let a,l;if(o in n?[a,l]=n[o]:o in vl?[a,l]=vl.className:o in e&&([a,l]=e[o]),a==null)throw new we(`Unknown ${i}: ${o}. This may be due to one of the following reasons:
1. The ${i} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${i} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const p of Object.keys(vl))c[p]=vl[p];for(const p of Object.keys(n))c[p]=n[p];const u=r.config;u.customObjects=c;const h=Object.assign({},vl);for(const p of Object.keys(n))vl[p]=n[p];hT(r.config);const d=l(a,r.config,n,s);return vl=Object.assign({},h),d}else{const c=Object.assign({},vl);for(const h of Object.keys(n))vl[h]=n[h];const u=new a(r.config);return vl=Object.assign({},c),u}}}function TSe(t,e){return t<e?-1:t>e?1:0}function k2(t,e){return-1*TSe(t,e)}function qd(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function ASe(t){if(t==null)throw new we(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Cm(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new we(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function TP(t,e,n=0,i=1/0){return lu(n>=0),lu(i>=n),Array.isArray(t)&&t.length>=n&&t.length<=i&&t.every(s=>typeof s===e)}function pr(t,e){Array.isArray(t)?(ce(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,i)=>pr(n,`element ${i+1} of ${e}`))):ce(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${oG(t)}.`)}function oG(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>oG(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function RSe(t,e,n){let i=n!=null?n():zo(),s;return(...o)=>{const a=n!=null?n():zo();return a-i<e||(i=a,s=t(...o)),s}}function aG(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let LSe=0;function lG(){return LSe++}const I2={};function Ak(t=""){return t in I2||(I2[t]=0),I2[t]+=1,t+I2[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const PSe=["channelsFirst","channelsLast"],DSe=["nearest","bilinear"],$Se=["valid","same","causal"],OSe=["max","avg"],MSe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const rg=new Map;function Ns(t){Cm(PSe,"DataFormat",t)}function FSe(t){Cm(DSe,"InterpolationFormat",t)}function sl(t){Cm($Se,"PaddingMode",t)}function cG(t){Cm(OSe,"PoolMode",t)}const k1=[],YF="/";function $p(t,e){k1.push(t);try{const n=e();return k1.pop(),n}catch(n){throw k1.pop(),n}}function BSe(){return k1.length===0?"":k1.join(YF)+YF}function uG(t){if(!dG(t))throw new Error("Not a valid tensor name: '"+t+"'");return BSe()+t}function hG(t){if(!dG(t))throw new Error("Not a valid tensor name: '"+t+"'");rg.has(t)||rg.set(t,0);const e=rg.get(t);if(rg.set(t,rg.get(t)+1),e>0){const n=`${t}_${e}`;return rg.set(n,1),n}else return t}const zSe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function dG(t){return!!t.match(zSe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jSe(t){return t===parseInt(t.toString(),10)}function Kd(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let i=1;for(let s=e;s<n;++s)i*=t[s];return i}function f0(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const i=t[n];i<e&&(e=i)}return e}function of(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const i=t[n];i>e&&(e=i)}return e}function Nc(t,e){if(e<t)throw new we(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let i=t;i<e;++i)n.push(i);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let NN;function qs(){return NN==null&&(NN=Dve().epsilon()),NN}function Ec(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wu(t,e){return It(t,e)}function ox(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),Ae(t,n)}function VSe(t,e){return $e(()=>{if(t.shape.length!==2)throw new we(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=ox(t,1);return dT(n,[1,e,1])})}function WSe(t){const e=[Kd(t.shape)];return Ae(t,e)}function USe(t){if(t.rank<=1)throw new we(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Kd(t.shape,1)];return Ae(t,e)}function Op(t,e,n){return $e(()=>{switch(t.rank){case 1:return W3(t,e,n);case 2:return u9(t,[e,0],[n,t.shape[1]]);case 3:return U3(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return U_(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Di(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Di(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new we(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function EN(t,e,n){return $e(()=>{switch(t.rank){case 1:return W3(t,e,n);case 2:return u9(t,[0,e],[t.shape[0],n]);case 3:return U3(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return U_(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new we(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function N2(t,e,n,i){return $e(()=>{switch(t.rank){case 1:return W3(t,e,n);case 2:switch(i){case 1:return Op(t,e,n);case 2:return EN(t,e,n);default:throw new we(`The axis is not within the rank of the tensor ${i}`)}case 3:switch(i){case 1:return Op(t,e,n);case 2:return U3(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return EN(t,e,n);default:throw new we(`The axis is not within the rank of the tensor ${i}`)}case 4:switch(i){case 1:return Op(t,e,n);case 2:return U_(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return U_(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return EN(t,e,n);default:throw new we(`The axis is not within the rank of the tensor ${i}`)}default:throw new we(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function AP(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Yo(t,e)}function ZF(t,e){switch(t.rank){case 1:return iye([t,e]);case 2:return rye([t,e],0);case 3:return aye([t,e],0);case 4:return cye([t,e],0);default:throw new we(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function dT(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new we(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return yc(t,e)}function Rk(t,e=0,n=1,i,s){return yxe(t,e,n,i,s)}function _u(t,e,n,i){if(t.rank<2||e.rank<2)throw new _n(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],r=e.shape.slice(-2)[0];if(s!==r)throw new _n(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return MF({a:t,b:e,transposeA:!1,transposeB:!1,bias:i?fT(t.rank,i,Ec()):null,activation:n});{const s=t.shape.slice(),r=s.pop();t=Ae(t,[-1,r]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),c=[...o,a],u=Array.from({length:e.rank},(m,g)=>g===0?e.rank-2:g<=e.rank-2?g-1:g);e=Ae(Un(e,u),[l,-1]);const h=[...s,...c];return Ae(MF({a:t,b:e,transposeA:!1,transposeB:!1,bias:i?fT(t.rank,i,Ec()):null,activation:n}),h)}}function fG(t,e,n){return $e(()=>(Array.isArray(e)?e=qo(e,"int32"):e=It(e,"int32"),I3(t,e,n)))}function ax(t){return Ce(t,t)}function fT(t,e,n){const i=e.shape;if(e.rank!==1&&e.rank!==t)throw new we(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return i.length===1?Ae(e,[1,i[0],1,1,1]):Ae(e,[1,i[3],i[0],i[1],i[2]]);if(n==="channelsLast")return i.length===1?Ae(e,[1,1,1,1,i[0]]):Ae(e,[1].concat(i))}else if(t===4){if(n==="channelsFirst")return i.length===1?Ae(e,[1,i[0],1,1]):Ae(e,[1,i[2],i[0],i[1]]);if(n==="channelsLast")return i.length===1?Ae(e,[1,1,1,i[0]]):Ae(e,[1].concat(i))}else if(t===3){if(n==="channelsFirst")return i.length===1?Ae(e,[1,i[0],1]):Ae(e,[1,i[1],i[0]]);if(n==="channelsLast")return i.length===1?Ae(e,[1,1,i[0]]):Ae(e,[1].concat(i))}else if(t<3)return e;throw new we(`Unsupported input rank by biasAdd: ${e.rank}`)}function Rc(t,e,n){return $e(()=>(n==null&&(n=Ec()),Ns(n),rt(t,fT(t.rank,e,n))))}function HSe(t,e=1){if(e!==1)throw new _n(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Sk(t)}function GSe(t){return $e(()=>Ut(t,rt(mo(t),1)))}function pG(t,e,n,i){return $e(()=>f2e(t,e,n,i))}function qSe(t){return $e(()=>{const e=rt(.5,Ce(.2,t));return Ja(e,0,1)})}function lx(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const KSe=["fanIn","fanOut","fanAvg"],XSe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YSe(t){Cm(KSe,"FanMode",t)}function ZSe(t){Cm(XSe,"Distribution",t)}class Bl extends j0{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class mG extends Bl{apply(e,n){return hr(e,n)}}mG.className="Zeros";nt(mG);class RP extends Bl{apply(e,n){return If(e,n)}}RP.className="Ones";nt(RP);class gG extends Bl{constructor(e){if(super(),typeof e!="object")throw new we(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new we(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return $e(()=>Ce(si(this.value),If(e,n)))}getConfig(){return{value:this.value}}}gG.className="Constant";nt(gG);class vG extends Bl{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Jb(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}vG.className="RandomUniform";nt(vG);class yG extends Bl{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new _n(`randomNormal does not support dType ${n}.`);return Rk(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}yG.className="RandomNormal";nt(yG);class bG extends Bl{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new _n(`truncatedNormal does not support dType ${n}.`);return f9(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}bG.className="TruncatedNormal";nt(bG);class xG extends Bl{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return $e(()=>{if(e.length!==2||e[0]!==e[1])throw new we("Identity matrix initializer can only be used for 2D square matrices.");return Ce(this.gain,YH(e[0]))})}getConfig(){return{gain:this.gain}}}xG.className="Identity";nt(xG);function QSe(t,e="channelsLast"){let n,i;if(Ns(e),t.length===2)n=t[0],i=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=Kd(t,2);n=t[1]*s,i=t[0]*s}else if(e==="channelsLast"){const s=Kd(t,0,t.length-2);n=t[t.length-2]*s,i=t[t.length-1]*s}}else{const s=Kd(t);n=Math.sqrt(s),i=Math.sqrt(s)}return[n,i]}class Ta extends Bl{constructor(e){if(super(),e.scale<0)throw new we(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,YSe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,ZSe(this.distribution),this.seed=e.seed}apply(e,n){const i=QSe(e),s=i[0],r=i[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,s):this.mode==="fanOut"?o/=Math.max(1,r):o/=Math.max(1,(s+r)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new _n(`${this.getClassName()} does not support dType ${n}.`);return f9(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return Jb(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Ta.className="VarianceScaling";nt(Ta);class LP extends Ta{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ta.className}}LP.className="GlorotUniform";nt(LP);class PP extends Ta{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ta.className}}PP.className="GlorotNormal";nt(PP);class DP extends Ta{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ta.className}}DP.className="HeNormal";nt(DP);class $P extends Ta{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ta.className}}$P.className="HeUniform";nt($P);class OP extends Ta{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ta.className}}OP.className="LeCunNormal";nt(OP);class MP extends Ta{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ta.className}}MP.className="LeCunUniform";nt(MP);class wG extends Bl{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return $e(()=>{if(e.length<2)throw new _n("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const i=He(e.slice(0,-1)),s=e[e.length-1],r=i*s;r>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${r}) elements: Slowness may result.`);const o=[Math.max(s,i),Math.min(s,i)],a=Rk(o,0,1,n,this.seed),l=cwe.qr(a,!1);let c=l[0];const h=l[1].flatten().stridedSlice([0],[Math.min(s,i)*Math.min(s,i)],[Math.min(s,i)+1]);return c=Ce(c,h.sign()),i<s&&(c=c.transpose()),Ce(si(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}wG.className="Orthogonal";nt(wG);const QF={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function JF(t,e={}){return rx(t,_l.getMap().classNameMap,e,"initializer")}function rs(t){return EP(t)}function Yi(t){if(typeof t=="string"){const e=t in QF?QF[t]:t;if(e==="GlorotNormal")return new PP;if(e==="GlorotUniform")return new LP;if(e==="HeNormal")return new DP;if(e==="HeUniform")return new $P;if(e==="LeCunNormal")return new OP;if(e==="LeCunUniform")return new MP;{const n={};return n.className=e,n.config={},JF(n)}}else return t instanceof Bl?t:JF(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pT(t){return Array.isArray(t)&&Array.isArray(t[0])}function H_(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function tn(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new we(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Kn(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new we(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function G_(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((i,s)=>i*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const e6="Variable";class JSe{constructor(e,n="float32",i=e6,s=!0,r=null){this.dtype=n??"float32",this.shape=e.shape,this.id=lG(),i=i??e6,this.originalName=uG(i),this.name=hG(this.originalName),this.trainable_=s,this.constraint=r,this.val=c2e(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),eCe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function eCe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function mT(t){return t.map(e=>e.read())}function FP(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ks{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Nu{constructor(e,n,i,s,r,o,a){this.dtype=e,this.shape=n,this.sourceLayer=i,this.inputs=s,this.callArgs=r,this.outputTensorIndex=a,this.id=lG(),o!=null&&(this.originalName=uG(o),this.name=hG(this.originalName)),this.rank=n.length}}let tCe=0,Lk=class{constructor(e,n){this.callArgs=n,this.id=tCe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const i of e.inboundLayers)i!=null&&i.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},nCe=0;class Nn extends j0{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=nCe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const i=this.getClassName();n=Qu(i)+"_"+Ak(i)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let i;if(e.batchInputShape!=null)i=e.batchInputShape;else if(e.inputShape!=null){let r=null;e.batchSize!=null&&(r=e.batchSize),i=[r].concat(e.inputShape)}this.batchInputShape=i;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new El(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new we(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Vo(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Vo(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new au(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new au(`Layer ${this.name} is not connected, no input to return.`);return Vo(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new au(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new au(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Vo(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=ui(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const i=ui(this.inputSpec);if(n.length!==i.length)throw new we(`Layer ${this.name} expects ${i.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const r=n[s],o=i[s];if(o==null)continue;const a=r.rank;if(o.ndim!=null&&a!==o.ndim)throw new we(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new we(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new we(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&r.dtype!==o.dtype)throw new we(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${r.dtype}.`);if(o.axes){const l=r.shape;for(const c in o.axes){const u=Number(c),h=o.axes[c],d=u>=0?l[u]:l[l.length+u];if(h!=null&&[h,null].indexOf(d)===-1)throw new we(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${h} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const c=o.shape[l],u=r.shape[l];if(c!=null&&u!=null&&c!==u)throw new we(`Input ${s} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${r.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const i=ui(e),s=rCe(e),r=oCe(e);if(s===r)throw new we("Arguments to apply() must be all SymbolicTensors or all Tensors");return $p(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of ui(e))o.push(a.shape);this.build(Vo(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&r&&(this._refCount=1)}if(this.assertInputCompatibility(e),r){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const a=ui(o),l=[];for(let c of a)i.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(o=Vo(l),this.activityRegularizer!=null)throw new _n("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=iCe(e),a=this.computeOutputShape(o);let l;const c=sCe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,h)=>new Nu(c,u,this,ui(e),n,this.name,h)):l=new Nu(c,a,this,ui(e),n,this.name),this.addInboundNode(e,l,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new _n("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((i,s)=>{i!=null&&e[s]!=null&&e[s]!==i&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new au(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const i=JSON.stringify(n.outputShapes);e.indexOf(i)===-1&&e.push(i)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new au(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new El(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return G_(this.weights)}build(e){this.built=!0}getWeights(e=!1){return mT(e?this.trainableWeights:this.weights)}setWeights(e){$e(()=>{const n=this.weights;if(n.length!==e.length)throw new we(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const i=[],s=mT(n);for(let r=0;r<s.length;++r){const o=s[r],a=n[r],l=e[r];if(!ri(o.shape,l.shape))throw new we(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);i.push([a,l])}FP(i)})}addWeight(e,n,i,s,r,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new we(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),i==null&&(i="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():Yi("zeros"));const c=s.apply(n,i),u=new JSe(c,i,e,o,a);return c.dispose(),r!=null&&this.addLoss(()=>r.apply(u.read())),o==null&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=ui(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(i=>{if(i!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,i){if(!this.supportsMasking)return;const s=this.computeMask(e,i),r=ui(n),o=ui(s);if(r.length!==o.length)throw new Error(`${this.name} outputs ${r.length} tensors but ${r.length} masks for those tensors`);for(let a=0;a<r.length;a++)r[a].kerasMask=o[a]}addInboundNode(e,n,i,s,r,o,a=null){const l=ui(e);n=ui(n),i=ui(i),s=ui(s),r=H_(r),o=H_(o);const c=[],u=[],h=[];for(const d of l)c.push(d.sourceLayer),u.push(d.nodeIndex),h.push(d.tensorIndex);new Lk({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:h,inputTensors:l,outputTensors:n,inputMasks:i,outputMasks:s,inputShapes:r,outputShapes:o},a);for(let d=0;d<n.length;d++)n[d].sourceLayer=this,n[d].nodeIndex=this.inboundNodes.length-1,n[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function iCe(t){t=ui(t);const e=[];for(const n of t)e.push(n.shape);return Vo(e)}function sCe(t){return"float32"}function _G(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const i=e.inboundNodes[n];if(i.inboundLayers.length===0)return i.inputTensors;{const s=[];for(let r=0;r<i.inboundLayers.length;r++){const o=i.inputTensors[r],a=i.inboundLayers[r],l=i.nodeIndices[r],c=_G(o,a,l);for(const u of c)s.indexOf(u)===-1&&s.push(u)}return s}}}function rCe(t){let e=!0;for(const n of ui(t))if(!(n instanceof Nu)){e=!1;break}return e}function oCe(t){let e=!0;for(const n of ui(t))if(n instanceof Nu){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class cx extends Nn{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Ak("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new we("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new we("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new we("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const i=e.dtype||"float32";this.batchInputShape=n,this.dtype=i,this.inputSpec=[{shape:n}];const s=new Nu(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new Lk({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new we(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}cx.className="InputLayer";nt(cx);function aCe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new we("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new cx({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lCe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return It(e,t.dtype)}catch{throw new we(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Nd{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Nd)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,i){if(this.id2Value[e.id]==null)this.id2Value[e.id]=lCe(e,n),this.name2Id[e.name]=e.id,i!=null&&(this.id2Mask[e.id]=i);else throw new we(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Nu){if(this.id2Value[e.id]==null)throw new we(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new we(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Nu){if(this.id2Value[e.id]==null)throw new we(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new we(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&An(this.id2Mask)}}const q_=new rG,K_=new rG;function cCe(t){q_!=null&&q_.setMaxEntries(t),K_!=null&&K_.setMaxEntries(t)}function Zv(t,e,n,i){const s=n==null?!1:n.training,r=Array.isArray(t),o=r?t:[t],a=o.map(m=>m.name),l=[],c=e.names();for(const m of a)c.indexOf(m)!==-1?l.push(e.getValue(m)):l.push(null);const u=a.join(",")+"|"+e.names().sort().join(",");let h=q_.get(u),d;if(h==null){const m=uCe(o,e);h=m.sorted,d=m.recipientCounts,q_.put(u,h),K_.put(u,d)}d={},s||Object.assign(d,K_.get(u));const p=new Nd(e);for(let m=0;m<h.length;++m){const g=h[m],y=g.sourceLayer;if(y instanceof cx)continue;const v=[],b=[],w=[];let S=!1;for(const O of g.inputs){const F=p.getValue(O),R=p.getMask(O);v.push(F),b.push(R),R!=null&&(S=!0),s||(d[O.name]--,d[O.name]===0&&!e.hasKey(O)&&a.indexOf(O.name)===-1&&!F.isDisposed&&O.sourceLayer.stateful!==!0&&w.push(F))}S&&(n=n||{},n.mask=b[0]);const k=ui(y.apply(v,n));let I=null;y.supportsMasking&&(I=y.computeMask(v,b));const T=dCe(g),E=Array.isArray(T)?T:[T];for(let O=0;O<E.length;++O){p.hasKey(E[O])||p.add(E[O],k[O],Array.isArray(I)?I[0]:I);const F=a.indexOf(E[O].name);F!==-1&&(l[F]=k[O])}s||An(w)}return p.disposeMasks(),r?l:l[0]}function uCe(t,e){ce(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],i={};if(t.length===1){const s=t6(t[0],e);n=s.sorted,i=s.recipientMap}else{const s=new Set;for(const r of t){const{sorted:o,recipientMap:a}=t6(r,e);for(const l of o)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in a)i[l]==null&&(i[l]=new Set),a[l].forEach(c=>i[l].add(c))}}return{sorted:n,recipientCounts:hCe(i)}}function hCe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function t6(t,e){const n=new Set,i=[],s={};for(const a of e.names())n.add(a);const r=[],o=[];for(r.push(t);r.length>0;){const a=r[r.length-1];if(n.has(a.name)){r.pop();continue}const l=o[o.length-1]===r.length-1;if(a.inputs.length===0||l)r.pop(),i.push(a),n.add(a.name),l&&o.pop();else{o.push(r.length-1);for(const c of a.inputs)s[c.name]==null&&(s[c.name]=new Set),s[c.name].add(a.name),!n.has(c.name)&&r.push(c)}}return{sorted:i,recipientMap:s}}function dCe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let i=0;i<t.sourceLayer.inboundNodes.length;++i)for(const s of t.sourceLayer.inboundNodes[i].outputTensors)if(s.id===t.id){n=i;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fCe=ze();fCe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,cCe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function BP(t,e){return $e(()=>Kr(Vt(Ce(t,t),e,!0)))}class ux extends j0{getConfig(){return{}}}class SG extends ux{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return $e(()=>{const n=BP(e,this.axis),i=Ja(n,0,this.maxValue);return Ce(e,Ut(i,rt(qs(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}SG.className="MaxNorm";nt(SG);class CG extends ux{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return $e(()=>Ut(e,rt(qs(),BP(e,this.axis))))}getConfig(){return{axis:this.axis}}}CG.className="UnitNorm";nt(CG);class kG extends ux{apply(e){return _m(e)}}kG.className="NonNeg";nt(kG);class IG extends ux{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return $e(()=>{const n=BP(e,this.axis),i=rt(Ce(this.rate,Ja(n,this.minValue,this.maxValue)),Ce(1-this.rate,n));return Ce(e,Ut(i,rt(qs(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}IG.className="MinMaxNorm";nt(IG);const n6={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Xs(t){return EP(t)}function i6(t,e={}){return rx(t,_l.getMap().classNameMap,e,"constraint")}function Ys(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in n6?n6[t]:t,config:{}};return i6(n)}else return t instanceof ux?t:i6(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function np(t){if(t==null)return;const e=[],n=[],i=[];for(const s in t){const r=t[s];if(typeof r!="number"){const o=r;e.push(o.data()),n.push(s),i.push(o)}}if(e.length>0){const s=await Promise.all(e);for(let r=0;r<s.length;++r)t[n[r]]=s[r][0];An(i)}}function NG(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var s6;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(s6||(s6={}));const pCe=125;class Cy{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class mCe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const i of this.callbacks)await i.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const i of this.callbacks)await i.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const i of this.callbacks)await i.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const i of this.callbacks)await i.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class gCe extends Cy{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const i=n.size==null?0:n.size;this.seen+=i;for(const s in n){const r=n[s];if(typeof r=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+r*i;else{let o;s in this.totals?o=this.totals[s]:this.totals[s]=0;const a=$e(()=>rt(this.totals[s],Ce(r,i)));this.totals[s]=a,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const i of this.params.metrics)this.totals[i]!=null&&(typeof this.totals[i]=="number"?n[i]=this.totals[i]/this.seen:$e(()=>{const s=Ce(Ut(1,this.seen),this.totals[i]);n[i]=s,this.totals[i].dispose(),bu(n[i])}))}}class vCe extends Cy{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const i in n)this.history[i]==null&&(this.history[i]=[]),this.history[i].push(n[i])}async syncData(){const e=[],n=[],i=[];for(const r in this.history){const o=this.history[r];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),n.push(r),i.push(a)}}const s=await Promise.all(e);for(let r=0;r<s.length;++r)this.history[n[r]][i[r]].dispose(),this.history[n[r]][i[r]]=s[r][0]}}class yCe extends Cy{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||L9,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=pCe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");UE(this.yieldEvery)&&(this.maybeWait=RSe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,i){const s=[];this.yield!=null&&(await np(i),s.push(this.yield(e,n,i))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await np(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const i=[];this.epochEnd!=null&&(await np(n),i.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&i.push(this.nextFrameFunc()),await Promise.all(i)}async onBatchBegin(e,n){this.batchBegin!=null&&(await np(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const i=[];this.batchEnd!=null&&(await np(n),i.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?i.push(this.nextFrameFunc()):UE(this.yieldEvery)&&i.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(i)}async onTrainBegin(e){this.trainBegin!=null&&(await np(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await np(e),await this.trainEnd(e))}}function EG(t,e){return t==null&&(t={}),t instanceof Cy?[t]:Array.isArray(t)&&t[0]instanceof Cy?t:ui(t).map(i=>new yCe(i,e))}class bl{constructor(){}static registerCallbackConstructor(e,n){ce(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),bl.checkForDuplicate(n),bl.constructors[e]==null&&(bl.constructors[e]=[]),bl.constructors[e].push(n)}static checkForDuplicate(e){for(const n in bl.constructors)bl.constructors[+n].forEach(s=>{if(s===e)throw new we("Duplicate callback constructor.")})}static clear(){bl.constructors={}}static createCallbacks(e){const n=[];for(const i in bl.constructors){const s=+i;e>=s&&n.push(...bl.constructors[s])}return n.map(i=>new i)}}bl.constructors={};function TG(t,e,n,i,s,r,o,a,l){const c=new vCe,u=[new gCe,...bl.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const h=new mCe(u);return h.setParams({epochs:n,initialEpoch:i,samples:s,steps:r,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:h,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gh(t,e={},n=!1){return rx(t,_l.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function X_(t,e){return $e(()=>{t.dtype!=="float32"&&(t=It(t,"float32"));const n=Vt(ax(t),e,!0),i=_k(n.shape,qs()),s=Kr(kf(n,i));return Ut(t,s)})}function Pk(t,e){return $e(()=>Os(ax(en(e,t)),-1))}function zP(t,e){return $e(()=>Os(mo(en(e,t)),-1))}function jP(t,e){return $e(()=>{const n=en(t,e),i=Ja(mo(t),qs(),Number.MAX_VALUE),s=mo(Ut(n,i));return Ce(100,Os(s,-1))})}function bCe(t,e){return $e(()=>{const n=Ja(e,qs(),Number.MAX_VALUE),i=Iu(rt(1,n)),s=Ja(t,qs(),Number.MAX_VALUE),r=Iu(rt(1,s));return Os(ax(en(i,r)),-1)})}function xCe(t,e){return $e(()=>{const n=kf(0,en(1,Ce(t,e)));return Os(ax(n),-1)})}function wCe(t,e){return $e(()=>{const n=kf(0,en(1,Ce(t,e)));return Os(n,-1)})}function _Ce(t,e){return $e(()=>{const n=Vt(Ce(t,e),-1),i=Cc(Ce(en(1,t),e),-1);return kf(0,rt(1,en(i,n)))})}function SCe(t,e){return $e(()=>{const n=Math.log(2),i=en(e,t),s=en(rt(i,Qb(Ce(-2,i))),n);return Os(s,-1)})}function ky(t,e,n=!1){return $e(()=>{if(n)e=H3(e);else{const i=Vt(e,e.shape.length-1,!0);e=Ut(e,i)}return e=Ja(e,qs(),1-qs()),Cs(Vt(Ce(It(t,"float32"),Iu(e)),e.shape.length-1))})}function Y_(t,e,n=!1){return $e(()=>{const i=It(kk(WSe(t)),"int32");e=Ja(e,qs(),1-qs());const s=e.shape,r=Ae(L3(i,s[s.length-1]),s);return ky(r,e,n)})}function CCe(t,e){if(!ri(t.shape,e.shape))throw new we(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return $e(()=>{const n=_m(e),i=Cs(mo(e));return rt(en(n,Ce(e,t)),ZH(ku(i)))})}function Dk(t,e){return $e(()=>{let n;return n=Ja(e,qs(),1-qs()),n=Iu(Ut(n,en(1,n))),Os(CCe(t,n),-1)})}function kCe(t,e){return $e(()=>{const n=Ja(t,qs(),1),i=Ja(e,qs(),1);return Vt(Ce(t,Iu(Ut(n,i))),-1)})}function ICe(t,e){return $e(()=>{const n=Iu(rt(qs(),e));return Os(en(e,Ce(t,n)),-1)})}function AG(t,e){return $e(()=>{const n=X_(t,-1),i=X_(e,-1),s=Ce(n,i);return Cs(Vt(s,-1))})}const Z_={meanSquaredError:Pk,meanAbsoluteError:zP,meanAbsolutePercentageError:jP,meanSquaredLogarithmicError:bCe,squaredHinge:xCe,hinge:wCe,categoricalHinge:_Ce,logcosh:SCe,categoricalCrossentropy:ky,sparseCategoricalCrossentropy:Y_,binaryCrossentropy:Dk,kullbackLeiblerDivergence:kCe,poisson:ICe,cosineProximity:AG};function TN(t){if(typeof t=="string"){if(t in Z_)return Z_[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new we(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function RG(t,e){return $e(()=>{const n=Ce(.5,Ml(e)),i=wu(il(e,n),t.dtype);return Os(Cu(t,i),-1)})}function LG(t,e){return $e(()=>wu(Cu(by(t,-1),by(e,-1)),"float32"))}function NCe(t,e){return $e(()=>It(Vt(Ih(Cu(t,1),Cu(e,1))),"float32"))}function ECe(t,e){return $e(()=>It(Vt(Ih(Cu(t,0),Cu(e,1))),"float32"))}function TCe(t,e){return $e(()=>{const n=NCe(t,e),i=ECe(t,e),s=rt(n,i);return It(wo(il(s,0),Ut(n,s),0),"float32")})}function ACe(t,e){return Dk(t,e)}function RCe(t,e){return t.rank===e.rank&&(t=ex(t,[t.rank-1])),e=by(e,-1),e.dtype!==t.dtype&&(e=It(e,t.dtype)),It(Cu(t,e),"float32")}const LCe=Pk,PCe=Pk,DCe=zP,$Ce=zP,OCe=jP,MCe=jP,PG=ky,FCe=AG,DG=Y_,Q_={binaryAccuracy:RG,categoricalAccuracy:LG,precision:TCe,categoricalCrossentropy:PG,sparseCategoricalCrossentropy:DG,mse:LCe,MSE:PCe,mae:DCe,MAE:$Ce,mape:OCe,MAPE:MCe,cosine:FCe};function BCe(t){if(typeof t=="string"&&t in Q_)return Q_[t];if(typeof t!="string"&&t!=null)return t;throw new we(`Unknown metric ${t}`)}function E2(t){if(lu(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(Z_))if(Z_[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(Q_))if(Q_[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zCe(t){const e={Adagrad:()=>fd.adagrad(.01),Adadelta:()=>fd.adadelta(1,.95,qs()),Adam:()=>fd.adam(.001,.9,.999,qs()),Adamax:()=>fd.adamax(.002,.9,.999,qs(),0),RMSProp:()=>fd.rmsprop(.001,.9,0,qs()),SGD:()=>fd.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new we(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const r6=1*1024*1024;function o6(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!gT(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const i=JSON.stringify(t);i.length>r6&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${i.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${r6}.`)}}function gT(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!gT(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!gT(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jCe(t,e,n,i=console.log){const s=WCe(t),r=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let o;if(!s){r.push("Receives inputs"),o=[];for(const u in t.nodesByDepth)o.push(...t.nodesByDepth[u])}i("_".repeat(e)),J_(r,n,i),i("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)s?UCe(a[u],n,i):HCe(a[u],n,o,i),i((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=VCe(t),c=G_(t.nonTrainableWeights);i(`Total params: ${l+c}`),i(`Trainable params: ${l}`),i(`Non-trainable params: ${c}`),i("_".repeat(e))}function VCe(t){let e;return t.collectedTrainableWeights!=null?e=G_(t.collectedTrainableWeights):e=G_(t.trainableWeights),e}function WCe(t){let e=!0;const n=[],i=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}i.push(...s)}if(e)for(const s of t.layers){let r=!1;for(const o of s.inboundNodes)if(i.indexOf(o)!==-1)if(r){e=!1;break}else r=!0;if(!e)break}return e}function J_(t,e,n=console.log){let i="";for(let s=0;s<t.length;++s)s>0&&(i=i.slice(0,i.length-1)+" "),i+=t[s],i=i.slice(0,e[s]),i+=" ".repeat(e[s]-i.length);n(i)}function UCe(t,e,n){let i,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const r=t.name,o=t.getClassName(),a=[`${r} (${o})`,s,i,t.countParams().toString()];J_(a,e,n)}function HCe(t,e,n,i){let s,r;try{r=t.inboundNodes.map(h=>JSON.stringify(h.inputShapes)).join(",")}catch{r="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const o=[];for(const h of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(h)===-1))for(let d=0;d<h.inboundLayers.length;++d){const p=h.inboundLayers[d].name,m=h.nodeIndices[d],g=h.tensorIndices[d];o.push(`${p}[${m}][${g}]`)}const a=t.name,l=t.getClassName(),c=o.length===0?"":o[0],u=[`${a} (${l})`,r,s,t.countParams().toString(),c];J_(u,e,i);for(let h=1;h<o.length;++h)J_(["","","","",o[h]],e,i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $G(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function vT(t,e){if(t===null)return null;if(typeof t=="string")return gp(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],i=t.length;for(let s=0;s<i;++s){const r=t[s];$G(e,s,r)?n.push(r):n.push(vT(r,e))}return n}else{const n={};for(const i of Object.keys(t)){const s=t[i];if(i==="name"&&typeof s=="string")n[i]=s;else{const r=gp(i);n[r]=vT(s,r)}}return n}}function yT(t,e){if(t==null)return null;if(typeof t=="string")return Qu(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],i=t.length;for(let s=0;s<i;++s){const r=t[s];$G(e,s,r)?n.push(r):n.push(yT(r,e))}return n}else{const n={};for(const i of Object.keys(t)){const s=t[i],r=Qu(i);(i==="name"||i==="className")&&typeof s=="string"?n[r]=s:n[r]=yT(s,i)}return n}}/** @license See the LICENSE file. */const OG="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const GCe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class oc extends Nn{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const b=this.getClassName().toLowerCase();this.name=Ak(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],qd(this.inputs).length!==this.inputs.length)throw new we(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);qd(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const w=b.sourceLayer,S=b.nodeIndex,k=b.tensorIndex;this.outputLayers.push(w),this.outputLayersNodeIndices.push(S),this.outputLayersTensorIndices.push(k)}for(const b of this.inputs){const w=b.sourceLayer,S=b.nodeIndex,k=b.tensorIndex;lu(S===0,"input layer has >1 nodes"),lu(k===0,"input layer has >1 tensors"),this.inputLayers.push(w),this.inputLayersNodeIndices.push(S),this.inputLayersTensorIndices.push(k)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const w=this.inputLayers[b];if(!(w instanceof cx))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${b} (0-based) originates from layer type ${w.getClassName()}.`);this.inputNames.push(w.name),this.feedInputShapes.push(w.batchInputShape),this.feedInputNames.push(w.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);const n={},i={},s={},r={},o={},a=[],l=(b,w,S,k,I,T)=>{(k==null||I==null||T==null)&&(k=b.sourceLayer,I=b.nodeIndex,T=b.tensorIndex);const E=k.inboundNodes[I];if(S.indexOf(E)!==-1)throw new El(`The tensor ${b.name} at layer "${k.name}" is part of a cycle.`);if(w.indexOf(E)!==-1)return;this.containerNodes.add(oc.nodeKey(k,I)),k.id in o||(o[k.id]=Object.keys(o).length),S.indexOf(E)===-1&&S.push(E);const O=E.inboundLayers.length;for(let F=0;F<O;F++){const R=E.inputTensors[F],$=E.inboundLayers[F],U=E.nodeIndices[F],W=E.tensorIndices[F];l(R,w,S,$,U,W)}for(w.push(E);S.indexOf(E)>=0;)S.splice(S.indexOf(E),1);a.push(E)},c=[],u=[];for(const b of this.outputs)l(b,c,u);const h=a.slice().reverse();for(const b of h){i[b.id]=b,b.id in n||(n[b.id]=0);let w=n[b.id];const S=s[b.outboundLayer.id]==null?0:s[b.outboundLayer.id];w=Math.max(w,S),s[b.outboundLayer.id]=w,r[b.outboundLayer.id]=b.outboundLayer,n[b.id]=w;for(let k=0;k<b.inboundLayers.length;k++){const I=b.inboundLayers[k],T=b.nodeIndices[k],E=I.inboundNodes[T],O=n[E.id]==null?0:n[E.id];n[E.id]=Math.max(w+1,O),i[E.id]=E}}const d={};for(const b in n){const w=n[b];w in d||(d[w]=[]),d[w].push(i[b])}const p={};for(const b in s){const w=s[b];w in p||(p[w]=[]),p[w].push(r[b])}let m=Object.keys(p).map(b=>parseInt(b,10)).sort(k2);this.layers=[];for(const b of m){const w=p[b];w.sort((S,k)=>{const I=o[S.id],T=o[k.id];return I<T?-1:I>T?1:0});for(const S of w)S instanceof oc&&this.internalContainerRefs.push(S),this.layers.push(S)}this.layersByDepth=p,m=Object.keys(d).map(b=>parseInt(b,10)).sort(k2);const g=this.inputs.slice(),y=[];for(const b of m)for(const w of d[b]){const S=w.outboundLayer;if(S!=null){for(const k of w.inputTensors)if(g.indexOf(k)===-1)throw new El(`Graph disconnected: cannot obtain value for tensor ${k} at layer "${S.name}". The following previous layers were accessed without issue: ${y}`);for(const k of w.outputTensors)g.push(k);y.push(S.name)}}this.nodesByDepth=d;const v=this.layers.map(b=>b.name);for(const b of v){const w=v.filter(S=>S===b).length;if(w!==1)throw new El(`The name "${b}" is used ${w} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new Lk({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(i=>i.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new we("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const i of this.layers)n.push(...i.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const i={};let s=0;const r=GCe(e);r&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=r?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(i[u]!=null)throw new we(`Duplicate weight name: ${u}`);i[u]=c,s++}const o=[];for(const a in e){let l=a;if(i[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(i[l]!=null)o.push([i[l],e[a]]);else if(n)throw new we(`Provided weight data has no target variable: ${a}`);delete i[l]}if(n){const a=[];for(const l in i)a.push(l);if(a.length>0)throw new we(`${a.length} of ${s} weights are not set: ${a}`)}FP(o)}parseWeights(e){for(const n in Object.keys(e)){const i=n.split("/"),s=["vars","layer_checkpoint_dependencies"],r=i.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!s.includes(o)).join("/");r!==n&&(e[r]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${OG}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const i=yT(this.updatedConfig());return n?JSON.stringify(i):i}call(e,n){return $e(()=>{e=ui(e);const i=new Nd;for(let s=0;s<this.inputs.length;++s)i.add(this.inputs[s],e[s]);return Zv(this.outputs,i,n)})}computeMask(e,n){return $e(()=>{e=ui(e);let i;return n==null?i=cm(null,e.length):i=ui(n),this.runInternalGraph(e,i)[1]})}computeOutputShape(e){const n=H_(e);if(n.length!==this.inputLayers.length)throw new we(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const i={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],u=l.name+"_0_0";i[u]=c}const s=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(k2);if(s.length>1)for(const a of s){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(g=>g.id).indexOf(u.id)!==-1)continue;const h=[];for(let g=0;g<c.inboundLayers.length;g++){const y=c.inboundLayers[g],v=c.nodeIndices[g],b=c.tensorIndices[g],w=`${y.name}_${v}_${b}`,S=i[w];h.push(S)}const d=u.computeOutputShape(Vo(h)),p=H_(d),m=u.inboundNodes.indexOf(c);for(let g=0;g<p.length;g++){const y=`${u.name}_${m}_${g}`;i[y]=p[g]}}}const r=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],h=`${l.name}_${c}_${u}`;o.push(h)}for(let a=0;a<o.length;a++){const l=o[a];lu(l in i),r.push(i[l])}return Vo(r)}runInternalGraph(e,n){n==null&&(n=cm(null,e.length));const i={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],h=n[l];i[c.id]=[u,h]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(k2);for(const l of s){const c=this.nodesByDepth[l];for(const u of c){const h=u.outboundLayer,d=u.inputTensors,p=u.outputTensors,m=new Array;for(const g of d)g.id in i&&m.push(i[g.id]);if(m.length===d.length){let g={},y,v,b,w;if(u.callArgs!=null&&(g=u.callArgs),m.length===1){const[S,k]=m[0];g.mask==null&&(g.mask=k),b=ui(h.call(S,g)),w=ui(h.computeMask(S,k)),y=[S],v=[k]}else y=m.map(S=>S[0]),v=m.map(S=>S[1]),g.mask==null&&(g.mask=v),b=ui(h.call(y,g)),w=ui(h.computeMask(y,v));if(h.activityRegularizer)throw new _n("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let S=0;S<p.length;++S){const k=p[S],I=b[S],T=w[S];i[k.id]=[I,T]}}}}const r=[],o=[],a=[];for(const l of this.outputs){lu(l.id in i,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=i[l.id];a.push(c.shape),r.push(c),o.push(u)}return[r,o,a]}buildNodeConversionMap(e){const n={};let i;for(const s of this.layers){i=s instanceof oc?1:0;for(let r=0;r<s.inboundNodes.length;r++){const o=oc.nodeKey(s,r);this.containerNodes.has(o)&&(n[o]=i,i+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new we("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const i of this.layers)if(i.name===e)return i;throw new we(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new we(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return $e(()=>{const e=[];for(const n of this.layers)for(let i=0;i<n.inboundNodes.length;++i){const s=oc.nodeKey(n,i);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),i=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),c=[];for(let h=0;h<o.inboundNodes.length;h++){const d=o.inboundNodes[h],p=oc.nodeKey(o,h);let m={};if(this.containerNodes.has(p)){if(d.callArgs)try{JSON.stringify(d.callArgs),m=d.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),m={}}if(d.inboundLayers.length>0){const g=[];for(let y=0;y<d.inboundLayers.length;y++){const v=d.inboundLayers[y],b=d.nodeIndices[y],w=d.tensorIndices[y],S=oc.nodeKey(v,b);let k=n[S];k==null&&(k=0),g.push([v.name,k,w,m])}c.push(g)}}}const u={};u.name=o.name,u.className=a,u.config=l,u.inboundNodes=c,i.push(u)}e.layers=i;const s=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],c=oc.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const h=this.inputLayersTensorIndices[o];s.push([a.name,u,h])}e.inputLayers=s;const r=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=oc.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const h=this.outputLayersTensorIndices[o];r.push([a.name,u,h])}return e.outputLayers=r,e}static fromConfig(e,n,i={},s=!1){const r={},o={};function a(y,v){y.name in o?o[y.name].push(v):o[y.name]=[v]}function l(y,v){const b=[];let w;for(const S of v){const k=S[0],I=S[1],T=S[2];if(w=S[3]==null?{}:S[3],!(k in r)){a(y,v);return}const E=r[k];if(E.inboundNodes.length<=I){a(y,v);return}const O=E.inboundNodes[I];b.push(O.outputTensors[T])}b.length>0&&y.apply(Vo(b),w)}function c(y){const v=y.name,b=gh(y,n.customObjects!=null?n.customObjects:{});b.setFastWeightInitDuringBuild(s),r[v]=b,y.inboundNodes.forEach(S=>{if(!(S instanceof Array))throw new we(`Corrupted configuration, expected array for nodeData: ${S}`);a(b,S)})}const u=n.name,h=n.layers;for(const y of h)c(y);for(;!ASe(o);)for(const y of h){const v=r[y.name];if(v.name in o){const b=o[v.name];delete o[v.name];for(const w of b)l(v,w)}}const d=[],p=[],m=n.inputLayers;for(const y of m){const v=y[0],b=y[1],w=y[2];lu(v in r);const k=r[v].inboundNodes[b].outputTensors;d.push(k[w])}const g=n.outputLayers;for(const y of g){const v=y[0],b=y[1],w=y[2];lu(v in r);const k=r[v].inboundNodes[b].outputTensors;p.push(k[w])}return new e({inputs:d,outputs:p,name:u})}get stateful(){if(this._stateful)throw new we("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){$e(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qCe(t,e,n){const i=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(i===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==i)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${i} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(r=>{r in t?s.push(t[r]):s.push(null)}),s}else throw new Error(`The model has multiple (${i}) outputs, so ${n} must be either an array with ${i} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function MG(t,e){return qCe(t,e,"classWeight")}async function FG(t,e,n,i){if(n!=null){const s=$e(()=>{if(t.shape.length===1)return Dp(t);if(t.shape.length===2){if(t.shape[1]>1)return by(t,1);if(t.shape[1]===1)return Ae(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await s.data());An(s);const o=[];return r.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),qo(o,"float32")}else return null}function KCe(t,e){return Ce(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const XCe=32;function BG(t,e){let n,i;const s=e;n=s.xs,i=s.ys,ce(n!=null&&i!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const r=a6("input",t.inputNames,n),o=a6("output",t.outputNames,i),a=r[0].shape[0];ce(r.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${r.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),ce(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<r.length;l++)ce(r[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${r[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)ce(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:r,ys:o}}function a6(t,e,n){if(n instanceof Hs)return[n];if(Array.isArray(n))return ce(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const i=[];for(const s of e){if(n[s]==null)throw new we(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);i.push(n[s])}return i}}function YCe(t){if(t.length===3)throw new _n("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function ZCe(t,e,n){const i=n.batchesPerEpoch!=null;if(ce(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),ce(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),ce(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),ce(!i||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),ce(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let r,o;if(s)if(l6(n.validationData))ce(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const y=YCe(n.validationData);r=y.xs,o=y.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;s?c=l.slice().concat(l.map(y=>"val_"+y)):c=l.slice();const u=EG(n.callbacks,n.yieldEvery),h=n.verbose==null?1:n.verbose,{callbackList:d,history:p}=TG(u,h,n.epochs,null,null,QCe(e,n),null,s,c);d.setModel(t),t.history=p,await d.onTrainBegin(),t.stopTraining_=!1;let m=n.initialEpoch==null?0:n.initialEpoch,g=await e.iterator();for(;m<n.epochs;){const y={};await d.onEpochBegin(m);let v=0,b=0;for(i||(g=await e.iterator());!i||v<n.batchesPerEpoch;){const w=await g.next();if(i&&w.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(w.value!=null){const{xs:S,ys:k}=BG(t,w.value),I={};I.batch=b,I.size=S[0].shape[0],await d.onBatchBegin(b,I);const T=[];if(n.classWeight!=null){const F=MG(n.classWeight,t.outputNames);for(let R=0;R<F.length;++R)T.push(await FG(k[R],null,F[R]))}const E=S.concat(k).concat(T),O=a(E);An(E);for(let F=0;F<l.length;++F){const R=l[F],$=O[F];I[R]=$,bu($)}await d.onBatchEnd(b,I),NG(I),b++,v++}if(i?v>=n.batchesPerEpoch:w.done){if(s){let S;l6(n.validationData)?S=ui(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):S=ui(t.evaluate(r,o,{batchSize:n.validationBatchSize==null?XCe:n.validationBatchSize,verbose:0}));for(let k=0;k<t.metricsNames.length;++k)y[`val_${t.metricsNames[k]}`]=S[k]}break}if(t.stopTraining_)break}if(await d.onEpochEnd(m,y),m++,t.stopTraining_)break}return await d.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function QCe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function l6(t){return typeof t.iterator=="function"}function JCe(t){return typeof t.next=="function"}async function eke(t,e,n){n=n||{};const i=n.batches!=null,s=t.testFunction;let r=[];if(n.verbose>0)throw new _n("Verbose mode is not implemented yet.");ce(!i||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=JCe(e)?e:await e.iterator();let a=0,l=0;for(;!i||l<n.batches;){const c=await o.next();if(r=$e(()=>{if(c.value){const{xs:u,ys:h}=BG(t,c.value),d=u.concat(h),p=$e(()=>s(d));if(An(d),l===0)for(let g=0;g<p.length;++g)r.push(si(0));const m=d[0].shape[0];for(let g=0;g<p.length;++g){const y=p[g],v=r[g];r[g]=$e(()=>rt(r[g],Ce(m,y))),l>0&&An(v)}An(p),a+=m,++l}return r}),c.done){i&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<r.length;++c){const u=r[c];r[c]=Ut(r[c],a),An(u)}return Vo(r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function AN(t){ce(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Lv(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(i=>Op(i,e,n-e)):Op(t,e,n-e)}function bT(t,e){return $e(()=>t==null?null:Array.isArray(t)?t.map(n=>bT(n,e)):fG(t,e.dtype==="int32"?e:It(e,"int32")))}function RN(t,e){const n=[];let i=0,s=null;for(;i<t;)s=i+e,s>=t&&(s=t),n.push([i,s]),i=s;return n}function zG(t){const e=[];t instanceof Hs&&(t=[t]);for(let n=0;n<t.length;++n){const i=t[n];if(i.rank===1)e.push(ox(i,1));else{if(i.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(i)}}return e}function ic(t,e){if(t==null)return;const n=[];if(e instanceof Hs)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const r=e[s];n.push(r.id)}const i=[];if(t instanceof Hs)n.indexOf(t.id)===-1&&i.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&i.push(s)});else if(t!=null)for(const s in t){const r=t[s];n.indexOf(r.id)===-1&&i.push(r)}i.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tke(t){return t instanceof Hs}function xT(t){return Array.isArray(t)}function c6(t){return!tke(t)&&!xT(t)}function u6(t,e,n,i=!0,s=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(xT(t)&&t.length>0)o=!0;else if(c6(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new we(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let r;if(c6(t)){t=t,r=[];for(const o of e){if(t[o]==null)throw new we(`No data provided for "${o}". Need data for each key in: ${e}`);r.push(t[o])}}else if(xT(t)){if(t=t,t.length!==e.length)throw new we(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);r=t}else{if(t=t,e.length>1)throw new we(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);r=[t]}if(r=zG(r),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=r[o];if(a.shape.length!==n[o].length)throw new we(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!i)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u>=0&&c!==u)throw new we(`${s} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${s} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return r}function nke(t,e,n){const i=qd(t.map(r=>r.shape[0]));i.sort();const s=qd(e.map(r=>r.shape[0]));if(s.sort(),i.length>1)throw new we(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(r=>r.shape))}`);if(s.length>1)throw new we(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(r=>r.shape))}`);if(i.length>0&&s.length>0&&!ri(i,s))throw new we(`Input Tensors should have the same number of samples as target Tensors. Found ${i[0]} input sample(s) and ${s[0]} target sample(s).`)}function ike(t,e,n){const i=[Pk,Dk,ky];for(let s=0;s<t.length;++s){const r=t[s],o=e[s],a=n[s];if(o!=null){if(o===ky&&r.shape[r.shape.length-1]===1)throw new we(`You are passing a target array of shape ${r.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(i.indexOf(o)!==-1){const l=r.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const h=l[u],d=c[u];if(d!=null&&h!==d)throw new we(`A target Tensor with shape ${r.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function h6(t,e,n,i=!0,s=""){let r;if(Array.isArray(t)){if(t.length!==e.length)throw new we(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);r=t}else{if(e.length>1)throw new we(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);r=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=r[o];if(a.shape.length!==n[o].length)throw new we(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!i)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u!==c)throw new we(`Error when checking ${s}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function ske(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(i=>n);{const i=[];for(const s of e){let r=n.hasOwnProperty(s)?n[s]:[];Array.isArray(r)||(r=[r]),i.push(r)}return i}}const rke="layers-model";class jg extends oc{constructor(e){super(e),this.isTraining=!1}summary(e,n,i=console.log){if(!this.built)throw new we("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");jCe(this,e,n,i)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=zCe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Nf))throw new we("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new we(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(TN(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new we(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>TN(a))}else{const o=TN(e.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const i=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],$p("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(i.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const s=ske(e.metrics,this.outputNames),r=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};$p("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(i.indexOf(o)!==-1)continue;const a=s[o];(c=>{const u="";let h,d,p;for(const m of c){if(typeof m=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(m)!==-1){const y=this.internalOutputShapes[o];y[y.length-1]===1||this.lossFunctions[o]===Dk?["accuracy","acc"].indexOf(m)!==-1?d=RG:["crossentropy","ce"].indexOf(m)!==-1&&(d=ACe):this.lossFunctions[o]===Y_?["accuracy","acc"].indexOf(m)!==-1?d=RCe:["crossentropy","ce"].indexOf(m)!==-1&&(d=DG):["accuracy","acc"].indexOf(m)!==-1?d=LG:["crossentropy","ce"].indexOf(m)!==-1&&(d=PG);let v;["accuracy","acc"].indexOf(m)!==-1?v="acc":["crossentropy","ce"].indexOf(m)!==-1&&(v="ce"),p=d,h=u+v}else p=BCe(m),h=u+E2(m);let g;$p(h,()=>{g=p}),r(o,h,g)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,i={}){const s=i.batchSize==null?32:i.batchSize;AN(s);const o=this.standardizeUserDataXY(e,n,!0,s);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,s,i.verbose,i.steps);return Vo(c)}finally{ic(o[0],e),ic(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),eke(this,e,n)}checkNumSamples(e,n,i,s="steps"){let r;if(i!=null){if(r=null,n!=null)throw new we(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?r=e[0].shape[0]:r=e.shape[0];else throw new we(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return r}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new we("`outputs` is an empty Array, which is not allowed.");const i=Array.isArray(n),s=i?n:[n],r=this.retrieveSymbolicTensors(s),o=new Nd;if(e instanceof Hs&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new we(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new we(`No value is provided for the model's input ${l.name}`);o.add(l,c)}const a=Zv(r,o);return i?a:a[0]}retrieveSymbolicTensors(e){const n=cm(null,e.length);let i=e.length;for(const s of this.layers){const r=Array.isArray(s.output)?s.output:[s.output],o=r.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(n[a]=r[l],i--),i===0)break}if(i===0)break}if(i>0){const s=[];throw n.forEach((r,o)=>{r==null&&s.push(e[o])}),new we(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,i=!1){return $e(()=>{const s=this.checkNumSamples(e);if(i)throw new _n("Verbose predictLoop() is not implemented yet.");const r=RN(s,n),o=this.outputs.map(a=>[]);for(let a=0;a<r.length;++a)$e(()=>{const c=r[a][0],u=r[a][1],h=Lv(e,c,u),d=[];if(Array.isArray(h))for(let m=0;m<h.length;++m)d.push({key:this.inputs[m],value:h[m]});else d.push({key:this.inputs[0],value:h});const p=new Nd(d);return Zv(this.outputs,p)}).forEach((c,u)=>o[u].push(c));return Vo(o.map(a=>Yo(a,0)))})}predict(e,n={}){const i=zG(e);h6(i,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return AN(s),this.predictLoop(i,s)}finally{ic(i,e)}}predictOnBatch(e){h6(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,i=!0,s){if(this.optimizer_==null)throw new El("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===Y_?r.push(a.slice(0,a.length-1).concat([1])):r.push(a)}if(e=u6(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=u6(n,this.feedOutputNames,r,!1,"target"),nke(e,n),ike(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new we(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,i,s,r=!0,o){const[a,l]=this.standardizeUserDataXY(e,n,r,o);if(i!=null)throw new Error("sample weight is not supported yet.");let c=null;if(s!=null){const u=MG(s,this.outputNames);c=[];for(let h=0;h<u.length;++h)c.push(await FG(l[h],null,u[h]))}return[a,l,c]}testLoop(e,n,i,s=0,r){return $e(()=>{const o=this.checkNumSamples(n,i,r,"steps"),a=[];if(s>0)throw new _n("Verbose mode is not implemented yet.");if(r!=null)throw new _n("steps mode in testLoop() is not implemented yet");{const l=RN(o,i),c=qo(Nc(0,o));for(let u=0;u<l.length;++u){const h=l[u][0],d=l[u][1],p=Op(c,h,d-h),m=bT(n,p),g=e(m);if(u===0)for(let y=0;y<g.length;++y)a.push(si(0));for(let y=0;y<g.length;++y){const v=g[y];a[y]=rt(a[y],Ce(d-h,v))}}for(let u=0;u<a.length;++u)a[u]=Ut(a[u],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let i=0;i<e.length;++i){const s=e[i];let r=s;if(XF(e,s)>1){const o=XF(e.slice(0,i),s);r+=`_${o}`}n.push(r)}return n}makeTrainFunction(){return e=>{const n=[],i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),r=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const h=[];for(let g=0;g<this.inputs.length;++g)h.push({key:this.inputs[g],value:i[g]});const d=new Nd(h),p=Zv(this.outputs,d,{training:!0});let m;for(let g=0;g<this.lossFunctions.length;++g){const y=this.lossFunctions[g];let v=y(s[g],p[g]);r[g]!=null&&(v=KCe(v,r[g]));const b=Os(v);n.push(b),g===0?m=v:m=rt(m,v)}for(let g=0;g<this.metricsTensors.length;++g){let y;if(this.outputs.length>1&&g<this.outputs.length)y=n[g];else{const v=this.metricsTensors[g][0],b=this.metricsTensors[g][1];y=Os(v(s[b],p[b]))}bu(y),o.push(y)}return m=Os(m),this.calculateLosses().forEach(g=>{m=rt(m,g)}),m},l=this.collectedTrainableWeights.map(h=>h.read());return[this.optimizer_.minimize(a,!0,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>$e(()=>{const n=[];let i;const s=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let c=0;c<this.inputs.length;++c)o.push({key:this.inputs[c],value:s[c]});const a=new Nd(o),l=Zv(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],h=Os(u(r[c],l[c]));c===0?i=h:i=rt(i,h),n.push(i)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],h=this.metricsTensors[c][1],d=Os(u(r[h],l[h]));n.push(d)}return n})}async fit(e,n,i={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,r,o,a,l,c,u,h,d;try{const p=i.batchSize==null?32:i.batchSize;AN(p);const g=await this.standardizeUserData(e,n,i.sampleWeight,i.classWeight,!1,p);s=g[0],r=g[1],d=g[2];let y=!1,v;if(i.validationData!=null&&i.validationData.length>0){if(y=!0,i.validationData.length===2)l=i.validationData[0],c=i.validationData[1];else throw i.validationData.length===3?new _n("validationData including sample weights is not supported yet."):new we(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${i.validationData} is invalid.`);const F=await this.standardizeUserData(l,c,null,null,!0,p);u=F[0],h=F[1],v=u.concat(h)}else if(i.validationSplit!=null&&i.validationSplit>0&&i.validationSplit<1){y=!0;const O=Math.floor(s[0].shape[0]*(1-i.validationSplit)),F=s[0].shape[0];u=Lv(s,O,F),o=s,s=Lv(s,0,O),h=Lv(r,O,F),a=r,r=Lv(r,0,O),v=u.concat(h)}else i.validationSteps!=null&&(y=!0);const b=s.concat(r).concat(d);this.checkTrainableWeightsConsistency();const w=this.makeTrainFunction(),S=this.getDedupedMetricsNames();let k,I;y?(this.makeTestFunction(),k=this.testFunction,I=S.slice().concat(S.map(O=>"val_"+O))):(k=null,v=[],I=S.slice());const T=EG(i.callbacks,i.yieldEvery);return await this.fitLoop(w,b,S,p,i.epochs,i.verbose,T,k,v,i.shuffle,I,i.initialEpoch,null,null)}finally{this.isTraining=!1,ic(s,e),ic(r,n),ic(o,e),ic(a,n),ic(u,l),ic(h,c),d!=null&&An(d)}}async fitLoop(e,n,i,s,r,o,a,l,c,u,h,d,p,m){s==null&&(s=32),r==null&&(r=1),u==null&&(u=!0),d==null&&(d=0);let g=!1;if(l!=null&&c!=null&&(g=!0),m!=null&&(g=!0,p==null))throw new we("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const y=this.checkNumSamples(n,s,p,"steps_per_epoch");let v;y!=null&&(v=Nc(0,y)),o==null&&(o=1);const{callbackList:b,history:w}=TG(a,o,r,d,y,p,s,g,h);b.setModel(this),this.history=w,await b.onTrainBegin(),this.stopTraining_=!1;for(let S=d;S<r;++S){await b.onEpochBegin(S);const k={};if(p!=null)throw new _n("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new _n("batch shuffling is not implemneted yet");u&&U0e(v);const I=qo(v),T=RN(y,s);for(let E=0;E<T.length;++E){const O={};if(await b.onBatchBegin(E,O),$e(()=>{const F=T[E][0],R=T[E][1],$=Op(I,F,R-F);O.batch=E,O.size=R-F;const U=bT(n,$),W=e(U);for(let te=0;te<i.length;++te){const H=i[te],G=W[te];O[H]=G,bu(G)}if(E===T.length-1&&g){const te=this.testLoop(l,c,s);for(let H=0;H<i.length;++H){const G=i[H],B=te[H];bu(B),k["val_"+G]=B}}}),await b.onBatchEnd(E,O),NG(O),this.stopTraining_)break}I.dispose()}if(await b.onEpochEnd(S,k),this.stopTraining_)break}return await b.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return ZCe(this,e,n)}async trainOnBatch(e,n){const i=await this.standardizeUserData(e,n),s=i[0],r=i[1],a=this.makeTrainFunction()(s.concat(r)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return An(a),ic(i[0],e),ic(i[1],n),Vo(l)}getNamedWeights(e){const n=[],i=e!=null&&e.trainableOnly,s=i?this.trainableWeights:this.weights,r=this.getWeights(i);for(let o=0;o<s.length;++o)i&&!s[o].trainable||n.push({name:s[o].originalName,tensor:r[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=RF().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-RF().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Qu(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Qu(n))}else{const n=Object.keys(this.loss);e={};const i=this.loss;for(const s of n)if(typeof i[s]=="string")e[s]=Qu(i[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Qu(E2(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Qu(E2(e)));{const e={};for(const n in this.metrics)e[n]=Qu(E2(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=vT(e.optimizer_config),i=gh(n);let s;if(typeof e.loss=="string")s=gp(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(o=>gp(o));else if(e.loss!=null){s={};for(const o in e.loss)s[o]=gp(e.loss[o])}let r;if(Array.isArray(e.metrics))r=e.metrics.map(o=>gp(o));else if(e.metrics!=null){r={};for(const o in e.metrics)r[o]=gp(e.metrics[o])}this.compile({loss:s,metrics:r,optimizer:i})}async save(e,n){if(typeof e=="string"){const c=Bve(e);if(c.length===0)throw new we(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new we(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new we("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const i=await PF(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:rke,generatedBy:`TensorFlow.js tfjs-layers v${OG}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:h}=await PF(await this.optimizer.getWeights(),c);i.specs.push(...h),i.data=Fve([i.data,u])}return this.userDefinedMetadata!=null&&(o6(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=i.data,a.weightSpecs=i.specs,e.save(a)}setUserDefinedMetadata(e){o6(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}jg.className="Model";nt(jg);class jG extends jg{}jG.className="Functional";nt(jG);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class p0 extends jg{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Ak("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(i=>i<0))throw new we(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof p0||e instanceof jg;let i;if(n){if(i=e,i.outputs.length!==1)throw new we("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(i.inputs.length!==1)throw new we("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new we("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=aCe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=i.outputs,this.inputs=i.inputs;else{if(e.inboundNodes.length!==1)throw new we(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new we("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=_G(this.outputs[0])}this.inboundNodes=[],new Lk({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:cm(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Kn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new jg({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,i=console.log){this.built||this.build(),super.summary(e,n,i)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,i={}){if(!this.built)throw new El("The model needs to be compiled before being used.");return this.model.evaluate(e,n,i)}async evaluateDataset(e,n){if(!this.built)throw new El("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,i={}){if(!this.built)throw new El("The model needs to be compiled before being used.");return this.model.fit(e,n,i)}async fitDataset(e,n){if(!this.built)throw new El("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,i={},s=!1){let r,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new we("Legacy serialization format not supported yet.");r=n}else ce(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),r=n.layers,delete n.layers,o=n;const a=new e(o);if(!(a instanceof p0))throw new _n(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of r){const u=gh(l,void 0,s);s&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new we("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new we("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const i={};i.className=n.getClassName(),i.config=n.getConfig(),e.push(i)}return{name:this.name,layers:e}}}p0.className="Sequential";nt(p0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function d6(t){return new p0(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Yr=class extends j0{getConfig(){return{}}};class VG extends Yr{apply(e,n=1){return HSe(e,n)}}VG.className="elu";nt(VG);class WG extends Yr{apply(e){return o9(e)}}WG.className="selu";nt(WG);class UG extends Yr{apply(e){return _m(e)}}UG.className="relu";nt(UG);class HG extends Yr{apply(e){return $e(()=>_y(6,_m(e)))}}HG.className="relu6";nt(HG);class GG extends Yr{apply(e){return e}}GG.className="linear";nt(GG);class qG extends Yr{apply(e){return F0(e)}}qG.className="sigmoid";nt(qG);class KG extends Yr{apply(e){return qSe(e)}}KG.className="hardSigmoid";nt(KG);class XG extends Yr{apply(e){return Qb(e)}}XG.className="softplus";nt(XG);class YG extends Yr{apply(e){return GSe(e)}}YG.className="softsign";nt(YG);class ZG extends Yr{apply(e){return xk(e)}}ZG.className="tanh";nt(ZG);let VP=class extends Yr{apply(e,n=-1){return H3(e,n)}};VP.className="softmax";nt(VP);class QG extends Yr{apply(e,n=-1){return QH(e,n)}}QG.className="logSoftmax";nt(QG);class JG extends Yr{apply(e){return $e(()=>$e(()=>{const n=Math.sqrt(2),i=Ce(.5,rt(1,qH(Ut(e,n))));return Ce(e,i)}))}}JG.className="gelu";nt(JG);class eq extends Yr{apply(e){return $e(()=>Ce(.5,Ce(e,rt(1,xk(Ce(Kr(Ut(2,Math.PI)),rt(e,Ce(.044715,om(e,3)))))))))}}eq.className="gelu_new";nt(eq);class tq extends Yr{apply(e){return $e(()=>Ce(e,xk(Qb(e))))}}tq.className="mish";nt(tq);class nq extends Yr{apply(e,n=1){return $e(()=>Ce(F0(Ce(e,n)),e))}}nq.className="swish";nt(nq);function af(t){return t.getClassName()}function LN(t,e={}){return rx(t,_l.getMap().classNameMap,e,"activation")}function lf(t){if(t==null){const e={};return e.className="linear",e.config={},LN(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},LN(e)}else return t instanceof Yr?t:LN(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oke(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class iq extends j0{}class sq extends iq{constructor(e){super(),oke(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return $e(()=>{let n=hr([1]);return this.hasL1&&(n=rt(n,Vt(Ce(this.l1,mo(e))))),this.hasL2&&(n=rt(n,Vt(Ce(this.l2,ax(e))))),Ae(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}sq.className="L1L2";nt(sq);const f6={l1l2:"L1L2"};function Ei(t){return EP(t)}function p6(t,e={}){return rx(t,_l.getMap().classNameMap,e,"regularizer")}function Qi(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in f6?f6[t]:t,config:{}};return p6(n)}else return t instanceof iq?t:p6(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rq extends Nn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=tn(e);let i=_m(e);return this.maxValue!=null&&(i=Ja(i,0,this.maxValue)),i}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}rq.className="ReLU";nt(rq);class oq extends Nn{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const i=tn(e);return E3(i,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}oq.className="LeakyReLU";nt(oq);class aq extends Nn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Yi(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Qi(e.alphaRegularizer),this.alphaConstraint=Ys(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new we(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Kn(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const i={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)i[s]=e[s];this.inputSpec=[new Ks({ndim:e.length,axes:i})],this.built=!0}call(e,n){return e=tn(e),$3(e,this.alpha.read())}getConfig(){const e={alphaInitializer:rs(this.alphaInitializer),alphaRegularizer:Ei(this.alphaRegularizer),alphaConstraint:Xs(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}aq.className="PReLU";nt(aq);let lq=class extends Nn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new _n(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const i=tn(e);return Sk(i)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};lq.className="ELU";nt(lq);class cq extends Nn{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const i=tn(e);return Ce(i,It(il(i,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}cq.className="ThresholdedReLU";nt(cq);class uq extends Nn{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new VP().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return $e(()=>{let i=tn(e);const s=n.mask;if(s!=null){const r=Ce(en(If(i.shape),It(s,i.dtype)),si(-1e9));i=rt(i,r)}return this.axis instanceof Array?this.axis.length>1?ku(en(i,JH(i,this.axis,!0))):this.softmax(i,this.axis[0]):this.softmax(i,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}uq.className="Softmax";nt(uq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Vg(t,e,n){if(typeof t=="number")return cm(t,e);if(t.length!==e)throw new we(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let i=0;i<e;++i){const s=t[i];if(!jSe(s))throw new we(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function kc(t,e,n,i,s=1){if(t==null)return t;const r=e+(e-1)*(s-1);let o;return n==="same"?o=t:o=t-r+1,Math.floor((o+i-1)/i)}function cu(t,e,n,i){if(t==null)return null;if(i==="valid")t=t*e+of([n-e,0]);else if(i==="same")t=t*e;else throw new we(`Unsupport padding mode: ${i}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WP(t,e){return $e(()=>(Ns(e),e==="channelsFirst"?Un(t,[0,2,3,1]):t))}function hq(t,e){return $e(()=>(Ns(e),e==="channelsFirst"?Un(t,[0,2,3,4,1]):t))}function ake(t,e,n,i=1,s="valid",r,o=1){return $e(()=>{if(r==null&&(r=Ec()),Ns(r),t.shape.length!==3)throw new we(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new we(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new we(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(r==="channelsFirst"&&(t=Un(t,[0,2,1])),s==="causal")throw new _n("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=VH(t,e,i,s==="same"?"same":"valid","NWC",o);return n!=null&&(a=Rc(a,n)),a})}function m6(t,e,n,i=[1,1],s="valid",r,o,a=null){return $e(()=>{if(r==null&&(r=Ec()),Ns(r),t.rank!==3&&t.rank!==4)throw new we(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new we(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=WP(t,r);if(s==="causal")throw new _n("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=g2e({x:l,filter:e,strides:i,pad:s==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),r==="channelsFirst"&&(l=Un(l,[0,3,1,2])),l})}function lke(t,e,n,i=[1,1,1],s="valid",r,o){return $e(()=>{if(r==null&&(r=Ec()),Ns(r),t.rank!==4&&t.rank!==5)throw new we(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new we(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=hq(t,r);if(s==="causal")throw new _n("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=mye(a,e,i,s==="same"?"same":"valid","NDHWC",o),n!=null&&(a=Rc(a,n)),r==="channelsFirst"&&(a=Un(a,[0,4,1,2,3])),a})}class $k extends Nn{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",$k.verifyArgs(n),this.rank=e,pr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new _n(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Vg(n.kernelSize,e,"kernelSize"),this.strides=Vg(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,sl(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Ns(this.dataFormat),this.activation=lf(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Yi(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Ys(n.biasConstraint),this.biasRegularizer=Qi(n.biasRegularizer),this.activityRegularizer=Qi(n.activityRegularizer),this.dilationRate=Vg(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new we(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new we(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new we(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(lu("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!TP(e.kernelSize,"number",1,3))throw new we(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:af(this.activation),useBias:this.useBias,biasInitializer:rs(this.biasInitializer),biasRegularizer:Ei(this.biasRegularizer),activityRegularizer:Ei(this.activityRegularizer),biasConstraint:Xs(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class V0 extends $k{constructor(e,n){super(e,n),this.kernel=null,V0.verifyArgs(n),this.filters=n.filters,pr(this.filters,"filters"),this.kernelInitializer=Yi(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Ys(n.kernelConstraint),this.kernelRegularizer=Qi(n.kernelRegularizer)}build(e){e=Kn(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new we(`The channel dimension of the input should be defined. Found ${e[n]}`);const i=e[n],s=this.kernelSize.concat([i,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:i}}],this.built=!0}call(e,n){return $e(()=>{e=tn(e);let i;const s=this.bias==null?null:this.bias.read(),r=aG(this.activation.getClassName());if(r!=null&&this.rank===2)i=m6(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(this.rank===1)i=ake(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)i=m6(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)i=lke(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new _n("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(i=this.activation.apply(i))}return i})}computeOutputShape(e){e=Kn(e);const n=[],i=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let r=0;r<i.length;++r){const o=kc(i[r],this.kernelSize[r],this.padding,this.strides[r],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[r]);n.push(o)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:rs(this.kernelInitializer),kernelRegularizer:Ei(this.kernelRegularizer),kernelConstraint:Xs(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new we(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class hx extends V0{constructor(e){super(2,e),hx.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!TP(e.kernelSize,"number",1,2))throw new we(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}hx.className="Conv2D";nt(hx);class dx extends V0{constructor(e){super(3,e),dx.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new we(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}dx.className="Conv3D";nt(dx);class dq extends hx{constructor(e){if(super(e),this.inputSpec=[new Ks({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new we(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Kn(e),e.length!==4)throw new we("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new we("The channel dimension of the inputs should be defined. Found `None`.");const i=e[n],s=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ks({ndim:4,axes:{[n]:i}})],this.built=!0}call(e,n){return $e(()=>{let i=tn(e);if(i.shape.length!==4)throw new we(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${i.shape.length}`);const s=i.shape,r=s[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=s[o],c=s[a],u=this.kernelSize[0],h=this.kernelSize[1],d=this.strides[0],p=this.strides[1],m=cu(l,d,u,this.padding),g=cu(c,p,h,this.padding),y=[r,m,g,this.filters];this.dataFormat!=="channelsLast"&&(i=Un(i,[0,2,3,1]));let v=WH(i,this.kernel.read(),y,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(v=Un(v,[0,3,1,2])),this.bias!=null&&(v=Rc(v,this.bias.read(),this.dataFormat)),this.activation!=null&&(v=this.activation.apply(v)),v})}computeOutputShape(e){e=Kn(e);const n=e.slice();let i,s,r;this.dataFormat==="channelsFirst"?(i=1,s=2,r=3):(i=3,s=1,r=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[i]=this.filters,n[s]=cu(n[s],l,o,this.padding),n[r]=cu(n[r],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}dq.className="Conv2DTranspose";nt(dq);class fq extends dx{constructor(e){if(super(e),this.inputSpec=[new Ks({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new we(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Kn(e),e.length!==5)throw new we("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new we("The channel dimension of the inputs should be defined. Found `None`.");const i=e[n],s=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ks({ndim:5,axes:{[n]:i}})],this.built=!0}call(e,n){return $e(()=>{let i=tn(e);if(i.shape.length!==5)throw new we(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${i.shape.length}`);const s=i.shape,r=s[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const c=s[l],u=s[o],h=s[a],d=this.kernelSize[0],p=this.kernelSize[1],m=this.kernelSize[2],g=this.strides[0],y=this.strides[1],v=this.strides[2],b=cu(c,g,d,this.padding),w=cu(u,y,p,this.padding),S=cu(h,v,m,this.padding),k=[r,b,w,S,this.filters];this.dataFormat!=="channelsLast"&&(i=Un(i,[0,2,3,4,1]));let I=yye(i,this.kernel.read(),k,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(I=Un(I,[0,4,1,2,3])),this.bias!==null&&(I=Rc(I,this.bias.read(),this.dataFormat)),this.activation!==null&&(I=this.activation.apply(I)),I})}computeOutputShape(e){e=Kn(e);const n=e.slice();let i,s,r,o;this.dataFormat==="channelsFirst"?(i=1,s=2,r=3,o=4):(i=4,s=1,r=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],h=this.strides[1],d=this.strides[2];return n[i]=this.filters,n[s]=cu(n[s],u,a,this.padding),n[r]=cu(n[r],h,l,this.padding),n[o]=cu(n[o],d,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}fq.className="Conv3DTranspose";nt(fq);class pq extends V0{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new we("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new we("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new we(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Yi(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Qi(n.depthwiseRegularizer),this.depthwiseConstraint=Ys(n.depthwiseConstraint),this.pointwiseInitializer=Yi(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Qi(n.pointwiseRegularizer),this.pointwiseConstraint=Ys(n.pointwiseConstraint)}build(e){if(e=Kn(e),e.length<this.rank+2)throw new we(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new we(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const i=e[n],s=this.kernelSize.concat([i,this.depthMultiplier]),r=[];for(let a=0;a<this.rank;++a)r.push(1);r.push(i*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",r,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Ks({ndim:this.rank+2,axes:{[n]:i}})],this.built=!0}call(e,n){return $e(()=>{e=tn(e);let i;if(this.rank===1)throw new _n("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Un(e,[0,2,3,1])),i=a9(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(i=Rc(i,this.bias.read(),this.dataFormat)),this.activation!=null&&(i=this.activation.apply(i)),this.dataFormat==="channelsFirst"&&(i=Un(i,[0,3,1,2])),i})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=rs(this.depthwiseInitializer),e.pointwiseInitializer=rs(this.pointwiseInitializer),e.depthwiseRegularizer=Ei(this.depthwiseRegularizer),e.pointwiseRegularizer=Ei(this.pointwiseRegularizer),e.depthwiseConstraint=Xs(this.depthwiseConstraint),e.pointwiseConstraint=Xs(this.pointwiseConstraint),e}}pq.className="SeparableConv";class mq extends pq{constructor(e){super(2,e)}}mq.className="SeparableConv2D";nt(mq);class Ok extends V0{constructor(e){super(1,e),Ok.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!TP(e.kernelSize,"number",1,1))throw new we(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}Ok.className="Conv1D";nt(Ok);class gq extends Nn{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return $e(()=>{if(e=tn(e),this.dataFormat==="channelsLast"){const i=N2(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return N2(i,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const i=N2(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return N2(i,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}gq.className="Cropping2D";nt(gq);class vq extends Nn{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ns(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,FSe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],i=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,i]}else{const n=e[1]==null?null:this.size[0]*e[1],i=e[2]==null?null:this.size[1]*e[2];return[e[0],n,i,e[3]]}}call(e,n){return $e(()=>{let i=tn(e);const s=i.shape;if(this.dataFormat==="channelsFirst"){i=Un(i,[0,2,3,1]);const r=this.size[0]*s[2],o=this.size[1]*s[3],a=this.interpolation==="nearest"?ch.resizeNearestNeighbor(i,[r,o]):ch.resizeBilinear(i,[r,o]);return Un(a,[0,3,1,2])}else{const r=this.size[0]*s[1],o=this.size[1]*s[2];return this.interpolation==="nearest"?ch.resizeNearestNeighbor(i,[r,o]):ch.resizeBilinear(i,[r,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}vq.className="UpSampling2D";nt(vq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cke(t,e,n=[1,1],i="valid",s,r){return $e(()=>{s==null&&(s=Ec()),Ns(s);let o=WP(t,s);if(t.rank!==4)throw new we(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new we(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=C3(o,e,n,i==="same"?"same":"valid","NHWC",r),s==="channelsFirst"&&(o=Un(o,[0,3,1,2])),o})}class yq extends $k{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Yi(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Ys(e.depthwiseConstraint),this.depthwiseRegularizer=Qi(e.depthwiseRegularizer)}build(e){if(e=Kn(e),e.length<4)throw new we(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new we(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const i=e[n],s=[this.kernelSize[0],this.kernelSize[1],i,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[i*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return $e(()=>{e=tn(e);let i=cke(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(i=Rc(i,this.bias.read(),this.dataFormat)),this.activation!=null&&(i=this.activation.apply(i)),i})}computeOutputShape(e){e=Kn(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],i=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,r=kc(n,this.kernelSize[0],this.padding,this.strides[0]),o=kc(i,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,r,o]:[e[0],r,o,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=rs(this.depthwiseInitializer),e.depthwiseRegularizer=Ei(this.depthwiseRegularizer),e.depthwiseConstraint=Xs(this.depthwiseRegularizer),e}}yq.className="DepthwiseConv2D";nt(yq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bq(t,e,n,i){if(Array.isArray(t)){if(e!=null||n!=null)throw new we("When inputs is an array, neither initialState or constants should be provided");i!=null&&(n=t.slice(t.length-i,t.length),t=t.slice(0,t.length-i)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(r){return r==null||Array.isArray(r)?r:[r]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function xq(t,e,n,i=!1,s,r,o=!1,a=!1){return $e(()=>{const l=e.shape.length;if(l<3)throw new we(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Nc(2,l));e=Un(e,c),o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=It(It(s,"bool"),"float32"),s.rank===l-1&&(s=jo(s,-1)),s=Un(s,c)),i&&(e=am(e,0),s!=null&&(s=am(s,0)));const u=[];let h,d=n;const p=e.shape[0],m=lm(e);let g;s!=null&&(g=lm(s));for(let v=0;v<p;++v){const b=m[v],w=$e(()=>t(b,d));if(s==null)h=w[0],d=w[1];else{const S=$e(()=>{const k=g[v],I=en(Ml(k),k),T=rt(Ce(w[0],k),Ce(d[0],I)),E=d.map((O,F)=>rt(Ce(w[1][F],k),Ce(O,I)));return{output:T,newStates:E}});h=S.output,d=S.newStates}a&&u.push(h)}let y;return a&&(y=Nh(u,1)),[h,y,d]})}class Ef extends Nn{constructor(e){super(e);let n;if(e.cell==null)throw new we("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new GP({cells:e.cell}):n=e.cell,n.stateSize==null)throw new we("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Ks({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Nc(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){pT(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const i=n[0];let s;if(this.returnSequences?s=[e[0],e[1],i]:s=[e[0],i],this.returnState){const r=[];for(const o of n)r.push([e[0],o]);return[s].concat(r)}else return s}computeMask(e,n){return $e(()=>{Array.isArray(n)&&(n=n[0]);const i=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(r=>null);return[i].concat(s)}else return i})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let i=0;i<e;++i)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new _n("Constants support is not implemented in RNN yet.");pT(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,i=e.slice(2);this.inputSpec[0]=new Ks({shape:[n,null,...i]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let r;if(Array.isArray(this.cell.stateSize)?r=this.cell.stateSize:r=[this.cell.stateSize],this.stateSpec!=null){if(!ri(this.stateSpec.map(o=>o.shape[o.shape.length-1]),r))throw new we(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=r.map(o=>new Ks({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){$e(()=>{if(!this.stateful)throw new au("Cannot call resetStates() on an RNN Layer that is not stateful.");const i=this.inputSpec[0].shape[0];if(i==null)throw new we("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>hr([i,s])):this.states_=[hr([i,this.cell.stateSize])];else if(e==null)An(this.states_),this.keptStates!=null&&(An(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>hr([i,s])):this.states_[0]=hr([i,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new we(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):An(this.states_);for(let s=0;s<this.states_.length;++s){const r=e[s],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,a=[i,o];if(!ri(r.shape,a))throw new we(`State ${s} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${r.shape}`);this.states_[s]=r}}this.states_=this.states_.map(s=>bu(s.clone()))})}apply(e,n){let i=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const r=bq(e,i,s,this.numConstants);e=r.inputs,i=r.initialState,s=r.constants;let o=[],a=[];if(i!=null){n.initialState=i,o=o.concat(i),this.stateSpec=[];for(const c of i)this.stateSpec.push(new Ks({shape:c.shape}));a=a.concat(this.stateSpec)}if(s!=null&&(n.constants=s,o=o.concat(s),this.numConstants=s.length),o[0]instanceof Nu){const c=[e].concat(o),u=this.inputSpec.concat(a),h=this.inputSpec;this.inputSpec=u;const d=super.apply(c,n);return this.inputSpec=h,d}else return super.apply(e,n)}call(e,n){return $e(()=>{const i=n==null?null:n.mask,s=n==null?null:n.training;let r=n==null?null:n.initialState;e=tn(e),r==null&&(this.stateful?r=this.states_:r=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(r.length!==o)throw new we(`RNN Layer has ${o} state(s) but was passed ${r.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:s},c=xq((m,g)=>{const y=this.cell.call([m].concat(g),a);return[y[0],y.slice(1)]},e,r,this.goBackwards,i,null,this.unroll,this.returnSequences),u=c[0],h=c[1],d=c[2];this.stateful&&this.resetStates(d,s);const p=this.returnSequences?h:u;return this.returnState?[p].concat(d):p})}getInitialState(e){return $e(()=>{let n=hr(e.shape);return n=Vt(n,[1,2]),n=ox(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(i=>i>1?dT(n,[1,i]):n):this.cell.stateSize>1?[dT(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const i=this.cell.getConfig();return this.getClassName()===Ef.className&&(n.cell={className:this.cell.getClassName(),config:i}),Object.assign(Object.assign(Object.assign({},i),e),n)}static fromConfig(e,n,i={}){const s=n.cell,r=gh(s,i);return new e(Object.assign(n,{cell:r}))}}Ef.className="RNN";nt(Ef);class Mk extends Nn{}class UP extends Mk{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,pr(this.units,"units"),this.activation=lf(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Yi(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Yi(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Yi(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Qi(e.kernelRegularizer),this.recurrentRegularizer=Qi(e.recurrentRegularizer),this.biasRegularizer=Qi(e.biasRegularizer),this.kernelConstraint=Ys(e.kernelConstraint),this.recurrentConstraint=Ys(e.recurrentConstraint),this.biasConstraint=Ys(e.biasConstraint),this.dropout=f0([1,of([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=f0([1,of([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Kn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return $e(()=>{if(e=e,e.length!==2)throw new we(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let i=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=cf({ones:()=>Ml(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=cf({ones:()=>Ml(i),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let r;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?r=_u(Ce(e,o),this.kernel.read()):r=_u(e,this.kernel.read()),this.bias!=null&&(r=Rc(r,this.bias.read())),a!=null&&(i=Ce(i,a));let l=rt(r,_u(i,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:af(this.activation),useBias:this.useBias,kernelInitializer:rs(this.kernelInitializer),recurrentInitializer:rs(this.recurrentInitializer),biasInitializer:rs(this.biasInitializer),kernelRegularizer:Ei(this.kernelRegularizer),recurrentRegularizer:Ei(this.recurrentRegularizer),biasRegularizer:Ei(this.biasRegularizer),activityRegularizer:Ei(this.activityRegularizer),kernelConstraint:Xs(this.kernelConstraint),recurrentConstraint:Xs(this.recurrentConstraint),biasConstraint:Xs(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}UP.className="SimpleRNNCell";nt(UP);class wq extends Ef{constructor(e){e.cell=new UP(e),super(e)}call(e,n){return $e(()=>{this.cell.dropoutMask!=null&&(An(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(An(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const i=n==null?null:n.mask,s=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:i,training:s,initialState:r})})}static fromConfig(e,n){return new e(n)}}wq.className="SimpleRNN";nt(wq);class HP extends Mk{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new we("GRUCell does not support reset_after parameter set to true.");this.units=e.units,pr(this.units,"units"),this.activation=lf(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=lf(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Yi(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Yi(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Yi(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Qi(e.kernelRegularizer),this.recurrentRegularizer=Qi(e.recurrentRegularizer),this.biasRegularizer=Qi(e.biasRegularizer),this.kernelConstraint=Ys(e.kernelConstraint),this.recurrentConstraint=Ys(e.recurrentConstraint),this.biasConstraint=Ys(e.biasConstraint),this.dropout=f0([1,of([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=f0([1,of([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Kn(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return $e(()=>{if(e=e,e.length!==2)throw new we(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const i=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=cf({ones:()=>Ml(e),rate:this.dropout,training:i,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=cf({ones:()=>Ml(s),rate:this.recurrentDropout,training:i,count:3,dropoutFunc:this.dropoutFunc}));const r=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=Ce(e,r[0]));let u=_u(e,this.kernel.read());this.useBias&&(u=Rc(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=Ce(s,o[0]));const h=this.recurrentKernel.read(),[d,p]=Za(h,[2*this.units,this.units],h.rank-1),m=_u(s,d),[g,y,v]=Za(u,3,u.rank-1),[b,w]=Za(m,2,m.rank-1);a=this.recurrentActivation.apply(rt(g,b)),l=this.recurrentActivation.apply(rt(y,w));const S=_u(Ce(l,s),p);c=this.activation.apply(rt(v,S));const k=rt(Ce(a,s),Ce(rt(1,Cs(a)),c));return[k,k]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:af(this.activation),recurrentActivation:af(this.recurrentActivation),useBias:this.useBias,kernelInitializer:rs(this.kernelInitializer),recurrentInitializer:rs(this.recurrentInitializer),biasInitializer:rs(this.biasInitializer),kernelRegularizer:Ei(this.kernelRegularizer),recurrentRegularizer:Ei(this.recurrentRegularizer),biasRegularizer:Ei(this.biasRegularizer),activityRegularizer:Ei(this.activityRegularizer),kernelConstraint:Xs(this.kernelConstraint),recurrentConstraint:Xs(this.recurrentConstraint),biasConstraint:Xs(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}HP.className="GRUCell";nt(HP);class _q extends Ef{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new HP(e),super(e)}call(e,n){return $e(()=>{this.cell.dropoutMask!=null&&(An(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(An(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const i=n==null?null:n.mask,s=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:i,training:s,initialState:r})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}_q.className="GRU";nt(_q);class Fk extends Mk{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,pr(this.units,"units"),this.activation=lf(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=lf(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Yi(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Yi(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Yi(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Qi(e.kernelRegularizer),this.recurrentRegularizer=Qi(e.recurrentRegularizer),this.biasRegularizer=Qi(e.biasRegularizer),this.kernelConstraint=Ys(e.kernelConstraint),this.recurrentConstraint=Ys(e.recurrentConstraint),this.biasConstraint=Ys(e.biasConstraint),this.dropout=f0([1,of([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=f0([1,of([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Kn(e);const i=e[e.length-1];this.kernel=this.addWeight("kernel",[i,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const r=this.biasInitializer,o=this.units;s=new(n=class extends Bl{apply(l,c){const u=r.apply([o]),h=new RP().apply([o]),d=r.apply([o*2]);return ZF(ZF(u,h),d)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return $e(()=>{const i=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new we(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const r=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=cf({ones:()=>Ml(e),rate:this.dropout,training:i,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=cf({ones:()=>Ml(s),rate:this.recurrentDropout,training:i,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,h;0<this.dropout&&this.dropout<1&&(e=Ce(e,o[0]));let d=_u(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=Ce(s,a[0])),d=rt(d,_u(s,this.recurrentKernel.read())),this.useBias&&(d=Rc(d,this.bias.read()));const[p,m,g,y]=Za(d,4,d.rank-1);l=this.recurrentActivation.apply(p),c=this.recurrentActivation.apply(m),u=rt(Ce(c,r),Ce(l,this.activation.apply(g))),h=this.recurrentActivation.apply(y);const v=Ce(h,this.activation.apply(u));return[v,v,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:af(this.activation),recurrentActivation:af(this.recurrentActivation),useBias:this.useBias,kernelInitializer:rs(this.kernelInitializer),recurrentInitializer:rs(this.recurrentInitializer),biasInitializer:rs(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ei(this.kernelRegularizer),recurrentRegularizer:Ei(this.recurrentRegularizer),biasRegularizer:Ei(this.biasRegularizer),activityRegularizer:Ei(this.activityRegularizer),kernelConstraint:Xs(this.kernelConstraint),recurrentConstraint:Xs(this.recurrentConstraint),biasConstraint:Xs(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}Fk.className="LSTMCell";nt(Fk);class Sq extends Ef{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Fk(e),super(e)}call(e,n){return $e(()=>{this.cell.dropoutMask!=null&&(An(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(An(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const i=n==null?null:n.mask,s=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:i,training:s,initialState:r})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Sq.className="LSTM";nt(Sq);class GP extends Mk{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return $e(()=>{e=e;let i=e.slice(1);const s=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?s.push(i.splice(0,a.stateSize.length)):s.push(i.splice(0,1));s.reverse();const r=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];i=s[a],a===0?o=[e[0]].concat(i):o=[o[0]].concat(i),o=l.call(o,n),r.push(o.slice(1))}i=[];for(const a of r.slice().reverse())i.push(...a);return[o[0]].concat(i)})}build(e){pT(e)&&(e=e[0]),e=e;let n;this.cells.forEach((i,s)=>{$p(`RNNCell_${s}`,()=>{i.build(e),Array.isArray(i.stateSize)?n=i.stateSize[0]:n=i.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=r=>({className:r.getClassName(),config:r.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,i={}){const s=[];for(const r of n.cells)s.push(gh(r,i));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const i of this.cells)n.push(...i.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return mT(e)}setWeights(e){const n=[];for(const i of this.cells){const s=i.weights.length,r=e.splice(s);for(let o=0;o<i.weights.length;++o)n.push([i.weights[o],r[o]])}FP(n)}}GP.className="StackedRNNCells";nt(GP);function cf(t){const{ones:e,rate:n,training:i=!1,count:s=1,dropoutFunc:r}=t,o=()=>r!=null?r(e(),n):pG(e(),n),a=()=>lx(o,e,i);return!s||s<=1?bu(a().clone()):Array(s).fill(void 0).map(a).map(c=>bu(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var uke=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class Cq extends Ef{constructor(e){if(e.unroll)throw new _n("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new _n("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Ks({ndim:5})]}call(e,n){return $e(()=>{if(this.cell.dropoutMask!=null&&(An(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(An(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new we("ConvRNN2D cell does not support constants");const i=n==null?null:n.mask,s=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:i,training:s,initialState:r})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return $e(()=>{const{stateSize:n}=this.cell,i=e.shape,s=this.computeSingleOutputShape(i),r=[s[0],...s.slice(2)],o=hr(r);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){$e(()=>{if(!this.stateful)throw new au("Cannot call resetStates() on an RNN Layer that is not stateful.");const i=this.inputSpec[0].shape,s=this.computeSingleOutputShape(i),r=[s[0],...s.slice(2)];if(i[0]==null)throw new we("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>hr(r)):this.states_=[hr(r)];else if(e==null)An(this.states_),this.keptStates!=null&&(An(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>hr(r)):this.states_[0]=hr(r);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new we(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):An(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=r;if(!ri(l.shape,c))throw new we(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>bu(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:i,kernelSize:s,padding:r,strides:o,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],h=kc(c,s[0],r,o[0],a[0]),d=kc(u,s[1],r,o[1],a[1]);return[...e.slice(0,2),...l?[i,h,d]:[h,d,i]]}}Cq.className="ConvRNN2D";class qP extends Fk{constructor(e){const{filters:n,kernelSize:i,strides:s,padding:r,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,pr(this.filters,"filters"),this.kernelSize=Vg(i,2,"kernelSize"),this.kernelSize.forEach(l=>pr(l,"kernelSize")),this.strides=Vg(s||1,2,"strides"),this.strides.forEach(l=>pr(l,"strides")),this.padding=r||"valid",sl(this.padding),this.dataFormat=o||"channelsLast",Ns(this.dataFormat),this.dilationRate=Vg(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>pr(l,"dilationRate"))}build(e){var n;e=Kn(e);const i=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[i]==null)throw new we(`The channel dimension of the input should be defined. Found ${e[i]}`);const s=e[i],r=4,o=this.kernelSize.concat([s,this.filters*r]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*r]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends Bl{apply(d,p){const m=c.apply([u]),g=If([u]),y=c.apply([u*2]);return AP([m,g,y])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*r],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return $e(()=>{if(e.length!==3)throw new we(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const i=n.training||!1,s=e[0],r=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=cf({ones:()=>Ml(s),rate:this.dropout,training:i,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(ne,le,M)=>!le||!le[M]?ne:Ce(le[M],ne);let u=c(s,l,0),h=c(s,l,1),d=c(s,l,2),p=c(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=cf({ones:()=>Ml(r),rate:this.recurrentDropout,training:i,count:a,dropoutFunc:this.dropoutFunc}));const m=this.recurrentDropoutMask;let g=c(r,m,0),y=c(r,m,1),v=c(r,m,2),b=c(r,m,3);const w=3,[S,k,I,T]=Za(this.kernel.read(),a,w),[E,O,F,R]=this.useBias?Za(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,S,E,this.padding),h=this.inputConv(h,k,O,this.padding),d=this.inputConv(d,I,F,this.padding),p=this.inputConv(p,T,R,this.padding);const[$,U,W,te]=Za(this.recurrentKernel.read(),a,w);g=this.recurrentConv(g,$),y=this.recurrentConv(y,U),v=this.recurrentConv(v,W),b=this.recurrentConv(b,te);const H=this.recurrentActivation.apply(rt(u,g)),G=this.recurrentActivation.apply(rt(h,y)),B=rt(Ce(G,o),Ce(H,this.activation.apply(rt(d,v)))),Y=Ce(this.recurrentActivation.apply(rt(p,b)),this.activation.apply(B));return[Y,Y,B]})}getConfig(){const e=super.getConfig(),n=uke(e,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),i)}inputConv(e,n,i,s){const r=rm(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return i?Rc(r,i,this.dataFormat):r}recurrentConv(e,n){return rm(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}qP.className="ConvLSTM2DCell";nt(qP);class kq extends Cq{constructor(e){const n=new qP(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}kq.className="ConvLSTM2D";nt(kq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class KP extends Nn{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,i=[];for(let s=0;s<this.noiseShape.length;++s)i.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return i}call(e,n){return $e(()=>{this.invokeCallHook(e,n);const i=tn(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,r=this.getNoiseShape(i);return lx(()=>pG(i,this.rate,r,this.seed),()=>i,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}KP.className="Dropout";nt(KP);class Iq extends KP{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}Iq.className="SpatialDropout1D";nt(Iq);class XP extends Nn{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,pr(this.units,"units"),this.activation=lf(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Yi(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Yi(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Ys(e.kernelConstraint),this.biasConstraint=Ys(e.biasConstraint),this.kernelRegularizer=Qi(e.kernelRegularizer),this.biasRegularizer=Qi(e.biasRegularizer),this.activityRegularizer=Qi(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Kn(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Kn(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return $e(()=>{this.invokeCallHook(e,n);const i=tn(e),s=aG(this.activation.getClassName());let r;return s!=null?r=_u(i,this.kernel.read(),s,this.bias?this.bias.read():null):(r=_u(i,this.kernel.read()),this.bias!=null&&(r=Rc(r,this.bias.read())),this.activation!=null&&(r=this.activation.apply(r))),r})}getConfig(){const e={units:this.units,activation:af(this.activation),useBias:this.useBias,kernelInitializer:rs(this.kernelInitializer),biasInitializer:rs(this.biasInitializer),kernelRegularizer:Ei(this.kernelRegularizer),biasRegularizer:Ei(this.biasRegularizer),activityRegularizer:Ei(this.activityRegularizer),kernelConstraint:Xs(this.kernelConstraint),biasConstraint:Xs(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}XP.className="Dense";nt(XP);class Nq extends Nn{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Kn(e);for(const n of e.slice(1))if(n==null)throw new we(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Kd(e,1)]}call(e,n){return $e(()=>{this.invokeCallHook(e,n);let i=tn(e);if(this.dataFormat==="channelsFirst"&&i.rank>1){const s=[0];for(let r=2;r<i.rank;++r)s.push(r);s.push(1),i=Un(i,s)}return USe(i)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}Nq.className="Flatten";nt(Nq);class Eq extends Nn{constructor(e){super(e),this.supportsMasking=!0,this.activation=lf(e.activation)}call(e,n){return $e(()=>{this.invokeCallHook(e,n);const i=tn(e);return this.activation.apply(i)})}getConfig(){const e={activation:af(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}Eq.className="Activation";nt(Eq);class Tq extends Nn{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return $e(()=>(e=tn(e),VSe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}Tq.className="RepeatVector";nt(Tq);class Aq extends Nn{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const i="Total size of new array must be unchanged.",s=n.slice();let r=1,o=null;for(let l=0;l<s.length;++l){const c=s[l];if(this.isUnknown(c))if(o===null)o=l;else throw new we("Can only specifiy one unknown dimension.");else r*=c}const a=Kd(e);if(o!==null){if(r===0||a%r!==0)throw new we(i);s[o]=a/r}else if(a!==r)throw new we(i);return s}computeOutputShape(e){let n=!1;for(let i=0;i<e.length;++i)if(this.isUnknown(e[i])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return $e(()=>{this.invokeCallHook(e,n);const i=tn(e),s=i.shape,r=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return Ae(i,r)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}Aq.className="Reshape";nt(Aq);class Rq extends Nn{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Nc(1,e.dims.length+1);if(!ri(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Ks({ndim:this.dims.length+1})]}computeOutputShape(e){e=Kn(e);const n=e.slice();return this.dims.forEach((i,s)=>{n[s+1]=e[i]}),n}call(e,n){return Un(tn(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}Rq.className="Permute";nt(Rq);class Lq extends Nn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const i=tn(e);return rT(V_(i,this.maskValue),-1)}call(e,n){return $e(()=>{this.invokeCallHook(e,n);const i=tn(e),o=rT(V_(i,this.maskValue),-1,!0);return Ce(i,It(o,i.dtype))})}}Lq.className="Masking";nt(Lq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Pq extends Nn{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(ui(e.inputLength))}this.inputDim=e.inputDim,pr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,pr(this.outputDim,"outputDim"),this.embeddingsInitializer=Yi(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Qi(e.embeddingsRegularizer),this.activityRegularizer=Qi(e.activityRegularizer),this.embeddingsConstraint=Ys(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return $e(()=>this.maskZero?(e=tn(e),V_(e,Hn(e))):null)}computeOutputShape(e){if(e=Kn(e),this.inputLength==null)return[...e,this.outputDim];const n=ui(this.inputLength);if(n.length!==e.length-1)throw new we(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let i=0;for(let s=0;s<n.length;++s){const r=n[s],o=e[s+1];if(r!=null&&o!=null&&r!==o)throw new we(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);r==null&&(n[i]=o),i++}}return[e[0],...n,this.outputDim]}call(e,n){return $e(()=>{this.invokeCallHook(e,n);let i=tn(e);i.dtype!=="int32"&&(i=wu(i,"int32"));const s=fG(this.embeddings.read(),Ae(i,[i.size]));return Ae(s,Kn(this.computeOutputShape(i.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:rs(this.embeddingsInitializer),embeddingsRegularizer:Ei(this.embeddingsRegularizer),activityRegularizer:Ei(this.activityRegularizer),embeddingsConstraint:Xs(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}Pq.className="Embedding";nt(Pq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class km extends Nn{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new _n}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const i=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const r=e[e.length-n.length+s],o=n[s];if(r==null||o==null||r<0||o<0)i.push(null);else if(r===1)i.push(o);else if(o===1)i.push(r);else{if(r!==o)throw new we("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));i.push(r)}}return i}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Kn(e)]),e=e,e.length<2)throw new we(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const r of e)r!=null&&r[0]!==null&&n.push(r[0]);if(n=qd(n),n.length>1)throw new we(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let i=e[0]==null?null:e[0].slice(1);for(let r=1;r<e.length;++r){const o=e[r]==null?null:e[r].slice(1);i=this.computeElementwiseOpOutputShape(i,o)}const s=e.map(r=>r.length);e.indexOf(null)===-1&&qd(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return $e(()=>{if(e=e,this.reshapeRequired){const i=[],s=e.map(r=>r.rank);if(s.indexOf(null)===-1){const r=of(s);for(let o of e){const a=o.rank;for(let l=0;l<r-a;++l)o=ox(o,1);i.push(o)}return this.mergeFunction(i)}else{let r=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,h=u[0],d=u.slice(1).concat([h]);let p=Ae(l,[h].concat(Kd(u.slice(1))));p=Un(p,[1,0]),p=Ae(p,d),i.push(p),r=!0}else if(c>1){const u=Nc(1,c).concat([0]);i.push(Un(l,u)),r=!0}else i.push(l)}let o=this.mergeFunction(i);const a=o.rank;if(r){if(a==null){const l=o.shape,c=l.length,u=l[c-1],h=[u].concat(l.slice(0,l.length-1));o=Ae(Un(Ae(o,[-1,u]),[1,0]),h)}else if(a>1){const l=[a-1].concat(Nc(0,a-1));o=Un(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const r=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}let i=[];for(const s of e)s!=null&&s[0]!==null&&i.push(s[0]);return i=qd(i),i.length===1?n=i.concat(n):n=[null].concat(n),n}computeMask(e,n){return $e(()=>{if(n==null)return null;if(!Array.isArray(n))throw new we("`mask` should be an Array");if(!Array.isArray(e))throw new we("`inputs` should be an Array");if(n.length!==e.length)throw new we(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:jo(s,0));let i=n[0];for(let s=1;s<n.length-1;++s)i=Ih(i,n[s]);return i})}}class Dq extends km{constructor(e){super(e)}mergeFunction(e){return $e(()=>{let n=e[0].clone();for(let i=1;i<e.length;++i)n=rt(n,e[i]);return n})}}Dq.className="Add";nt(Dq);class $q extends km{constructor(e){super(e)}mergeFunction(e){return $e(()=>{let n=e[0].clone();for(let i=1;i<e.length;++i)n=Ce(n,e[i]);return n})}}$q.className="Multiply";nt($q);class Oq extends km{constructor(e){super(e)}mergeFunction(e){return $e(()=>{let n=e[0].clone();for(let i=1;i<e.length;++i)n=rt(n,e[i]);return Ce(1/e.length,n)})}}Oq.className="Average";nt(Oq);class Mq extends km{constructor(e){super(e)}mergeFunction(e){return $e(()=>{let n=e[0];for(let i=1;i<e.length;++i)n=kf(n,e[i]);return n})}}Mq.className="Maximum";nt(Mq);class Fq extends km{constructor(e){super(e)}mergeFunction(e){return $e(()=>{let n=e[0];for(let i=1;i<e.length;++i)n=_y(n,e[i]);return n})}}Fq.className="Minimum";nt(Fq);class Bq extends km{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new we("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const i=[];for(let s=0;s<e.length;++s){const r=e[s].slice();r.splice(this.axis,1);let o=!1;for(const a of i)if(ri(a,r)){o=!0;break}o||i.push(r)}if(i.length>1)throw new we("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return $e(()=>AP(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new we("A `Concatenate` layer should be called on a list of inputs.");const n=e,i=n[0].slice(),s=this.axis<0?i.length+this.axis:this.axis;for(const r of n.slice(1)){if(i[s]==null||r[s]==null){i[s]=null;break}i[s]+=r[s]}return i}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new we("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new we("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new we(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return $e(()=>{let i=!0;if(n.forEach(o=>{if(o!=null){i=!1;return}}),i)return null;const s=[];for(let o=0;o<e.length;++o)n[o]==null?s.push(It(Ml(e[o]),"bool")):n[o].rank<e[o].rank?s.push(jo(n[o],-1)):s.push(n[o]);const r=Yo(s,this.axis);return jH(r,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}Bq.className="Concatenate";nt(Bq);function Pv(t,e){for(;t<0;)t+=e;return t}function hke(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new _n("batchDot is not implemented for tensors of 4D or higher rank yet");if(ce(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),ce(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new _n("batchDot is not implemented for complex64-type Tensors yet.");const i=t.shape.length,s=e.shape.length;n==null&&(n=[i-1,s-2]);const r=n;return $e(()=>{let o;if(i>s){o=i-s;const l=[];for(let c=0;c<o;++c)l.push(1);e=Ae(e,e.shape.concat(l))}else if(s>i){o=s-i;const l=[];for(let c=0;c<o;++c)l.push(1);t=Ae(t,t.shape.concat(l))}else o=0;let a;if(t.shape.length===2&&e.shape.length===2)r[0]===r[1]?a=Vt(Ce(t,e),r[0]):a=Vt(Ce(Un(t,[1,0]),e),r[1]);else{const l=r[0]!==t.shape.length-1,c=r[1]===e.shape.length-1;a=ni(t,e,l,c)}if(o>0){let l;i>s?l=i+s-3:l=i-1;const c=[];for(let u=l;u<l+o;++u)c.push(u);a=ex(a,c)}return a.shape.length===1&&(a=jo(a,1)),a})}class zq extends km{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){ce(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],i=e[1];if(n.length>3||i.length>3)throw new _n("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,i);if(n[s[0]]!==i[s[1]])throw new we(`Dimension incompatibility: ${n[s[0]]} !== ${i[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new we(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],i=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((r,o)=>Pv(r,e[o].shape.length)):s=[Pv(this.axes,n.shape.length),Pv(this.axes,i.shape.length)],this.normalize&&(n=X_(n,s[0]),i=X_(i,s[1])),hke(n,i,s)}interpretAxes(e,n){let i;return Array.isArray(this.axes)?i=this.axes:i=[Pv(this.axes,e.length),Pv(this.axes,n.length)],i}computeOutputShape(e){ce(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),i=e[1].slice();if(n.length>3||i.length>3)throw new _n("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,i);n.splice(s[0],1),i.splice(s[1],1),i.splice(0,1);const r=n.concat(i);return r.length===1&&r.push(1),r}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}zq.className="Dot";nt(zq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class jq extends Nn{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return $e(()=>{this.invokeCallHook(e,n);const i=tn(e);return lx(()=>rt(Rk(i.shape,0,this.stddev),i),()=>i,n.training||!1)})}}jq.className="GaussianNoise";nt(jq);class Vq extends Nn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return $e(()=>{this.invokeCallHook(e,n);const i=tn(e);return this.rate>0&&this.rate<1?lx(()=>{const r=Math.sqrt(this.rate/(1-this.rate));return Ce(i,Rk(i.shape,1,r))},()=>i,n.training||!1):i})}}Vq.className="GaussianDropout";nt(Vq);class Wq extends Nn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||tn(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return $e(()=>{if(this.rate<1&&this.rate>0){const i=this._getNoiseShape(e);return lx(()=>{const r=tn(e),l=-1.6732632423543772*1.0507009873554805;let c=xm(Jb(i),this.rate);c=wu(c,"float32");const u=((1-this.rate)*(1+this.rate*l**2))**-.5,h=-u*l*this.rate,d=rt(Ce(r,c),Ce(rt(c,-1),l));return rt(Ce(d,u),h)},()=>tn(e),n.training||!1)}return e})}}Wq.className="AlphaDropout";nt(Wq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Iy(t,e,n,i,s,r=.001){let o;if(t.rank===2)o=H1e(t,e,n,i,s,r);else if(t.rank===3)o=q1e(t,e,n,i,s,r);else if(t.rank===4)o=X1e(t,e,n,i,s,r);else throw new _n(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function dke(t,e,n,i,s=.001){return $e(()=>{const r=R3(t,i),o=r.mean,a=r.variance;return[Iy(t,o,a,n,e,s),o,a]})}function fke(t,e,n,i,s=.001){return $e(()=>{const r=R3(t,i),o=r.mean,a=r.variance,l=[];for(const m of Nc(0,t.rank))i.indexOf(m)!==-1?l.push(1):l.push(t.shape[m]);const c=Ae(o,l),u=Ae(a,l),h=e==null?null:Ae(e,l),d=n==null?null:Ae(n,l);return[Iy(t,c,u,d,h,s),o,a]})}function pke(t,e,n,i,s=.001){return ri(i.slice().sort(),Nc(0,t.rank-1))?dke(t,e,n,i,s):fke(t,e,n,i,s)}class Uq extends Nn{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Yi(e.betaInitializer||"zeros"),this.gammaInitializer=Yi(e.gammaInitializer||"ones"),this.movingMeanInitializer=Yi(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Yi(e.movingVarianceInitializer||"ones"),this.betaConstraint=Ys(e.betaConstraint),this.gammaConstraint=Ys(e.gammaConstraint),this.betaRegularizer=Qi(e.betaRegularizer),this.gammaRegularizer=Qi(e.gammaRegularizer)}build(e){e=Kn(e);const n=this.axis>=0?this.axis:this.axis+e.length,i=e[n];if(i==null)throw new we(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Ks({ndim:e.length,axes:{[n]:i}})];const s=[i];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return $e(()=>{const i=n.training==null?!1:n.training,s=tn(e),r=s.shape,o=r.length,a=Nc(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const c=cm(1,o);c[l]=r[l];const u=a.slice();u.sort();const h=!ri(u,Nc(0,o).slice(0,o-1)),d=()=>{if(h){const b=Ae(this.movingMean.read(),c),w=Ae(this.movingVariance.read(),c),S=this.center?Ae(this.beta.read(),c):null,k=this.scale?Ae(this.gamma.read(),c):null;return Iy(s,b,w,S,k,this.epsilon)}else return Iy(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!i)return d();const[p,m,g]=pke(s,this.gamma.read(),this.beta.read(),a,this.epsilon),y=(b,w,S)=>{$e(()=>{const k=1-S,I=b.read(),T=Ce(en(I,w),k);b.write(en(I,T))})};return(()=>{y(this.movingMean,m,this.momentum),y(this.movingVariance,g,this.momentum)})(),p})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:rs(this.betaInitializer),gammaInitializer:rs(this.gammaInitializer),movingMeanInitializer:rs(this.movingMeanInitializer),movingVarianceInitializer:rs(this.movingVarianceInitializer),betaRegularizer:Ei(this.betaRegularizer),gammaRegularizer:Ei(this.gammaRegularizer),betaConstraint:Xs(this.betaConstraint),gammaConstraint:Xs(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}Uq.className="BatchNormalization";nt(Uq);class Hq extends Nn{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Yi(e.betaInitializer||"zeros"),this.gammaInitializer=Yi(e.gammaInitializer||"ones"),this.betaRegularizer=Qi(e.betaRegularizer),this.gammaRegularizer=Qi(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Kn(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=n);for(const r of this.axis)if(r<0||r>=n)throw new Error(`Invalid axis: ${r}`);if(this.axis.length!==qd(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const i=this.axis.map(r=>e[r]),s=!0;this.scale?this.gamma=this.addWeight("gamma",i,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",i,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const i=tn(e),s=i.shape,r=s.length;return $e(()=>{let{mean:a,variance:l}=R3(i,this.axis,!0);const c=cm(1,r);for(const g of this.axis)c[g]=s[g];const u=g=>g!=null&&g.shape.length!==r?Ae(g,c):g;let h=this.scale?u(this.gamma.read()):null,d=this.center?u(this.beta.read()):null;const p=[],m=[];for(let g=0;g<r;++g)this.axis.indexOf(g)!==-1?(p.push(s[g]),m.push(1)):(p.push(1),m.push(s[g]));return a=yc(a,p),l=yc(l,p),h!=null&&(h=yc(h,m)),d!=null&&(d=yc(d,m)),Iy(i,a,l,d,h,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:rs(this.betaInitializer),gammaInitializer:rs(this.gammaInitializer),betaRegularizer:Ei(this.betaRegularizer),gammaRegularizer:Ei(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}Hq.className="LayerNormalization";nt(Hq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mke(t,e,n){return $e(()=>{if(t.rank!==4)throw new we(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new we("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Ec()),n!=="channelsLast"&&n!=="channelsFirst")throw new we(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let i;return n==="channelsFirst"?i=[[0,0],[0,0],e[0],e[1]]:i=[[0,0],e[0],e[1],[0,0]],P3(t,i)})}class Gq extends Nn{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Ec():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new we(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,i;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new we(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new we(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);i=e.padding[1]}this.padding=[n,i]}this.inputSpec=[new Ks({ndim:4})]}computeOutputShape(e){e=Kn(e);let n,i;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?i=e[3]+this.padding[1][0]+this.padding[1][1]:i=null,[e[0],e[1],n,i]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?i=e[2]+this.padding[1][0]+this.padding[1][1]:i=null,[e[0],n,i,e[3]])}call(e,n){return $e(()=>mke(tn(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}Gq.className="ZeroPadding2D";nt(Gq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bk(t,e,n,i,s,r){return $e(()=>{Ns(s),cG(r),sl(i),n==null&&(n=[1,1]),i==null&&(i="valid"),s==null&&(s=Ec()),r==null&&(r="max"),t=WP(t,s);let o;const a=i==="same"?"same":"valid";return r==="max"?o=A3(t,e,n,a):o=x3(t,e,n,a),s==="channelsFirst"&&(o=Un(o,[0,3,1,2])),o})}function qq(t,e,n,i,s,r){return $e(()=>{Ns(s),cG(r),sl(i),n==null&&(n=[1,1,1]),i==null&&(i="valid"),s==null&&(s=Ec()),r==null&&(r="max"),t=hq(t,s);let o;const a=i==="same"?"same":"valid";return r==="max"?o=Pbe(t,e,n,a):o=$1e(t,e,n,a),s==="channelsFirst"&&(o=Un(o,[0,4,1,2,3])),o})}class Kq extends Nn{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new we(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(pr(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new we(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);pr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,sl(this.padding),this.inputSpec=[new Ks({ndim:3})]}computeOutputShape(e){e=Kn(e);const n=kc(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return $e(()=>{this.invokeCallHook(e,n),e=ox(tn(e),2);const i=this.poolingFunction(tn(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return ex(i,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class Xq extends Kq{constructor(e){super(e)}poolingFunction(e,n,i,s,r){return Ns(r),sl(s),Bk(e,n,i,s,r,"max")}}Xq.className="MaxPooling1D";nt(Xq);class Yq extends Kq{constructor(e){super(e)}poolingFunction(e,n,i,s,r){return Ns(r),sl(s),Bk(e,n,i,s,r,"avg")}}Yq.className="AveragePooling1D";nt(Yq);class Zq extends Nn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new we(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];pr(this.poolSize,"poolSize"),pr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ns(this.dataFormat),sl(this.padding),this.inputSpec=[new Ks({ndim:4})]}computeOutputShape(e){e=Kn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],i=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=kc(n,this.poolSize[0],this.padding,this.strides[0]),i=kc(i,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,i]:[e[0],n,i,e[3]]}call(e,n){return $e(()=>(this.invokeCallHook(e,n),this.poolingFunction(tn(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Qq extends Zq{constructor(e){super(e)}poolingFunction(e,n,i,s,r){return Ns(r),sl(s),Bk(e,n,i,s,r,"max")}}Qq.className="MaxPooling2D";nt(Qq);class Jq extends Zq{constructor(e){super(e)}poolingFunction(e,n,i,s,r){return Ns(r),sl(s),Bk(e,n,i,s,r,"avg")}}Jq.className="AveragePooling2D";nt(Jq);class eK extends Nn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new we(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];pr(this.poolSize,"poolSize"),pr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ns(this.dataFormat),sl(this.padding),this.inputSpec=[new Ks({ndim:5})]}computeOutputShape(e){e=Kn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],i=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=kc(n,this.poolSize[0],this.padding,this.strides[0]),i=kc(i,this.poolSize[1],this.padding,this.strides[1]),s=kc(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,i,s]:[e[0],n,i,s,e[4]]}call(e,n){return $e(()=>(this.invokeCallHook(e,n),this.poolingFunction(tn(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class tK extends eK{constructor(e){super(e)}poolingFunction(e,n,i,s,r){return Ns(r),sl(s),qq(e,n,i,s,r,"max")}}tK.className="MaxPooling3D";nt(tK);class nK extends eK{constructor(e){super(e)}poolingFunction(e,n,i,s,r){return Ns(r),sl(s),qq(e,n,i,s,r,"avg")}}nK.className="AveragePooling3D";nt(nK);class iK extends Nn{constructor(e){super(e),this.inputSpec=[new Ks({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new _n}}class sK extends iK{constructor(e){super(e||{})}call(e,n){return $e(()=>{const i=tn(e);return Os(i,1)})}}sK.className="GlobalAveragePooling1D";nt(sK);class rK extends iK{constructor(e){super(e||{})}call(e,n){return $e(()=>{const i=tn(e);return Cc(i,1)})}}rK.className="GlobalMaxPooling1D";nt(rK);class oK extends Nn{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ns(this.dataFormat),this.inputSpec=[new Ks({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new _n}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class aK extends oK{call(e,n){return $e(()=>{const i=tn(e);return this.dataFormat==="channelsLast"?Os(i,[1,2]):Os(i,[2,3])})}}aK.className="GlobalAveragePooling2D";nt(aK);class lK extends oK{call(e,n){return $e(()=>{const i=tn(e);return this.dataFormat==="channelsLast"?Cc(i,[1,2]):Cc(i,[2,3])})}}lK.className="GlobalMaxPooling2D";nt(lK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class cK extends Nn{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,i={}){const s=n.layer,r=gh(s,i);delete n.layer;const o={layer:r};return Object.assign(o,n),new e(o)}}class uK extends cK{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Kn(e),e.length<3)throw new we(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Kn(e);const n=[e[0]].concat(e.slice(2)),i=this.layer.computeOutputShape(n),s=e[1];return[i[0],s].concat(i.slice(1))}call(e,n){return $e(()=>(e=tn(e),xq((o,a)=>[tn(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}uK.className="TimeDistributed";nt(uK);function gke(t){Cm(MSe,"BidirectionalMergeMode",t)}const vke="concat";class hK extends cK{constructor(e){super(e);const n=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=n,this.forwardLayer=gh(i),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=gh(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?vke:e.mergeMode,gke(this.mergeMode),e.weights)throw new _n("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,i=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,i)),this.backwardLayer.setWeights(e.slice(i))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let i,s,r;return this.returnState&&(r=n.slice(1)),i=n[0],i=i,this.mergeMode==="concat"?(i[i.length-1]*=2,s=[i]):this.mergeMode==null?s=[i,i.slice()]:s=[i],this.returnState?this.mergeMode==null?s.concat(r).concat(r.slice()):[i].concat(r).concat(r.slice()):Vo(s)}apply(e,n){let i=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const r=bq(e,i,s,this.numConstants);if(e=r.inputs,i=r.initialState,s=r.constants,Array.isArray(e)&&(i=e.slice(1),e=e[0]),(i==null||i.length===0)&&s==null)return super.apply(e,n);const o=[],a=[];if(i!=null){const c=i.length;if(c%2>0)throw new we("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=i,o.push(...i);const u=i.map(h=>new Ks({shape:h.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(s!=null)throw new _n("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof Nu;for(const c of o)if(c instanceof Nu!==l)throw new we("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(o),u=this.inputSpec.concat(a),h=this.inputSpec;this.inputSpec=u;const d=super.apply(c,n);return this.inputSpec=h,d}else return super.apply(e,n)}call(e,n){return $e(()=>{const i=n.initialState;let s,r;if(i==null)s=this.forwardLayer.call(e,n),r=this.backwardLayer.call(e,n);else{const l=i.slice(0,i.length/2),c=i.slice(i.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),r=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let o;this.returnState&&(Array.isArray(s)&&(o=s.slice(1).concat(r.slice(1))),s=s[0],r=r[0]),this.returnSequences&&(r=am(r,1));let a;return this.mergeMode==="concat"?a=AP([s,r]):this.mergeMode==="sum"?a=rt(s,r):this.mergeMode==="ave"?a=Ce(.5,rt(s,r)):this.mergeMode==="mul"?a=Ce(s,r):this.mergeMode==null&&(a=[s,r]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){$p(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),$p(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let i;if(this.returnSequences?this.mergeMode==null?i=[n,n]:i=n:this.mergeMode==null?i=[null,null]:i=null,this.returnState){const r=this.forwardLayer.states.map(o=>null);return Array.isArray(i)?i.concat(r).concat(r):[i].concat(r).concat(r)}else return i}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const i=gh(n.layer);if(delete n.layer,n.numConstants!=null)throw new _n("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=i,new e(s)}}hK.className="Bidirectional";nt(hK);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class dK extends Nn{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return $e(()=>(e=tn(e),e.dtype!=="float32"&&(e=wu(e,"float32")),rt(Ce(e,this.scale),this.offset)))}}dK.className="Rescaling";nt(dK);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:yke,cropAndResize:bke}=ch;class fK extends Nn{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,i,s,r,o,a,l){return $e(()=>{let c,u=!1;const h=n/o,d=i/a,p=(s+n)/o,m=(r+i)/a,g=[h,d,p,m],y=[];e.rank===3?(u=!0,c=Nh([e])):c=e;for(let k=0;k<c.shape[0];k++)y.push(g);const v=RH(y,[y.length,4]),b=Sy(0,y.length,1,"int32"),S=bke(c,v,b,[s,r],"nearest");return wu(u?tn(lm(S)):S,l)})}upsize(e,n,i,s){return $e(()=>{const r=yke(e,[n,i]);return wu(r,s)})}call(e,n){return $e(()=>{const i=tn(e),s=i.dtype,r=i.shape,o=r[r.length-3],a=r[r.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(i,l,c,this.height,this.width,o,a,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Kn(e);const n=e.length-3,i=e.length-2;return e[n]=this.height,e[i]=this.width,e}}fK.className="CenterCrop";nt(fK);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xke(t,e,n,i){let s=tn(t);if(s.dtype!=="int32"&&(s=wu(s,"int32")),e==="int")return s;const r=s.shape;if(s.rank===0&&(s=jo(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=jo(s,-1)),s.rank>2)throw new we(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${r} which would result in output rank ${s.rank}.`);const o=["multiHot","oneHot"].includes(e),a=s;let l;if(typeof i<"u"&&e==="count"?l=OF(a,i,n,o):l=OF(a,[],n,o),e!=="tfIdf")return l;if(i)return Ce(l,i);throw new we("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class pK extends Nn{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Kn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return $e(()=>{e=tn(e),e.dtype!=="int32"&&(e=wu(e,"int32"));let i;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new we(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);i=tn(n.countWeights)}const s=Cc(e),r=z_(e),o=il(this.numTokens,s).bufferSync().get(0),a=xm(r,0).bufferSync().get(0);if(!(o&&a))throw new we(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return xke(e,this.outputMode,this.numTokens,i)})}}pK.className="CategoryEncoding";nt(pK);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const wke=["bilinear","nearest"],g6=new Set(wke);class mK extends Nn{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(g6.has(e.interpolation))this.interpolation=e.interpolation;else throw new we(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Kn(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return $e(()=>{const i=[this.height,this.width];if(this.interpolation==="bilinear")return ch.resizeBilinear(e,i,!this.cropToAspectRatio);if(this.interpolation==="nearest")return ch.resizeNearestNeighbor(e,i,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...g6]} are supported`)})}}mK.className="Resizing";nt(mK);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gK{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}gK.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class vK extends Nn{constructor(e){super(e),this.randomGenerator=new gK(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}vK.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const _ke=["bilinear","nearest"],v6=new Set(_ke);class yK extends vK{constructor(e){super(e);const{factor:n,interpolation:i="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new we(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new we(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new we(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(i)if(v6.has(i))this.interpolation=i;else throw new we(`Invalid interpolation parameter: ${i} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Kn(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return $e(()=>{const i=tn(e);this.imgHeight=i.shape[i.shape.length-3];const s=i.shape[i.shape.length-2];this.widthFactor=Jb([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*s;r=Math.round(r);const o=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return ch.resizeBilinear(e,o);case"nearest":return ch.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...v6]} are supported`)}})}}yK.className="RandomWidth";nt(yK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function y6(t){return new XP(t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ske=ze();Ske.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var b6;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(b6||(b6={}));var x6;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(x6||(x6={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var w6;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(w6||(w6={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dt(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&ce(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cke=m9;class zk extends SL{nextDataId(){return zk.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new $U(this,iu())}write(e,n,i){this.firstUse&&(this.firstUse=!1,ze().get("IS_NODE")&&Ua(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:i,refCount:1}),s}makeTensorInfo(e,n,i){let s;if(n==="string"&&i!=null&&i.length>0&&tb(i[0])){const r=i.map(o=>Gd(o));s=this.write(r,e,n)}else s=this.write(i,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,i,s,r){this.data.set(e,{values:n,dtype:s,refCount:r})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:i}=this.data.get(e);if(n==="complex64"){const s=this.readSync(i.real.dataId),r=this.readSync(i.imag.dataId);return Eh(s,r)}return Y0e(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const i=n.map(s=>rf(s));return kn(e.shape,e.dtype,i)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return kn(e.shape,e.dtype,n)}makeOutput(e,n,i){return iu().makeTensorFromTensorInfo(this.makeTensorInfo(n,i,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:i}=this.data.get(e);i!=null&&(this.disposeData(i.real.dataId,!0),this.disposeData(i.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=zo();return e(),{kernelMs:zo()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Dt([e],"where");const n=this.readSync(e.dataId);return Cke(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}zk.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bK(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const kke=t=>{const{x:e}=t.inputs,n=t.backend;Dt(e,"abs");let i=new Float32Array(He(e.shape));const s=n.data.get(e.dataId).values;return i=bK(s),n.makeOutput(i,e.shape,e.dtype)},Ike={kernelName:vC,backendName:"cpu",kernelFunc:kke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Es(t){return(e,n,i,s,r)=>{const o=mn(e,n),a=o.length,l=zt(o),c=He(o),u=Gr(r,c),h=e.length,d=n.length,p=zt(e),m=zt(n),g=h0(e,o),y=h0(n,o);if(g.length+y.length===0)for(let v=0;v<u.length;++v)u[v]=t(i[v%i.length],s[v%s.length]);else for(let v=0;v<u.length;++v){const b=$0(v,a,l),w=b.slice(-h);g.forEach(T=>w[T]=0);const S=yu(w,h,p),k=b.slice(-d);y.forEach(T=>k[T]=0);const I=yu(k,d,m);u[v]=t(i[S],s[I])}return[u,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ba(t){const{inputs:e,backend:n}=t,{real:i,imag:s}=e,r=n.data.get(i.dataId).values,o=n.data.get(s.dataId).values,a=n.makeTensorInfo(i.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(i.shape,"float32",r),imag:n.makeTensorInfo(s.shape,"float32",o)},a}const Nke={kernelName:OL,backendName:"cpu",kernelFunc:ba};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eS(t,e,n="float32"){if(n==="complex64"){const s=eS(t,e,"float32"),r=eS(t,e,"float32");return ba({inputs:{real:s,imag:r},backend:t})}const i=qr(He(e),n);return t.makeTensorInfo(e,n,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eu(t){const{inputs:e,backend:n}=t,{x:i}=e;return n.incRef(i.dataId),{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}const Eke={kernelName:_b,backendName:"cpu",kernelFunc:Eu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function um(t){const{inputs:e,backend:n}=t,{input:i}=e,s=n.data.get(i.dataId).complexTensorInfos.real,r=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,r)}const Tke={kernelName:o3,backendName:"cpu",kernelFunc:um};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xK(t,e,n,i){if(i==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(i==="bool"){const s=bm([0],n),[r,o]=Es((a,l)=>a!==l?1:0)(e,[],t,s,"bool");return[o,"bool",r]}throw new Error(`Error in Cast: failed to cast ${n} to ${i}`)}function uf(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{dtype:r}=i;if(r==="complex64"){if(s.dtype==="complex64")return Eu({inputs:{x:s},backend:n});const u=eS(n,s.shape,s.dtype),h=uf({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),d=ba({inputs:{real:h,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),d}if(s.dtype==="complex64"){const u=um({inputs:{input:s},backend:n}),h=uf({inputs:{x:u},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(u),h}if(!FU(s.dtype,r)){const u=Eu({inputs:{x:s},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:r}}const o=n.data.get(s.dataId).values,[a,l,c]=xK(o,s.shape,s.dtype,r);return n.makeTensorInfo(a,l,c)}const Ake={kernelName:cb,backendName:"cpu",kernelFunc:uf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qs(t,e,n,i){return n==null?({inputs:s,backend:r})=>{const{a:o,b:a}=s,l=r;Dt([o,a],t);const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,h=o.dtype==="string"?Th(c):c,d=o.dtype==="string"?Th(u):u,p=i||o.dtype,[m,g]=e(o.shape,a.shape,h,d,p);return l.makeTensorInfo(g,p,m)}:({inputs:s,backend:r})=>{const{a:o,b:a}=s,l=r;if(o.dtype==="complex64"||a.dtype==="complex64"){const c=uf({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),h=u.complexTensorInfos.real,d=u.complexTensorInfos.imag,p=l.data.get(h.dataId).values,m=l.data.get(d.dataId).values,g=uf({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),y=l.data.get(g.dataId),v=y.complexTensorInfos.real,b=y.complexTensorInfos.imag,w=l.data.get(v.dataId).values,S=l.data.get(b.dataId).values,[k,I,T]=n(o.shape,a.shape,p,m,w,S),E=l.makeTensorInfo(T,"float32",k),O=l.makeTensorInfo(T,"float32",I),F=ba({inputs:{real:E,imag:O},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(g),l.disposeIntermediateTensorInfo(E),l.disposeIntermediateTensorInfo(O),F}else{const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,h=i||o.dtype,[d,p]=e(o.shape,a.shape,c,u,h);return l.makeTensorInfo(p,h,d)}}}function YP(t){return(e,n,i,s,r,o)=>{const a=mn(e,n),l=He(a),c=a.length,u=zt(a),h=Gr("float32",l),d=Gr("float32",l),p=h0(e,a),m=h0(n,a),g=Eh(i,s),y=Eh(r,o),v=e.length,b=zt(e),w=n.length,S=zt(n);if(p.length+m.length===0)for(let k=0;k<h.length;k++){const I=k%g.length,T=k%y.length,E=t(g[I*2],g[I*2+1],y[T*2],y[T*2+1]);h[k]=E.real,d[k]=E.imag}else for(let k=0;k<h.length;k++){const I=$0(k,c,u),T=I.slice(-v);p.forEach($=>T[$]=0);const E=yu(T,v,b),O=I.slice(-w);m.forEach($=>O[$]=0);const F=yu(O,w,S),R=t(g[E*2],g[E*2+1],y[F*2],y[F*2+1]);h[k]=R.real,d[k]=R.imag}return[h,d,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wK=Es((t,e)=>t+e),Rke=YP((t,e,n,i)=>({real:t+n,imag:e+i})),m0=Qs(O0,wK,Rke),Lke={kernelName:O0,backendName:"cpu",kernelFunc:m0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZP(t,e,n,i,s){const r=He(i),o=qr(s,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(r>0?o[l]+=e[a]:o[l]+=1)}return o}function _K(t,e,n,i=!1){const s=t.shape[0],r=t.shape[1],o=kn([s,n],e.dtype);for(let a=0;a<s;a++)for(let l=0;l<r;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(i?o.set(1,a,c):e.size>0?o.set(o.get(a,c)+e.get(a,l),a,c):o.set(o.get(a,c)+1,a,c))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SK=Es((t,e)=>t&e),Pke=Qs($L,SK),Dke={kernelName:$L,backendName:"cpu",kernelFunc:Pke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ru(t){return(e,n,i)=>{const s=_s(n,e.length);for(let r=0;r<e.length;++r)s[r]=t(e[r],i);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hi(t,e,n){const i=Ru(e);return Tf(t,i,n)}function Tf(t,e,n){return({inputs:i,attrs:s,backend:r})=>{const{x:o}=i;Dt(o,t);const a=r,l=a.data.get(o.dataId).values;let c;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=Th(l)}else c=l;const u=n||o.dtype,h=e(c,u,s);return a.makeTensorInfo(o.shape,u,h)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CK=Ru(t=>Math.ceil(t)),$ke=Tf(ub,CK),Oke={kernelName:ub,backendName:"cpu",kernelFunc:$ke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kK(t,e,n,i){const s=_s(n,He(e));if(i&&n!=="string"){let r=0;t.forEach(o=>{const a=He(o.shape);s.set(o.vals,r),r+=a})}else{let r=0;t.forEach(o=>{const a=n==="string"?Th(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*e[1]+r;for(let h=0;h<o.shape[1];++h)s[u+h]=a[l++]}r+=o.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IK=Es((t,e)=>t===e?1:0),NK=Qs(LC,IK,null,"bool"),Mke={kernelName:LC,backendName:"cpu",kernelFunc:NK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EK=Ru(t=>Math.exp(t)),TK=Tf(vb,EK,"float32"),Fke={kernelName:vb,backendName:"cpu",kernelFunc:TK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AK=Ru(t=>Math.expm1(t)),Bke=Tf(yb,AK),zke={kernelName:yb,backendName:"cpu",kernelFunc:Bke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RK=Ru(t=>Math.floor(t)),jke=Tf(bb,RK),Vke={kernelName:bb,backendName:"cpu",kernelFunc:jke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LK=Es((t,e)=>Math.floor(t/e)),Wke=Qs(xb,LK,null,"int32"),Uke={kernelName:xb,backendName:"cpu",kernelFunc:Wke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PK(t,e,n,i,s,r,o,a,l){const c=kn([i,r],n);for(let u=0;u<i;u++){const h=[];let d=0;for(let p=0;p<s;p++){const m=t[u*s+p];d+=m*o[p],h.push(m)}if(d<0||d>=l/r)throw new Error(`Invalid indices: ${h} does not index into ${a}`);for(let p=0;p<r;p++)c.values[u*r+p]=e.get(...e.indexToLoc(d*r+p))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DK(t,e,n){const i=kn(n,t.dtype);for(let s=0;s<i.size;++s){const o=i.indexToLoc(s).slice(),a=o[0],l=o[2],c=e.locToIndex([a,l]);o[2]=e.values[c];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(i.values[s]=t.values[u])}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $K=Es((t,e)=>t>e?1:0),Hke=Qs(OC,$K,null,"bool"),Gke={kernelName:OC,backendName:"cpu",kernelFunc:Hke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OK=Es((t,e)=>t>=e?1:0),qke=Qs(wb,OK,null,"bool"),Kke={kernelName:wb,backendName:"cpu",kernelFunc:qke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MK=Es((t,e)=>t<e?1:0),Xke=Qs(FC,MK,null,"bool"),Yke={kernelName:FC,backendName:"cpu",kernelFunc:Xke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FK=Es((t,e)=>t<=e?1:0),Zke=Qs(BC,FK,null,"bool"),Qke={kernelName:BC,backendName:"cpu",kernelFunc:Zke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BK(t,e,n){const i=(e-t)/(n-1),s=qr(n,"float32");s[0]=t;for(let r=1;r<s.length;r++)s[r]=s[r-1]+i;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zK=Ru(t=>Math.log(t)),Jke=Tf(Ib,zK),eIe={kernelName:Ib,backendName:"cpu",kernelFunc:Jke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jK(t,e,n,i){const s=Gr(i,He(n));for(let r=0;r<s.length;++r){const o=r*e;let a=t[o];for(let l=0;l<e;++l){const c=t[o+l];(Number.isNaN(c)||c>a)&&(a=c)}s[r]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VK=Es((t,e)=>Math.max(t,e)),tIe=Qs(Eb,VK),nIe={kernelName:Eb,backendName:"cpu",kernelFunc:tIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WK=Es((t,e)=>Math.min(t,e)),iIe=Qs(Tb,WK),sIe={kernelName:Tb,backendName:"cpu",kernelFunc:iIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QP=Es((t,e)=>t*e),rIe=YP((t,e,n,i)=>({real:t*n-e*i,imag:t*i+e*n})),jk=Qs(Rb,QP,rIe),oIe={kernelName:Rb,backendName:"cpu",kernelFunc:jk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UK(t,e,n){const i=_f(-1,n);return QP([],e,i,t,n)}function aIe(t){const{inputs:e,backend:n}=t,{x:i}=e;Dt(i,"neg");const s=n.data.get(i.dataId).values,[r,o]=UK(s,i.shape,i.dtype);return n.makeTensorInfo(o,i.dtype,r)}const lIe={kernelName:YC,backendName:"cpu",kernelFunc:aIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HK=Es((t,e)=>t!==e?1:0),cIe=Qs(ZC,HK,null,"bool"),uIe={kernelName:ZC,backendName:"cpu",kernelFunc:cIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JP(t,e,n,i,s){const r=e.length,o=He(e),a=zt(e),l=zt(s),c=Gr(n,He(s));for(let u=0;u<o;++u){const h=$0(u,r,a),d=new Array(h.length);for(let m=0;m<d.length;m++)d[m]=h[i[m]];const p=yu(d,r,l);c[p]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qo(t){const{inputs:e,attrs:n,backend:i}=t,{x:s}=e,{perm:r}=n;Dt(s,"transpose");const o=s.shape.length,a=new Array(o);for(let h=0;h<a.length;h++)a[h]=s.shape[r[h]];const l=i.data.get(s.dataId).values,c=JP(l,s.shape,s.dtype,r,a);return{dataId:i.write(c,a,s.dtype),shape:a,dtype:s.dtype}}const hIe={kernelName:Bg,backendName:"cpu",kernelFunc:Qo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GK(t,e,n,i){const[s,r]=mr(t,i),o=Ea(e,"int32"),a=qr(He(s),o),l=He(r);for(let c=0;c<a.length;++c){const u=c*l;let h=1;for(let d=0;d<l;++d)h*=n[u+d];a[c]=h}return{outVals:a,outShape:s,outDtype:o}}function dIe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,keepDims:o}=i;Dt(s,"prod");const a=s.shape.length,l=In(r,s.shape),c=os(l,a);let u=l,h=s;const d=[];c!=null&&(h=Qo({inputs:{x:s},backend:n,attrs:{perm:c}}),d.push(h),u=Is(u.length,a));const p=n.data.get(h.dataId).values,{outVals:m,outShape:g,outDtype:y}=GK(h.shape,h.dtype,p,u);let v=g;return o&&(v=Fs(g,l)),d.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(v,y,m)}const fIe={kernelName:ik,backendName:"cpu",kernelFunc:dIe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pIe(t,e,n){t.forEach((i,s)=>{if(i<0||i>=n){const r=$0(s,e.length,zt(e)).join(",");throw new Error(`indices[${r}] = ${i} is not in [0, ${n})`)}})}function mIe(t,e){for(let n=0;n<t.length;++n){const i=t[n],s=n===t.length-1?e:t[n+1].length;if(i.length===0)throw new Error("Ragged splits may not be empty");if(i[0]<0)throw new Error("Ragged splits must be non-negative");if(i[i.length-1]>s)throw new Error("Ragged splits must not point past values");for(let r=1;r<i.length;++r)if(i[r-1]>i[r])throw new Error("Ragged splits must be sorted in ascending order")}}function gIe(t,e,n,i){const s=[];let r=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);mIe(n,i);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let h=1;h<l+1;++h)a[c].push(h*u)}for(let c=0;c<t.length;++c){let u=t[c],h=t[c]+1;for(let d=0;d<n.length;++d){const p=n[d],m=d+e.length-1;if(m>=0){const g=a[m],y=g[g.length-1]-p[u];for(let v=u;v<h;++v)a[m].push(p[v+1]+y)}u=p[u],h=p[h]}h!==u&&(s.push([u,h]),r+=h-u)}return{outSplits:a,valueSlices:s,numValues:r}}function vIe(t){const e=[];for(let n=0;n<t.length;++n){const i=t[n].length,s=_s("int32",i);e.push(s),t[n].forEach((r,o)=>s[o]=r)}return e}function _6(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let i=e;i<t.length;i++)n[e-1]*=t[i];return n}function yIe(t,e,n,i,s,r){const o=_6(e,2)[1],a=_6(r,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let h=0;h<i;++h)s[l*a+h]=t[u*o+h];++l}}function bIe(t,e,n,i,s){const r=e.slice();r[0]=s;const o=_s(n,He(r)),a=t.length,l=a===0?0:a/e[0];return yIe(t,e,i,l,o,r),[o,r]}function qK(t,e,n,i,s,r,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(pIe(r,o,l),i.length===0)throw new Error("params.rank must be nonzero");const c=i[0],{outSplits:u,valueSlices:h,numValues:d}=gIe(r,o,t,c),p=vIe(u),m=bIe(n,i,s,h,d);return[p,m[0],m[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S6=2147483647;function KK(t,e,n,i,s,r,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=s.length===0,c=o.length===0,u=[];a||u.push(e[0]),l||u.push(s[0]),c||u.push(o[0]);for(let y=1;y<u.length;++y)if(u[y]!==u[y-1])throw new Error("starts, limits, and deltas must have the same shape");const h=u.length===0?1:u[0],d=_s("int32",h+1);d[0]=0;for(let y=0;y<h;++y){const v=a?t[0]:t[y],b=l?i[0]:i[y],w=c?r[0]:r[y];if(w===0)throw new Error("Requires delta != 0");let S;if(w>0&&b<v||w<0&&b>v)S=0;else if(S=Math.ceil(Math.abs((b-v)/w)),S>S6)throw new Error(`Requires ((limit - start) / delta) <= ${S6}`);d[y+1]=d[y]+S}const p=d[h],m=_s(n,p);let g=0;for(let y=0;y<h;++y){const v=d[y+1]-d[y];let b=a?t[0]:t[y];const w=c?r[0]:r[y];for(let S=0;S<v;++S)m[g++]=b,b+=w}return[d,m]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var yl=pc;class tS{constructor(e,n,i,s,r,o,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=i,this.valuesShape=s,this.valuesDType=r,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=D9(u),this.raggedRank=$9(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===yl.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===yl.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case yl.VALUE_ROWIDS:return tS.getMaxWidthValueRowID(n);case yl.ROW_SPLITS:return tS.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${yl[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let i=0;for(let s=0;s<n-1;++s){const r=e[s+1]-e[s];r>i&&(i=r)}return i}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let i=0,s=e[0],r=0;for(let o=1;o<n;++o){const a=e[o];a!==s&&(s=a,r=Math.max(o-i,r),i=o)}return Math.max(n-i,r)}tensorShapeFromTensor(e,n,i=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return k6(e,i)}calculateOutputSize(e){const n=this.valuesShape,i=this.defaultValueShape;O9(i,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=P9(this.raggedRank,s,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,i){const s=Math.min(e,i),r=[];let o=0;for(let a=0;a<s;++a,o+=n)r.push(o);for(let a=s;a<e;++a)r.push(-1);return ce(r.length===e,()=>"Final length of result must be equal to firstDimension."),r}calculateOutputIndexRowSplit(e,n,i,s){const r=e.length,o=[];for(let a=0;a<r-1;++a){const l=e[a+1]-e[a];let c=Math.min(s,l),u=n[a];u===-1&&(c=0);for(let h=0;h<c;++h)o.push(u),u+=i;for(let h=0;h<l-c;++h)o.push(-1)}if(r>0&&o.length!==e[r-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,i,s){const r=e.length,o=[];if(r===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];o.push(c);for(let u=1;u<r;++u){const h=e[u];if(h===l)c>=0&&(++a,a<s?c+=i:c=-1);else{if(a=0,l=h,h>=n.length)throw new Error(`Got nextValueRowId=${h} which is not less than ${n.length}`);c=n[h]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,i,s){const r=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case yl.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(r,n,i,s);case yl.ROW_SPLITS:if(r.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${r.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(r,n,i,s);default:throw new Error(`Unsupported partition type: ${yl[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case yl.FIRST_DIM_SIZE:return e[0];case yl.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case yl.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${yl[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),i=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*i[l+1];const r=k6(i,!1),o=_s(this.valuesDType,He(r));if(s[0]*i[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],i[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],i[c]);this.setOutput(this.raggedRank,l,o,r)}return[r,o]}setOutput(e,n,i,s){if(i.length===0)return;const r=this.values,o=i;let a=s.slice();a=a.slice(e+1);const l=He(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const m=this.defaultValueShape;$e(()=>{const g=Ae(u,m);u=C1(g,a).dataSync()})}let h=0,d=0,p=0;for(let m=0;m<=c;++m){let g=m<c?n[m]:-1;if(g===p){++p;continue}if(d<p){const y=r.subarray(h*l),v=o.subarray(d*l),b=(p-d)*l;C6(v,y,b)}if(m>=c){const y=i.length;g=Math.floor(y/l)}if(g>p)if(this.defaultValue.length===1)o.subarray(p*l,g*l).fill(this.defaultValue[0]),p=g;else for(;g>p;){const y=o.slice(p*l);C6(y,u,l),++p}g<0?(h=m+1,d=p):(h=m,d=p,p=d+1)}}}function C6(t,e,n){for(let i=0;i<n;i++)t[i]=e[i]}function k6(t,e){const n=[];for(let i of t){if(i<0){if(!e)throw new Error(`Dimension ${i} must be >= 0`);if(i<-1)throw new Error(`Dimension ${i} must be >= -1`);i=-1}n.push(i)}return n}function XK(t,e,n,i,s,r,o,a,l,c){return new tS(t,e,n,i,s,r,o,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YK(t,e,n,i){const s=t===e,r=t<e&&n<0,o=e<t&&n>1;if(s||r||o)return qr(0,i);const a=Math.abs(Math.ceil((e-t)/n)),l=qr(a,i);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZK=Ru(t=>1/Math.sqrt(t)),xIe=Tf(Mb,ZK),wIe={kernelName:Mb,backendName:"cpu",kernelFunc:xIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Np(t,e,n,i,s,r,o,a,l,c){const u=[i/s,s],h=t.values,d=e.values;if(i===0)return kn(n,e.dtype);const p=l instanceof Ar?l:kn(u,e.dtype);typeof l=="string"||typeof l=="number"?p.values.fill(l):typeof l=="boolean"&&p.values.fill(+l);for(let m=0;m<r;m++){const g=[];let y=0;for(let v=0;v<o;v++){const b=h[m*o+v];g.push(b),y+=b*a[v]}if(y<0||y>=i/s)throw new Error(`Invalid indices: ${g} does not index into ${n}`);for(let v=0;v<s;v++)c?p.values[y*s+v]+=d[m*s+v]:p.values[y*s+v]=e.rank===0?d[0]:d[m*s+v]}return p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ie=Ru(t=>1/(1+Math.exp(-t))),QK=hi(Vb,t=>1/(1+Math.exp(-t))),SIe={kernelName:Vb,backendName:"cpu",kernelFunc:QK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JK(t,e,n,i,s){const r=rP(i,e,n),o=He(n),a=zt(i);if(r){const h=oP(e,a);return s==="string"?t.slice(h,h+o):t.subarray(h,h+o)}const l=s==="string"?Th(t):t,c=kn(i,s,l),u=kn(n,s);for(let h=0;h<u.size;++h){const d=u.indexToLoc(h),p=d.map((m,g)=>m+e[g]);u.set(c.get(...p),...d)}return s==="string"?nG(u.values):u.values}function hm(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{begin:r,size:o}=i;Dt(s,"slice");const[a,l]=Ik(s,r,o);iP(s,a,l);const c=n.data.get(s.dataId).values,u=JK(c,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,u)}const CIe={kernelName:ck,backendName:"cpu",kernelFunc:hm};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eX(t,e,n,i,s,r,o){const a=e[0],l=r[0],c=new Array(l),u=new Array(a),h=e[1];if(l===0){if(a!==0)throw new Error(W9(a));const y=_s(n,0),v=_s(s,0);return[y,[0,h],v,c,u]}let d=!0,p=0;const m=new Array(l).fill(0);for(let y=0;y<a;++y){const v=t[y*h];if(v<0)throw new Error(U9(y,v));if(v>=l)throw new Error(H9(y,v,l));++m[v],d=d&&v>=p,p=v}let g=!0;for(let y=0;y<l;++y){const v=m[y]===0;c[y]=v,g=g&&!v,m[y]=Math.max(m[y],1),y>0&&(m[y]+=m[y-1])}if(g&&d){const y=t,v=i;for(let b=0;b<a;++b)u[b]=b;return[y,[a,h],v,c,u]}else{const y=m[l-1],v=_s(n,y*h),b=_s(s,y),w=new Array(l).fill(0);for(let S=0;S<a;++S){const k=t[S*h],I=w[k],T=(k===0?0:m[k-1])+I;w[k]++;for(let E=0;E<h;++E)v[T*h+E]=t[S*h+E];b[T]=i[S],u[S]=T}for(let S=0;S<l;++S)if(w[S]===0){const I=S===0?0:m[S-1];v[I*h+0]=S;for(let T=1;T<h;++T)v[I*h+T]=0;b[I]=o}return[v,[y,h],b,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tX(t,e,n,i,s){const r=He(i),o=e[0],a=s.length,l=[];let c=1,u=-1;for(let y=0;y<a;++y){const v=s[y];if(v===-1){if(u!==-1)throw new Error(G9(u,y));u=y,l.push(1)}else{if(v<0)throw new Error(q9(y,v));c*=v,l.push(v)}}if(u!==-1){if(c<=0)throw new Error(K9());const y=Math.trunc(r/c);if(c*y!==r)throw new Error(X9(i,l));l[u]=y}if(He(l)!==r)throw new Error(Y9(i,l));const d=i.length,p=[];if(d>0){p[d-1]=1;for(let y=d-2;y>=0;--y)p[y]=p[y+1]*i[y+1]}const m=[];if(a>0){m[a-1]=1;for(let y=a-2;y>=0;--y)m[y]=m[y+1]*l[y+1]}const g=_s(n,o*a);for(let y=0;y<o;++y){let v=0;for(let b=0;b<d;++b)v+=t[y*d+b]*p[b];for(let b=0;b<a;++b)g[y*a+b]=Math.trunc(v/m[b]),v%=m[b]}return[g,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eD(t,e,n,i,s,r=!1,o=0){const a=i.length,l=[e[0],t.length/e[0]],c=l[1],h=a>0?s[a-1]+1:0;if(h<0)throw new Error(uT());const d=e.slice();d[0]=h;const p=d.reduce((w,S)=>w*S,1),m=_s(n,p);if(a===0)return h>0&&m.fill(o),[m,d];if(h<=0)throw new Error(uT());let g=0,y=1,v=0,b=s[g];for(;;){let w=0;if(y<a){if(w=s[y],b===w){++y;continue}if(b>=w)throw new Error(Z9())}if(b<0||b>=h)throw new Error(Q9(b,h));b>v&&m.fill(o,v*c,b*c);for(let S=g;S<y;++S){const k=i[S];if(k<0||k>=l[0])throw new Error(J9(S,i[S],l[0]));for(let I=0;I<c;I++)m[b*c+I]+=t[k*c+I]}if(r)for(let S=0;S<c;S++)m[b*c+S]/=y-g;if(g=y,++y,v=b+1,b=w,y>a)break}return v<h&&m.fill(o,v*c,h*c),[m,d]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kIe=Ru(t=>Math.sqrt(t)),IIe=hi(Ub,t=>Math.sqrt(t)),NIe={kernelName:Ub,backendName:"cpu",kernelFunc:IIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nX=Es((t,e)=>{const n=t-e;return n*n}),EIe=Qs(Hb,nX),TIe={kernelName:Hb,backendName:"cpu",kernelFunc:EIe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iX=Ru((t,e)=>{const{pattern:n,replaceGlobal:i,rewrite:s}=e;return t.replace(new RegExp(n,i?"g":""),s)}),AIe=Tf(u3,iX),RIe={kernelName:u3,backendName:"cpu",kernelFunc:AIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sX(t,e,n,i){const s=kn(t,e.dtype);for(let r=0;r<s.size;r++){const o=s.indexToLoc(r),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+i[l];s.set(e.get(...a),...o)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LIe{constructor(e,n,i,s,r,o){this.separator=Gd(e),this.nGramWidths=n,this.leftPad=Gd(i),this.rightPad=Gd(s),this.padWidth=r,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const i=this.getPadWidth(n);return Math.max(0,e+2*i-n+1)}createNGrams(e,n,i,s,r,o){for(let a=0;a<r;++a){const l=this.getPadWidth(o),c=Math.max(0,l-a),u=Math.max(0,l-(r-(a+1))),h=o-(c+u),d=n+(c>0?0:a-l);let p=0;p+=c*this.leftPad.length;for(let b=0;b<h;++b)p+=e[d+b].length;p+=u*this.rightPad.length;const m=c+u+h-1;p+=m*this.separator.length,i[s+a]=new Uint8Array(p);const g=i[s+a];let y=0;const v=b=>b.forEach(w=>g[y++]=w);for(let b=0;b<c;++b)v(this.leftPad),v(this.separator);for(let b=0;b<h-1;++b)v(e[d+b]),v(this.separator);if(h>0){v(e[d+h-1]);for(let b=0;b<u;++b)v(this.separator),v(this.rightPad)}else{for(let b=0;b<u-1;++b)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(e,n){const i=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let u=n[c]>=l;if(u=u&&n[c]<=i,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${i}]`);l=n[c]}if(l!==i)throw new Error(`Last split value must be data size. Expected ${i}, got ${l}`)}const r=s-1,o=_s("int32",s);if(i===0||s===0){const l=new Array(i);for(let c=0;c<=r;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=r;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(h=>{u+=this.getNumNGrams(c,h)}),this.preserveShort&&c>0&&u===0&&(u=1),o[l]=o[l-1]+u}const a=new Array(o[r]);for(let l=0;l<r;++l){const c=n[l];let u=o[l];if(this.nGramWidths.forEach(h=>{const d=n[l+1]-n[l],p=this.getNumNGrams(d,h);this.createNGrams(e,c,a,u,p,h),u+=p}),this.preserveShort&&u===o[l]){const h=n[l+1]-n[l];if(h===0)continue;const d=h+2*this.padWidth;this.createNGrams(e,c,a,u,1,d)}}return[a,o]}}function rX(t,e,n,i,s,r,o,a){return new LIe(n,i,s,r,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PIe(t,e,n,i){if(!t.length)return;if(e.length===0){for(let r=0;r<t.length;++r)i.push(t.subarray(r,r+1));return}if(e.length===1){const r=e[0];let o=t.indexOf(r);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&i.push(a),t=t.subarray(o+1),o=t.indexOf(r)}(!n||t.length!==0)&&i.push(t);return}let s=0;for(let r=0;r<t.length+1;r++)if(r===t.length||e.indexOf(t[r])!==-1){const o=t.subarray(s,r);(!n||o.length!==0)&&i.push(o),s=r+1}}function oX(t,e,n){const i=t.length,s=[];let r=0,o=0;const a=new Array(i);for(let d=0;d<i;++d){const p=s.length;PIe(t[d],e,n,s);const m=s.length-p;a[d]=m,r+=m,o=Math.max(o,m)}const l=_s("int32",r*2),c=new Array(r),u=[i,o];let h=0;for(let d=0;d<i;++d)for(let p=0;p<a[d];++p)l[h*2]=d,l[h*2+1]=p,c[h]=s[h],++h;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aX(t,e){const n=_s("int32",t.length);for(let i=0;i<t.length;++i)n[i]=mve(t[i]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lX=Es((t,e)=>t-e),DIe=YP((t,e,n,i)=>({real:t-n,imag:e-i})),tD=Qs(Gb,lX,DIe),$Ie={kernelName:Gb,backendName:"cpu",kernelFunc:tD};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cX(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const i=kn(n,t.dtype);for(let s=0;s<i.values.length;++s){const r=i.indexToLoc(s),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=r[l]%t.shape[l];const a=t.locToIndex(o);i.values[s]=t.values[a]}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qv=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function uX(t,e,n=0,i=t.length-1){for(;i>n;){if(i-n>600){const a=i-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),d=Math.max(n,Math.floor(e-l*u/a+h)),p=Math.min(i,Math.floor(e+(a-l)*u/a+h));uX(t,e,d,p)}const s=t[e];let r=n,o=i;for(cg(t,n,e),Qv(t[i],s)>0&&cg(t,n,i);r<o;){for(cg(t,r,o),r++,o--;Qv(t[r],s)<0;)r=r+1;for(;Qv(t[o],s)>0;)o=o-1}Qv(t[n],s)===0?cg(t,n,o):(o=o+1,cg(t,o,i)),o<=e&&(n=o+1),e<=o&&(i=o-1)}}function hX(t,e,n,i,s){const r=e[e.length-1],[o,a]=[t.length/r,r],l=Gr(n,o*i),c=Gr("int32",o*i);for(let h=0;h<o;h++){const d=h*a,p=t.subarray(d,d+a);let m=new Array(p.length);p.forEach((b,w)=>m[w]={value:b,index:w}),i<m.length&&(uX(m,i),m=m.slice(0,i)),s&&m.sort(Qv);const g=h*i,y=l.subarray(g,g+i),v=c.subarray(g,g+i);for(let b=0;b<i;b++)y[b]=m[b].value,v[b]=m[b].index}const u=e.slice();return u[u.length-1]=i,[kn(u,n,l),kn(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dX(t,e,n,i){const s=In(e,n)[0],r=[1,n[0],1];for(let m=0;m<s;m++)r[0]*=n[m];r[1]=n[s];for(let m=s+1;m<n.length;m++)r[2]*=n[m];const o=new Map,a=new Int32Array(n[s]),l=new Ar(r,i,t),c=[],u=r[0]===1&&r[2]===1;for(let m=0;m<n[s];m++){let g;if(u)g=t[m].toString();else{const v=[];for(let b=0;b<r[0];b++)for(let w=0;w<r[2];w++)v.push(l.get(b,m,w));g=v.join(",")}const y=o.get(g);if(y!=null)a[m]=y;else{const v=o.size;o.set(g,v),a[m]=v,c.push(m)}}const h=r.slice();h[1]=o.size;const d=new Ar(h,i);c.forEach((m,g)=>{for(let y=0;y<r[0];y++)for(let v=0;v<r[2];v++)d.set(l.get(y,m,v),y,g,v)});const p=n.slice();return p[s]=h[1],{outputValues:d.values,outputShape:p,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OIe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:wK,bincountImpl:ZP,bincountReduceImpl:_K,bitwiseAndImpl:SK,castImpl:xK,ceilImpl:CK,concatImpl:kK,equalImpl:IK,expImpl:EK,expm1Impl:AK,floorDivImpl:LK,floorImpl:RK,gatherNdImpl:PK,gatherV2Impl:DK,greaterEqualImpl:OK,greaterImpl:$K,lessEqualImpl:FK,lessImpl:MK,linSpaceImpl:BK,logImpl:zK,maxImpl:jK,maximumImpl:VK,minimumImpl:WK,multiplyImpl:QP,negImpl:UK,notEqualImpl:HK,prodImpl:GK,raggedGatherImpl:qK,raggedRangeImpl:KK,raggedTensorToTensorImpl:XK,rangeImpl:YK,rsqrtImpl:ZK,scatterImpl:Np,sigmoidImpl:_Ie,simpleAbsImpl:bK,sliceImpl:JK,sparseFillEmptyRowsImpl:eX,sparseReshapeImpl:tX,sparseSegmentReductionImpl:eD,sqrtImpl:kIe,squaredDifferenceImpl:nX,staticRegexReplaceImpl:iX,stridedSliceImpl:sX,stringNGramsImpl:rX,stringSplitImpl:oX,stringToHashBucketFastImpl:aX,subImpl:lX,tileImpl:cX,topKImpl:hX,transposeImpl:JP,uniqueImpl:dX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */LH("cpu",()=>new zk,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fX=hi(mb,t=>t>=0?t:Math.exp(t)-1),MIe={kernelName:mb,backendName:"cpu",kernelFunc:fX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pX(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{alpha:r}=i;Dt([s],"leakyRelu");const o=He(s.shape),a=n.data.get(s.dataId).values,l=Gr("float32",o);for(let c=0;c<a.length;c++)l[c]=a[c]<0?r*a[c]:a[c];return n.makeTensorInfo(s.shape,"float32",l)}const FIe={kernelName:MC,backendName:"cpu",kernelFunc:pX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BIe=Es((t,e)=>t<0?e*t:t);function mX(t){const{inputs:e,backend:n}=t,{x:i,alpha:s}=e;Dt([i,s],"prelu");const r=n.data.get(i.dataId).values,o=n.data.get(s.dataId).values,[a,l]=BIe(i.shape,s.shape,r,o,"float32");return n.makeTensorInfo(l,"float32",a)}const zIe={kernelName:nk,backendName:"cpu",kernelFunc:mX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gX=hi(Db,t=>Math.max(0,t)),jIe={kernelName:Db,backendName:"cpu",kernelFunc:gX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vX=hi($b,t=>Math.min(Math.max(0,t),6)),VIe={kernelName:$b,backendName:"cpu",kernelFunc:vX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nS(t,e,n,i,s){if(n==="linear")return Eu({inputs:{x:e},backend:t});if(n==="relu")return gX({inputs:{x:e},backend:t});if(n==="elu")return fX({inputs:{x:e},backend:t});if(n==="relu6")return vX({inputs:{x:e},backend:t});if(n==="prelu")return mX({inputs:{x:e,alpha:i},backend:t});if(n==="leakyrelu")return pX({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return QK({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $i(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{shape:r}=i,o=He(s.shape),a=MU(r,o),l=He(a);ce(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,h=c.complexTensorInfos.imag;u.shape=a,h.shape=a}return{dataId:s.dataId,shape:a,dtype:s.dtype}}const WIe={kernelName:sk,backendName:"cpu",kernelFunc:$i};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yX(t){const{inputs:e,backend:n,attrs:i}=t,{a:s,b:r}=e,{transposeA:o,transposeB:a}=i;Dt([s,r],"matMul");const l=s.shape.length,c=r.shape.length,u=o?s.shape[l-2]:s.shape[l-1],h=a?r.shape[c-1]:r.shape[c-2],d=o?s.shape[l-1]:s.shape[l-2],p=a?r.shape[c-2]:r.shape[c-1],m=s.shape.slice(0,-2),g=r.shape.slice(0,-2),y=He(m),v=He(g),w=mn(s.shape.slice(0,-2),r.shape.slice(0,-2)).concat([d,p]);ce(u===h,()=>`Error in matMul: inner shapes (${u}) and (${h}) of Tensors with shapes ${s.shape} and ${r.shape} and transposeA=${o} and transposeB=${a} must match.`);const S=o?[y,u,d]:[y,d,u],k=a?[v,p,h]:[v,h,p],I=$i({inputs:{x:s},backend:n,attrs:{shape:S}}),T=$i({inputs:{x:r},backend:n,attrs:{shape:k}}),E=o?I.shape[1]:I.shape[2],O=o?I.shape[2]:I.shape[1],F=a?T.shape[1]:T.shape[2],R=Math.max(y,v),$=n.data.get(I.dataId).values,U=n.data.get(T.dataId).values,W=zt(I.shape),te=zt(T.shape),[H,G,B]=o?[W[0],1,W[1]]:[W[0],W[1],1],[Y,ne,le]=a?[1,te[1],te[0]]:[te[1],1,te[0]],M=O*F,j=kn([R,O,F],I.dtype),q=j.values,X=n.blockSize;for(let Z=0;Z<R;Z++){const ue=Z%y,fe=Z%v;for(let me=0;me<O;me+=X){const Pe=Math.min(me+X,O);for(let Ne=0;Ne<F;Ne+=X){const Fe=Math.min(Ne+X,F);for(let qe=0;qe<E;qe+=X){const Qe=Math.min(qe+X,E);for(let xe=me;xe<Pe;xe++)for(let he=Ne;he<Fe;he++){let ut=0;for(let ot=qe;ot<Qe;ot++){const Je=$[ue*H+xe*G+ot*B],it=U[ot*Y+he*ne+fe*le];ut+=Je*it}q[Z*M+(xe*F+he)]+=ut}}}}}return n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(T),n.makeTensorInfo(w,j.dtype,j.values)}const UIe={kernelName:_C,backendName:"cpu",kernelFunc:yX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HIe(t){const{inputs:e,backend:n,attrs:i}=t,{a:s,b:r,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=i;let d,p,m;const g=[];d=yX({inputs:{a:s,b:r},attrs:{transposeA:l,transposeB:c},backend:n}),o&&(p=m0({inputs:{a:d,b:o},backend:n}),g.push(d),d=p),u&&(m=nS(n,d,u,a,h),g.push(d),d=m);for(const v of g)n.disposeIntermediateTensorInfo(v);return d}const GIe={kernelName:$_,backendName:"cpu",kernelFunc:HIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qIe=hi(nb,t=>Math.acos(t)),KIe={kernelName:nb,backendName:"cpu",kernelFunc:qIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XIe=hi(ib,t=>Math.acosh(t)),YIe={kernelName:ib,backendName:"cpu",kernelFunc:XIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZIe(t){const{inputs:e,backend:n}=t,i=e;Dt(e,"addN");const s=i.map(a=>n.data.get(a.dataId).values),r=kn(i[0].shape,i[0].dtype),o=r.values;for(let a=0;a<i.length;a++){const l=s[a];for(let c=0;c<o.length;c++)o[c]+=l[c]}return n.makeTensorInfo(r.shape,r.dtype,r.values)}const QIe={kernelName:TL,backendName:"cpu",kernelFunc:ZIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JIe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,keepDims:o}=i;Dt(s,"all");const a=In(r,s.shape);let l=a;const c=os(l,s.shape.length);let u=s;c!=null&&(u=Qo({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Is(l.length,s.shape.length)),Pr("all",l,u.shape.length);const[h,d]=mr(u.shape,l),p=He(d),m=qr(He(h),u.dtype),g=n.data.get(u.dataId).values;for(let v=0;v<m.length;++v){const b=v*p;let w=g[b];for(let S=0;S<p;++S){const k=g[b+S];w=w&&k}m[v]=w}c!=null&&n.disposeIntermediateTensorInfo(u);const y=n.makeTensorInfo(h,u.dtype,m);if(o){const v=Fs(h,a),b=$i({inputs:{x:y},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(y),b}return y}const eNe={kernelName:AL,backendName:"cpu",kernelFunc:JIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,keepDims:o}=i;Dt(s,"any");const a=In(r,s.shape);let l=a;const c=os(l,s.shape.length);let u=s;c!=null&&(u=Qo({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Is(l.length,s.shape.length)),Pr("any",l,u.shape.length);const[h,d]=mr(u.shape,l),p=He(d),m=qr(He(h),u.dtype),g=n.data.get(u.dataId).values;for(let v=0;v<m.length;++v){const b=v*p;let w=g[b];for(let S=0;S<p;++S){const k=g[b+S];w=w||k}m[v]=w}c!=null&&n.disposeIntermediateTensorInfo(u);const y=n.makeTensorInfo(h,u.dtype,m);if(o){const v=Fs(h,a),b=$i({inputs:{x:y},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(y),b}return y}const nNe={kernelName:RL,backendName:"cpu",kernelFunc:tNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iNe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r}=i;Dt(s,"argMax");let o=In(r,s.shape);const a=os(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Qo({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=Is(o.length,l.shape.length)),o=[o[0]],Pr("argMax",o,l.shape.length);const[u,h]=mr(l.shape,o),d=He(u),p=qr(d,"int32"),m=He(h),g=n.data.get(l.dataId).values;for(let y=0;y<p.length;++y){const v=y*m;let b=g[v],w=0;for(let S=0;S<m;++S){const k=g[v+S];k>b&&(b=k,w=S)}p[y]=w}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(u,"int32",p)}const sNe={kernelName:yC,backendName:"cpu",kernelFunc:iNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rNe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r}=i;Dt(s,"argMin");let o=In(r,s.shape);const a=os(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Qo({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=Is(o.length,l.shape.length)),o=[o[0]],Pr("argMin",o,l.shape.length);const[u,h]=mr(l.shape,o),d=He(u),p=qr(d,"int32"),m=He(h),g=n.data.get(l.dataId).values;for(let y=0;y<p.length;++y){const v=y*m;let b=g[v],w=0;for(let S=0;S<m;++S){const k=g[v+S];k<b&&(b=k,w=S)}p[y]=w}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(u,"int32",p)}const oNe={kernelName:bC,backendName:"cpu",kernelFunc:rNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aNe=hi(sb,t=>Math.asin(t)),lNe={kernelName:sb,backendName:"cpu",kernelFunc:aNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cNe=hi(rb,t=>Math.asinh(t)),uNe={kernelName:rb,backendName:"cpu",kernelFunc:cNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hNe=hi(ob,t=>Math.atan(t)),dNe={kernelName:ob,backendName:"cpu",kernelFunc:hNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fNe=Es((t,e)=>Math.atan2(t,e)),pNe=Qs(lb,fNe),mNe={kernelName:lb,backendName:"cpu",kernelFunc:pNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gNe=hi(ab,t=>Math.atanh(t)),vNe={kernelName:ab,backendName:"cpu",kernelFunc:gNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nD(t,e,n,i,s,r){const o=s.strideHeight,a=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,u=s.effectiveFilterHeight,h=s.effectiveFilterWidth,d=s.padInfo.top,p=s.padInfo.left,m=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=kn(s.outShape,n),y=g.values,v=s.outShape[1]*s.outShape[2]*s.outShape[3],b=s.outShape[2]*s.outShape[3],w=s.outShape[3];for(let S=0;S<s.batchSize;++S){const k=S*v,I=S*i[0];for(let T=0;T<s.inChannels;++T)for(let E=0;E<s.outHeight;++E){const O=E*o-d,F=Math.max(0,O),R=Math.min(s.inHeight,u+O),$=k+E*b;for(let U=0;U<s.outWidth;++U){const W=U*a-p,te=Math.max(0,W),H=Math.min(s.inWidth,h+W);let G=m,B=0,Y=0;for(let le=F;le<R;le+=l){const M=I+le*i[1];for(let j=te;j<H;j+=c){const q=M+j*i[2],X=t[q+T];r==="max"&&X>G?G=X:r==="avg"&&(B+=X,Y++)}if(isNaN(G))break}const ne=$+U*w+T;y[ne]=r==="avg"?B/Y:G}}}return g}function bX(t,e,n,i,s=!1,r=!1){const o=kn(i.outShape,"int32"),a=i.strideHeight,l=i.strideWidth,c=i.dilationHeight,u=i.dilationWidth,h=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=i.padInfo.top,m=i.padInfo.left,g=kn(e,n,t);for(let y=0;y<i.batchSize;++y)for(let v=0;v<i.inChannels;++v)for(let b=0;b<i.outHeight;++b){const w=b*a-p;let S=w;for(;S<0;)S+=c;const k=Math.min(i.inHeight,h+w);for(let I=0;I<i.outWidth;++I){const T=I*l-m;let E=T;for(;E<0;)E+=u;const O=Math.min(i.inWidth,d+T);let F=Number.NEGATIVE_INFINITY,R=-1;for(let $=S;$<k;$+=c){const U=$-w;for(let W=E;W<O;W+=u){const te=W-T,H=g.get(y,$,W,v);H>F&&(F=H,s?R=r?((y*i.inHeight+$)*i.inWidth+W)*i.inChannels+v:($*i.inWidth+W)*i.inChannels+v:R=U*d+te)}}o.set(R,y,b,I,v)}}return o}function xX(t,e,n,i,s,r){const o=s.strideDepth,a=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,u=s.dilationHeight,h=s.dilationWidth,d=s.effectiveFilterDepth,p=s.effectiveFilterHeight,m=s.effectiveFilterWidth,g=s.padInfo.front,y=s.padInfo.top,v=s.padInfo.left,b=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=kn(s.outShape,n),S=w.values,k=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],I=s.outShape[2]*s.outShape[3]*s.outShape[4],T=s.outShape[3]*s.outShape[4],E=s.outShape[4];for(let O=0;O<s.batchSize;++O){const F=O*k,R=O*i[0];for(let $=0;$<s.inChannels;++$)for(let U=0;U<s.outDepth;++U){const W=U*o-g;let te=W;for(;te<0;)te+=c;const H=Math.min(s.inDepth,d+W),G=F+U*I;for(let B=0;B<s.outHeight;++B){const Y=B*a-y;let ne=Y;for(;ne<0;)ne+=u;const le=Math.min(s.inHeight,p+Y),M=G+B*T;for(let j=0;j<s.outWidth;++j){const q=j*l-v;let X=q;for(;X<0;)X+=h;const Z=Math.min(s.inWidth,m+q),ue=M+j*E;let fe=b,me=0,Pe=0;for(let Fe=te;Fe<H;Fe+=c){const qe=R+Fe*i[1];for(let Qe=ne;Qe<le;Qe+=u){const xe=qe+Qe*i[2];for(let he=X;he<Z;he+=h){const ut=xe+he*i[3],ot=t[ut+$];if(r==="max"&&ot>fe?fe=ot:r==="avg"&&(me+=ot,Pe++),isNaN(fe))break}if(isNaN(fe))break}if(isNaN(fe))break}const Ne=ue+$;S[Ne]=r==="avg"?me/Math.max(Pe,1):fe}}}}return w}function yNe(t,e){const n=kn(e.outShape,"int32"),i=e.strideDepth,s=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.front,p=e.padInfo.top,m=e.padInfo.left;for(let g=0;g<e.batchSize;++g)for(let y=0;y<e.inChannels;++y)for(let v=0;v<e.outDepth;++v){const b=v*i-d;let w=b;for(;w<0;)w+=o;const S=Math.min(e.inDepth,c+b);for(let k=0;k<e.outHeight;++k){const I=k*s-p;let T=I;for(;T<0;)T+=a;const E=Math.min(e.inHeight,u+I);for(let O=0;O<e.outWidth;++O){const F=O*r-m;let R=F;for(;R<0;)R+=l;const $=Math.min(e.inWidth,h+F);let U=Number.NEGATIVE_INFINITY,W=-1;for(let te=w;te<S;te+=o){const H=te-b;for(let G=T;G<E;G+=a){const B=G-I;for(let Y=R;Y<$;Y+=l){const ne=Y-F,le=t.get(g,te,G,Y,y);le>=U&&(U=le,W=H*u*h+B*u+ne)}}}n.set(W,g,v,k,O,y)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bNe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e;Dt(s,"avgPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=i,c=1;ce(Xr(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Fl(s.shape,r,o,c,a,l);let h;if(u.filterWidth===1&&u.filterHeight===1&&ri(u.inShape,u.outShape))h=Eu({inputs:{x:s},backend:n});else{const d=n.data.get(s.dataId).values,p=zt(s.shape),m=nD(d,s.shape,s.dtype,p,u,"avg");h=n.makeTensorInfo(u.outShape,s.dtype,m.values)}return h}const xNe={kernelName:xC,backendName:"cpu",kernelFunc:bNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wNe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{filterSize:r,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=i;Dt(s,"avgPool3d");const u=$h(s.shape,r,o,1,a,l,c),h=n.data.get(s.dataId).values,d=xX(h,s.shape,s.dtype,zt(s.shape),u,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}const _Ne={kernelName:wC,backendName:"cpu",kernelFunc:wNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SNe(t){const{inputs:e,backend:n,attrs:i}=t,{dy:s,input:r}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=i;Dt([s,r],"avgPool3DGrad");const u=$h(r.shape,o,a,1,l,c),h=u.strideDepth,d=u.strideHeight,p=u.strideWidth,m=u.filterDepth,g=u.filterHeight,y=u.filterWidth,v=u.dilationDepth,b=u.dilationHeight,w=u.dilationWidth,S=u.effectiveFilterDepth,k=u.effectiveFilterHeight,I=u.effectiveFilterWidth,T=S-1-u.padInfo.front,E=I-1-u.padInfo.left,O=k-1-u.padInfo.top,F=kn(r.shape,"float32"),R=1/(m*g*y),$=n.bufferSync(s);for(let U=0;U<u.batchSize;++U)for(let W=0;W<u.inChannels;++W)for(let te=0;te<u.inDepth;++te)for(let H=0;H<u.inHeight;++H)for(let G=0;G<u.inWidth;++G){const B=te-T,Y=H-O,ne=G-E;let le=0;for(let M=0;M<S;M+=v){const j=(B+M)/h;if(!(j<0||j>=u.outDepth||Math.floor(j)!==j))for(let q=0;q<k;q+=b){const X=(Y+q)/d;if(!(X<0||X>=u.outHeight||Math.floor(X)!==X))for(let Z=0;Z<I;Z+=w){const ue=(ne+Z)/p;if(ue<0||ue>=u.outWidth||Math.floor(ue)!==ue)continue;const fe=$.get(U,j,X,ue,W);le+=fe}}}F.set(le*R,U,te,H,G,W)}return n.makeTensorInfo(F.shape,F.dtype,F.values)}const CNe={kernelName:PL,backendName:"cpu",kernelFunc:SNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kNe(t){const{inputs:e,backend:n,attrs:i}=t,{dy:s,input:r}=e,o=r;Dt([s,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=i,u=Fl(o.shape,a,l,1,c),h=u.strideHeight,d=u.strideWidth,p=u.filterHeight,m=u.filterWidth,g=u.dilationHeight,y=u.dilationWidth,v=u.effectiveFilterHeight,b=u.effectiveFilterWidth,w=b-1-u.padInfo.left,S=v-1-u.padInfo.top,k=kn(o.shape,"float32"),I=1/(p*m),T=n.data.get(s.dataId).values,E=kn(s.shape,"float32",T);for(let O=0;O<u.batchSize;++O)for(let F=0;F<u.inChannels;++F)for(let R=0;R<u.inHeight;++R)for(let $=0;$<u.inWidth;++$){const U=R-S,W=$-w;let te=0;for(let H=0;H<v;H+=g){const G=(U+H)/h;if(!(G<0||G>=u.outHeight||Math.floor(G)!==G))for(let B=0;B<b;B+=y){const Y=(W+B)/d;if(Y<0||Y>=u.outWidth||Math.floor(Y)!==Y)continue;const ne=E.get(O,G,Y,F);te+=ne}}k.set(te*I,O,R,$,F)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const INe={kernelName:LL,backendName:"cpu",kernelFunc:kNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NNe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,scale:r,offset:o,mean:a,variance:l}=e;ce(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ce(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ce(r==null||a.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Dt([s,a,l,r,o],"batchNorm");let{varianceEpsilon:c}=i;c==null&&(c=.001);const u=n.data.get(s.dataId).values,h=n.data.get(a.dataId).values,d=n.data.get(l.dataId).values,p=r?n.data.get(r.dataId).values:new Float32Array([1]),m=o?n.data.get(o.dataId).values:new Float32Array([0]),g=new Float32Array(u.length),y=m.length,v=p.length,b=d.length,w=h.length;let S=0,k=0,I=0,T=0;for(let E=0;E<u.length;++E)g[E]=m[S++]+(u[E]-h[k++])*p[I++]/Math.sqrt(d[T++]+c),S>=y&&(S=0),k>=w&&(k=0),I>=v&&(I=0),T>=b&&(T=0);return n.makeTensorInfo(s.shape,s.dtype,g)}const ENe={kernelName:DC,backendName:"cpu",kernelFunc:NNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TNe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{blockShape:r,crops:o}=i;Dt([s],"batchToSpaceND");const a=r.reduce((v,b)=>v*b),l=nx(s.shape,r,a),c=ix(l.length,r.length),u=sx(s.shape,r,a),h=hP(o,r.length),d=dP(u,o,r.length),p=$i({inputs:{x:s},backend:n,attrs:{shape:l}}),m=Qo({inputs:{x:p},backend:n,attrs:{perm:c}}),g=$i({inputs:{x:m},backend:n,attrs:{shape:u}}),y=hm({inputs:{x:g},backend:n,attrs:{begin:h,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}const ANe={kernelName:SC,backendName:"cpu",kernelFunc:TNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RNe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,weights:r}=e,{size:o}=i,a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,c=ZP(a,l,r.dtype,r.shape,o);return n.makeTensorInfo([o],r.dtype,c)}const LNe={kernelName:DL,backendName:"cpu",kernelFunc:RNe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PNe(t){const{inputs:e,backend:n}=t,{s0:i,s1:s}=e,r=n.data.get(i.dataId).values,o=n.data.get(s.dataId).values,a=mn(Array.from(r),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const DNe={kernelName:WU,backendName:"cpu",kernelFunc:PNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ne=hi(hb,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),ONe={kernelName:hb,backendName:"cpu",kernelFunc:$Ne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MNe=t=>{const{x:e}=t.inputs,n=t.backend,i=new Float32Array(He(e.shape)),s=n.data.get(e.dataId),r=s.complexTensorInfos.real,o=s.complexTensorInfos.imag,a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],h=l[c];i[c]=Math.hypot(u,h)}return n.makeOutput(i,e.shape,"float32")},FNe={kernelName:CC,backendName:"cpu",kernelFunc:MNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g0(t){const{inputs:e,backend:n}=t,{input:i}=e,s=n.data.get(i.dataId).complexTensorInfos.imag,r=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,r)}const BNe={kernelName:QL,backendName:"cpu",kernelFunc:g0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v0(t){const{inputs:e,backend:n,attrs:i}=t,{axis:s}=i,r=In(s,e[0].shape)[0],o=e.map(g=>g.shape);lP(o,r);let a=xu(e.map(g=>g.shape),r);if(He(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(g=>He(g.shape)>0);if(l.length===1)return Eu({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const g=l.map(S=>um({inputs:{input:S},backend:n})),y=l.map(S=>g0({inputs:{input:S},backend:n})),v=v0({inputs:g,backend:n,attrs:{axis:r}}),b=v0({inputs:y,backend:n,attrs:{axis:r}}),w=ba({inputs:{real:v,imag:b},backend:n});return g.forEach(S=>n.disposeIntermediateTensorInfo(S)),y.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),w}const c=l.map(g=>{const v=[-1,He(g.shape.slice(r))];return $i({inputs:{x:g},backend:n,attrs:{shape:v}})}),u=c.map(g=>({vals:n.data.get(g.dataId).values,shape:g.shape}));a=xu(c.map(g=>g.shape),1);const h=c[0].shape[0]===1,d=kK(u,a,e[0].dtype,h),p=xu(l.map(g=>g.shape),r),m=n.makeTensorInfo(p,e[0].dtype,d);return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const zNe={kernelName:kC,backendName:"cpu",kernelFunc:v0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wX(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,filter:r}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=i;Dt([s,r],"conv2d");const h=Oh(l),d=Lr(s.shape,r.shape,o,c,a,u,!1,h),p=d.filterHeight,m=d.filterWidth,g=d.dilationHeight,y=d.dilationWidth,v=d.padInfo.left,b=d.padInfo.top,w=d.dataFormat==="channelsLast",S=new Ar(d.outShape,s.dtype),k=zt(s.shape),I=zt(r.shape),T=k[0],E=w?k[1]:k[2],O=w?k[2]:1,F=w?1:k[1],R=S.strides[0],$=w?S.strides[1]:S.strides[2],U=w?S.strides[2]:1,W=w?1:S.strides[1],te=n.data.get(s.dataId).values,H=n.data.get(r.dataId).values,G=S.values;for(let B=0;B<d.batchSize;++B){const Y=B*T,ne=B*R;for(let le=0;le<d.outHeight;++le){const M=ne+le*$,j=le*d.strideHeight-b;for(let q=0;q<p;++q){const X=j+q*g;if(X<0||X>=d.inHeight)continue;const Z=q*I[0],ue=Y+X*E;for(let fe=0;fe<d.outWidth;++fe){const me=M+fe*U,Pe=fe*d.strideWidth-v;for(let Ne=0;Ne<m;++Ne){const Fe=Pe+Ne*y;if(Fe<0||Fe>=d.inWidth)continue;const qe=Z+Ne*I[1],Qe=ue+Fe*O;let xe=qe;for(let he=0;he<d.inChannels;++he){const ut=te[Qe+he*F];for(let ot=0;ot<d.outChannels;++ot)G[me+ot*W]+=ut*H[xe+ot];xe+=d.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,G)}const jNe={kernelName:IC,backendName:"cpu",kernelFunc:wX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VNe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,dy:r}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=i;Dt([s,r],"conv2dBackpropFilter");const h=Oh(l),d=Lr(s.shape,u,o,1,a,c,!1,h),{strideHeight:p,strideWidth:m,filterHeight:g,filterWidth:y}=d,v=d.dataFormat==="channelsLast",b=new Ar(d.filterShape,"float32"),w=d.padInfo.left,S=d.padInfo.top,k=n.data.get(s.dataId).values,I=n.data.get(r.dataId).values,T=new Ar(s.shape,s.dtype,k),E=new Ar(r.shape,r.dtype,I);for(let O=0;O<g;++O){const F=Math.max(0,Math.ceil((S-O)/p)),R=Math.min(d.outHeight,(d.inHeight+S-O)/p);for(let $=0;$<y;++$){const U=Math.max(0,Math.ceil((w-$)/m)),W=Math.min(d.outWidth,(d.inWidth+w-$)/m);for(let te=0;te<d.inChannels;++te)for(let H=0;H<d.outChannels;++H){let G=0;for(let B=0;B<d.batchSize;++B)for(let Y=F;Y<R;++Y){const ne=O+Y*p-S;for(let le=U;le<W;++le){const M=$+le*m-w;v?G+=T.get(B,ne,M,te)*E.get(B,Y,le,H):G+=T.get(B,te,ne,M)*E.get(B,H,Y,le)}}b.set(G,O,$,te,H)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const WNe={kernelName:ML,backendName:"cpu",kernelFunc:VNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UNe(t){const{inputs:e,backend:n,attrs:i}=t,{dy:s,filter:r}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=i;Dt([s,r],"conv2dBackpropInput");const h=zt(r.shape),d=zt(s.shape);let p=Oh(c);const m=Lr(o,r.shape,a,1,l,u,!1,p),g=new Ar(m.inShape,"float32"),y=g.values,v=n.data.get(s.dataId).values,b=n.data.get(r.dataId).values,[w,S,k]=h,{batchSize:I,filterHeight:T,filterWidth:E,inChannels:O,inHeight:F,inWidth:R,outChannels:$,outHeight:U,outWidth:W,strideHeight:te,strideWidth:H}=m;p=m.dataFormat;const G=T-1-m.padInfo.top,B=E-1-m.padInfo.left,Y=p==="channelsLast",ne=g.strides[0],le=Y?g.strides[1]:g.strides[2],M=Y?g.strides[2]:1,j=Y?1:g.strides[1],q=d[0],X=Y?d[1]:d[2],Z=Y?d[2]:1,ue=Y?1:d[1];for(let fe=0;fe<I;++fe)for(let me=0;me<O;++me)for(let Pe=0;Pe<F;++Pe){const Ne=Pe-G,Fe=Math.max(0,Math.ceil(Ne/te)),qe=Math.min(U,(T+Ne)/te);for(let Qe=0;Qe<R;++Qe){const xe=Qe-B,he=Math.max(0,Math.ceil(xe/H)),ut=Math.min(W,(E+xe)/H);let ot=0;for(let it=Fe;it<qe;++it){const ht=it*te-Ne;for(let at=he;at<ut;++at){const wt=at*H-xe,Rt=q*fe+X*it+Z*at,Ft=w*(T-1-ht)+S*(E-1-wt)+k*me;for(let pt=0;pt<$;++pt){const Ot=v[Rt+ue*pt],Ht=b[Ft+pt];ot+=Ot*Ht}}}const Je=ne*fe+le*Pe+M*Qe+j*me;y[Je]=ot}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const HNe={kernelName:NC,backendName:"cpu",kernelFunc:UNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GNe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,filter:r}=e,{strides:o,pad:a,dilations:l}=i;Dt([s,r],"conv3d");const c=Sf(s.shape,r.shape,o,l,a),{filterDepth:u,filterHeight:h,filterWidth:d,dilationDepth:p,dilationHeight:m,dilationWidth:g,padInfo:y}=c,v=y.front,b=y.left,w=y.top,S=new Ar(c.outShape,s.dtype),k=n.data.get(s.dataId).values,I=n.data.get(r.dataId).values,T=S.values,E=zt(s.shape),O=zt(r.shape);for(let F=0;F<c.batchSize;++F){const R=F*E[0],$=F*S.strides[0];for(let U=0;U<c.outDepth;++U){const W=$+U*S.strides[1],te=U*c.strideDepth-v;for(let H=0;H<u;++H){const G=te+H*p;if(G<0||G>=c.inDepth)continue;const B=H*O[0],Y=R+G*E[1];for(let ne=0;ne<c.outHeight;++ne){const le=W+ne*S.strides[2],M=ne*c.strideHeight-w;for(let j=0;j<h;++j){const q=M+j*m;if(q<0||q>=c.inHeight)continue;const X=B+j*O[1],Z=Y+q*E[2];for(let ue=0;ue<c.outWidth;++ue){const fe=le+ue*c.outChannels,me=ue*c.strideWidth-b;for(let Pe=0;Pe<d;++Pe){const Ne=me+Pe*g;if(Ne<0||Ne>=c.inWidth)continue;const Fe=X+Pe*O[2],qe=Z+Ne*c.inChannels;let Qe=Fe;for(let xe=0;xe<c.inChannels;++xe){const he=k[qe+xe];for(let ut=0;ut<c.outChannels;++ut)T[fe+ut]+=he*I[Qe+ut];Qe+=c.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const qNe={kernelName:EC,backendName:"cpu",kernelFunc:GNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KNe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,dy:r}=e,{strides:o,pad:a,filterShape:l}=i;Dt([s,r],"conv3dBackpropFilterV2");const c=zt(s.shape),u=zt(r.shape),h=Sf(s.shape,l,o,1,a),d=h.strideDepth,p=h.strideHeight,m=h.strideWidth,g=h.filterDepth,y=h.filterHeight,v=h.filterWidth,b=new Ar(h.filterShape,"float32"),w=b.values,[S,k,I,T]=b.strides,E=n.data.get(r.dataId).values,[O,F,R,$]=u,U=n.data.get(s.dataId).values,[W,te,H,G]=c,B=h.padInfo.front,Y=h.padInfo.left,ne=h.padInfo.top;for(let le=0;le<g;++le){const M=Math.max(0,Math.ceil((B-le)/d)),j=Math.min(h.outDepth,(h.inDepth+B-le)/d),q=le*S;for(let X=0;X<y;++X){const Z=Math.max(0,Math.ceil((ne-X)/p)),ue=Math.min(h.outHeight,(h.inHeight+ne-X)/p),fe=X*k+q;for(let me=0;me<v;++me){const Pe=Math.max(0,Math.ceil((Y-me)/m)),Ne=Math.min(h.outWidth,(h.inWidth+Y-me)/m),Fe=me*I+fe;for(let qe=0;qe<h.inChannels;++qe){const Qe=qe*T+Fe;for(let xe=0;xe<h.outChannels;++xe){let he=0;for(let ut=0;ut<h.batchSize;++ut){const ot=ut*W,Je=ut*O;for(let it=M;it<j;++it){const at=(le+it*d-B)*te+ot,wt=it*F+Je;for(let Rt=Z;Rt<ue;++Rt){const pt=(X+Rt*p-ne)*H+at,Ot=Rt*R+wt;for(let Ht=Pe;Ht<Ne;++Ht){const nn=(me+Ht*m-Y)*G+pt,mt=Ht*$+Ot;he+=U[nn+qe]*E[mt+xe]}}}}w[Qe+xe]=he}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const XNe={kernelName:FL,backendName:"cpu",kernelFunc:KNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNe(t){const{inputs:e,backend:n,attrs:i}=t,{dy:s,filter:r}=e,{pad:o,strides:a,inputShape:l}=i;Dt([s],"conv3dBackpropInputV2");const c=zt(s.shape),u=zt(r.shape),h=Sf(l,r.shape,a,1,o),d=new Ar(h.inShape,"float32"),p=d.values,[m,g,y,v]=d.strides,b=n.data.get(s.dataId).values,[w,S,k,I]=c,T=n.data.get(r.dataId).values,[E,O,F,R]=u,{batchSize:$,filterDepth:U,filterHeight:W,filterWidth:te,inChannels:H,inDepth:G,inHeight:B,inWidth:Y,outChannels:ne,outDepth:le,outHeight:M,outWidth:j,strideDepth:q,strideHeight:X,strideWidth:Z}=h,ue=U-1-h.padInfo.front,fe=W-1-h.padInfo.top,me=te-1-h.padInfo.left;for(let Pe=0;Pe<$;++Pe)for(let Ne=0;Ne<H;++Ne)for(let Fe=0;Fe<G;++Fe){const qe=Fe-ue,Qe=Math.max(0,Math.ceil(qe/q)),xe=Math.min(le,(U+qe)/q);for(let he=0;he<B;++he){const ut=he-fe,ot=Math.max(0,Math.ceil(ut/X)),Je=Math.min(M,(W+ut)/X);for(let it=0;it<Y;++it){const ht=it-me,at=Math.max(0,Math.ceil(ht/Z)),wt=Math.min(j,(te+ht)/Z);let Rt=0;for(let Ft=Qe;Ft<xe;++Ft){const pt=Ft*q-qe;for(let Ot=ot;Ot<Je;++Ot){const Ht=Ot*X-ut;for(let Bt=at;Bt<wt;++Bt){const nn=Bt*Z-ht,mt=w*Pe+S*Ft+k*Ot+I*Bt,di=E*(U-1-pt)+O*(W-1-Ht)+F*(te-1-nn)+R*Ne;for(let gn=0;gn<ne;++gn){const Bs=b[mt+gn],Vn=T[di+gn];Rt+=Bs*Vn}}}}p[m*Pe+g*Fe+y*he+v*it+Ne]=Rt}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}const ZNe={kernelName:BL,backendName:"cpu",kernelFunc:YNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QNe=hi(db,t=>Math.cos(t)),JNe={kernelName:db,backendName:"cpu",kernelFunc:QNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e5e=hi(fb,t=>Math.cosh(t)),t5e={kernelName:fb,backendName:"cpu",kernelFunc:e5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n5e(t){const{inputs:e,backend:n,attrs:i}=t,{image:s,boxes:r,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=i,[u,h,d,p]=s.shape,m=r.shape[0],[g,y]=a,v=kn([m,g,y,p],"float32"),b=n.data.get(r.dataId).values,w=n.data.get(o.dataId).values,S=n.data.get(s.dataId).values,k=zt(s.shape),I=zt(v.shape);for(let T=0;T<m;T++){const E=T*4,O=b[E],F=b[E+1],R=b[E+2],$=b[E+3],U=w[T];if(U>=u)continue;const W=g>1?(R-O)*(h-1)/(g-1):0,te=y>1?($-F)*(d-1)/(y-1):0;for(let H=0;H<g;H++){const G=g>1?O*(h-1)+H*W:.5*(O+R)*(h-1);if(G<0||G>h-1){for(let B=0;B<y;B++)for(let Y=0;Y<p;Y++){const ne=Y+B*I[2]+H*I[1]+T*I[0];v.values[ne]=c}continue}if(l==="bilinear"){const B=Math.floor(G),Y=Math.ceil(G),ne=G-B;for(let le=0;le<y;le++){const M=y>1?F*(d-1)+le*te:.5*(F+$)*(d-1);if(M<0||M>d-1){for(let Z=0;Z<p;Z++){const ue=Z+le*I[2]+H*I[1]+T*I[0];v.values[ue]=c}continue}const j=Math.floor(M),q=Math.ceil(M),X=M-j;for(let Z=0;Z<p;Z++){let ue=Z+j*k[2]+B*k[1]+U*k[0];const fe=S[ue];ue=Z+q*k[2]+B*k[1]+U*k[0];const me=S[ue];ue=Z+j*k[2]+Y*k[1]+U*k[0];const Pe=S[ue];ue=Z+q*k[2]+Y*k[1]+U*k[0];const Ne=S[ue],Fe=fe+(me-fe)*X,qe=Pe+(Ne-Pe)*X;ue=Z+le*I[2]+H*I[1]+T*I[0],v.values[ue]=Fe+(qe-Fe)*ne}}}else for(let B=0;B<y;++B){const Y=y>1?F*(d-1)+B*te:.5*(F+$)*(d-1);if(Y<0||Y>d-1){for(let M=0;M<p;M++){const j=M+B*I[2]+H*I[1]+T*I[0];v.values[j]=c}continue}const ne=Math.round(Y),le=Math.round(G);for(let M=0;M<p;M++){const j=M+ne*k[2]+le*k[1]+U*k[0],q=M+B*I[2]+H*I[1]+T*I[0];v.values[q]=S[j]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const i5e={kernelName:jL,backendName:"cpu",kernelFunc:n5e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s5e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,exclusive:o,reverse:a}=i;Dt(s,"cumprod");const l=os([r],s.shape.length);let c=s;l!=null&&(c=Qo({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=Is(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const h=Ea(c.dtype,"int32"),d=IL(He(c.shape),h),p=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=a?(v,b)=>v+m-b-1:(v,b)=>v+b;for(let v=0;v<p.length;v+=m)for(let b=0;b<m;b++){const w=g(v,b);if(b===0)d[w]=o?1:p[w];else{const S=g(v,b-1);d[w]=o?p[S]*d[S]:p[w]*d[S]}}const y=n.makeTensorInfo(c.shape,h,d);if(l!=null){const v=Cf(l),b=Qo({inputs:{x:y},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),b}return y}const r5e={kernelName:zL,backendName:"cpu",kernelFunc:s5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o5e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,exclusive:o,reverse:a}=i;Dt(s,"cumsum");const l=os([r],s.shape.length);let c=s;l!=null&&(c=Qo({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=Is(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const h=Ea(c.dtype,"int32"),d=qr(He(c.shape),h),p=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=a?(v,b)=>v+m-b-1:(v,b)=>v+b;for(let v=0;v<p.length;v+=m)for(let b=0;b<m;b++){const w=g(v,b);if(b===0)d[w]=o?0:p[w];else{const S=g(v,b-1);d[w]=o?p[S]+d[S]:p[w]+d[S]}}const y=n.makeTensorInfo(c.shape,h,d);if(l!=null){const v=Cf(l),b=Qo({inputs:{x:y},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),b}return y}const a5e={kernelName:TC,backendName:"cpu",kernelFunc:o5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l5e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,weights:r}=e,{size:o,binaryOutput:a}=i;if(s.shape.length===1){const l=n.data.get(s.dataId).values,c=n.data.get(r.dataId).values,u=ZP(l,c,r.dtype,r.shape,o);return n.makeTensorInfo([o],r.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(r),u=_K(l,c,o,a);return n.makeTensorInfo(u.shape,r.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const c5e={kernelName:VL,backendName:"cpu",kernelFunc:l5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u5e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{blockSize:r,dataFormat:o}=i;ce(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=s.shape[0],l=s.shape[1],c=s.shape[2],u=s.shape[3],h=l*r,d=c*r,p=u/(r*r),m=n.data.get(s.dataId).values,g=new Float32Array(a*h*d*p);let y=0;for(let v=0;v<a;++v)for(let b=0;b<h;++b){const w=Math.floor(b/r),S=b%r;for(let k=0;k<d;++k){const I=Math.floor(k/r),T=k%r,E=(S*r+T)*p;for(let O=0;O<p;++O){const R=O+E+u*(I+c*(w+l*v));g[y++]=m[R]}}}return n.makeTensorInfo([a,h,d,p],s.dtype,g)}const h5e={kernelName:WL,backendName:"cpu",kernelFunc:u5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _X(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,filter:r}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=i;Dt([s,r],"depthwiseConv2DNative");const u=zt(s.shape),h=zt(r.shape);let d=l;d==null&&(d=[1,1]),ce(Xr(o,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${d}'`);const p=Lr(s.shape,r.shape,o,d,a,c,!0),{filterHeight:m,filterWidth:g,dilationHeight:y,dilationWidth:v,padInfo:b}=p,w=b.left,S=b.top,k=p.outChannels/p.inChannels,I=new Ar(p.outShape,s.dtype),T=n.data.get(s.dataId).values,E=n.data.get(r.dataId).values,O=I.values;for(let F=0;F<p.batchSize;++F){const R=F*u[0],$=F*I.strides[0];for(let U=0;U<p.outHeight;++U){const W=$+U*I.strides[1],te=U*p.strideHeight-S;for(let H=0;H<m;++H){const G=te+H*y;if(G<0||G>=p.inHeight)continue;const B=H*h[0],Y=R+G*u[1];for(let ne=0;ne<p.outWidth;++ne){const le=W+ne*I.strides[2],M=ne*p.strideWidth-w;for(let j=0;j<g;++j){const q=M+j*v;if(q<0||q>=p.inWidth)continue;const X=B+j*h[1],Z=Y+q*p.inChannels;let ue=le,fe=X;for(let me=0;me<p.inChannels;++me){const Pe=T[Z+me];for(let Ne=0;Ne<k;++Ne)O[ue+Ne]+=Pe*E[fe+Ne];ue+=k,fe+=k}}}}}}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const d5e={kernelName:AC,backendName:"cpu",kernelFunc:_X};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f5e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,dy:r}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=i;Dt([s,r],"depthwiseConv2dNativeBackpropFilter");const h=Lr(s.shape,u,o,a,l,c,!0),{strideHeight:d,strideWidth:p,filterHeight:m,filterWidth:g}=h,y=new Ar(h.filterShape,"float32"),v=h.padInfo.left,b=h.padInfo.top,w=h.outChannels/h.inChannels,S=n.data.get(s.dataId).values,k=new Ar(s.shape,s.dtype,S),I=n.data.get(r.dataId).values,T=new Ar(r.shape,r.dtype,I);for(let E=0;E<m;++E){const O=Math.max(0,Math.ceil((b-E)/d)),F=Math.min(h.outHeight,(h.inHeight+b-E)/d);for(let R=0;R<g;++R){const $=Math.max(0,Math.ceil((v-R)/p)),U=Math.min(h.outWidth,(h.inWidth+v-R)/p);for(let W=0;W<h.outChannels;++W){const te=Math.trunc(W/w),H=W%w;let G=0;for(let B=0;B<h.batchSize;++B)for(let Y=O;Y<F;++Y){const ne=E+Y*d-b;for(let le=$;le<U;++le){const M=R+le*p-v;G+=k.get(B,ne,M,te)*T.get(B,Y,le,W)}}y.set(G,E,R,te,H)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const p5e={kernelName:UL,backendName:"cpu",kernelFunc:f5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5e(t){const{inputs:e,backend:n,attrs:i}=t,{dy:s,filter:r}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=i;Dt([s,r],"depthwiseConv2DNativeBackpropInput");const h=zt(s.shape),d=zt(r.shape),p=Lr(u,r.shape,o,a,l,c,!0),m=new Ar(p.inShape,"float32"),g=m.values,[y,v,b]=m.strides,w=n.data.get(s.dataId).values,[S,k,I]=h,T=n.data.get(r.dataId).values,[E,O,F]=d,{batchSize:R,filterHeight:$,filterWidth:U,inChannels:W,inHeight:te,inWidth:H,outChannels:G,outHeight:B,outWidth:Y,strideHeight:ne,strideWidth:le}=p,M=$-1-p.padInfo.top,j=U-1-p.padInfo.left,q=G/W;for(let X=0;X<R;++X)for(let Z=0;Z<W;++Z)for(let ue=0;ue<te;++ue){const fe=ue-M,me=Math.max(0,Math.ceil(fe/ne)),Pe=Math.min(B,($+fe)/ne);for(let Ne=0;Ne<H;++Ne){const Fe=Ne-j,qe=Math.max(0,Math.ceil(Fe/le)),Qe=Math.min(Y,(U+Fe)/le);let xe=0;for(let he=me;he<Pe;++he){const ut=he*ne-fe;for(let ot=qe;ot<Qe;++ot){const Je=ot*le-Fe,it=S*X+k*he+I*ot,ht=E*($-1-ut)+O*(U-1-Je)+F*Z;for(let at=0;at<q;++at){const wt=Z*q+at,Rt=w[it+wt],Ft=T[ht+at];xe+=Rt*Ft}}}g[y*X+v*ue+b*Ne+Z]=xe}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const g5e={kernelName:HL,backendName:"cpu",kernelFunc:m5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v5e(t){const{inputs:e,backend:n}=t,{x:i}=e,s=He(i.shape),r=n.data.get(i.dataId).values,o=kn([s,s],i.dtype),a=o.values;for(let c=0;c<r.length;c++)a[c*s+c]=r[c];const l=[...i.shape,...i.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const y5e={kernelName:UU,backendName:"cpu",kernelFunc:v5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b5e={kernelName:RC,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:i,filter:s}=t,{strides:r,pad:o,dilations:a}=n,l=e,c=l.data.get(i.dataId).values,u=i.shape.length,h=l.data.get(s.dataId).values,d=s.shape.length,{batchSize:p,inHeight:m,inWidth:g,inChannels:y,outHeight:v,outWidth:b,padInfo:w,strideHeight:S,strideWidth:k,filterHeight:I,filterWidth:T,dilationHeight:E,dilationWidth:O,outShape:F}=Zb(i.shape,s.shape,r,o,"NHWC",a),R=He(F),$=F.length,U=_s(i.dtype,R);for(let te=0;te<p;++te)for(let H=0;H<v;++H){const G=H*S-w.top;for(let B=0;B<b;++B){const Y=B*k-w.left;for(let ne=0;ne<y;++ne){let le=Number.MIN_SAFE_INTEGER;for(let j=0;j<I;++j){const q=G+j*E;if(q>=0&&q<m)for(let X=0;X<T;++X){const Z=Y+X*O;if(Z>=0&&Z<g){const ue=yu([te,q,Z,ne],u,zt(i.shape)),fe=yu([j,X,ne],d,zt(s.shape)),me=c[ue]+h[fe];me>le&&(le=me)}}}const M=yu([te,H,B,ne],$,zt(F));U[M]=le}}}return{dataId:l.write(bm(U,i.dtype),F,i.dtype),shape:F,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x5e={kernelName:KE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:i,filter:s,dy:r}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Sc(i.shape,c.data.get(i.dataId).values),h=Sc(s.shape,c.data.get(s.dataId).values),{batchSize:d,inHeight:p,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:w,strideWidth:S,filterHeight:k,filterWidth:I,dilationHeight:T,dilationWidth:E,outShape:O}=Zb(i.shape,s.shape,o,a,"NHWC",l);ce(r.rank===O.length,()=>`Error in ${KE}, dy must have the same rank as output ${O.length}, but got ${r.rank}`);const F=Sc(O,c.data.get(r.dataId).values),R=zU(s.shape,s.dtype);for(let U=0;U<d;++U)for(let W=0;W<y;++W){const te=W*w-b.top;for(let H=0;H<v;++H){const G=H*S-b.left;for(let B=0;B<g;++B){let Y=Number.MIN_SAFE_INTEGER,ne=0,le=0;for(let M=0;M<k;++M){const j=te+M*T;if(j>=0&&j<p)for(let q=0;q<I;++q){const X=G+q*E;if(X>=0&&X<m){const Z=u[U][j][X][B]+h[M][q][B];Z>Y&&(Y=Z,ne=M,le=q)}}}R[ne][le][B]+=F[U][W][H][B]}}}return{dataId:c.write(bm(R,i.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w5e={kernelName:qE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:i,filter:s,dy:r}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Sc(i.shape,c.data.get(i.dataId).values),h=Sc(s.shape,c.data.get(s.dataId).values),{batchSize:d,inHeight:p,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:w,strideWidth:S,filterHeight:k,filterWidth:I,dilationHeight:T,dilationWidth:E,outShape:O}=Zb(i.shape,s.shape,o,a,"NHWC",l);ce(r.rank===O.length,()=>`Error in ${qE}, dy must have the same rank as output ${O.length}, but got ${r.rank}`);const F=Sc(O,c.data.get(r.dataId).values),R=zU(i.shape,i.dtype);for(let U=0;U<d;++U)for(let W=0;W<y;++W){const te=W*w-b.top;for(let H=0;H<v;++H){const G=H*S-b.left;for(let B=0;B<g;++B){let Y=Number.MIN_SAFE_INTEGER,ne=te<0?0:te,le=G<0?0:G;for(let M=0;M<k;++M){const j=te+M*T;if(j>=0&&j<p)for(let q=0;q<I;++q){const X=G+q*E;if(X>=0&&X<m){const Z=u[U][j][X][B]+h[M][q][B];Z>Y&&(Y=Z,ne=j,le=X)}}}R[U][ne][le][B]+=F[U][W][H][B]}}}return{dataId:c.write(bm(R,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _5e(t){const{inputs:e,backend:n,attrs:i}=t,{image:s}=e,{canvas:r,options:o}=i,{contextOptions:a,imageOptions:l}=o||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const h=r.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(h==null)throw new Error(`Could not get the context with ${u} type.`);const[d,p]=s.shape.slice(0,2),m=s.shape.length===2?1:s.shape[2],g=n.data.get(s.dataId).values,y=s.dtype==="float32"?255:1,v=new Uint8ClampedArray(p*d*4);for(let w=0;w<d*p;++w){const S=[0,0,0,255*c];for(let I=0;I<m;I++){const T=g[w*m+I];if(s.dtype==="float32"){if(T<0||T>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${T}.`)}else if(s.dtype==="int32"&&(T<0||T>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${T}.`);m===1?(S[0]=T*y,S[1]=T*y,S[2]=T*y):S[I]=T*y}const k=w*4;v[k+0]=Math.round(S[0]),v[k+1]=Math.round(S[1]),v[k+2]=Math.round(S[2]),v[k+3]=Math.round(S[3])}r.width=p,r.height=d;const b=new ImageData(v,p,d);return h.putImageData(b,0,0),s}const S5e={kernelName:sve,backendName:"cpu",kernelFunc:_5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fx(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,keepDims:o}=i;Dt(s,"sum");let a;s.dtype==="bool"?a=uf({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):a=Eu({inputs:{x:s},backend:n});const l=a.shape.length,c=In(r,a.shape),u=os(c,l);let h=c,d=a;u!=null&&(d=Qo({inputs:{x:a},backend:n,attrs:{perm:u}}),h=Is(h.length,l)),Pr("sum",h,d.shape.length);const[p,m]=mr(d.shape,h),g=Ea(d.dtype,"int32");let y=eS(n,p,g);const v=He(m),b=n.data.get(y.dataId).values,w=n.data.get(d.dataId).values;for(let S=0;S<b.length;++S){const k=S*v;let I=0;for(let T=0;T<v;++T)I+=w[k+T];b[S]=I}if(o){const S=Fs(y.shape,c),k=y;y=$i({inputs:{x:y},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(k)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(d),y}const C5e={kernelName:uk,backendName:"cpu",kernelFunc:fx};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5e(t){const{inputs:e,backend:n,attrs:i}=t,{equation:s}=i,r=e,{allDims:o,summedDims:a,idDims:l}=xP(s,r.length);_P(o.length,l,r);const{path:c,steps:u}=SP(a,l),h=u.length;let d=null,p=o.length;const m=[];for(let g=0;g<h;++g){for(const y of u[g]){const{permutationIndices:v,expandDims:b}=wP(p,l[y]);let w;CP(v)?w=r[y]:(w=Qo({inputs:{x:r[y]},backend:n,attrs:{perm:v}}),m.push(w));const S=w.shape.slice();for(let k=0;k<b.length;++k)S.splice(b[k],0,1);ri(w.shape,S)||(w=$i({inputs:{x:w},backend:n,attrs:{shape:S}}),m.push(w)),d===null?d=w:(d=jk({inputs:{a:w,b:d},backend:n}),m.push(d))}g<h-1&&(c[g]>=0&&(d=fx({inputs:{x:d},backend:n,attrs:{axis:c[g]-(o.length-p),keepDims:!1}}),m.push(d)),p--)}for(const g of m)g!==d&&n.disposeIntermediateTensorInfo(g);return d}const I5e={kernelName:GL,backendName:"cpu",kernelFunc:k5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N5e(t){const{inputs:e,backend:n}=t,{dy:i,y:s}=e;Dt([i,s],"eluGrad");const r=new Float32Array(He(s.shape)),o=n.data.get(s.dataId).values,a=n.data.get(i.dataId).values;for(let l=0;l<o.length;++l){const c=o[l];c>=0?r[l]=a[l]:r[l]=a[l]*(c+1)}return n.makeTensorInfo(s.shape,"float32",r)}const E5e={kernelName:qL,backendName:"cpu",kernelFunc:N5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T5e=fP,A5e=pP,R5e=mP,L5e=gP,P5e=vP,D5e=yP,$5e=hi(gb,t=>{const e=Math.sign(t),n=Math.abs(t),i=1/(1+T5e*n);return e*(1-((((D5e*i+P5e)*i+L5e)*i+R5e)*i+A5e)*i*Math.exp(-n*n))}),O5e={kernelName:gb,backendName:"cpu",kernelFunc:$5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iS(t){const{inputs:e,backend:n,attrs:i}=t,{input:s}=e,{dim:r}=i,o=s.shape.length,a=s.shape.slice();let l=r;return r<0&&(ce(-(o+1)<=r,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+r+1),a.splice(l,0,1),$i({inputs:{x:s},backend:n,attrs:{shape:a}})}const M5e={kernelName:PC,backendName:"cpu",kernelFunc:iS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F5e=Es((t,e)=>t/e),iD=Qs(pb,F5e),wT={kernelName:pb,backendName:"cpu",kernelFunc:iD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SX(t,e,n){const i=t.shape,s=i[0],r=i[1],o=n.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[s,r],u=He(c),h=Gr("float32",u),d=Gr("float32",u);for(let y=0;y<s;y++){const v=hm({inputs:{x:a},backend:n,attrs:{begin:[y,0],size:[1,r]}}),b=hm({inputs:{x:l},backend:n,attrs:{begin:[y,0],size:[1,r]}}),w=ba({inputs:{real:v,imag:b},backend:n}),{real:S,imag:k}=B5e(w,e,n),I=Eh(S,k);for(let T=0;T<r;T++){const E=bP(I,T);h[y*r+T]=E.real,d[y*r+T]=E.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w)}const p=n.makeTensorInfo(c,"float32",h),m=n.makeTensorInfo(c,"float32",d),g=ba({inputs:{real:p,imag:m},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}function B5e(t,e,n){const i=He(t.shape),s=n.data.get(t.dataId),r=n.data.get(s.complexTensorInfos.real.dataId).values,o=n.data.get(s.complexTensorInfos.imag.dataId).values;if(z5e(i)){const a=_T(r,o,i,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),u=n.makeTensorInfo(l,"float32",a.imag),h=n.makeTensorInfo([],"float32",_f(i,"float32")),d=Eu({inputs:{x:h},backend:n}),p=wT.kernelFunc({inputs:{a:c,b:h},backend:n}),m=wT.kernelFunc({inputs:{a:u,b:d},backend:n}),g=n.data.get(p.dataId).values,y=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),{real:g,imag:y}}return a}else{const a=Eh(r,o),l=j5e(a,i,e);return M9(l)}}function z5e(t){return(t&t-1)===0}function _T(t,e,n,i,s){if(n===1)return{real:t,imag:e};const r=Eh(t,e),o=n/2,a=F9(r),l=a.real,c=a.imag,u=[l.length],h=s.makeTensorInfo(u,"float32",l),d=s.makeTensorInfo(u,"float32",c),p=ba({inputs:{real:h,imag:d},backend:s}),m=B9(r),g=m.real,y=m.imag,v=[g.length],b=s.makeTensorInfo(v,"float32",g),w=s.makeTensorInfo(v,"float32",y),S=ba({inputs:{real:b,imag:w},backend:s}),k=_T(l,c,o,i,s),I=k.real,T=k.imag,E=[I.length],O=s.makeTensorInfo(E,"float32",I),F=s.makeTensorInfo(E,"float32",T),R=ba({inputs:{real:O,imag:F},backend:s}),$=_T(g,y,o,i,s),U=$.real,W=$.imag,te=[U.length],H=s.makeTensorInfo(te,"float32",U),G=s.makeTensorInfo(te,"float32",W),B=ba({inputs:{real:H,imag:G},backend:s}),Y=j9(n,i),ne=[Y.real.length],le=s.makeTensorInfo(ne,"float32",Y.real),M=s.makeTensorInfo(ne,"float32",Y.imag),j=ba({inputs:{real:le,imag:M},backend:s}),q=jk({inputs:{a:j,b:B},backend:s}),X=m0({inputs:{a:R,b:q},backend:s}),Z=tD({inputs:{a:R,b:q},backend:s}),ue=um({inputs:{input:X},backend:s}),fe=um({inputs:{input:Z},backend:s}),me=g0({inputs:{input:X},backend:s}),Pe=g0({inputs:{input:Z},backend:s}),Ne=v0({inputs:[ue,fe],backend:s,attrs:{axis:0}}),Fe=v0({inputs:[me,Pe],backend:s,attrs:{axis:0}}),qe=s.data.get(Ne.dataId).values,Qe=s.data.get(Fe.dataId).values;return s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(w),s.disposeIntermediateTensorInfo(S),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(F),s.disposeIntermediateTensorInfo(R),s.disposeIntermediateTensorInfo(H),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(B),s.disposeIntermediateTensorInfo(le),s.disposeIntermediateTensorInfo(M),s.disposeIntermediateTensorInfo(j),s.disposeIntermediateTensorInfo(q),s.disposeIntermediateTensorInfo(X),s.disposeIntermediateTensorInfo(Z),s.disposeIntermediateTensorInfo(ue),s.disposeIntermediateTensorInfo(me),s.disposeIntermediateTensorInfo(fe),s.disposeIntermediateTensorInfo(Pe),s.disposeIntermediateTensorInfo(Ne),s.disposeIntermediateTensorInfo(Fe),{real:qe,imag:Qe}}function j5e(t,e,n){const i=new Float32Array(e*2);for(let s=0;s<e;s++){let r=0,o=0;for(let a=0;a<e;a++){const l=V9(s*a,e,n),c=bP(t,a);r+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}n&&(r/=e,o/=e),z9(i,r,o,s)}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V5e(t){const{inputs:e,backend:n}=t,{input:i}=e,s=He(i.shape),r=i.shape[i.shape.length-1],o=s/r,a=$i({inputs:{x:i},backend:n,attrs:{shape:[o,r]}}),l=SX(a,!1,n),c=$i({inputs:{x:l},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const W5e={kernelName:KL,backendName:"cpu",kernelFunc:V5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sD(t){const{backend:e,attrs:n}=t,{shape:i,value:s,dtype:r}=n,o=r||D0(s),a=_s(o,He(i));return H5e(a,s,o),e.makeTensorInfo(i,o,a)}const U5e={kernelName:XL,backendName:"cpu",kernelFunc:sD};function H5e(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G5e={kernelName:YL,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:i}=t,s=n,r=Gr(i.dtype,He(i.shape)),[o,a,l,c]=i.shape,u=s.data.get(i.dataId).values;for(let d=0;d<o;d++){const p=d*l*a*c;for(let m=0;m<a;m++){const g=m*(l*c);for(let y=0;y<l;y++){const v=y*c;for(let b=0;b<c;b++){const w=Math.round(l-y-1),S=p+g+v+b;let k=u[S];if(w>=0&&w<l){const I=w*c,T=p+g+I+b;k=u[T]}r[S]=k}}}}return{dataId:s.write(r,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q5e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,filter:r,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:m}=i;let g=wX({inputs:{x:s,filter:r},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d}});if(o){const y=g;if(u==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const v=$i({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});g=m0({inputs:{a:g,b:v},backend:n}),n.disposeIntermediateTensorInfo(v)}else g=m0({inputs:{a:g,b:o},backend:n});n.disposeIntermediateTensorInfo(y)}if(p){const y=g;if(u==="NCHW"&&p==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const v=$i({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});g=nS(n,g,p,v,m),n.disposeIntermediateTensorInfo(v)}else g=nS(n,g,p,a,m);n.disposeIntermediateTensorInfo(y)}return g}const K5e={kernelName:O_,backendName:"cpu",kernelFunc:q5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X5e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,filter:r,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:m}=i;let g=_X({inputs:{x:s,filter:r},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d}});if(o){const y=g;g=m0({inputs:{a:g,b:o},backend:n}),n.disposeIntermediateTensorInfo(y)}if(p){const y=g;g=nS(n,g,p,a,m),n.disposeIntermediateTensorInfo(y)}return g}const Y5e={kernelName:cH,backendName:"cpu",kernelFunc:X5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z5e(t){const{inputs:e,backend:n}=t,{params:i,indices:s}=e,r=He(i.shape),o=s.shape,a=o[o.length-1],[l,c,u,h]=nP(i,s);if(c===0)return n.makeTensorInfo(l,i.dtype,[]);const d=n.data.get(s.dataId).values,p=n.bufferSync(i),m=PK(d,p,i.dtype,c,a,u,h,i.shape,r);return n.makeTensorInfo(l,i.dtype,m.values)}const Q5e={kernelName:HU,backendName:"cpu",kernelFunc:Z5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J5e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,indices:r}=e,{axis:o,batchDims:a}=i;Dt([s,r],"gatherV2");const l=In(o,s.shape)[0],c=n.data.get(r.dataId).values,u=s.shape[l];for(let S=0;S<c.length;++S){const k=c[S];ce(k<=u-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${u-1}]`)}let h=a;a==null&&(h=0);const d=He(r.shape),p=IP(s,r,l,h),m=$i({inputs:{x:s},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),g=$i({inputs:{x:r},backend:n,attrs:{shape:[p.batchSize,d/p.batchSize]}}),y=[p.batchSize,p.outerSize,d/p.batchSize,p.sliceSize],v=n.bufferSync(g),b=n.bufferSync(m),w=DK(b,v,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(p.outputShape,w.dtype,w.values)}const eEe={kernelName:$C,backendName:"cpu",kernelFunc:J5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tEe(t){const{inputs:e,backend:n}=t,{input:i}=e,s=He(i.shape),r=i.shape[i.shape.length-1],o=s/r,a=$i({inputs:{x:i},backend:n,attrs:{shape:[o,r]}}),l=SX(a,!0,n),c=$i({inputs:{x:l},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const nEe={kernelName:ZL,backendName:"cpu",kernelFunc:tEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iEe=hi(Sb,t=>Number.isFinite(t)?1:0,"bool"),sEe={kernelName:Sb,backendName:"cpu",kernelFunc:iEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rEe=hi(Cb,t=>Math.abs(t)===1/0?1:0,"bool"),oEe={kernelName:Cb,backendName:"cpu",kernelFunc:rEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aEe=hi(kb,t=>Number.isNaN(t)?1:0,"bool"),lEe={kernelName:kb,backendName:"cpu",kernelFunc:aEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cEe(t){const{backend:e,attrs:n}=t,{start:i,stop:s,num:r}=n,o=BK(i,s,r);return e.makeTensorInfo([o.length],"float32",o)}const uEe={kernelName:GU,backendName:"cpu",kernelFunc:cEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hEe=hi(Nb,t=>Math.log1p(t)),dEe={kernelName:Nb,backendName:"cpu",kernelFunc:hEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fEe=Es((t,e)=>t&&e),pEe=Qs(zC,fEe,null,"bool"),mEe={kernelName:zC,backendName:"cpu",kernelFunc:pEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gEe=hi(jC,t=>t?0:1,"bool"),vEe={kernelName:jC,backendName:"cpu",kernelFunc:gEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yEe=Es((t,e)=>t||e),bEe=Qs(VC,yEe,null,"bool"),xEe={kernelName:VC,backendName:"cpu",kernelFunc:bEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wEe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{depthRadius:r,bias:o,alpha:a,beta:l}=i;Dt(s,"LRN");const c=s.shape[3],u=c-1,h=n.data.get(s.dataId).values,d=He(s.shape),p=new Float32Array(d);function m(g){const y=g%c;let v=g-y+Math.max(0,y-r);const b=g-y+Math.min(y+r,u);let w=0;for(;v<=b;v++){const S=h[v];w+=S*S}return w}for(let g=0;g<d;g++){const y=m(g),v=h[g]*Math.pow(o+a*y,-l);p[g]=v}return n.makeTensorInfo(s.shape,s.dtype,p)}const _Ee={kernelName:WC,backendName:"cpu",kernelFunc:wEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SEe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,y:r,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=i;Dt(o,"LRNGrad");const h=He(o.shape),d=o.shape[3],p=n.data.get(o.dataId).values,m=n.data.get(s.dataId).values,g=n.data.get(r.dataId).values,y=new Float32Array(h),v=h;for(let b=0;b<v;b++){const w=b%d,S=b-w+Math.max(0,w-a),k=b-w+Math.min(d,w+a+1);let I=0;for(let T=S;T<k;T++)I+=Math.pow(m[T],2);I=c*I+l;for(let T=S;T<k;T++){let E=-2*c*u*m[T]*g[b]/I;b===T&&(E+=Math.pow(I,-u)),E*=p[b],y[T]+=E}}return n.makeTensorInfo(o.shape,s.dtype,y)}const CEe={kernelName:JL,backendName:"cpu",kernelFunc:SEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CX(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{reductionIndices:r,keepDims:o}=i,a=n;let l=s.shape;const c=l.length,u=In(r,l);let h=u;const d=os(h,c);let p=a.data.get(s.dataId).values;if(d!=null){const S=new Array(c);for(let k=0;k<S.length;k++)S[k]=l[d[k]];p=JP(p,l,s.dtype,d,S),h=Is(h.length,c),l=S}Dt(s,"max"),Pr("max",h,c);const[m,g]=mr(l,h),y=He(g),v=jK(p,y,m,s.dtype),b=a.write(v,m,s.dtype);let w=m;return o&&(w=Fs(m,u)),{dataId:b,shape:w,dtype:s.dtype}}const kEe={kernelName:UC,backendName:"cpu",kernelFunc:CX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IEe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e;Dt(s,"maxPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=i,c=1;ce(Xr(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Fl(s.shape,r,o,c,a,l);let h;if(u.filterWidth===1&&u.filterHeight===1&&ri(u.inShape,u.outShape))h=Eu({inputs:{x:s},backend:n});else{const d=n.data.get(s.dataId).values,p=zt(s.shape),m=nD(d,s.shape,s.dtype,p,u,"max");h=n.makeTensorInfo(u.outShape,s.dtype,m.values)}return h}const NEe={kernelName:HC,backendName:"cpu",kernelFunc:IEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EEe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{filterSize:r,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=i;Dt(s,"maxPool3d");const u=$h(s.shape,r,o,1,a,l,c),h=n.data.get(s.dataId).values,d=xX(h,s.shape,s.dtype,zt(s.shape),u,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}const TEe={kernelName:GC,backendName:"cpu",kernelFunc:EEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AEe(t){const{inputs:e,backend:n,attrs:i}=t,{dy:s,input:r}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=i;Dt([s,r],"maxPool3DGrad");const u=$h(r.shape,o,a,1,l,c),h=n.bufferSync(r),d=yNe(h,u),p=u.strideDepth,m=u.strideHeight,g=u.strideWidth,y=u.dilationDepth,v=u.dilationHeight,b=u.dilationWidth,w=u.effectiveFilterDepth,S=u.effectiveFilterHeight,k=u.effectiveFilterWidth,I=w-1-u.padInfo.front,T=k-1-u.padInfo.left,E=S-1-u.padInfo.top,O=kn(r.shape,"float32"),F=n.bufferSync(s);for(let R=0;R<u.batchSize;++R)for(let $=0;$<u.inChannels;++$)for(let U=0;U<u.inDepth;++U)for(let W=0;W<u.inHeight;++W)for(let te=0;te<u.inWidth;++te){const H=U-I,G=W-E,B=te-T;let Y=0;for(let ne=0;ne<w;ne+=y){const le=(H+ne)/p;if(!(le<0||le>=u.outDepth||Math.floor(le)!==le))for(let M=0;M<S;M+=v){const j=(G+M)/m;if(!(j<0||j>=u.outHeight||Math.floor(j)!==j))for(let q=0;q<k;q+=b){const X=(B+q)/g;if(X<0||X>=u.outWidth||Math.floor(X)!==X)continue;const Z=w*S*k-1-d.get(R,le,j,X,$),ue=ne*S*k+M*k+q,fe=Z===ue?1:0;if(fe===0)continue;const me=F.get(R,le,j,X,$);Y+=me*fe}}}O.set(Y,R,U,W,te,$)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}const REe={kernelName:t3,backendName:"cpu",kernelFunc:AEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LEe(t){const{inputs:e,backend:n,attrs:i}=t,{dy:s,input:r,output:o}=e,a=r;Dt([r,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=i,d=Fl(a.shape,l,c,1,u,h),p=n.data.get(a.dataId).values,m=kn(d.outShape,a.dtype,bX(p,a.shape,a.dtype,d).values),g=d.strideHeight,y=d.strideWidth,v=d.dilationHeight,b=d.dilationWidth,w=d.effectiveFilterHeight,S=d.effectiveFilterWidth,k=S-1-d.padInfo.left,I=w-1-d.padInfo.top,T=kn(a.shape,"float32"),E=n.data.get(s.dataId).values,O=kn(s.shape,"float32",E);for(let F=0;F<d.batchSize;++F)for(let R=0;R<d.inChannels;++R)for(let $=0;$<d.inHeight;++$)for(let U=0;U<d.inWidth;++U){const W=$-I,te=U-k;let H=0;for(let G=0;G<w;G+=v){const B=(W+G)/g;if(!(B<0||B>=d.outHeight||Math.floor(B)!==B))for(let Y=0;Y<S;Y+=b){const ne=(te+Y)/y;if(ne<0||ne>=d.outWidth||Math.floor(ne)!==ne)continue;const le=w*S-1-m.get(F,B,ne,R),M=G*S+Y,j=le===M?1:0;if(j===0)continue;const q=O.get(F,B,ne,R);H+=q*j}}T.set(H,F,$,U,R)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const PEe={kernelName:e3,backendName:"cpu",kernelFunc:LEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DEe(t,e,n,i,s){const r=zt(e),o=nD(t,e,n,r,s,"max"),a=bX(t,e,n,s,!0,i);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ee={kernelName:qU,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:i}=t,{filterSize:s,strides:r,pad:o,includeBatchInIndex:a}=e,l=n;Dt(i,"MaxPoolWithArgmax");const c=l.data.get(i.dataId).values,u=Fl(i.shape,s,r,[1,1],o),[h,d]=DEe(c,i.shape,i.dtype,a,u),p=l.write(h,u.outShape,i.dtype),m=l.write(d,u.outShape,i.dtype);return[{dataId:p,shape:u.outShape,dtype:i.dtype},{dataId:m,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OEe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,keepDims:o}=i,a=In(r,s.shape),c=mr(s.shape,a)[1],u=He(c),h=[],d=n.makeTensorInfo([],"float32",new Float32Array([u]));h.push(d);const p=uf({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});h.push(p);const m=iD({inputs:{a:p,b:d},backend:n});h.push(m);const g=fx({inputs:{x:m},backend:n,attrs:{axis:r,keepDims:o}});return h.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const MEe={kernelName:qC,backendName:"cpu",kernelFunc:OEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FEe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,keepDims:o}=i;Dt(s,"min");const a=In(r,s.shape);let l=a;const c=os(l,s.shape.length);let u=s;c!=null&&(u=Qo({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Is(l.length,s.shape.length)),Pr("min",l,u.shape.length);const[h,d]=mr(u.shape,l),p=He(d),m=qr(He(h),u.dtype),g=n.data.get(u.dataId).values;for(let v=0;v<m.length;++v){const b=v*p;let w=g[b];for(let S=0;S<p;++S){const k=g[b+S];(Number.isNaN(k)||k<w)&&(w=k)}m[v]=w}c!=null&&n.disposeIntermediateTensorInfo(u);const y=n.makeTensorInfo(h,u.dtype,m);if(o){const v=Fs(h,a),b=$i({inputs:{x:y},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(y),b}return y}const BEe={kernelName:KC,backendName:"cpu",kernelFunc:FEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{paddings:r,mode:o}=i;Dt(s,"mirrorPad");const a=r.map((w,S)=>w[0]+s.shape[S]+w[1]),l=r.map(w=>w[0]),c=r.map((w,S)=>w[0]+s.shape[S]),u=o==="reflect"?0:1,h=n.data.get(s.dataId).values,d=s.shape.length,p=zt(s.shape),m=He(a),g=a.length,y=zt(a),v=Gr(s.dtype,m);for(let w=0;w<m;w++){let S=$0(w,g,y);for(let I=0;I<g;I++)S[I]<l[I]?S[I]=l[I]*2-S[I]-u:S[I]>=c[I]&&(S[I]=(c[I]-1)*2-S[I]+u);S=S.map((I,T)=>I-l[T]);const k=yu(S,d,p);v[w]=h[k]}return{dataId:n.write(v,a,s.dtype),shape:a,dtype:s.dtype}}const jEe={kernelName:XC,backendName:"cpu",kernelFunc:zEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VEe=Es((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),WEe=Qs(Ab,VEe),UEe={kernelName:Ab,backendName:"cpu",kernelFunc:WEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kX(t){const{inputs:e,backend:n,attrs:i}=t,{logits:s}=e,{dim:r}=i,o=s.shape.length;let a=r;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=In([a],s.shape),c=CX({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=Fs(c.shape,l),h=$i({inputs:{x:c},backend:n,attrs:{shape:u}}),d=tD({inputs:{a:s,b:h},backend:n}),p=TK({inputs:{x:d},backend:n}),m=fx({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),g=$i({inputs:{x:m},backend:n,attrs:{shape:u}}),y=iD({inputs:{a:p,b:g},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}const HEe={kernelName:fk,backendName:"cpu",kernelFunc:kX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GEe(t){const{inputs:e,backend:n,attrs:i}=t,{logits:s}=e,{numSamples:r,seed:o,normalized:a}=i;Dt(s,"multinomial");const l=a?s:kX({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],h=n.data.get(l.dataId).values,d=[c,r],p=qr(He(d),"int32");for(let m=0;m<c;++m){const g=m*u,y=new Float32Array(u-1);y[0]=h[g];for(let w=1;w<y.length;++w)y[w]=y[w-1]+h[g+w];const v=V3.alea(o.toString()),b=m*r;for(let w=0;w<r;++w){const S=v();p[b+w]=y.length;for(let k=0;k<y.length;k++)if(S<y[k]){p[b+w]=k;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",p)}const qEe={kernelName:KU,backendName:"cpu",kernelFunc:GEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KEe=Z3;function XEe(t){const{inputs:e,backend:n,attrs:i}=t,{boxes:s,scores:r}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=i;Dt(s,"NonMaxSuppression");const c=n.data.get(s.dataId).values,u=n.data.get(r.dataId).values,{selectedIndices:h}=KEe(c,u,o,a,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const YEe={kernelName:n3,backendName:"cpu",kernelFunc:XEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZEe=Q3;function QEe(t){const{inputs:e,backend:n,attrs:i}=t,{boxes:s,scores:r}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=i;Dt(s,"NonMaxSuppressionPadded");const u=n.data.get(s.dataId).values,h=n.data.get(r.dataId).values,{selectedIndices:d,validOutputs:p}=ZEe(u,h,o,a,l,c);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const JEe={kernelName:i3,backendName:"cpu",kernelFunc:QEe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eTe=J3;function tTe(t){const{inputs:e,backend:n,attrs:i}=t,{boxes:s,scores:r}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=i;Dt(s,"NonMaxSuppressionWithScore");const u=n.data.get(s.dataId).values,h=n.data.get(r.dataId).values,d=o,p=a,m=l,g=c,{selectedIndices:y,selectedScores:v}=eTe(u,h,d,p,m,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const nTe={kernelName:s3,backendName:"cpu",kernelFunc:tTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTe(t){const{inputs:e,backend:n,attrs:i}=t,{indices:s}=e,{dtype:r,depth:o,onValue:a,offValue:l}=i;Dt(s,"oneHot");const c=He(s.shape),u=new Float32Array(c*o);u.fill(l);const h=n.data.get(s.dataId).values;for(let d=0;d<c;++d)h[d]>=0&&h[d]<o&&(u[d*o+h[d]]=a);return n.makeTensorInfo([...s.shape,o],r,u)}const sTe={kernelName:JC,backendName:"cpu",kernelFunc:iTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sS(t){const{inputs:e,backend:n}=t,{x:i}=e;if(i.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(i.dtype==="complex64"){const s=um({inputs:{input:i},backend:n}),r=sS({inputs:{x:s},backend:n}),o=g0({inputs:{input:i},backend:n}),a=sS({inputs:{x:o},backend:n}),l=ba({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return sD({backend:n,attrs:{shape:i.shape,value:0,dtype:i.dtype}})}const rTe={kernelName:gk,backendName:"cpu",kernelFunc:sS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IX(t){const{inputs:e,backend:n}=t,{x:i}=e;if(i.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(i.dtype==="complex64"){const s=um({inputs:{input:i},backend:n}),r=IX({inputs:{x:s},backend:n}),o=g0({inputs:{input:i},backend:n}),a=sS({inputs:{x:o},backend:n}),l=ba({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return sD({backend:n,attrs:{shape:i.shape,value:1,dtype:i.dtype}})}const oTe={kernelName:QC,backendName:"cpu",kernelFunc:IX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NX(t){const{inputs:e,backend:n,attrs:i}=t,{axis:s}=i;if(e.length===1)return iS({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const r=e[0].shape,o=e[0].dtype;e.forEach(u=>{kL(r,u.shape,"All tensors passed to stack must have matching shapes"),ce(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const h=iS({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(h),h}),c=v0({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const aTe={kernelName:ek,backendName:"cpu",kernelFunc:NX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lTe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{paddings:r,constantValue:o}=i;Dt(s,"pad");const a=r.map((b,w)=>b[0]+s.shape[w]+b[1]),l=r.map(b=>b[0]),c=n.data.get(s.dataId).values,u=He(s.shape),h=s.shape.length,d=zt(s.shape),p=He(a),m=a.length,g=zt(a),y=Gr(s.dtype,p);o!==0&&y.fill(o);for(let b=0;b<u;b++){const S=$0(b,h,d).map((I,T)=>I+l[T]),k=yu(S,m,g);y[k]=c[b]}return{dataId:n.write(y,a,s.dtype),shape:a,dtype:s.dtype}}const EX={kernelName:tk,backendName:"cpu",kernelFunc:lTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cTe=Es((t,e)=>Math.pow(t,e)),uTe=Qs(Lb,cTe),hTe={kernelName:Lb,backendName:"cpu",kernelFunc:uTe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dTe(t){const{inputs:e,backend:n,attrs:i}=t,{paramsNestedSplits:s,paramsDenseValues:r,indices:o}=e,a=s.map(y=>n.data.get(y.dataId).values),l=s.map(y=>y.shape),c=n.data.get(r.dataId).values,u=n.data.get(o.dataId).values,[h,d,p]=qK(a,l,c,r.shape,r.dtype,u,o.shape),m=h.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(p,r.dtype,d);return m.concat([g])}const fTe={kernelName:XU,backendName:"cpu",kernelFunc:dTe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pTe(t){const{inputs:e,backend:n}=t,{starts:i,limits:s,deltas:r}=e,o=n.data.get(i.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,[c,u]=KK(o,i.shape,i.dtype,a,s.shape,l,r.shape),h=n.makeTensorInfo([c.length],"int32",c),d=n.makeTensorInfo([u.length],i.dtype,u);return[h,d]}const mTe={kernelName:YU,backendName:"cpu",kernelFunc:pTe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gTe(t){const{inputs:e,backend:n,attrs:i}=t,{shape:s,values:r,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=i,c=n.data.get(s.dataId).values,u=n.data.get(r.dataId).values,h=n.data.get(o.dataId).values,d=a.map(y=>n.data.get(y.dataId).values),p=a.map(y=>y.shape),[m,g]=XK(c,s.shape,u,r.shape,r.dtype,h,o.shape,d,p,l);return n.makeTensorInfo(m,r.dtype,g)}const vTe={kernelName:ZU,backendName:"cpu",kernelFunc:gTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yTe(t){const{backend:e,attrs:n}=t,{start:i,stop:s,dtype:r,step:o}=n,a=YK(i,s,o,r);return e.makeTensorInfo([a.length],r,a)}const bTe={kernelName:r3,backendName:"cpu",kernelFunc:yTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xTe=hi(Pb,t=>1/t),wTe={kernelName:Pb,backendName:"cpu",kernelFunc:xTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Te(t){const{inputs:e,backend:n,attrs:i}=t,{images:s}=e,{alignCorners:r,halfPixelCenters:o,size:a}=i;Dt(s,"resizeBilinear");const l=zt(s.shape),[c,u]=a,[h,d,p,m]=s.shape,g=n.data.get(s.dataId).values,y=new Float32Array(He([h,c,u,m])),v=[r&&c>1?d-1:d,r&&u>1?p-1:p],b=[r&&c>1?c-1:c,r&&u>1?u-1:u];let w=0;const S=v[0]/b[0],k=v[1]/b[1];for(let I=0;I<h;I++)for(let T=0;T<c;T++){let E;o?E=S*(T+.5)-.5:E=S*T;const O=Math.max(0,Math.floor(E)),F=E-O,R=Math.min(d-1,Math.ceil(E)),$=I*l[0]+O*l[1],U=I*l[0]+R*l[1];for(let W=0;W<u;W++){let te;o?te=k*(W+.5)-.5:te=k*W;const H=Math.max(0,Math.floor(te)),G=te-H,B=Math.min(p-1,Math.ceil(te)),Y=$+H*l[2],ne=U+H*l[2],le=$+B*l[2],M=U+B*l[2];for(let j=0;j<m;j++){const q=g[Y+j],X=g[ne+j],Z=g[le+j],ue=g[M+j],fe=q+(Z-q)*G,me=X+(ue-X)*G,Pe=fe+(me-fe)*F;y[w++]=Pe}}}return n.makeTensorInfo([h,c,u,m],"float32",y)}const STe={kernelName:ok,backendName:"cpu",kernelFunc:_Te};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CTe(t){const{inputs:e,backend:n,attrs:i}=t,{images:s,dy:r}=e,{alignCorners:o}=i;Dt([r,s],"resizeBilinearGrad");const a=zt(s.shape),[l,c,u,h]=s.shape,[,d,p]=r.shape,m=new Float32Array(l*c*u*h),g=[o&&d>1?c-1:c,o&&p>1?u-1:u],y=[o&&d>1?d-1:d,o&&p>1?p-1:p],v=g[0]/y[0],b=g[1]/y[1],w=n.data.get(r.dataId).values;let S=0;for(let k=0;k<l;k++){const I=k*a[0];for(let T=0;T<d;T++){const E=T*v,O=Math.floor(E),F=Math.min(Math.ceil(E),c-1),R=I+O*a[1],$=I+F*a[1],U=E-O,W=1-U;for(let te=0;te<p;te++){const H=te*b,G=Math.floor(H),B=Math.min(Math.ceil(H),u-1),Y=H-G,ne=1-Y,le=R+G*a[2],M=R+B*a[2],j=$+G*a[2],q=$+B*a[2],X=W*ne,Z=W*Y,ue=U*ne,fe=U*Y;for(let me=0;me<h;me++){const Pe=w[S++];m[le+me]+=Pe*X,m[M+me]+=Pe*Z,m[j+me]+=Pe*ue,m[q+me]+=Pe*fe}}}}return n.makeTensorInfo([l,u,c,h],"float32",m)}const kTe={kernelName:l3,backendName:"cpu",kernelFunc:CTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ITe(t){const{inputs:e,backend:n,attrs:i}=t,{images:s}=e,{alignCorners:r,halfPixelCenters:o,size:a}=i;Dt(s,"resizeNearestNeighbor");const l=zt(s.shape),[c,u]=a,[h,d,p,m]=s.shape,g=n.data.get(s.dataId).values,y=new Float32Array(h*c*u*m),v=[r&&c>1?d-1:d,r&&u>1?p-1:p],b=[r&&c>1?c-1:c,r&&u>1?u-1:u],w=v[0]/b[0],S=v[1]/b[1];let k=0;for(let I=0;I<h;I++){const T=I*l[0];for(let E=0;E<c;E++){const O=o?w*(E+.5):w*E;let F=Math.min(d-1,r?Math.round(O):Math.floor(O));o&&(F=Math.max(0,F));const R=T+F*l[1];for(let $=0;$<u;$++){const U=o?S*($+.5):S*$;let W=Math.min(p-1,r?Math.round(U):Math.floor(U));o&&(W=Math.max(0,W));const te=R+W*l[2];for(let H=0;H<m;H++){const G=g[te+H];y[k++]=G}}}}return n.makeTensorInfo([h,c,u,m],s.dtype,y)}const NTe={kernelName:rk,backendName:"cpu",kernelFunc:ITe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ETe(t){const{inputs:e,backend:n,attrs:i}=t,{images:s,dy:r}=e,{alignCorners:o}=i;Dt([r,s],"resizeNearestNeighborGrad");const a=zt(s.shape),l=zt(r.shape),[c,u,h,d]=s.shape,[,p,m]=r.shape,g=new Float32Array(c*u*h*d),y=n.data.get(r.dataId).values,v=[o&&p>1?u-1:u,o&&m>1?h-1:h],b=[o&&p>1?p-1:p,o&&m>1?m-1:m],w=v[0]/b[0],S=v[1]/b[1],k=1/w,I=1/S,T=Math.ceil(k)*2+2,E=Math.ceil(I)*2+2;for(let O=0;O<c;O++){const F=O*a[0];for(let R=0;R<u;R++){const $=F+R*a[1],U=Math.floor(R*k),W=Math.floor(U-T/2);for(let te=0;te<h;te++){const H=$+te*a[2],G=Math.floor(te*I),B=Math.floor(G-E/2);for(let Y=0;Y<d;Y++){let ne=0;for(let le=0;le<T;le++){const M=le+W;if(M<0||M>=p)continue;const j=F+M*l[1],q=M*w,X=Math.min(u-1,o?Math.round(q):Math.floor(q));if(R===X)for(let Z=0;Z<E;Z++){const ue=Z+B;if(ue<0||ue>=m)continue;const fe=j+ue*l[2],me=ue*S,Pe=Math.min(h-1,o?Math.round(me):Math.floor(me));te===Pe&&(ne+=y[fe+Y])}}g[H+Y]=ne}}}}return n.makeTensorInfo(s.shape,s.dtype,g)}const TTe={kernelName:a3,backendName:"cpu",kernelFunc:ETe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ATe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{dims:r}=i;Dt(s,"reverse");const o=s.shape.length,a=In(r,s.shape);if(o===0)return Eu({inputs:{x:s},backend:n});const l=new Ar(s.shape,s.dtype),c=n.bufferSync(s);for(let u=0;u<l.size;u++){const h=l.indexToLoc(u),d=h.slice();a.forEach(p=>d[p]=s.shape[p]-1-d[p]),l.set(c.get(...d),...h)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const RTe={kernelName:ak,backendName:"cpu",kernelFunc:ATe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LTe={kernelName:m3,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:i}=t,{radians:s,fillValue:r,center:o}=e,a=n,l=Gr(i.dtype,He(i.shape)),[c,u,h,d]=i.shape,[p,m]=uP(o,u,h),g=255,y=Math.sin(s),v=Math.cos(s),b=a.data.get(i.dataId).values;for(let S=0;S<c;S++){const k=S*h*u*d;for(let I=0;I<u;I++){const T=I*(h*d);for(let E=0;E<h;E++){const O=E*d;for(let F=0;F<d;F++){const R=[c,I,E,F],$=R[2],U=R[1];let W=($-p)*v-(U-m)*y,te=($-p)*y+(U-m)*v;W=Math.round(W+p),te=Math.round(te+m);let H=r;if(typeof r!="number"&&(F===3?H=g:H=r[F]),W>=0&&W<h&&te>=0&&te<u){const B=te*(h*d),Y=W*d,ne=k+B+Y+F;H=b[ne]}const G=k+T+O+F;l[G]=H}}}}return{dataId:a.write(l,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PTe=hi(Ob,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),DTe={kernelName:Ob,backendName:"cpu",kernelFunc:PTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Te(t){const{inputs:e,backend:n,attrs:i}=t,{indices:s,updates:r}=e,{shape:o}=i,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=Sm(r,s,o),d=!0,p=n.bufferSync(s),m=n.bufferSync(r),g=Np(p,m,o,h,c,l,a,u,0,d);return n.makeTensorInfo(o,g.dtype,g.values)}const OTe={kernelName:QU,backendName:"cpu",kernelFunc:$Te};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTe(t,e){let n=0,i=t.length,s=0;for(;n<i;)s=Math.floor((n+i)/2),t[s]<e?n=s+1:i=s;return i}function FTe(t,e){let n=0,i=t.length,s=0;for(;n<i;)s=Math.floor((n+i)/2),t[s]<=e?n=s+1:i=s;return i}function BTe(t,e,n,i,s,r){const o=_s("int32",n*s);for(let a=0;a<n;++a){const l=t.slice(a*i,(a+1)*i),c=a*s;for(let u=0;u<s;++u)o[c+u]=r==="left"?MTe(l,e[u+c]):FTe(l,e[u+c])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zTe(t){const{inputs:e,backend:n,attrs:i}=t,{sortedSequence:s,values:r}=e,{side:o}=i,a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,c=BTe(a,l,s.shape[0],s.shape[1],r.shape[1],o);return n.makeTensorInfo(r.shape,"int32",c)}const jTe={kernelName:eH,backendName:"cpu",kernelFunc:zTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VTe(t){const{inputs:e,backend:n}=t,{condition:i,t:s,e:r}=e;Dt([i,s,r],"select");const o=i.shape.length,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(r.dataId).values,u=Ea(s.dtype,r.dtype),h=qr(He(s.shape),u);let d=0;const p=o===0||o>1||s.shape.length===1?1:He(s.shape.slice(1));for(let m=0;m<a.length;m++)for(let g=0;g<p;g++)a[m]===1?h[d++]=l[m]:h[d++]=c[m];return n.makeTensorInfo(s.shape,u,h)}const WTe={kernelName:lk,backendName:"cpu",kernelFunc:VTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UTe=Ek,HTe=Tk,GTe=hi(Fb,t=>t>=0?HTe*t:UTe*(Math.exp(t)-1)),qTe={kernelName:Fb,backendName:"cpu",kernelFunc:GTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KTe=hi(jb,t=>t<0?-1:t>0?1:0),XTe={kernelName:jb,backendName:"cpu",kernelFunc:KTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YTe=hi(Bb,t=>Math.sin(t)),ZTe={kernelName:Bb,backendName:"cpu",kernelFunc:YTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QTe=hi(zb,t=>Math.sinh(t)),JTe={kernelName:zb,backendName:"cpu",kernelFunc:QTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eAe=11920928955078125e-23,I6=Math.log(eAe)+2,tAe=hi(Wb,t=>{const e=t>-I6,n=t<I6,i=Math.exp(t);let s;return n?s=i:e?s=t:s=Math.log(1+i),s}),nAe={kernelName:Wb,backendName:"cpu",kernelFunc:tAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iAe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{blockShape:r,paddings:o}=i;Dt([s],"spaceToBatchND");const a=He(r),l=[[0,0]];l.push(...o);for(let I=1+r.length;I<s.shape.length;++I)l.push([0,0]);const c=EX.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),u=nx(c.shape,r,a,!1),h=ix(u.length,r.length,!1),d=sx(c.shape,r,a,!1),g=$i({inputs:{x:c},backend:n,attrs:{shape:u}}),b=Qo({inputs:{x:g},backend:n,attrs:{perm:h}}),k=$i({inputs:{x:b},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),k}const sAe={kernelName:hk,backendName:"cpu",kernelFunc:iAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rAe(t){const{inputs:e,backend:n}=t,{indices:i,values:s,denseShape:r,defaultValue:o}=e;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${r.shape}`);if(i.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(r.dataId).values,u=n.data.get(o.dataId).values[0],[h,d,p,m,g]=eX(a,i.shape,i.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(d,i.dtype,h),n.makeTensorInfo([d[0]],s.dtype,p),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([g.length],i.dtype,new Int32Array(g))]}const oAe={kernelName:tH,backendName:"cpu",kernelFunc:rAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aAe(t){const{inputs:e,backend:n}=t,{inputIndices:i,inputShape:s,newShape:r}=e;if(i.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const o=Array.from(n.data.get(s.dataId).values),a=n.data.get(i.dataId).values,l=Array.from(n.data.get(r.dataId).values),[c,u,h]=tX(a,i.shape,i.dtype,o,l);return[n.makeTensorInfo(u,i.dtype,c),n.makeTensorInfo([h.length],r.dtype,new Int32Array(h))]}const lAe={kernelName:nH,backendName:"cpu",kernelFunc:aAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cAe(t){const{inputs:e,backend:n}=t,{data:i,indices:s,segmentIds:r}=e;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${r.shape}`);if(s.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(i.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,[c,u]=eD(o,i.shape,i.dtype,a,l,!0);return n.makeTensorInfo(u,i.dtype,c)}const uAe={kernelName:iH,backendName:"cpu",kernelFunc:cAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hAe(t){const{inputs:e,backend:n}=t,{data:i,indices:s,segmentIds:r}=e;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${r.shape}`);if(s.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(i.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,[c,u]=eD(o,i.shape,i.dtype,a,l);return n.makeTensorInfo(u,i.dtype,c)}const dAe={kernelName:sH,backendName:"cpu",kernelFunc:hAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fAe(t){const{inputs:e,backend:n,attrs:i}=t,{sparseIndices:s,sparseValues:r,defaultValue:o}=e,{outputShape:a}=i,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:d}=Sm(r,s,a),p=!1,m=n.bufferSync(s);let g;switch(r.dtype){case"bool":{const y=n.bufferSync(r),v=!!n.data.get(o.dataId).values[0];g=Np(m,y,a,d,u,c,l,h,v,p);break}case"float32":{const y=n.bufferSync(r),v=n.data.get(o.dataId).values[0];g=Np(m,y,a,d,u,c,l,h,v,p);break}case"int32":{const y=n.bufferSync(r),v=n.data.get(o.dataId).values[0];g=Np(m,y,a,d,u,c,l,h,v,p);break}case"string":{const y=n.bufferSync(r),v=rf(n.data.get(o.dataId).values[0]);g=Np(m,y,a,d,u,c,l,h,v,p);break}default:throw new Error(`Unsupported type ${r.dtype}`)}return n.makeTensorInfo(a,g.dtype,g.values)}const pAe={kernelName:rH,backendName:"cpu",kernelFunc:fAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mAe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{numOrSizeSplits:r,axis:o}=i,a=In(o,s.shape)[0],l=kP(s,r,a),c=new Array(s.shape.length).fill(0),u=s.shape.slice();return l.map(h=>{const d=[...u];d[a]=h;const p=hm({inputs:{x:s},backend:n,attrs:{begin:c,size:d}});return c[a]+=h,p})}const gAe={kernelName:dk,backendName:"cpu",kernelFunc:mAe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vAe={kernelName:c3,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,i=e;Dt(n,"square");const s=i.data.get(n.dataId).values,r=new Float32Array(s.length);for(let a=0;a<s.length;++a){const l=s[a];r[a]=l*l}return{dataId:i.write(r,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yAe=hi(Yb,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),bAe={kernelName:Yb,backendName:"cpu",kernelFunc:yAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xAe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{begin:r,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=i;Dt(s,"stridedSlice");const{finalShapeSparse:p,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:v,begin:b,end:w,strides:S}=aP(s.shape,r,o,a,l,c,u,h,d);let k;if(g)k=$i({inputs:{x:s},backend:n,attrs:{shape:m}});else if(y||v){ce(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const I=sP(b,w,S),T=hm({inputs:{x:s},backend:n,attrs:{begin:b,size:I}});k=$i({inputs:{x:T},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(T)}else{const I=n.bufferSync(s),T=sX(p,I,S,b);k=n.makeTensorInfo(m,T.dtype,T.values)}return k}const wAe={kernelName:h3,backendName:"cpu",kernelFunc:xAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ae(t){const{inputs:e,backend:n,attrs:i}=t,{separator:s,nGramWidths:r,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=i,{data:u,dataSplits:h}=e,d=n.data.get(u.dataId).values,p=n.data.get(h.dataId).values,[m,g]=rX(d,p,s,r,o,a,l,c);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(h.shape,"int32",g)]}const SAe={kernelName:oH,backendName:"cpu",kernelFunc:_Ae};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CAe(t){const{inputs:e,backend:n,attrs:i}=t,{skipEmpty:s}=i,{input:r,delimiter:o}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values[0],[c,u,h]=oX(a,l,s),d=u.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const kAe={kernelName:aH,backendName:"cpu",kernelFunc:CAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IAe(t){const{inputs:e,backend:n,attrs:i}=t,{numBuckets:s}=i,{input:r}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(r.dataId).values,a=aX(o,s);return n.makeTensorInfo(r.shape,"int32",a)}const NAe={kernelName:lH,backendName:"cpu",kernelFunc:IAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EAe=hi(qb,t=>Math.tan(t)),TAe={kernelName:qb,backendName:"cpu",kernelFunc:EAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AAe=hi(Kb,t=>Math.tanh(t)),RAe={kernelName:Kb,backendName:"cpu",kernelFunc:AAe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LAe(t){const{inputs:e,backend:n}=t,{tensor:i,indices:s,updates:r}=e,{sliceRank:o,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=Sm(r,s,i.shape),h=!1,d=n.bufferSync(s),p=n.bufferSync(r),m=n.bufferSync(i),g=Np(d,p,i.shape,u,l,a,o,c,m,h);return n.makeTensorInfo(i.shape,g.dtype,g.values)}const PAe={kernelName:JU,backendName:"cpu",kernelFunc:LAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DAe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{reps:r}=i;Dt(s,"tile");const o=cX(n.bufferSync(s),r);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const $Ae={kernelName:Xb,backendName:"cpu",kernelFunc:DAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OAe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{k:r,sorted:o}=i;Dt(s,"topk");const a=n.data.get(s.dataId).values,[l,c]=hX(a,s.shape,s.dtype,r,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const MAe={kernelName:d3,backendName:"cpu",kernelFunc:OAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FAe(t){const{inputs:e,attrs:n,backend:i}=t,{image:s,transforms:r}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=n,[u,h,d,p]=s.shape,[m,g]=c??[h,d],y=[u,m,g,p],v=zt(s.shape),b=v[0],w=v[1],S=v[2],k=zt(y),I=k[0],T=k[1],E=k[2],O=Gr(s.dtype,He(y));O.fill(l);const F=i.data.get(s.dataId).values,R=i.data.get(r.dataId).values;for(let U=0;U<u;++U){const W=r.shape[0]===1?R:R.subarray(U*8,U*8+8);for(let te=0;te<m;++te)for(let H=0;H<g;++H)for(let G=0;G<p;++G){let B;const Y=W[6]*H+W[7]*te+1;if(Y===0)continue;const ne=(W[0]*H+W[1]*te+W[2])/Y,le=(W[3]*H+W[4]*te+W[5])/Y,M=N6(ne,d,a),j=N6(le,h,a);switch(o){case"nearest":B=UAe(F,h,d,b,w,S,U,j,M,G,l);break;case"bilinear":B=HAe(F,h,d,b,w,S,U,j,M,G,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const q=U*I+te*T+H*E+G;O[q]=B}return i.makeTensorInfo(y,s.dtype,O)}return{dataId:i.write(O,y,s.dtype),shape:s.shape,dtype:s.dtype}}const BAe={kernelName:f3,backendName:"cpu",kernelFunc:FAe};function N6(t,e,n){switch(n){case"reflect":return zAe(t,e);case"wrap":return jAe(t,e);case"nearest":return WAe(t,e);case"constant":default:return VAe(t)}}function zAe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const i=2*e;n<i&&(n=i*Math.trunc(-n/i)+n),n=n<-e?n+i:-n-1}else if(n>e-1)if(e<=1)n=0;else{const i=2*e;n-=i*Math.trunc(n/i),n>=e&&(n=i-n-1)}return Jp(0,n,e-1)}function jAe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const i=e-1;n+=e*(Math.trunc(-n/i)+1)}else if(n>e-1)if(e<=1)n=0;else{const i=e-1;n-=e*Math.trunc(n/i)}return Jp(0,n,e-1)}function VAe(t,e){return t}function WAe(t,e){return Jp(0,t,e-1)}function Jv(t,e,n,i,s,r,o,a,l,c,u){const h=o*i+a*s+l*r+c;return 0<=a&&a<e&&0<=l&&l<n?t[h]:u}function UAe(t,e,n,i,s,r,o,a,l,c,u){const h=Math.round(a),d=Math.round(l);return Jv(t,e,n,i,s,r,o,h,d,c,u)}function HAe(t,e,n,i,s,r,o,a,l,c,u){const h=Math.floor(a),d=Math.floor(l),p=h+1,m=d+1,g=(m-l)*Jv(t,e,n,i,s,r,o,h,d,c,u)+(l-d)*Jv(t,e,n,i,s,r,o,h,m,c,u),y=(m-l)*Jv(t,e,n,i,s,r,o,p,d,c,u)+(l-d)*Jv(t,e,n,i,s,r,o,p,m,c,u);return(p-a)*g+(a-h)*y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GAe(t){const{inputs:e,attrs:n,backend:i}=t,{axis:s}=n,{x:r}=e;Dt(r,"unique");const o=i.data.get(r.dataId).values,{outputValues:a,outputShape:l,indices:c}=dX(o,s,r.shape,r.dtype);return[i.makeTensorInfo(l,r.dtype,a),i.makeTensorInfo([c.length],"int32",c)]}const qAe={kernelName:p3,backendName:"cpu",kernelFunc:GAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KAe(t){const{inputs:e,backend:n,attrs:i}=t,{value:s}=e;let{axis:r}=i;r<0&&(r+=s.shape.length);const o=s.shape.length,a=s.shape[r],l=new Array(o-1);let c=0;for(let p=0;p<o;p++)p!==r&&(l[c++]=s.shape[p]);const u=new Array(o).fill(0),h=s.shape.slice();h[r]=1;const d=new Array(a);for(let p=0;p<d.length;p++){u[r]=p;const m=hm({inputs:{x:s},backend:n,attrs:{begin:u,size:h}});d[p]=$i({inputs:{x:m},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(m)}return d}const XAe={kernelName:pk,backendName:"cpu",kernelFunc:KAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YAe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,segmentIds:r}=e,{numSegments:o}=i;Dt(s,"unsortedSegmentSum");const a=s.shape.length,l=r.shape.length,c=[],u=[],h=a-l;let d=r;for(let m=0;m<h;++m){const g=iS({inputs:{input:d},backend:n,attrs:{dim:m+1}});d=g,u.push(g)}for(let m=0;m<o;++m){const g=_f(m,"int32"),y=n.makeTensorInfo([],"int32",g),v=NK({inputs:{a:y,b:d},backend:n}),b=uf({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),w=jk({inputs:{a:b,b:s},backend:n}),S=fx({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});c.push(S),u.push(y),u.push(v),u.push(b),u.push(w),u.push(S)}const p=NX({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const ZAe={kernelName:mk,backendName:"cpu",kernelFunc:YAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QAe=[GIe,Ike,KIe,YIe,Lke,QIe,eNe,nNe,sNe,oNe,lNe,uNe,dNe,mNe,vNe,xNe,_Ne,CNe,INe,UIe,ENe,ANe,LNe,Dke,DNe,Ake,Oke,ONe,Nke,FNe,zNe,jNe,WNe,HNe,qNe,XNe,ZNe,JNe,t5e,i5e,r5e,a5e,c5e,h5e,d5e,p5e,g5e,y5e,b5e,x5e,w5e,S5e,I5e,MIe,E5e,Mke,O5e,Fke,M5e,zke,W5e,U5e,G5e,Vke,Uke,K5e,Y5e,Q5e,eEe,Gke,Kke,Eke,nEe,BNe,sEe,oEe,lEe,FIe,Yke,Qke,uEe,eIe,dEe,mEe,vEe,xEe,_Ee,CEe,kEe,nIe,NEe,TEe,REe,PEe,$Ee,MEe,BEe,sIe,jEe,UEe,qEe,oIe,lIe,YEe,JEe,nTe,uIe,sTe,oTe,aTe,EX,hTe,zIe,fIe,fTe,mTe,vTe,bTe,Tke,wT,wTe,jIe,VIe,WIe,STe,kTe,NTe,TTe,RTe,LTe,DTe,wIe,OTe,jTe,WTe,qTe,SIe,XTe,ZTe,JTe,CIe,HEe,nAe,sAe,oAe,lAe,uAe,dAe,pAe,gAe,NIe,vAe,TIe,RIe,bAe,wAe,SAe,kAe,NAe,$Ie,C5e,TAe,RAe,PAe,$Ae,MAe,BAe,hIe,qAe,XAe,ZAe,rTe];for(const t of QAe)uH(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vp={},T2={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function JAe(t,e){vp[t]=e}function Tc(t,e){if(!(t in vp)||e!=null){const i=tRe(t,e);if(i!==null)vp[t]=i;else return console.log("Could not get context for WebGL version",t),null}const n=vp[t];return n==null||n.isContextLost()?(delete vp[t],Tc(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),vp[t])}function eRe(t){if(!ze().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function tRe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??eRe(t);return n.addEventListener("webglcontextlost",i=>{i.preventDefault(),delete vp[t]},!1),ze().getBool("SOFTWARE_WEBGL_ENABLED")&&(T2.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",T2)||n.getContext("experimental-webgl",T2):n.getContext("webgl2",T2)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ny;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Ny||(Ny={}));var qa;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(qa||(qa={}));var Nr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Nr||(Nr={}));function px(t,e){return[e,t]}function nRe(t,e){return t*e}function A2(t){const e=He(t),n=Math.ceil(e/4);return WE(n)}function W0(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function iRe(t,e){const[n,i]=W0(t,e);return n*i*4}function rD(t,e){const n=t;let i,s,r,o,a,l,c,u,h,d;return ze().getNumber("WEBGL_VERSION")===2?(i=n.R32F,s=n.R16F,r=n.RGBA16F,o=n.RGBA32F,a=n.RED,c=4,u=1,h=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(i=t.RGBA,s=t.RGBA,r=t.RGBA,o=n.RGBA,a=t.RGBA,c=4,u=4,h=e!=null?e.HALF_FLOAT_OES:null,d=t.FLOAT,l=t.RGBA),{internalFormatFloat:i,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:r,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:h,textureTypeFloat:d}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kt(t,e){const n=e();return ze().getBool("DEBUG")&&sRe(t),n}function sRe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+lRe(t,e))}const rRe=596e-10,oRe=65504;function aRe(t){return!!(ze().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||rRe<Math.abs(t)&&Math.abs(t)<oRe)}function lRe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function R2(t,e){return Mh(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function cRe(t,e){const n=Mh(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(kt(t,()=>t.shaderSource(n,e)),kt(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function uRe(t,e){const n=Mh(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(kt(t,()=>t.shaderSource(n,e)),kt(t,()=>t.compileShader(n)),ze().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw TX(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const hRe=/ERROR: [0-9]+:([0-9]+):/g;function TX(t,e){const n=hRe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const i=+n[1],s=t.split(`
`),r=s.length.toString().length+2,o=s.map((h,d)=>Fg((d+1).toString(),r)+h);let a=0;for(let h=0;h<o.length;h++)a=Math.max(o[h].length,a);const l=o.slice(0,i-1),c=o.slice(i-1,i),u=o.slice(i);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Fg(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function dRe(t){return Mh(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function fRe(t,e){if(kt(t,()=>t.linkProgram(e)),!ze().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function PN(t,e){if(kt(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function pRe(t,e){const n=Mh(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return kt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),kt(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function mRe(t,e){const n=Mh(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return kt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),kt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function gRe(t){return Mh(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function vRe(t,e){const n=ze().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const i=`[${t}x${e}]`;throw new Error("Requested texture size "+i+" is invalid.")}if(t>n||e>n){const i=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+i+" greater than WebGL maximum on this browser / GPU "+s+".")}}function yRe(t){return Mh(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function E6(t,e,n,i,s,r,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(kt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,i)),kt(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,r,o)),kt(t,()=>t.enableVertexAttribArray(a)),!0)}function bRe(t,e,n){CRe(t,n),kt(t,()=>t.activeTexture(t.TEXTURE0+n)),kt(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function xRe(t,e,n){return Mh(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function wRe(t,e,n){return t.getUniformLocation(e,n)}function _Re(t,e,n,i){kt(t,()=>bRe(t,e,i)),kt(t,()=>t.uniform1i(n,i))}function DN(t,e,n){kt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),kt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function T6(t,e){kt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),kt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function L2(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+SRe(t,e))}function SRe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Mh(t,e,n){const i=kt(t,()=>e());if(i==null)throw new Error(n);return i}function CRe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,i=e+t.TEXTURE0;if(i<t.TEXTURE0||i>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function y0(t,e=2){return He(t.slice(0,t.length-e))}function b0(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function P2(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[y0(t),...b0(t)]),e}function kRe(t,e=!1){let n=ze().getNumber("WEBGL_MAX_TEXTURE_SIZE"),i=ze().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");i===1/0&&ze().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(i=n/2),e&&(n=n*2,i=i*2,t=t.map((a,l)=>l>=t.length-2?CL(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=wf(t).newShape);let s=He(t),r=null;t.length<=1&&s<=n?r=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?r=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?r=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?r=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?r=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(r=[t[0],t[1]*t[2]*t[3]]);const o=r!=null&&Math.max(...r)>i&&Math.min(...r)<=(e?2:1)&&Math.min(...r)>0;if(r==null||o)if(e){const a=y0(t);let l=2,c=2;t.length&&([l,c]=b0(t)),s=a*(l/2)*(c/2),r=WE(s).map(u=>u*2)}else r=WE(s);return r}function D2(t){return t%2===0}function rS(t,e){if(t=t.slice(-2),e=e.slice(-2),ri(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],i=e[e.length-1];if(n===i||D2(n)&&D2(i)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&D2(t[0])&&D2(e[0])}let $N,ON;function IRe(t){if($N==null){const e=Tc(t);$N=e.getParameter(e.MAX_TEXTURE_SIZE)}return $N}function NRe(t){if(ON==null){const e=Tc(t);ON=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ON)}function ERe(t){if(t===0)return 0;let e;const n=Tc(t);return Tl(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Tl(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Tl(t,e){return t.getExtension(e)!=null}function A6(t){try{if(Tc(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function TRe(t){if(t===0)return!1;const e=Tc(t);if(t===1){if(!Tl(e,"OES_texture_float"))return!1}else if(!Tl(e,"EXT_color_buffer_float"))return!1;return ST(e)}function ARe(t){if(t===0)return!1;const e=Tc(t);if(t===1){if(!Tl(e,"OES_texture_float")||!Tl(e,"WEBGL_color_buffer_float"))return!1}else{if(Tl(e,"EXT_color_buffer_float"))return ST(e);const i="EXT_color_buffer_half_float";if(Tl(e,i)){const s=e.getExtension(i);return RRe(e,s)}return!1}return ST(e)}function ST(t){const e=rD(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),o}function RRe(t,e){const n=rD(t,e),i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(i),t.deleteFramebuffer(o),a}function LRe(t){return t!==2?!1:Tc(t).fenceSync!=null}function mx(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&ce(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $t=ze();$t.registerFlag("HAS_WEBGL",()=>$t.getNumber("WEBGL_VERSION")>0);$t.registerFlag("WEBGL_VERSION",()=>A6(2)?2:A6(1)?1:0);$t.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);$t.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>$t.get("WEBGL_VERSION")===2);$t.registerFlag("WEBGL_CPU_FORWARD",()=>!0);$t.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);$t.registerFlag("WEBGL_PACK",()=>$t.getBool("HAS_WEBGL"));$t.registerFlag("WEBGL_PACK_NORMALIZATION",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_CLIP",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_REDUCE",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_LAZILY_UNPACK",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_CONV_IM2COL",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>IRe($t.getNumber("WEBGL_VERSION")));$t.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>NRe($t.getNumber("WEBGL_VERSION")));$t.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=$t.getNumber("WEBGL_VERSION");return t===0?0:ERe(t)});$t.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>$t.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!NH());$t.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>TRe($t.getNumber("WEBGL_VERSION")));$t.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>$t.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:$t.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));$t.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>ARe($t.getNumber("WEBGL_VERSION")));$t.registerFlag("WEBGL_FENCE_API_ENABLED",()=>LRe($t.getNumber("WEBGL_VERSION")));$t.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>$t.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);$t.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});$t.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>NH()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});$t.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);$t.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);$t.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);$t.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);$t.registerFlag("WEBGL_EXP_CONV",()=>!1);$t.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>$t.getBool("IS_TEST"));$t.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);$t.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);$t.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);$t.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ko(){let t,e,n,i,s,r,o,a,l,c;return ze().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",i="in",s="texture",r="outputColor",o="out vec4 outputColor;",a=ze().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",i="varying",s="texture2D",r="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:i,texture2D:s,output:r,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Im(t,e,n="index"){const i=zt(e);return i.map((s,r)=>{const o=`int ${t[r]} = ${n} / ${s}`,a=r===i.length-1?`int ${t[r+1]} = ${n} - ${t[r]} * ${s}`:`index -= ${t[r]} * ${s}`;return`${o}; ${a};`}).join("")}function Vk(t,e,n="index"){const i=zt(e);return i.map((s,r)=>{const o=`int ${t[r]} = ${n} / outShapeStrides[${r}]`,a=r===i.length-1?`int ${t[r+1]} = ${n} - ${t[r]} * outShapeStrides[${r}]`:`index -= ${t[r]} * outShapeStrides[${r}]`;return`${o}; ${a};`}).join("")}function PRe(t,e){const n=t.length,i=t.map(r=>`${e}[${r}]`),s=new Array(n-1);s[n-2]=i[n-1];for(let r=n-3;r>=0;--r)s[r]=`(${s[r+1]} * ${i[r+1]})`;return s}function DRe(t,e,n="index"){const i=t.map((r,o)=>o),s=PRe(i,e);return s.map((r,o)=>{const a=`int ${t[o]} = ${n} / ${s[o]}`,l=o===s.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${s[o]}`:`index -= ${t[o]} * ${s[o]}`;return`${a}; ${l};`}).join("")}function oD(t){const e=zt(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function aD(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const AX=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:RX}=Cwe;function $Re(t,e,n){const i=[];if(t.forEach(p=>{const m=He(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?i.push(`uniform float ${p.name}${m>1?`[${m}]`:""};`):(i.push(`uniform sampler2D ${p.name};`),i.push(`uniform int offset${p.name};`)),n.enableShapeUniforms){const{uniformShape:g}=lD(n.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(g.length){case 1:i.push(`uniform int ${p.name}Shape;`);break;case 2:i.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:i.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:i.push(`uniform ivec4 ${p.name}Shape;`);break}i.push(`uniform ivec2 ${p.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:i.push("uniform int outShape;");break;case 2:i.push("uniform ivec2 outShape;"),i.push("uniform int outShapeStrides;");break;case 3:i.push("uniform ivec3 outShape;"),i.push("uniform ivec2 outShapeStrides;");break;case 4:i.push("uniform ivec4 outShape;"),i.push("uniform ivec3 outShapeStrides;");break}i.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(p=>{i.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});const s=i.join(`
`),r=t.map(p=>ORe(p,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=ko(),l=BRe(a);let c,u,h=VRe(a);return e.isPacked?(c=MRe(e.logicalShape,o,n.enableShapeUniforms),u=jRe(a)):(c=FRe(e.logicalShape,o,n.enableShapeUniforms),u=zRe(a)),n.packedInputs&&(h+=GRe),[h,l,u,s,c,r,n.userCode].join(`
`)}function U0(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return sLe(t,e);case 1:return oLe(t,e);case 2:return lLe(t,e);case 3:return uLe(t,e);case 4:return dLe(t,e);case 5:return fLe(t);case 6:return pLe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function LX(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return iLe(t);case 1:return rLe(t,e);case 2:return aLe(t,e);case 3:return cLe(t,e);default:return hLe(t,e)}}function ORe(t,e,n=!1,i){let s="";n?s+=LX(t,i):s+=U0(t,i);const r=t.shapeInfo.logicalShape,o=e.logicalShape;return r.length<=o.length&&(n?s+=mLe(t,e):s+=gLe(t,e)),s}function MRe(t,e,n){switch(t.length){case 0:return PX();case 1:return qRe(t,e,n);case 2:return tLe(t,e,n);case 3:return XRe(t,e,n);default:return ZRe(t,e,n)}}function FRe(t,e,n){switch(t.length){case 0:return PX();case 1:return KRe(t,e,n);case 2:return nLe(t,e,n);case 3:return YRe(t,e,n);case 4:return QRe(t,e,n);case 5:return JRe(t,e);case 6:return eLe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function BRe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function zRe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function jRe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function VRe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${WRe}
    ${URe}
    ${HRe}
  `}const WRe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,URe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,HRe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,GRe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function PX(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function qRe(t,e,n){const i=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return i[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${i[1]}.0);
      }
    `:i[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${i[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      return 2 * (resTexRC.x * ${i[1]} + resTexRC.y);
    }
  `}function KRe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function XRe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const i=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),r=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      int index = resTexRC.x * ${i[1]} + resTexRC.y;

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function YRe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Vk(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const i=Im(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${i}
      return ivec3(r, c, d);
    }
  `}function ZRe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const i=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),r=s*Math.ceil(t[t.length-2]/2);let o=r,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],a=`
      int b${c} = index / ${o};
      index -= b${c} * ${o};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      int index = resTexRC.x * ${i[1]} + resTexRC.y;

      ${a}

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function QRe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Vk(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const i=Im(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${i}
      return ivec4(r, c, d, d2);
    }
  `}function JRe(t,e){const n=Im(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function eLe(t,e){const n=Im(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function tLe(t,e,n){const i=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(ri(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${i[0]}, ${i[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));

      int index = resTexRC.x * ${i[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function nLe(t,e,n){return ri(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Nm(t){return`offset${t}`}function iLe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),i=ko();return`
    vec4 ${n}() {
      return ${i.texture2D}(${e}, halfCR);
    }
  `}function sLe(t,e){const n=t.name,i="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${i}() {return ${n};}`;const[s,r]=t.shapeInfo.texShape;if(s===1&&r===1)return`
      float ${i}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Nm(n);if(e)return`
    float ${i}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${i}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function rLe(t,e){const n=t.name,i="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,r=ko();if(e)return`
    vec4 ${i}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${r.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${i}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${r.texture2D}(${n}, uv);
    }
  `}function oLe(t,e){const n=t.name,i="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${i}(int index) {
        ${H0(t)}
      }
    `;const s=t.shapeInfo.texShape,r=s[0],o=s[1];if(o===1&&r===1)return`
      float ${i}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Nm(n);return o===1?e?`
      float ${i}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${i}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${r}.0);
        return sampleTexture(${n}, uv);
      }
    `:r===1?e?`
      float ${i}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${i}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${i}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${i}(int index) {
      vec2 uv = uvFromFlat(${r}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function aLe(t,e){const n=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=t.shapeInfo.texShape,o=r[0],a=r[1],l=ko();if(r!=null&&ri(n,r))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);

        return ${l.texture2D}(${i}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${i}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${i}TexShape[0]) / 2.0), ceil(float(${i}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${i}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${i}, uv);
    }
  `;const c=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${i}, uv);
    }
  `}function lLe(t,e){const n=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=t.shapeInfo.texShape;if(r!=null&&ri(n,r)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `;const d=r[0],p=r[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${i}, uv);
    }
  `}const{newShape:o,keptDims:a}=wf(n),l=o;if(l.length<n.length){const d=G0(t,l),p=["row","col"];return`
      ${U0(d,e)}
      float ${s}(int row, int col) {
        return ${s}(${q0(p,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${H0(t)}
      }
    `;const c=r[0],u=r[1],h=Nm(i);return u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${i}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${i}TexShape[0]));
        return sampleTexture(${i}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${i}, uv);
    }
  `:c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${i}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${i}TexShape[1]), 0.5);
        return sampleTexture(${i}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${i}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i}Shape[1] + col + ${h};
        vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index);
        return sampleTexture(${i}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${h};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${i}, uv);
  }
`}function cLe(t,e){const n=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=t.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(n[0]===1){const d=n.slice(1),p=[1,2],m=G0(t,d),g=["b","row","col"];return`
        ${LX(m,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${q0(g,p)});
        }
      `}const a=ko();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${i}TexShape[0]) / 2.0), ceil(float(${i}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${i}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${i}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${i}, uv);
    }
  `;const l=o[0],c=o[1],u=Math.ceil(n[2]/2),h=u*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${h}, ${u}, b, row, col);
      return ${a.texture2D}(${i}, uv);
    }
  `}function uLe(t,e){const n=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=wf(n),c=a;if(c.length<n.length){const g=G0(t,c),y=["row","col","depth"];return`
        ${U0(g,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${q0(y,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${r}, ${o}, 1)));
        ${H0(t)}
      }
    `;const u=t.shapeInfo.texShape,h=u[0],d=u[1],p=t.shapeInfo.flatOffset;if(d===r&&p==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${i}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${d}.0, ${h}.0);
          return sampleTexture(${i}, uv);
        }
      `;if(d===o&&p==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${i}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${h}.0);
      return sampleTexture(${i}, uv);
    }
  `;const m=Nm(i);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${i}Shape[1] * ${i}Shape[2];
      int stride1 = ${i}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index);
      return sampleTexture(${i}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r} + col * ${o} + depth + ${m};
        vec2 uv = uvFromFlat(${h}, ${d}, index);
        return sampleTexture(${i}, uv);
      }
  `}function hLe(t,e){const n=t.name,i="get"+n.charAt(0).toUpperCase()+n.slice(1),s=ko();if(e)return`
    vec4 ${i}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const r=t.shapeInfo.logicalShape,o=r.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],h=Math.ceil(r[o-1]/2);let d=h*Math.ceil(r[o-2]/2),p="int b, int row, int col",m=`b * ${d} + (row / 2) * ${h} + (col / 2)`;for(let g=2;g<o-1;g++)p=`int b${g}, `+p,d*=r[o-g-1],m=`b${g} * ${d} + `+m;return`
    vec4 ${i}(${p}) {
      int index = ${m};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${s.texture2D}(${n}, uv);
    }
  `}function dLe(t,e){const n=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=n[3],o=n[2]*r,a=n[1]*o,{newShape:l,keptDims:c}=wf(n);if(l.length<n.length){const b=G0(t,l),w=["row","col","depth","depth2"];return`
      ${U0(b,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${q0(w,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${r}, 1)));
        ${H0(t)}
      }
    `;const u=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,d=h[0],p=h[1],m=`int stride2 = ${i}Shape[3];`,g=`int stride1 = ${i}Shape[2] * stride2;`,y=`int stride0 = ${i}Shape[1] * stride1;`;if(p===a&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${m}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${r}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${d}.0);
        return sampleTexture(${i}, uv);
      }
    `;if(p===r&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${i}Shape[1] * ${i}Shape[2], ${i}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${d}.0);
        return sampleTexture(${i}, uv);
      }
    `;const v=Nm(i);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${g}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index + ${v});
      return sampleTexture(${i}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${r} + depth2;
      vec2 uv = uvFromFlat(${d}, ${p}, index + ${v});
      return sampleTexture(${i}, uv);
    }
  `}function fLe(t){const e=t.shapeInfo.logicalShape,n=t.name,i="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],r=e[3]*s,o=e[2]*r,a=e[1]*o,{newShape:l,keptDims:c}=wf(e);if(l.length<e.length){const g=G0(t,l),y=["row","col","depth","depth2","depth3"];return`
      ${U0(g)}
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        return ${i}(${q0(y,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${r}, ${s})) +
          depth3;
        ${H0(t)}
      }
    `;const u=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,d=h[0],p=h[1];if(p===a&&u==null)return`
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${r}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===s&&u==null)return`
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=Nm(n);return`
    float ${i}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${r} +
          depth2 * ${s} + depth3 + ${m};
      vec2 uv = uvFromFlat(${d}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function pLe(t){const e=t.shapeInfo.logicalShape,n=t.name,i="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:r}=wf(e);if(s.length<e.length){const y=G0(t,s),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${U0(y)}
      float ${i}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${i}(${q0(v,r)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${H0(t)}
      }
    `;const h=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],m=d[1];if(m===u&&h==null)return`
      float ${i}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===o&&h==null)return`
      float ${i}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=Nm(n);return`
    float ${i}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${g};
      vec2 uv = uvFromFlat(${p}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function H0(t){const e=t.name,n=He(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function mLe(t,e){const n=t.name,i=n.charAt(0).toUpperCase()+n.slice(1),s="get"+i+"AtOutCoords",r=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=RX(t.shapeInfo.logicalShape,e.logicalShape),l=Si(o),c=o-r;let u;const h=["x","y","z","w","u","v"];r===0?u="":o<2&&a.length>=1?u="coords = 0;":u=a.map(b=>`coords.${h[b+c]} = 0;`).join(`
`);let d="";o<2&&r>0?d="coords":d=t.shapeInfo.logicalShape.map((b,w)=>`coords.${h[w+c]}`).join(", ");let p="return outputValue;";const g=He(t.shapeInfo.logicalShape)===1,v=He(e.logicalShape)===1;if(r===1&&!g&&!v)p=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!v)o===1?p=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:p=`
        return vec4(outputValue.x);
      `;else if(a.length){const b=r-2,w=r-1;a.indexOf(b)>-1&&a.indexOf(w)>-1?p="return vec4(outputValue.x);":a.indexOf(b)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(w)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${i}(${d});
      ${p}
    }
  `}function gLe(t,e){const n=t.name,i=n.charAt(0).toUpperCase()+n.slice(1),s="get"+i+"AtOutCoords",r=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&ri(o,r))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=Si(l),u=RX(t.shapeInfo.logicalShape,e.logicalShape),h=l-a;let d;const p=["x","y","z","w","u","v"];a===0?d="":l<2&&u.length>=1?d="coords = 0;":d=u.map(g=>`coords.${p[g+h]} = 0;`).join(`
`);let m="";return l<2&&a>0?m="coords":m=t.shapeInfo.logicalShape.map((g,y)=>`coords.${p[y+h]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${d}
      return get${i}(${m});
    }
  `}function Si(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function lD(t,e,n){const{newShape:i,keptDims:s}=wf(e),r=e.length,o=t&&r===3&&e[0]===1,a=o?e.slice(1):i,l=!t&&r>1&&!ri(e,n)&&i.length<r||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:s}}function G0(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function q0(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vLe(t,e,n,i){const s=n.map((u,h)=>{const d={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(d.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[h],shapeInfo:d}}),r=s.map(u=>u.shapeInfo),o={logicalShape:i.shape,texShape:i.texData.texShape,isUniform:!1,isPacked:i.texData.isPacked,flatOffset:null},a=$Re(s,o,e),l=uRe(t.gl,a),c=t.createProgram(l);return ze().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:r,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:r,outShapeInfo:o},DX(t,e,c)))}function DX(t,e,n){const i=[],s=[];let r,o,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),ze().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const h of e.variableNames){const d={name:h,uniform:t.getUniformLocation(n,h,u),offset:t.getUniformLocation(n,`offset${h}`,u)};e.enableShapeUniforms&&(d.shape=t.getUniformLocation(n,`${h}Shape`,u),d.texShape=t.getUniformLocation(n,`${h}TexShape`,u)),i.push(d)}if(e.enableShapeUniforms&&(r=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),o=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const h of e.customUniforms)s.push(t.getUniformLocation(n,h.name,u));return{variablesLocations:i,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:r,outShapeStridesLocation:a,outTexShapeLocation:o}}function R6(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,i)=>{const s=n.logicalShape,r=e[i],o=r.shape;if(!ri(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(n.isUniform&&r.isUniform)return;const a=n.texShape,l=r.isUniform?null:r.texData.texShape;if(!ri(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function yLe(t,e,n,i,s){e.program.enableShapeUniforms||(R6(e.inShapeInfos,n),R6([e.outShapeInfo],[i]));const r=i.texData.texture,o=i.texData.texShape;i.texData.isPacked?t.setOutputPackedMatrixTexture(r.texture,o[0],o[1]):t.setOutputMatrixTexture(r.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),ze().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:h,shape:d,texShape:p}=e.variablesLocations[l];if(d){const{uniformShape:m}=lD(e.program.packedInputs,c.shape,c.texData.texShape);switch(m.length){case 1:t.gl.uniform1iv(d,new Int32Array(m));break;case 2:t.gl.uniform2iv(d,new Int32Array(m));break;case 3:t.gl.uniform3iv(d,new Int32Array(m));break;case 4:t.gl.uniform4iv(d,new Int32Array(m));break}}if(p&&t.gl.uniform2i(p,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(He(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let m=c.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),t.gl.uniform1fv(u,m)}continue}c.texData.slice!=null&&h!=null&&t.gl.uniform1i(h,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(i.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(i.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(i.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(i.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(i.shape));break}if(e.outShapeStridesLocation){const l=zt(i.shape);switch(i.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,i.texData.texShape[0],i.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],h=s[l];if(c.type==="float")t.gl.uniform1fv(u,h);else if(c.type==="vec2")t.gl.uniform2fv(u,h);else if(c.type==="vec3")t.gl.uniform3fv(u,h);else if(c.type==="vec4")t.gl.uniform4fv(u,h);else if(c.type==="int")t.gl.uniform1iv(u,h);else if(c.type==="ivec2")t.gl.uniform2iv(u,h);else if(c.type==="ivec3")t.gl.uniform3iv(u,h);else if(c.type==="ivec4")t.gl.uniform4iv(u,h);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function bLe(t,e,n){let i="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:h}=lD(t.packedInputs,o.shape,l);let d="",p="",m="";if(u.length===1&&t.packedInputs){const k=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];d=`${k[0]>1}_${k[1]>1}`}else if(u.length===2&&!t.packedInputs)p=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const k=zt(u);m=`${k[0]===l[1]}_${k[k.length-1]===l[1]}`}const g=o.shape.length,y=u.length===2&&ri(o.shape,l),v=He(o.shape)===1,b=h0(o.shape,n.shape),w=!t.packedInputs&&g===n.shape.length&&ri(l,n.texData.texShape),S=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;i+=`${g}_${w}_${c?h:""}_${u.length}_${v}_${b}_${y}_${d}_${p}_${m}_${S}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;i+=`${o.shape}_${l}_${a}`}});const s=t.userCode;let r=t.constructor.name;return r+="_"+i+"_"+s+`${ze().getNumber("WEBGL_VERSION")}`,r}function Zr(t){return ze().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xLe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Ny.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=ko();this.outputShape=e,this.enableShapeUniforms=Zr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Vk(["r","c","d"],e):Im(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wLe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Ny.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=ko();this.outputShape=e,this.enableShapeUniforms=Zr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Vk(["r","c","d"],e):Im(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Le{constructor(e){this.variableNames=["A"],this.outTexUsage=qa.DOWNLOAD;const n=ko();this.outputShape=e,this.userCode=`
      ${AX}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SLe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=qa.DOWNLOAD;const n=ko();this.outputShape=e,this.userCode=`
      ${AX}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CLe={R:0,G:1,B:2,A:3};class L6{constructor(e,n=!1,i="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=ko();this.outputShape=e,this.enableShapeUniforms=Zr(this.outputShape.length);let r="result";n&&(r="floor(result * 255. + 0.5)");let o="";for(let a=0;a<i.length;a++){const l=i[a];o+=`
          if(offset == ${a}) {
            result = values[${CLe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?aD():oD(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${i.length});

        flatIndex = idiv(flatIndex, ${i.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${o}
        }
        ${s.output} = vec4(${r}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kLe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=ko();this.outputShape=e,this.enableShapeUniforms=Zr(this.outputShape.length);let s="",r="result";n&&(r="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;s+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${i.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?aD():oD(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${i.output} = ${r};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ILe(t){const e=ko(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return cRe(t,n)}function NLe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return pRe(t,e)}function ELe(t){const e=new Uint16Array([0,1,2,2,1,3]);return mRe(t,e)}function gx(t,e,n,i,s,r){vRe(e,n);const o=gRe(t),a=t.TEXTURE_2D;return kt(t,()=>t.bindTexture(a,o)),kt(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),kt(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),kt(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),kt(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),ze().getNumber("WEBGL_VERSION")===1?kt(t,()=>t.texImage2D(a,0,i,e,n,0,s,r,null)):kt(t,()=>t.texStorage2D(a,1,i,e,n)),kt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function $X(t){return t.internalFormatFloat}function TLe(t,e,n,i){const[s,r]=px(e,n);return gx(t,s,r,$X(i),i.textureFormatFloat,t.FLOAT)}function OX(t){return t.internalFormatHalfFloat}function ALe(t,e,n,i){const[s,r]=px(e,n);return gx(t,s,r,OX(i),i.textureFormatFloat,i.textureTypeHalfFloat)}function MX(t){return t.downloadTextureFormat}function RLe(t,e,n,i){const[s,r]=px(e,n);return gx(t,s,r,MX(i),t.RGBA,t.UNSIGNED_BYTE)}function FX(t){return t.internalFormatPackedFloat}function LLe(t,e,n,i){const[s,r]=W0(e,n);return gx(t,s,r,FX(i),t.RGBA,t.FLOAT)}function BX(t){return t.internalFormatPackedHalfFloat}function PLe(t,e,n,i){const[s,r]=W0(e,n);return gx(t,s,r,BX(i),t.RGBA,i.textureTypeHalfFloat)}function DLe(t,e,n){return kt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),E6(t,e,"clipSpacePos",n,3,20,0)&&E6(t,e,"uv",n,2,20,12)}function $Le(t,e,n,i,s,r){kt(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;s instanceof Uint8Array?(o=new Uint8Array(n*i*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*i*4),a=t.FLOAT,l=r.internalFormatPackedFloat),o.set(s),ze().getNumber("WEBGL_VERSION")===2?kt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,i,t.RGBA,a,o)):kt(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,i,0,t.RGBA,a,o)),kt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function OLe(t,e,n){kt(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?ze().getNumber("WEBGL_VERSION")===2?kt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):kt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):ze().getNumber("WEBGL_VERSION")===2?kt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):kt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),kt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function MLe(t,e,n,i){const s=t.createBuffer();kt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return kt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),kt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),kt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function FLe(t,e,n){const i=t,s=new Float32Array(n);return i.bindBuffer(i.PIXEL_PACK_BUFFER,e),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,s),i.bindBuffer(i.PIXEL_PACK_BUFFER,null),s}function BLe(t,e,n,i){const[s,r]=px(e,n),o=4,a=new Uint8Array(nRe(e*n,o));return kt(t,()=>t.readPixels(0,0,s,r,i.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function zLe(t,e,n,i,s,r,o,a){const l=t,c=new Float32Array(iRe(r,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function jLe(t,e,n){const i=new Float32Array(e*n*4);return kt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,i)),i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MN{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=ze().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,JAe(n,e)):this.gl=Tc(n),e=this.gl,ze().getNumber("WEBGL_VERSION")===2){const r=e;this.createVertexArray=()=>kt(r,()=>r.createVertexArray()),this.bindVertexArray=o=>kt(r,()=>r.bindVertexArray(o)),this.deleteVertexArray=o=>kt(r,()=>r.deleteVertexArray(o)),this.getVertexArray=()=>kt(r,()=>r.getParameter(r.VERTEX_ARRAY_BINDING))}else if(e!=null){const r=e.getExtension("OES_vertex_array_object");if(r==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>kt(e,()=>r.createVertexArrayOES()),this.bindVertexArray=o=>kt(e,()=>r.bindVertexArrayOES(o)),this.deleteVertexArray=o=>kt(e,()=>r.deleteVertexArrayOES(o)),this.getVertexArray=()=>kt(e,()=>e.getParameter(r.VERTEX_ARRAY_BINDING_OES))}let i="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ze().getNumber("WEBGL_VERSION")===1){const r="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=R2(this.gl,r),Tl(this.gl,o))this.textureHalfFloatExtension=R2(this.gl,o);else if(ze().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(i),Tl(this.gl,s))this.colorBufferHalfFloatExtension=R2(this.gl,s);else if(ze().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(i="EXT_color_buffer_float",Tl(this.gl,i))this.colorBufferFloatExtension=this.gl.getExtension(i);else if(Tl(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=NLe(this.gl),this.indexBuffer=ELe(this.gl),this.framebuffer=yRe(this.gl),this.textureConfig=rD(this.gl,this.textureHalfFloatExtension)}get debug(){return ze().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;kt(e,()=>e.finish()),kt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),kt(e,()=>e.deleteFramebuffer(this.framebuffer)),kt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),kt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),kt(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),TLe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),ALe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),RLe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),OLe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,i,s){this.throwIfDisposed(),$Le(this.gl,e,n,i,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),PLe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),LLe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(T6(this.gl,this.framebuffer),this.outputTexture=null),kt(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,i){return this.downloadMatrixDriver(e,()=>BLe(this.gl,n,i,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,i,s,r,o){return zLe(this.gl,e,n,i,s,r,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return FLe(this.gl,e,n)}createBufferFromTexture(e,n,i){this.bindTextureToFrameBuffer(e);const s=MLe(this.gl,n,i,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,i;if(ze().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,r=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),i=()=>{const o=s.clientWaitSync(r,0,0);return o===s.ALREADY_SIGNALED||o===s.CONDITION_SATISFIED},n=r}else ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),i=()=>this.isQueryAvailable(n,ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):i=()=>!0;return{query:n,isFencePassed:i}}downloadMatrixFromPackedTexture(e,n,i){return this.downloadMatrixDriver(e,()=>jLe(this.gl,n,i))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=ILe(n));const i=dRe(n);kt(n,()=>n.attachShader(i,this.vertexShader)),kt(n,()=>n.attachShader(i,e)),fRe(n,i);const s=Object.assign(i,{vao:this.createVertexArray()});return this.debug&&PN(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;kt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),DLe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(kt(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&PN(this.gl,this.program),kt(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,i=!0){return this.throwIfDisposed(),i?xRe(this.gl,e,n):wRe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),kt(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,i){this.throwIfDisposed(),this.throwIfNoProgram(),_Re(this.gl,e,n,i)}setOutputMatrixTexture(e,n,i){this.setOutputMatrixTextureDriver(e,i,n)}setOutputPackedMatrixTexture(e,n,i){this.throwIfDisposed();const[s,r]=W0(n,i);this.setOutputMatrixTextureDriver(e,s,r)}setOutputMatrixWriteRegion(e,n,i,s){this.setOutputMatrixWriteRegionDriver(i,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,i,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&PN(this.gl,this.program),L2(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}kt(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),kt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=R2(this.gl,ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const i=this.gl,s=this.getQueryTimerExtensionWebGL2(),r=i.createQuery();return i.beginQuery(s.TIME_ELAPSED_EXT,r),r}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,i=this.getQueryTimerExtensionWebGL2();n.endQuery(i.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await gF(()=>this.disposed||this.isQueryAvailable(e,ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const i=this.gl;return i.getQueryParameter(e,i.QUERY_RESULT)/1e6}else{const i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(e,i.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const i=this.gl,s=this.getQueryTimerExtensionWebGL2(),r=i.getQueryParameter(e,i.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),r&&!this.disjoint}else{const i=this.getQueryTimerExtensionWebGL1(),s=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=VLe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:i}=this.itemsToPoll[n];i()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let i;"setTimeoutCustom"in ze().platform&&(i=ze().platform.setTimeoutCustom.bind(ze().platform)),gF(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,i)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),DN(this.gl,e,this.framebuffer),this.debug&&L2(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(DN(this.gl,this.outputTexture,this.framebuffer),this.debug&&L2(this.gl)):T6(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const i=n();return this.unbindTextureToFrameBuffer(),i}setOutputMatrixTextureDriver(e,n,i){this.throwIfDisposed();const s=this.gl;DN(s,e,this.framebuffer),this.debug&&L2(s),this.outputTexture=e,kt(s,()=>s.viewport(0,0,n,i)),kt(s,()=>s.scissor(0,0,n,i))}setOutputMatrixWriteRegionDriver(e,n,i,s){this.throwIfDisposed(),kt(this.gl,()=>this.gl.scissor(e,n,i,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function VLe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:WLe,bincountImpl:zX,bincountReduceImpl:ULe,bitwiseAndImpl:HLe,castImpl:GLe,ceilImpl:qLe,concatImpl:KLe,equalImpl:XLe,expImpl:YLe,expm1Impl:ZLe,floorImpl:QLe,gatherNdImpl:JLe,gatherV2Impl:e3e,greaterImpl:t3e,greaterEqualImpl:n3e,lessImpl:i3e,lessEqualImpl:s3e,linSpaceImpl:r3e,logImpl:o3e,maxImpl:a3e,maximumImpl:l3e,minimumImpl:c3e,multiplyImpl:u3e,negImpl:h3e,notEqualImpl:d3e,prodImpl:f3e,raggedGatherImpl:p3e,raggedRangeImpl:m3e,raggedTensorToTensorImpl:g3e,rangeImpl:v3e,rsqrtImpl:y3e,scatterImpl:b3e,sigmoidImpl:x3e,simpleAbsImpl:jX,sliceImpl:w3e,sparseFillEmptyRowsImpl:_3e,sparseReshapeImpl:S3e,sparseSegmentReductionImpl:VX,sqrtImpl:C3e,staticRegexReplaceImpl:k3e,stridedSliceImpl:I3e,stringNGramsImpl:N3e,stringSplitImpl:E3e,stringToHashBucketFastImpl:T3e,subImpl:A3e,tileImpl:R3e,topKImpl:L3e,transposeImpl:cD,uniqueImpl:P3e}=OIe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WX(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function yo(t,e){return e===1?[t]:WX(t,e)}function D3e(t,e){if(t===1)return"rc";let n="";for(let i=0;i<t;i++)n+=e[i],i<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $3e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Zr(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=yo("rc",this.rank),i=Si(this.rank),s=this.getOutOfBoundsCondition(n),r=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${i} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${r}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let i=0;i<=1;i++)for(let s=0;s<=1;s++){let r=`${i===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)r=`${e[e.length-1-o]},`+r;n.push(r)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let i=this.rank-2;i<this.rank;i++)n+=`${e[i]} >= ${this.enableShapeUniforms?`outShape[${i}]`:this.outputShape[i]}`,i<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),i=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${i};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UX{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Zr(this.outputShape.length);let i="";for(let s=0;s<4;s++){let r="thisRC = rc;";s%2===1&&(r+="thisRC.z += 1;"),s>1&&(r+="thisRC.y += 1;"),i+=`
        ${r}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${O3e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?aD():oD(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${i}

        setOutput(result);
      }
    `}}function O3e(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?DRe(["r","c","d"],"inputShape"):Im(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M3e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,i){const s=D6(n,i),r=$6(e,s,i);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const o=P6(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,i);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[r].pop();return this.usedTextures[r].push(l),l}let a;return s===Nr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Nr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Nr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Nr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Nr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[r].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,i,s){if(this.freeTextures==null)return;const r=D6(i,s),o=$6(n,r,s);o in this.freeTextures||(this.freeTextures[o]=[]);const a=P6(n,r,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=ze().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function F3e(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function P6(t,e,n,i,s){const r=B3e(e,i);let o;if(s){const[l,c]=W0(t[0],t[1]);o=l*c}else{const[l,c]=px(t[0],t[1]);o=l*c}const a=F3e(n,r);return o*a}function B3e(t,e){switch(t){case Nr.PACKED_2X2_FLOAT32:return FX(e);case Nr.PACKED_2X2_FLOAT16:return BX(e);case Nr.UNPACKED_FLOAT32:return $X(e);case Nr.UNPACKED_FLOAT16:return OX(e);case Nr.PACKED_4X1_UNSIGNED_BYTE:return MX(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function z3e(t){return ze().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Nr.PACKED_2X2_FLOAT32:Nr.UNPACKED_FLOAT32:t?Nr.PACKED_2X2_FLOAT16:Nr.UNPACKED_FLOAT16}function D6(t,e){if(t===qa.UPLOAD)return Nr.PACKED_2X2_FLOAT32;if(t===qa.RENDER||t==null)return z3e(e);if(t===qa.DOWNLOAD||t===qa.PIXELS)return Nr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function $6(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hu{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Zr(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const zl="if (isnan(x)) return x;",j3e="return x;",O6="return abs(x);",V3e="return (x >= 0.0) ? x : (exp(x) - 1.0);",W3e=zl+`
  return (x < 0.0) ? 0.0 : x;
`,U3e=zl+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,pd="return x;",H3e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G3e="return x;",q3e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,K3e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,X3e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Y3e="return 1.0 / (1.0 + exp(-1.0 * x));";class Ed{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Zr(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z3e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Zr(this.outputShape.length);const n=e.length,i=yo("rc",n),s=Si(n),r=D3e(n,i),o=i.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${r});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q3e=m9,J3e=1e-7,ePe=1e-4,$2={};function tPe(t){return t in $2||($2[t]={}),$2[t]}const nPe=ze().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),iPe=600;function sPe(){return ze().global.screen==null?1024:ze().global.screen.height*ze().global.screen.width*window.devicePixelRatio*iPe/1024/1024}class Wk extends SL{nextDataId(){return Wk.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ze().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof MN)n=e;else{const i=Tc(ze().getNumber("WEBGL_VERSION"),e);n=new MN(i)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const i=Tc(ze().getNumber("WEBGL_VERSION"));n=new MN(i),this.binaryCache=tPe(ze().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new M3e(this.gpgpu),this.numMBBeforeWarning=sPe(),this.texData=new $U(this,iu())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,i,s,r,o){const a=this.makeTensorInfo(n,i),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,r]},l.texShape=[s,r];const c=P2(n),u=new L6(c,!1,o),h=this.runWebGLProgram(u,[a],i,[[s,r]]);return h.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),h.dataId}write(e,n,i){if((ze().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ze().getBool("DEBUG"))&&this.checkNumericalProblems(e),i==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:i,values:e,usage:qa.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,i,s,r){if(ze().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:i,dtype:s,values:n,usage:qa.UPLOAD,refCount:r})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:i,dtype:s,complexTensorInfos:r,slice:o,shape:a,isPacked:l}=n;if(o!=null){let d;l?d=new Ed(a,pd):d=new hu(a,pd);const p=this.runWebGLProgram(d,[{dataId:e,shape:a,dtype:s}],s),m=this.readSync(p.dataId);return this.disposeIntermediateTensorInfo(p),m}if(i!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return i;const c=this.activeTimers!=null;let u;c&&(u=zo());let h;if(s==="complex64"){const d=this.readSync(r.real.dataId),p=this.readSync(r.imag.dataId);h=Eh(d,p)}else h=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=zo()-u),this.convertAndCacheOnCPU(e,h)}async read(e){if(this.pendingRead.has(e)){const m=this.pendingRead.get(e);return new Promise(g=>m.push(g))}const n=this.texData.get(e),{values:i,shape:s,slice:r,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(r!=null){let m;l?m=new Ed(s,pd):m=new hu(s,pd);const g=this.runWebGLProgram(m,[{dataId:e,shape:s,dtype:o}],o),y=this.read(g.dataId);return this.disposeIntermediateTensorInfo(g),y}if(i!=null)return this.convertAndCacheOnCPU(e);if(ze().getBool("DEBUG")&&!ze().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ze().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(o!=="complex64"&&ze().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const m=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(m.texture.texture,...A2(s))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let h;if(o==="complex64"){const m=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),g=m[0],y=m[1];h=Eh(g,y)}else if(c==null)h=this.getValuesFromTexture(e);else{const m=He(s);h=this.gpgpu.downloadFloat32MatrixFromBuffer(c,m)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const m=this.gpgpu.gl;kt(m,()=>m.deleteBuffer(c))}const d=this.convertAndCacheOnCPU(e,h),p=this.pendingRead.get(e);return this.pendingRead.delete(e),p.forEach(m=>m(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&iu().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e,n={}){const i=this.texData.get(e),{values:s,shape:r,slice:o,dtype:a,isPacked:l,texture:c}=i;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let p;l?p=new Ed(r,pd):p=new hu(r,pd);const m=this.runWebGLProgram(p,[{dataId:e,shape:r,dtype:a}],a),g=this.readToGPU(m,n);return this.disposeIntermediateTensorInfo(m),g}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),h=iu().makeTensorFromTensorInfo(u),d=this.texData.get(u.dataId);return Object.assign({tensorRef:h},d.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const i=n.map(s=>rf(s));return kn(e.shape,e.dtype,i)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return kn(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const i=e[n];if(!aRe(i))throw ze().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${i} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${i} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:i,isPacked:s}=this.texData.get(e),r=He(n);if(ze().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const d=this.decode(e),p=this.texData.get(d.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(p.texture.texture,...A2(n)).subarray(0,r);return this.disposeIntermediateTensorInfo(d),m}const o=ze().getBool("WEBGL_PACK")&&s===!0,a=o?P2(n):n,l=o?new SLe(a):new _Le(a),c=this.runWebGLProgram(l,[{shape:a,dtype:i,dataId:e}],"float32"),u=this.texData.get(c.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,r);return this.disposeIntermediateTensorInfo(c),h}timerAvailable(){return ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,i=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=i,s=!0):this.activeTimers.push(i),this.activeTimers=i,e();const r=em(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=em(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(r);a.kernelMs=H0e(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:o[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:zo(),endMs:null}}endTimer(e){return ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=zo(),e)}async getQueryTime(e){if(ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:i}=this.texData.get(e);return i!=null&&(this.disposeData(i.real.dataId,n),this.disposeData(i.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:i,texShape:s,usage:r,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,i),this.textureManager.releaseTexture(n,s,r,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=nPe){return ze().getBool("WEBGL_CPU_FORWARD")&&e.every(i=>this.texData.get(i.dataId).texture==null&&He(i.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Ua("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Q3e(e.shape,n)}packedUnaryOp(e,n,i){const s=new Ed(e.shape,n),r=this.compileAndRun(s,[e],i);return iu().makeTensorFromTensorInfo(r)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=jX(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,O6,e.dtype);const n=new hu(e.shape,O6),i=this.compileAndRun(n,[e]);return iu().makeTensorFromTensorInfo(i)}makeTensorInfo(e,n,i){let s;if(n==="string"&&i!=null&&i.length>0&&tb(i[0])){const r=i.map(o=>Gd(o));s=this.write(r,e,n)}else s=this.write(i,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,i){return iu().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,i),this)}unpackTensor(e){const n=new Z3e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new $3e(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const i=[y0(e.shape),...b0(e.shape)],s={dtype:e.dtype,shape:i,dataId:e.dataId},r=[y0(n),...b0(n)],o=new UX(r,i),a=!0,l=[i],c=this.runWebGLProgram(o,[s],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const i=this.texData.get(e),{isPacked:s,shape:r,dtype:o}=i;if(n!=null){const d=He(r),p=n[0]*n[1]*4;ce(d<=p,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=P2(r);let l;s?l=new wLe(a):l=new xLe(a);const c=!0,u=[n??A2(a)],h=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,u,c,n);return{dtype:o,shape:r,dataId:h.dataId}}runWebGLProgram(e,n,i,s,r=!1,o){const a=this.makeTensorInfo(e.outputShape,i),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Ny.DENSE){const v=o??A2(e.outputShape);l.texShape=v.map(b=>b*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),He(a.shape)===0)return l.values=Gr(a.dtype,0),a;const c=[],u=n.map(v=>{if(v.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(v.dataId);if(b.texture==null){if(!e.packedInputs&&He(v.shape)<=ze().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:v.shape,texData:null,isUniform:!0,uniformValues:b.values};e.packedInputs&&(b.isPacked=!0,b.shape=v.shape)}if(this.uploadToGPU(v.dataId),!!b.isPacked!=!!e.packedInputs)v=b.isPacked?this.unpackTensor(v):this.packTensor(v),c.push(v),b=this.texData.get(v.dataId);else if(b.isPacked&&!rS(b.shape,v.shape)){const w=v,S=v.shape;v.shape=b.shape,v=this.packedReshape(v,S),c.push(v),b=this.texData.get(v.dataId),w.shape=S}return{shape:v.shape,texData:b,isUniform:!1}});this.uploadToGPU(a.dataId);const h={shape:a.shape,texData:l,isUniform:!1},d=bLe(e,u,h),p=this.getAndSaveBinary(d,()=>vLe(this.gpgpu,e,u,h)),m=this.activeTimers!=null;let g;m&&(g=this.startTimer()),ze().get("ENGINE_COMPILE_ONLY")||yLe(this.gpgpu,p,u,h,s),c.forEach(v=>this.disposeIntermediateTensorInfo(v)),m&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)}));const y=ze().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){const v=zo();v-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!ze().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&r===!1){const v=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),v}return a}compileAndRun(e,n,i,s,r=!1){return i=i||n[0].dtype,this.runWebGLProgram(e,n,i,s,r)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ze().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=$e(()=>{if(!ze().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=ze().getBool("DEBUG");ze().set("DEBUG",!1);const n=this.abs(si(1e-8)).dataSync()[0];if(ze().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?J3e:ePe}uploadToGPU(e){const n=this.texData.get(e),{shape:i,dtype:s,values:r,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const c=this.activeTimers!=null;let u;c&&(u=zo());let h=n.texShape;if(h==null&&(h=kRe(i,l),n.texShape=h),r!=null){const d=P2(i);let p,m=h[1],g=h[0];const y=r instanceof Uint8Array||r instanceof Uint8ClampedArray;(l||!y)&&([m,g]=W0(h[0],h[1])),l?p=new kLe(d,y):p=new L6(d,y);const v=y?[g,m]:h,b=this.makeTensorInfo(v,s),w=this.texData.get(b.dataId);y?w.usage=qa.PIXELS:w.usage=qa.UPLOAD,w.texShape=v,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),m,g,r);const S=[[g,m]],I=this.runWebGLProgram(p,[b],s,S,!0),T=this.texData.get(I.dataId);n.texShape=T.texShape,n.isPacked=T.isPacked,n.usage=T.usage,ze().get("ENGINE_COMPILE_ONLY")?this.disposeData(I.dataId):(n.texture=T.texture,n.values=null,this.texData.delete(I.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=zo()-u)}else{const d=this.acquireTexture(h,a,s,l);n.texture=d}}convertAndCacheOnCPU(e,n){const i=this.texData.get(e),{dtype:s}=i;return n!=null&&(i.values=rPe(n,s)),i.values}acquireTexture(e,n,i,s){if(this.numBytesInGPU+=this.computeBytes(e,i),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const r=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${r} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*D_(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const i=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(r){throw r}});e.push(i)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await L9(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(TX(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:i,infLoc:s,nanLoc:r,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=DX(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=i,e.infLoc=s,e.nanLoc=r,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,i){e.channels=e.channels||"RGBA";const{texture:s,height:r,width:o,channels:a}=e,l=iu().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,n,i,r,o,a);return iu().makeTensorFromDataId(c,n,i,l)}}Wk.nextDataId=0;function rPe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let i=0;i<n.length;++i)n[i]=Math.round(t[i]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */EH()&&LH("webgl",()=>new Wk,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uD=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class dm{constructor(e,n,i){this.variableNames=["A","B"],this.outputShape=mn(n,i),this.enableShapeUniforms=Zr(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Em=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class K0{constructor(e,n,i,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=mn(n,i);const r=this.outputShape.length;this.enableShapeUniforms=Zr(r);let o="";if(s)if(r===0||He(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Si(r)} coords = getOutputCoords();
        `,r===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=yo("coords",r);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[r-2]} + 1) >= outShape[${r} - 2];
            bool nextColOutOfBounds =
              (${l[r-1]} + 1) >= outShape[${r} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[r-2]} + 1) >= ${this.outputShape[r-2]};
            bool nextColOutOfBounds =
              (${l[r-1]} + 1) >= ${this.outputShape[r-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aa(t){const{inputs:e,backend:n}=t,{x:i}=e;return n.incRef(i.dataId),{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}const oPe={kernelName:_b,backendName:"webgl",kernelFunc:Aa};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Af(t){const{inputs:e,backend:n}=t,{real:i,imag:s}=e,r=n.makeTensorInfo(i.shape,"complex64"),o=n.texData.get(r.dataId),a=Aa({inputs:{x:i},backend:n}),l=Aa({inputs:{x:s},backend:n});return o.complexTensorInfos={real:a,imag:l},r}const aPe={kernelName:OL,backendName:"webgl",kernelFunc:Af};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HX="return (a < 0.) ? b * a : a;",GX=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function lPe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{alpha:r}=i,o=n.makeTensorInfo([],"float32",_f(r,"float32")),a=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new K0(GX,s.shape,o.shape):new dm(HX,s.shape,o.shape),l=n.runWebGLProgram(a,[s,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const cPe={kernelName:MC,backendName:"webgl",kernelFunc:lPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qX="return (a < 0.) ? b * a : a;",KX=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function uPe(t){const{inputs:e,backend:n}=t,{x:i,alpha:s}=e,r=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new K0(KX,i.shape,s.shape):new dm(qX,i.shape,s.shape);return n.runWebGLProgram(r,[i,s],"float32")}const hPe={kernelName:nk,backendName:"webgl",kernelFunc:uPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X0="if (isnan(x)) return x;";function Gn({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:i}){return({inputs:s,backend:r})=>{const{x:o}=s,a=r,l=i||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const h=a.texData.get(o.dataId),d=n(h.values,l);return a.makeTensorInfo(o.shape,l,d)}const c=ze().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new Ed(o.shape,e):u=new hu(o.shape,t),a.runWebGLProgram(u,[o],l)}}function Dr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:i=!1,cpuKernelImpl:s,dtype:r}){return({inputs:o,backend:a})=>{const{a:l,b:c}=o,u=a;if(i&&l.dtype==="complex64"){const m=u.texData.get(l.dataId),g=u.texData.get(c.dataId),[y,v]=[[m.complexTensorInfos.real,g.complexTensorInfos.real],[m.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(w=>{const[S,k]=w,I={dataId:S.dataId,dtype:S.dtype,shape:l.shape},T={dataId:k.dataId,dtype:k.dtype,shape:c.shape},E=new dm(t,l.shape,c.shape);return u.runWebGLProgram(E,[I,T],Ea(S.dtype,k.dtype))}),b=Af({inputs:{real:y,imag:v},backend:u});return u.disposeIntermediateTensorInfo(y),u.disposeIntermediateTensorInfo(v),b}const h=r||Ea(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&s!=null){const m=u.texData.get(l.dataId).values,g=u.texData.get(c.dataId).values,y=l.dtype==="string"?Th(m):m,v=l.dtype==="string"?Th(g):g,[b,w]=s(l.shape,c.shape,y,v,h),S=u.makeTensorInfo(w,h),k=u.texData.get(S.dataId);return k.values=b,S}const d=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let p;return d?p=new K0(e,l.shape,c.shape,n):p=new dm(t,l.shape,c.shape),u.runWebGLProgram(p,[l,c],h)}}function Ey(t,e=!1){if(t==="linear")return e?G3e:j3e;if(t==="relu")return e?K3e:W3e;if(t==="elu")return e?q3e:V3e;if(t==="relu6")return e?X3e:U3e;if(t==="prelu")return e?KX:qX;if(t==="leakyrelu")return e?GX:HX;if(t==="sigmoid")return e?Y3e:H3e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XX{constructor(e,n,i,s=!1,r=!1,o=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i,this.enableShapeUniforms=Zr(this.outputShape.length);const u=s?e[1]:e[2],h=Math.ceil(u/2),d=s?"i * 2, rc.y":"rc.y, i * 2",p=r?"rc.z, i * 2":"i * 2, rc.z",m=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let y="",v="";a&&(l?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:y=`vec4 activation(vec4 x) {
          ${a}
        }`,v="result = activation(result);");const b=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let w="rc.x",S="rc.x";e[0]<n[0]?w=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(S=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${h}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${w};
        int batchB = ${S};
        for (int i = 0; i < ${h}; i++) {
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${p});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${g[0]});
          result += (${m[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${v}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M6={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class F6{constructor(e,n,i){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=mn(n,i),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B6="return a * b;";function hD(t){const{inputs:e,backend:n}=t,{a:i,b:s}=e,r=Ea(i.dtype,s.dtype);if(i.dtype==="complex64"){const a=n.texData.get(i.dataId),l=n.texData.get(s.dataId),c=new F6(M6.REAL,i.shape,s.shape),u=new F6(M6.IMAG,i.shape,s.shape),h=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:i.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:i.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],d=n.runWebGLProgram(c,h,"float32"),p=n.runWebGLProgram(u,h,"float32"),m=Af({inputs:{real:d,imag:p},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),m}if(n.shouldExecuteOnCPU([i,s])){const a=n.texData.get(i.dataId),l=n.texData.get(s.dataId),[c,u]=u3e(i.shape,s.shape,a.values,l.values,r),h=n.makeTensorInfo(u,r),d=n.texData.get(h.dataId);return d.values=c,h}let o;return ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new K0(B6,i.shape,s.shape):o=new dm(B6,i.shape,s.shape),n.runWebGLProgram(o,[i,s],r)}const dPe={kernelName:Rb,backendName:"webgl",kernelFunc:hD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fPe(t,e,n){const i=[y0(t.shape),...b0(t.shape)],s={dtype:t.dtype,shape:i,dataId:t.dataId},r=[y0(e),...b0(e)],o=new UX(r,i),a=!0,l=[i],c=n.runWebGLProgram(o,[s],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gt(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{shape:r}=i,o=n,a=He(s.shape),l=MU(r,a),c=He(l);ce(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(s.dataId);return u.isPacked&&!rS(s.shape,l)&&!(u.texture!==null&&rS(u.shape,l))?fPe(s,l,o):(o.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const pPe={kernelName:sk,backendName:"webgl",kernelFunc:gt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z6{constructor(e,n){this.variableNames=["x"];const{windowSize:i,batchSize:s,inSize:r,outSize:o}=e;this.outputShape=[s,o];const a=Math.floor(i/4)*4,l=i%4;let c="sumValue += dot(values, ones);";if(n!=null){const h=1/n;c=`sumValue += dot(values * ${a0(h)?h.toPrecision(2):h}, ones);`}let u="";r%i>0&&(u=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mPe{constructor(e,n){this.variableNames=["x"];const{windowSize:i,batchSize:s,inSize:r,outSize:o}=e;this.outputShape=[s,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(i/4)*4,h=i%4;let d=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,p="vec4";n==="all"?(a="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):n==="any"&&(a="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");let m="";r%i>0&&(m=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${h===1}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${h===2}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${h===3}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gPe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],i=Nk(n);e.push({inSize:n,windowSize:i,outSize:Math.ceil(n/i)})}return e}function Tm(t,e,n,i){const s=gPe(t.shape);let r=t;for(let o=0;o<s.length;o++){const{inSize:a,windowSize:l,outSize:c}=s[o];let u,h;n==="mean"?u=o===0?new z6({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new z6({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new mPe({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),h=r,r=i.runWebGLProgram(u,[r],e),h.dataId!==t.dataId&&i.disposeIntermediateTensorInfo(h)}return r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vPe{constructor(e,n){this.variableNames=["A"];const i=new Array(e.length);for(let o=0;o<i.length;o++)i[o]=e[n[o]];this.outputShape=i,this.rank=i.length;const s=Si(this.rank),r=yPe(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${r}));
    }
    `}}function yPe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],i=new Array(e);for(let s=0;s<t.length;s++)i[t[s]]=n[s];return i.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bPe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const i=new Array(e.length);for(let u=0;u<i.length;u++)i[u]=e[n[u]];if(this.outputShape=i,this.rank=i.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=Si(this.rank),r=WX("rc",this.rank),o=new Array(this.rank);for(let u=0;u<n.length;u++)o[n[u]]=r[u];const a=`vec2(${o.slice(-2).join()})`,l=`++${r[this.rank-1]} < ${i[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${r[this.rank-1]};
      if(++${r[this.rank-2]} < ${i[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uk(t,e,n){const i=ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bPe(t.shape,e):new vPe(t.shape,e);return n.runWebGLProgram(i,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xPe(t,e,n,i){const s=e,r=t.shape.length,o=In(s,t.shape);let a=o;const l=os(a,r),c=l!=null;let u=t;c&&(u=Uk(t,l,i),a=Is(a.length,r)),Pr("sum",a,r);const[h,d]=mr(u.shape,a);let p=h;n&&(p=Fs(h,o));const m=He(d),y=He(t.shape)/m,v=gt({inputs:{x:u},attrs:{shape:[y,m]},backend:i}),b=v3(t.dtype),w=Tm(v,b,"sum",i),S=gt({inputs:{x:w},attrs:{shape:p},backend:i});return i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(w),c&&i.disposeIntermediateTensorInfo(u),S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hk(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,keepDims:o}=i;return xPe(s,r,o,n)}const wPe={kernelName:uk,backendName:"webgl",kernelFunc:Hk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Co(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{perm:r}=i,o=n,a=s.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=s.shape[r[u]];let c;if(o.shouldExecuteOnCPU([s])){const h=o.texData.get(s.dataId).values,d=cD(h,s.shape,s.dtype,r,l);c=o.makeTensorInfo(l,s.dtype);const p=o.texData.get(c.dataId);p.values=d}else c=Uk(s,r,o);return c}const _Pe={kernelName:Bg,backendName:"webgl",kernelFunc:Co};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YX=1e3;function oS({a:t,b:e,transposeA:n,transposeB:i,backend:s,bias:r=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,h=n?t.shape[c-2]:t.shape[c-1],d=i?e.shape[u-1]:e.shape[u-2],p=n?t.shape[c-1]:t.shape[c-2],m=i?e.shape[u-2]:e.shape[u-1],g=t.shape.slice(0,-2),y=e.shape.slice(0,-2),v=He(g),b=He(y),S=mn(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([p,m]);ce(h===d,()=>`Error in matMul: inner shapes (${h}) and (${d}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${i} must match.`);const k=n?[v,h,p]:[v,p,h],I=i?[b,m,d]:[b,d,m],T=gt({inputs:{x:t},backend:s,attrs:{shape:k}}),E=gt({inputs:{x:e},backend:s,attrs:{shape:I}}),O=[T,E],F=Math.max(v,b),R=n?T.shape[1]:T.shape[2],$=r!=null,U=o!=null,W=l==="leakyrelu",te=l!=null?Ey(l,!0):null,H=$||U||W||te!=null;let G;if((p===1||m===1)&&R>YX&&H===!1){let Y=T,ne=E;n&&(Y=Co({inputs:{x:T},backend:s,attrs:{perm:[0,2,1]}}),O.push(Y)),i&&(ne=Co({inputs:{x:E},backend:s,attrs:{perm:[0,2,1]}}),O.push(ne));const le=m!==1,M=m===1;let j=Y;le&&(j=gt({inputs:{x:Y},backend:s,attrs:{shape:[F,R,1]}}),O.push(j));const q=m===1?2:1;let X=ne;M&&(X=gt({inputs:{x:ne},backend:s,attrs:{shape:[F,1,R]}}),O.push(X));const Z=hD({inputs:{a:j,b:X},backend:s});G=Hk({inputs:{x:Z},backend:s,attrs:{axis:q,keepDims:!0}}),O.push(Z)}else{const Y=Ea(t.dtype,e.dtype),ne=new XX(k,I,[F,p,m],n,i,$,te,U,W),le=[T,E];if(r!=null&&le.push(r),U&&le.push(o),W){const M=s.makeTensorInfo([],"float32",_f(a,"float32"));le.push(M),O.push(M)}G=s.runWebGLProgram(ne,le,Y)}const B=gt({inputs:{x:G},backend:s,attrs:{shape:S}});O.push(G);for(const Y of O)s.disposeIntermediateTensorInfo(Y);return B}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SPe(t){const{inputs:e,backend:n,attrs:i}=t,{a:s,b:r,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=i;return oS({a:s,b:r,transposeA:l,transposeB:c,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:h,activation:u})}const CPe={kernelName:$_,backendName:"webgl",kernelFunc:SPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j6="return abs(x);";function kPe(t){const{inputs:e,backend:n}=t,{x:i}=e;if(n.shouldExecuteOnCPU([i])&&i.dtype!=="complex64"){const r=n.texData.get(i.dataId),o=jX(r.values);return n.makeTensorInfo(i.shape,i.dtype,o)}let s;return ze().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Ed(i.shape,j6):s=new hu(i.shape,j6),n.runWebGLProgram(s,[i],i.dtype)}const IPe={kernelName:vC,backendName:"webgl",kernelFunc:kPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NPe=zl+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,EPe=Gn({opSnippet:NPe}),TPe={kernelName:nb,backendName:"webgl",kernelFunc:EPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const APe=zl+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,RPe=Gn({opSnippet:APe}),LPe={kernelName:ib,backendName:"webgl",kernelFunc:RPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V6="return a + b;",PPe=Dr({opSnippet:V6,packedOpSnippet:V6,supportsComplex:!0,cpuKernelImpl:WLe}),DPe={kernelName:O0,backendName:"webgl",kernelFunc:PPe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Pe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((r,o)=>`T${o}`);const i=[];this.variableNames.forEach(r=>{i.push(`float v${r} = get${r}AtOutCoords();`)});const s=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${i.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OPe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((r,o)=>`T${o}`);const i=[];this.variableNames.forEach(r=>{i.push(`vec4 v${r} = get${r}AtOutCoords();`)});const s=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${i.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vw(t){const{inputs:e,backend:n}=t,i=e;if(i.length===1)return Aa({inputs:{x:i[0]},backend:n});if(i.length>ze().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(i.length/2),c=vw({inputs:i.slice(0,l),backend:n}),u=vw({inputs:i.slice(l),backend:n});return vw({inputs:[c,u],backend:n})}const s=i.map(l=>l.dtype).reduce((l,c)=>Ea(l,c)),r=i.map(l=>l.shape),a=ze().getBool("WEBGL_PACK")?new OPe(i[0].shape,r):new $Pe(i[0].shape,r);return n.runWebGLProgram(a,i,s)}const MPe={kernelName:TL,backendName:"webgl",kernelFunc:vw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FPe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,keepDims:o}=i,a=s.shape.length,l=In(r,s.shape);let c=l;const u=os(c,a);let h=s;u!=null&&(h=Co({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Is(c.length,a)),Pr("all",c,a);const[d,p]=mr(h.shape,c),m=He(p),g=gt({inputs:{x:h},backend:n,attrs:{shape:[-1,m]}}),y=Tm(g,g.dtype,"all",n);let v;if(o){const b=Fs(d,l);v=gt({inputs:{x:y},backend:n,attrs:{shape:b}})}else v=gt({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(h),v}const BPe={kernelName:AL,backendName:"webgl",kernelFunc:FPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zPe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,keepDims:o}=i,a=s.shape.length,l=In(r,s.shape);let c=l;const u=os(c,a);let h=s;u!=null&&(h=Co({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Is(c.length,a)),Pr("any",c,a);const[d,p]=mr(h.shape,c),m=He(p),g=gt({inputs:{x:h},backend:n,attrs:{shape:[-1,m]}}),y=Tm(g,g.dtype,"any",n);let v;if(o){const b=Fs(d,l);v=gt({inputs:{x:y},backend:n,attrs:{shape:b}})}else v=gt({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(h),v}const jPe={kernelName:RL,backendName:"webgl",kernelFunc:zPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VPe{constructor(e,n,i){this.variableNames=["A"];const{windowSize:s,batchSize:r,outSize:o}=e;i||this.variableNames.push("bestIndicesA"),this.outputShape=[r,o];const a=n==="max"?">":"<",l=i?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WPe{constructor(e,n,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,ce(e.length>2,()=>`Packed arg${i.charAt(0).toUpperCase()+i.slice(1)} supports only inputs with rank above 2.`);const r=e[e.length-1],o=Math.ceil(r/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=Si(l),u=yo("coords",l);let h,d;if(o===1){d=l+1;const E=Si(d);h=`
        ${E} sourceLocR = ${E}(${u.join()}, 0);
        ++${u[l-1]};
        ${E} sourceLocG = ${E}(${u.join()}, 0);
        ++${u[l-2]};
        ${E} sourceLocA = ${E}(${u.join()}, 0);
        --${u[l-1]};
        ${E} sourceLocB = ${E}(${u.join()}, 0);
        --${u[l-2]};`}else d=l,h=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const p=["x","y","z","w","u","v"].slice(0,d),m="."+p[d-1],g=p.map(E=>"int "+E),y=yo("sourceLocR",d-1).concat("inIdx.r"),v=yo("sourceLocG",d-1).concat("inIdx.g"),b=yo("sourceLocB",d-1).concat("inIdx.b"),w=yo("sourceLocA",d-1).concat("inIdx.a"),S=i==="max"?"greaterThan":"lessThan",k=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${w.join()})));`,I=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,T=s?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${p.join()}),
                                          vec2(${p.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${p.join()}),
                               vec2(${p.slice(-2).join()}));
      }
      ${T}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${h}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${I};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${k}
          vec4 candidate = ${I};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${S}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZX(t,e,n,i=null){let s=e.shape[0],r=e.shape[1];i!=null&&(s=i.shape[0],r=i.shape[1]);const o=Nk(r),a={windowSize:o,inSize:r,batchSize:s,outSize:Math.ceil(r/o)},l=new VPe(a,n,i==null),c=[e];i!=null&&c.push(i);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const h=ZX(t,e,n,u);return t.disposeIntermediateTensorInfo(u),h}function QX(t,e,n,i=null){const s=i!=null?i.shape:e.shape,r=s[s.length-1],o=Nk(r),a=new WPe(s,o,n,i==null),l=i==null?[e]:[e,i],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=QX(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function JX(t,e,n,i){const s=[n];if(Pr("arg"+i.charAt(0).toUpperCase()+i.slice(1),s,e.shape.length),!ze().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const r=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),r.push(l));const[c,u]=mr(l.shape,s),h=He(u),d=gt({inputs:{x:l},backend:t,attrs:{shape:[-1,h]}});r.push(d);const p=ZX(t,d,i);r.push(p);const m=gt({inputs:{x:p},backend:t,attrs:{shape:c}});return r.forEach(g=>t.disposeIntermediateTensorInfo(g)),m}return QX(t,e,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UPe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r}=i;let o=In(r,s.shape);const a=os(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Co({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=Is(o.length,l.shape.length)),Pr("argMax",[o[0]],l.shape.length);const u=JX(n,l,o[0],"max");return c.forEach(h=>n.disposeIntermediateTensorInfo(h)),u}const HPe={kernelName:yC,backendName:"webgl",kernelFunc:UPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GPe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r}=i;let o=In(r,s.shape);const a=os(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Co({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=Is(o.length,l.shape.length)),Pr("argMin",[o[0]],l.shape.length);const u=JX(n,l,o[0],"min");return c.forEach(h=>n.disposeIntermediateTensorInfo(h)),u}const qPe={kernelName:bC,backendName:"webgl",kernelFunc:GPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KPe=zl+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,XPe=Gn({opSnippet:KPe}),YPe={kernelName:sb,backendName:"webgl",kernelFunc:XPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZPe=zl+"return log(x + sqrt(x * x + 1.0));",QPe=Gn({opSnippet:ZPe}),JPe={kernelName:rb,backendName:"webgl",kernelFunc:QPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eDe=zl+`
  return atan(x);
`,tDe=Gn({opSnippet:eDe}),nDe={kernelName:ob,backendName:"webgl",kernelFunc:tDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iDe=uD+`
  return atan(a, b);
`,sDe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Em+`
  return result;
`,rDe=Dr({opSnippet:iDe,packedOpSnippet:sDe}),oDe={kernelName:lb,backendName:"webgl",kernelFunc:rDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aDe=zl+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,lDe=Gn({opSnippet:aDe}),cDe={kernelName:ab,backendName:"webgl",kernelFunc:lDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ty{constructor(e,n,i,s=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&i)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;const g=n==="avg",y=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,v=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let b="0.0";if(g||(b="-1.0 / 1e-20"),i){const E=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${p}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${E} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?r?y:v:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");const k=Math.floor(o/4)*4,I=o%4,T=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${p}, ${m});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${h};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${k}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${T}
          }

          int xC = xCCorner + ${k};
          if (${I===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${I===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${I===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${T}
          }
        }
        setOutput(${S});
      }
    `}}class dD{constructor(e,n,i,s=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&i)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,h=e.dilationHeight,d=e.dilationWidth,p=e.effectiveFilterDepth,m=e.effectiveFilterHeight,g=e.effectiveFilterWidth,y=e.padInfo.front,v=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;const w=n==="avg";let S="0.0";if(w||(S="-1.0 / 1e-20"),i){const F=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${y}, ${v}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${p};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${h}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${F} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?r?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${m} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const k="max";let I=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(I="avgValue / max(count, 1.0)");const T=Math.floor(o/4)*4,E=o%4,O=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${k}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${y}, ${v}, ${b});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${p};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${h}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${T}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${O}
            }

            int xC = xCCorner + ${T};
            if (${E===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${O}
            } else if (${E===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${O}
            } else if (${E===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${O}
            }
          }
        }
        setOutput(${I});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uDe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e;mx(s,"avgPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=i,c=1;ce(Xr(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Fl(s.shape,r,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&ri(u.inShape,u.outShape))return Aa({inputs:{x:s},backend:n});const h=new Ty(u,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}const hDe={kernelName:xC,backendName:"webgl",kernelFunc:uDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dDe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{filterSize:r,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=i,u=[1,1,1],h=$h(s.shape,r,o,u,a,l,c),d=new dD(h,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const fDe={kernelName:wC,backendName:"webgl",kernelFunc:dDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pDe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,i=e.filterWidth,s=e.strideHeight,r=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,h=c-1-e.padInfo.left,d=1/(n*i);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${h});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class mDe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,i=e.filterHeight,s=e.filterWidth,r=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,h=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,m=h-1-e.padInfo.front,g=d-1-e.padInfo.top,y=p-1-e.padInfo.left,v=1/(n*i*s);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${g}, ${y});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${r}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gDe(t){const{inputs:e,backend:n,attrs:i}=t,{dy:s,input:r}=e,o=r,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=i,h=[1,1,1],d=$h(o.shape,a,l,h,c,u),p=new mDe(d);return n.runWebGLProgram(p,[s],o.dtype)}const vDe={kernelName:PL,backendName:"webgl",kernelFunc:gDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yDe(t){const{inputs:e,backend:n,attrs:i}=t,{dy:s,input:r}=e,o=r;mx([s,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=i,u=Fl(o.shape,a,l,1,c),h=new pDe(u);return n.runWebGLProgram(h,[s],o.dtype)}const bDe={kernelName:LL,backendName:"webgl",kernelFunc:yDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xDe(t){const{inputs:e,backend:n,attrs:i}=t,{a:s,b:r}=e,{transposeA:o,transposeB:a}=i;return oS({a:s,b:r,transposeA:o,transposeB:a,backend:n})}const wDe={kernelName:_C,backendName:"webgl",kernelFunc:xDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _De{constructor(e,n,i,s,r,o){this.outputShape=[],this.variableNames=["x","mean","variance"],mn(e,n),mn(e,i);let a="0.0";s!=null&&(mn(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";r!=null&&(mn(e,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SDe{constructor(e,n,i,s,r,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],mn(e,n),mn(e,i);let a="vec4(0.0)";s!=null&&(mn(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";r!=null&&(mn(e,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CDe=({inputs:t,backend:e,attrs:n})=>{const{x:i,mean:s,variance:r,offset:o,scale:a}=t;ce(s.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ce(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ce(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[i,s,r];let u=null;o!=null&&(u=o.shape,c.push(o));let h=null;a!=null&&(h=a.shape,c.push(a));const d=ze().getBool("WEBGL_PACK_NORMALIZATION")?new SDe(i.shape,s.shape,r.shape,u,h,l):new _De(i.shape,s.shape,r.shape,u,h,l);return e.runWebGLProgram(d,c,c[0].dtype)},kDe={kernelName:DC,backendName:"webgl",kernelFunc:CDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IDe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Si(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const i=NDe(this.rank);let s;const r=e.map((o,a)=>`sourceLoc.${CT[a]} = start[${a}] + coords.${CT[a]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${r.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${i}));
      }
    `}}const CT=["x","y","z","w","u","v"];function NDe(t){if(t===1)return"sourceLoc";if(t<=6)return CT.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EDe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Si(this.rank),i=yo("coords",this.rank),s=yo("sourceLoc",this.rank),r=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,o=`getChannel(getSource(${s.join()}), ${r})`,a=`
      result.x = ${o};
      if (++${i[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${o};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${i[this.rank-1]};
      if (++${i[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${o};
        if (++${i[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${o};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,h)=>`start[${h}]`).join()});`:e.map((u,h)=>`${s[h]} = ${i[h]} + start[${h}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TDe(t,e,n,i){const s=i.texData.get(t.dataId),r=i.makeTensorInfo(n,t.dtype),o=i.texData.get(r.dataId);Object.assign(o,s),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=oP(e,zt(t.shape));s.slice&&(a+=s.slice.flatOffset),o.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=i.dataRefCount.get(o.slice.origDataId)||1;return i.dataRefCount.set(o.slice.origDataId,l+1),r}function Y0(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{begin:r,size:o}=i,[a,l]=Ik(s,r,o);if(iP(s,a,l),He(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const h=n.texData.get(s.dataId),d=w3e(h.values,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,d)}const{isPacked:c}=n.texData.get(s.dataId),u=rP(s.shape,a,l);if(c||!u){const h=ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new EDe(l):new IDe(l),d=[a];return n.runWebGLProgram(h,[s],s.dtype,d)}return n.uploadToGPU(s.dataId),TDe(s,a,l,n)}const ADe={kernelName:ck,backendName:"webgl",kernelFunc:Y0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RDe=t=>{const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{blockShape:r,crops:o}=i;ce(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((b,w)=>b*w),l=nx(s.shape,r,a),c=ix(l.length,r.length),u=sx(s.shape,r,a),h=hP(o,r.length),d=dP(u,o,r.length),p=[],m=gt({inputs:{x:s},backend:n,attrs:{shape:l}}),g=Co({inputs:{x:m},backend:n,attrs:{perm:c}}),y=gt({inputs:{x:g},backend:n,attrs:{shape:u}}),v=Y0({inputs:{x:y},backend:n,attrs:{begin:h,size:d}});return p.push(m),p.push(g),p.push(y),p.forEach(b=>n.disposeIntermediateTensorInfo(b)),v},LDe={kernelName:SC,backendName:"webgl",kernelFunc:RDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PDe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,weights:r}=e,{size:o}=i,a=n.readSync(s.dataId),l=n.readSync(r.dataId),c=zX(a,l,r.dtype,r.shape,o);return n.makeTensorInfo([o],r.dtype,c)}const DDe={kernelName:DL,backendName:"webgl",kernelFunc:PDe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $De=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,ODe=`
  return float(int(a.r) & int(b.r));
`;function MDe(t){const{inputs:e,backend:n}=t,{a:i,b:s}=e,r=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=ze().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([i,s])||o===1){const l=n.texData.get(i.dataId).values,c=n.texData.get(s.dataId).values,[u,h]=HLe(i.shape,s.shape,l,c,i.dtype),d=n.makeTensorInfo(h,i.dtype),p=n.texData.get(d.dataId);return p.values=u,d}let a;return r?a=new K0($De,i.shape,s.shape,!1):a=new dm(ODe,i.shape,s.shape),n.runWebGLProgram(a,[i,s],i.dtype)}const FDe={kernelName:$L,backendName:"webgl",kernelFunc:MDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BDe(t){const{inputs:e,backend:n}=t,{s0:i,s1:s}=e,r=n.readSync(i.dataId),o=n.readSync(s.dataId),a=mn(Array.from(r),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const zDe={kernelName:WU,backendName:"webgl",kernelFunc:BDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jDe="return float(a != b);",eY=Dr({opSnippet:jDe,cpuKernelImpl:d3e,dtype:"bool"}),VDe={kernelName:ZC,backendName:"webgl",kernelFunc:eY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vx(t){const{inputs:e,backend:n}=t,{input:i}=e,s=n.texData.get(i.dataId);return Aa({inputs:{x:s.complexTensorInfos.real},backend:n})}const WDe={kernelName:o3,backendName:"webgl",kernelFunc:vx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UDe="return float(int(x));";function HDe(t,e){const n=new hu(t.shape,UDe),i=e.runWebGLProgram(n,[t],"int32");return{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kT(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{dtype:r}=i;if(r==="complex64"){if(s.dtype==="complex64")return Aa({inputs:{x:s},backend:n});const o=hr(s.shape),a=kT({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Af({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(s.dtype==="complex64"){const o=vx({inputs:{input:s},backend:n}),a=kT({inputs:{x:o},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(o),a}if(!FU(s.dtype,r)){const o=Aa({inputs:{x:s},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:r}}if(n.shouldExecuteOnCPU([s])){const o=n.texData.get(s.dataId).values,[a,l,c]=GLe(o,s.shape,s.dtype,r);return n.makeTensorInfo(a,l,c)}if(r==="int32")return HDe(s,n);if(r==="bool"){const o=n.makeTensorInfo([],"bool",Gr("bool",1)),l=eY({inputs:{a:s,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${r}`)}const GDe={kernelName:cb,backendName:"webgl",kernelFunc:kT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W6="return ceil(x);",qDe=Gn({opSnippet:W6,packedOpSnippet:W6,cpuKernelImpl:qLe}),KDe={kernelName:ub,backendName:"webgl",kernelFunc:qDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XDe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YDe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZDe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{clipValueMin:r,clipValueMax:o}=i;let a;ze().getBool("WEBGL_PACK_CLIP")?a=new YDe(s.shape):a=new XDe(s.shape);const l=[[r],[o]];return n.runWebGLProgram(a,[s],s.dtype,l)}const QDe={kernelName:hb,backendName:"webgl",kernelFunc:ZDe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JDe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U6(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function e$e(t){const{inputs:e,backend:n}=t,{x:i}=e,s=n.texData.get(i.dataId),r=new JDe(i.shape),o=[U6(i,s.complexTensorInfos.real),U6(i,s.complexTensorInfos.imag)];return n.runWebGLProgram(r,o,o[0].dtype)}const t$e={kernelName:CC,backendName:"webgl",kernelFunc:e$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n$e{constructor(e){this.outputShape=[],this.outputShape=xu(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const i=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];i.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const s=n.length,r=n[n.length-1];i.push(`else setOutput(getT${s}(yR, yC-${r}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${i.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i$e{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=xu(e,n);const i=this.outputShape,s=i.length,r=Si(s),o=yo("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((g,y)=>`T${y}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let g=1;g<l.length;g++)l[g]=l[g-1]+e[g][n];const c=a[n],u=a.slice(-2),h=a.join();let d=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${h}), vec2(${u.join()}));
        }`;for(let g=1;g<l.length;g++){const y=l[g-1];d+=`
        if (${c} < ${l[g]}  && ${c} >= ${l[g-1]}) {
          return getChannel(
            getT${g}(${O2(a,c,y)}),
            vec2(${O2(u,c,y)}));
        }`}const p=l.length,m=l[l.length-1];d+=`
        return getChannel(
          getT${p}(${O2(a,c,m)}),
          vec2(${O2(u,c,m)}));`,this.userCode=`
      float getValue(${a.map(g=>"int "+g)}) {
        ${d}
      }

      void main() {
        ${r} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[s-1]} = ${o[s-1]} + 1;
        if (${o[s-1]} < ${i[s-1]}) {
          result.g = getValue(${o});
        }

        ${o[s-2]} = ${o[s-2]} + 1;
        if (${o[s-2]} < ${i[s-2]}) {
          result.a = getValue(${o});
        }

        ${o[s-1]} = ${o[s-1]} - 1;
        if (${o[s-2]} < ${i[s-2]} &&
            ${o[s-1]} < ${i[s-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function O2(t,e,n){const i=t.indexOf(e);return t.map((r,o)=>o===i?`${r} - ${n}`:r).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gk(t){const{inputs:e,backend:n}=t,{input:i}=e,s=n.texData.get(i.dataId);return Aa({inputs:{x:s.complexTensorInfos.imag},backend:n})}const s$e={kernelName:QL,backendName:"webgl",kernelFunc:Gk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e1(t,e,n){const i=t[0].dtype;if(i==="complex64"){const p=t.map(b=>vx({inputs:{input:b},backend:n})),m=t.map(b=>Gk({inputs:{input:b},backend:n})),g=e1(p,e,n),y=e1(m,e,n),v=Af({inputs:{real:g,imag:y},backend:n});return p.forEach(b=>n.disposeIntermediateTensorInfo(b)),m.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}let s=n.shouldExecuteOnCPU(t);if(i==="string"&&(s=!0),s){const p=t.map(S=>{const I=[-1,He(S.shape.slice(e))];return gt({inputs:{x:S},backend:n,attrs:{shape:I}})}),m=p.map(S=>({vals:n.readSync(S.dataId),shape:S.shape})),g=xu(p.map(S=>S.shape),1),y=p[0].shape[0]===1,v=KLe(m,g,i,y),b=xu(t.map(S=>S.shape),e),w=n.makeTensorInfo(b,i,v);return p.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const r=t.filter(p=>He(p.shape)>0),o=ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&r[0].shape.length>1;if(r.length===1){const p=o?new hu(t[0].shape,pd):new Ed(t[0].shape,pd);return n.runWebGLProgram(p,t,i)}const a=ze().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(r.length>a){const p=[];for(let g=0;g<r.length;g+=a){const y=r.slice(g,g+a);p.push(e1(y,e,n))}const m=e1(p,e,n);for(const g of p)n.disposeIntermediateTensorInfo(g);return m}if(o){const p=new i$e(r.map(m=>m.shape),e);return n.runWebGLProgram(p,r,i)}const{tensors2D:l,outShape:c}=r$e(r,e,n),u=new n$e(l.map(p=>p.shape)),h=n.runWebGLProgram(u,l,i);l.forEach(p=>n.disposeIntermediateTensorInfo(p));const d=gt({inputs:{x:h},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(h),d}function r$e(t,e,n){const i=xu(t.map(r=>r.shape),e);return{tensors2D:t.map(r=>gt({inputs:{x:r},attrs:{shape:[-1,He(r.shape.slice(e))]},backend:n})),outShape:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tY(t){const{inputs:e,backend:n,attrs:i}=t,{axis:s}=i,r=In(s,e[0].shape)[0],o=e.map(c=>c.shape);lP(o,r);const a=xu(e.map(c=>c.shape),r);if(He(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>He(c.shape)>0);return l.length===1?Aa({inputs:{x:l[0]},backend:n}):e1(l,r,n)}const o$e={kernelName:kC,backendName:"webgl",kernelFunc:tY};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nY{constructor(e,n=!1,i=null,s=!1,r=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,m=Math.floor(e.inChannels/4)*4,g=e.inChannels%4,y=e.dataFormat==="channelsLast",v=y?1:2,b=y?2:3,w=y?3:1;let S="",k="";i&&(s?S=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${i}
        }`:r?S=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${i}
        }`:S=`
          float activation(float x) {
            ${i}
          }
        `,k="result = activation(result);");const I=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${p}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${I}
        ${k}
        setOutput(result);
      }
    `}}class a$e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,i=e.padInfo.top,s=e.padInfo.left,r=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,h=e.filterDepth,d=e.filterHeight,p=e.filterWidth,m=Math.floor(e.inChannels/4)*4,g=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${r}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${i}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${h}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iY{constructor(e,n=!1,i=null,s=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Zr(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,h=u;let d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<u;y++)d+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;d+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let y=0;y<u;y++)d+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(h+1)/2;y++){const v=y*2;if(d+=`
           xC = xCCorner + ${v*l};
           `,a===1){if(v<u&&(o%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }
               `,l===1&&v>0?d+=`
                 xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                 `:d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                   } else {
                     xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                   }
                   `):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xC${v} = xTexelC${v};
                 `,v+1<u)){const b=o%2===0?CL(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + ${b};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                     xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${v+1}.zw = vec2(0.0);
                     }
                     xTexelC${v+1}Ready = 1;
                   }
                   `,l>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                     } else {
                      xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                     }
                     `:d+=`
                     xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                     `):b===1?d+=`
                     xC${v+1} = xTexelC${v};
                     `:d+=`
                     xCOffset = xC + ${b};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                       xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${v+1}.zw = vec2(0.0);
                       }
                       xTexelC${v+1}Ready = 1;
                     }

                     xC${v+1} = xTexelC${v+1};
                     `}}else v<u&&(o%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.0);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
               `,v+1<u&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                 `)):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(
                   xTexelC${v}.xy, xTexelC${v+1}.xy);
               `,v+1<u&&(d+=`
                   xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                 `)));v<u&&(d+=`
             wTexel = getW(r, ${v}, d1, d2);
             dotProd += xC${v}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${v}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,v+1<u&&(d+=`
               wTexel = getW(r, ${v+1}, d1, d2);
               dotProd += xC${v+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${v+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;let p="",m="";i&&(s?p=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${i}
         }`:r?p=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${i}
         }`:p=`vec4 activation(vec4 x) {
           ${i}
         }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${p}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${d}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${g}
         ${m}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l$e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Zr(this.outputShape.length);const{dataFormat:i}=n,s=ko(),r=i==="channelsLast",o=r?1:2,a=r?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let h=0;h<=1;h++)c+=`
          blockIndex = rc.z + ${h};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${r}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+h}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+h}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aS(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function sY({x:t,filter:e,convInfo:n,backend:i,bias:s=null,preluActivationWeights:r=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,c=i.texData.get(t.dataId),u=n.inChannels,h=l[0]*l[1]*l[2],d=n.outChannels,p=n.dataFormat==="channelsLast",m=!1,g=!1;let y;const v=[];if(r!=null){const S=aS(r.shape,p);S!=null&&(r=gt({inputs:{x:r},backend:i,attrs:{shape:S}}),v.push(r))}if(s!=null){const S=aS(s.shape,p);S!=null&&(s=gt({inputs:{x:s},backend:i,attrs:{shape:S}}),v.push(s))}if(!((h===1||d===1)&&u>YX)&&c.isPacked&&p&&c.texture!=null&&l[2]%2!==0&&ri(c.shape.slice(-3),l.slice(-3))){const S=l[0]*l[1]*(l[2]+1),k={dataId:t.dataId,shape:[1,S,n.inChannels],dtype:t.dtype},I=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,ce(rS(c.shape,k.shape),()=>`packed reshape ${c.shape} to ${k.shape} isn't free`);const T=gt({inputs:{x:e},backend:i,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(T);const E=oS({a:k,b:T,backend:i,transposeA:m,transposeB:g,bias:s,activation:a,preluActivationWeights:r,leakyreluAlpha:o}),O=i.texData.get(E.dataId);ce(O.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=I,O.shape=n.outShape,y=Aa({inputs:{x:E},backend:i}),y.shape=n.outShape,v.push(E)}else{const S=n.outHeight*n.outWidth,k=gt({inputs:{x:t},backend:i,attrs:{shape:p?[n.batchSize,S,n.inChannels]:[n.batchSize,n.inChannels,S]}}),I=gt({inputs:{x:e},backend:i,attrs:{shape:[1,n.inChannels,n.outChannels]}}),T=oS({a:p?k:I,b:p?I:k,transposeA:!p,transposeB:g,backend:i,bias:s,activation:a,preluActivationWeights:r,leakyreluAlpha:o});y=gt({inputs:{x:T},backend:i,attrs:{shape:n.outShape}}),v.push(k),v.push(I),v.push(T)}for(const S of v)i.disposeIntermediateTensorInfo(S);return y}function rY({x:t,filter:e,convInfo:n,backend:i,bias:s=null,preluActivationWeights:r=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:h,outHeight:d,dataFormat:p}=n,m=p==="channelsLast",g=l*c*u,y=d*h,v=[n.batchSize,g,y],b=!0,w=!1,S=[];if(r!=null){const B=aS(r.shape,m);B!=null&&(r=gt({inputs:{x:r},backend:i,attrs:{shape:B}}),S.push(r))}if(s!=null){const B=aS(s.shape,m);B!=null&&(s=gt({inputs:{x:s},backend:i,attrs:{shape:B}}),S.push(s))}const k=gt({inputs:{x:e},backend:i,attrs:{shape:[1,g,He(e.shape)/g]}});S.push(k);const I=new l$e(v,n),T=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],E=i.runWebGLProgram(I,[t],"float32",T),O=gt({inputs:{x:E},backend:i,attrs:{shape:v}});S.push(E),S.push(O);const F=s!=null,R=r!=null,$=a==="leakyrelu",U=a?Ey(a,!0):null,W=new XX(m?O.shape:k.shape,m?k.shape:O.shape,m?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],b,w,F,U,R,$),te=m?[O,k]:[k,O];if(s&&te.push(s),R&&te.push(r),$){const B=i.makeTensorInfo([],"float32",_f(o,"float32"));te.push(B),S.push(B)}const H=i.runWebGLProgram(W,te,"float32"),G=gt({inputs:{x:H},backend:i,attrs:{shape:n.outShape}});S.push(H);for(const B of S)i.disposeIntermediateTensorInfo(B);return G}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c$e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,filter:r}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=i,h=Oh(l),d=Lr(s.shape,r.shape,o,c,a,u,!1,h);let p;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))p=sY({x:s,filter:r,convInfo:d,backend:n});else if(d.strideWidth<=2&&h==="channelsLast"&&ze().getBool("WEBGL_EXP_CONV")){const g=new iY(d),y=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];p=n.runWebGLProgram(g,[s,r],"float32",y)}else if(ze().getBool("WEBGL_CONV_IM2COL"))p=rY({x:s,filter:r,convInfo:d,backend:n});else{const g=new nY(d);p=n.runWebGLProgram(g,[s,r],"float32")}const m=gt({inputs:{x:p},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(p),m}const u$e={kernelName:IC,backendName:"webgl",kernelFunc:c$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h$e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,i=e.strideWidth,s=e.padInfo.top,r=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${i} - ${r};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class d$e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,i=e.filterWidth,s=e.strideHeight,r=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=i-1-e.padInfo.left,c=o?1:2,u=o?2:3,h=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${h}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${i} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class f$e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,i=e.strideHeight,s=e.strideWidth,r=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${r};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${i} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class p$e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,i=e.filterHeight,s=e.filterWidth,r=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=i-1-e.padInfo.top,u=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${r}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${i}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${i} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m$e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,dy:r}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=i,h=Oh(l),d=Lr(s.shape,u,o,1,a,c,!1,h),p=new h$e(d);return n.runWebGLProgram(p,[s,r],"float32")}const g$e={kernelName:ML,backendName:"webgl",kernelFunc:m$e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v$e{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Zr(this.outputShape.length);const n=e.filterHeight,i=e.filterWidth,s=n-1-e.padInfo.top,r=i-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${r});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${i}; wC++) {
            int wCPerm = ${i} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y$e(t){const{inputs:e,backend:n,attrs:i}=t,{dy:s,filter:r}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=i,h=Oh(c),d=Lr(o,r.shape,a,1,l,u,!1,h);if(ze().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&h==="channelsLast"){const p=[[d.strideHeight,d.strideWidth]],m=new v$e(d);return n.runWebGLProgram(m,[s,r],"float32",p)}else{const p=new d$e(d);return n.runWebGLProgram(p,[s,r],"float32")}}const b$e={kernelName:NC,backendName:"webgl",kernelFunc:y$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x$e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,filter:r}=e,{strides:o,pad:a,dilations:l}=i,c=Sf(s.shape,r.shape,o,l,a),u=new a$e(c);return n.runWebGLProgram(u,[s,r],"float32")}const w$e={kernelName:EC,backendName:"webgl",kernelFunc:x$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _$e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,dy:r}=e,{strides:o,pad:a,filterShape:l}=i,c=Sf(s.shape,l,o,1,a),u=new f$e(c);return n.runWebGLProgram(u,[s,r],"float32")}const S$e={kernelName:FL,backendName:"webgl",kernelFunc:_$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C$e(t){const{inputs:e,backend:n,attrs:i}=t,{dy:s,filter:r}=e,{pad:o,strides:a,inputShape:l}=i,c=Sf(l,r.shape,a,1,o),u=new p$e(c);return n.runWebGLProgram(u,[s,r],"float32")}const k$e={kernelName:BL,backendName:"webgl",kernelFunc:C$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I$e=X0+`
  return cos(x);
`,N$e=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Em}
  return result;
`,E$e=Gn({opSnippet:I$e,packedOpSnippet:N$e}),T$e={kernelName:db,backendName:"webgl",kernelFunc:E$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A$e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,R$e=Gn({opSnippet:A$e}),L$e={kernelName:fb,backendName:"webgl",kernelFunc:R$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P$e{constructor(e,n,i,s,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,c]=e,[u]=n,[h,d]=i;this.outputShape=[u,h,d,c];const p=s==="bilinear"?1:0,[m,g]=[`${a-1}.0`,`${l-1}.0`],[y,v,b]=h>1?[`${(a-1)/(h-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[w,S,k]=d>1?[`${(l-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${S};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${r}));
          return;
        }
        float in_x = ${k};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${r}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${p} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D$e=t=>{const{inputs:e,backend:n,attrs:i}=t,{image:s,boxes:r,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=i,u=new P$e(s.shape,r.shape,a,l,c);return n.runWebGLProgram(u,[s,r,o],"float32")},$$e={kernelName:jL,backendName:"webgl",kernelFunc:D$e};var Ay;(function(t){t.Prod="*",t.Sum="+"})(Ay||(Ay={}));class H6{constructor(e,n,i,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const r=this.outputShape.length,o=this.op===Ay.Prod?"1.0":"0.0",a=i?o:`getX(${G6(r,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";i?(c=s?`end != ${l-1}`:"end != 0",u=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",u=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Si(r)} coords = getOutputCoords();
        int end = ${q6(r,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${q6(r,"coords",this.op)} = idx;
          val ${this.op}= getX(${G6(r,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function G6(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function q6(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oY(t,e,n,i,s,r){const o=e.shape.length,a=os([i],o);let l=e;a!=null&&(l=Co({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=Is(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${i}`);const u=l.shape[c];let h=Aa({inputs:{x:l},backend:n});for(let d=0;d<=Math.ceil(Math.log2(u))-1;d++){const p=new H6(t,l.shape,!1,r),m=[[d]],g=h;h=n.runWebGLProgram(p,[h],h.dtype,m),n.disposeIntermediateTensorInfo(g)}if(s){const d=new H6(t,l.shape,s,r),p=h;h=n.runWebGLProgram(d,[h],h.dtype),n.disposeIntermediateTensorInfo(p)}if(a!=null){const d=Cf(a),p=Co({inputs:{x:h},backend:n,attrs:{perm:d}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),p}return h}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O$e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,exclusive:o,reverse:a}=i;return oY(Ay.Prod,s,n,r,o,a)}const M$e={kernelName:zL,backendName:"webgl",kernelFunc:O$e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F$e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,exclusive:o,reverse:a}=i;return oY(Ay.Sum,s,n,r,o,a)}const B$e={kernelName:TC,backendName:"webgl",kernelFunc:F$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z$e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,weights:r}=e,{size:o,binaryOutput:a}=i;if(s.shape.length===1){const l=n.readSync(s.dataId),c=n.readSync(r.dataId),u=zX(l,c,r.dtype,r.shape,o);return n.makeTensorInfo([o],r.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(r),u=ULe(l,c,o,a);return n.makeTensorInfo(u.shape,r.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const j$e={kernelName:VL,backendName:"webgl",kernelFunc:z$e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V$e{constructor(e,n,i){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=i,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W$e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{blockSize:r,dataFormat:o}=i,a=s.shape[0],l=o==="NHWC"?s.shape[1]:s.shape[2],c=o==="NHWC"?s.shape[2]:s.shape[3],u=o==="NHWC"?s.shape[3]:s.shape[1],h=l*r,d=c*r,p=u/(r*r),m=o==="NHWC"?[a,h,d,p]:[a,p,h,d],g=new V$e(m,r,o);return n.runWebGLProgram(g,[s],s.dtype)}const U$e={kernelName:WL,backendName:"webgl",kernelFunc:W$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aY{constructor(e,n=!1,i=null,s=!1,r=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Zr(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";i&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${i}
        }`:r?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${i}
        }`:c=`
          float activation(float x) {
            ${i}
          }
        `,u="result = activation(result);");const h=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${h}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lY{constructor(e,n=!1,i=null,s=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Zr(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,h=e.filterWidth,d=h;let p=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<h;v++)p+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;p+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let v=0;v<h;v++)p+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;p+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(d+1)/2;v++){const b=v*2;if(p+=`
          xC = xCCorner + ${b*c};
          `,l===1){if(b<h&&(a%2===1?(p+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,c===1&&b>0?p+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:p+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):p+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<h)){const w=a%2===0?CL(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(p+=`
                  xCOffset = xC + imod(pads[1], 2) + ${w};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,c>1?p+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                    } else {
                     xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                    }
                    `:p+=`
                    xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                    `):w===1?p+=`
                    xC${b+1} = xTexelC${b};
                    `:p+=`
                    xCOffset = xC + ${w};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<h&&(a%2===1?(p+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<h&&(p+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<h&&(p+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<h&&(p+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<h&&(p+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}p+=`
    }
  `,p+=`
      }
    `;let m="",g="";i&&(s?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${i}
        }`:r?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${i}
        }`:m=`vec4 activation(vec4 x) {
          ${i}
        }`,g="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${p}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H$e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,filter:r}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=i;let u=l;u==null&&(u=[1,1]),ce(Xr(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const h=Lr(s.shape,r.shape,o,u,a,c,!0);let d;ze().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?d=new lY(h):d=new aY(h);const p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(d,[s,r],"float32",p)}const G$e={kernelName:AC,backendName:"webgl",kernelFunc:H$e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q$e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,i=e.strideWidth,s=e.padInfo.top,r=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${i} - ${r};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class K$e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,i=e.filterWidth,s=e.strideHeight,r=e.strideWidth,o=n-1-e.padInfo.top,a=i-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${i} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X$e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,dy:r}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=i,h=Lr(s.shape,u,o,a,l,c,!0),d=new q$e(h);return n.runWebGLProgram(d,[s,r],"float32")}const Y$e={kernelName:UL,backendName:"webgl",kernelFunc:X$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$e(t){const{inputs:e,backend:n,attrs:i}=t,{dy:s,filter:r}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=i,h=Lr(u,r.shape,o,a,l,c,!0),d=new K$e(h);return n.runWebGLProgram(d,[s,r],"float32")}const Q$e={kernelName:HL,backendName:"webgl",kernelFunc:Z$e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J$e{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eOe(t){const{inputs:e,backend:n}=t,{x:i}=e,s=[...i.shape,...i.shape],r=He(i.shape),o=gt({inputs:{x:i},backend:n,attrs:{shape:[r]}}),a=new J$e(r),l=n.runWebGLProgram(a,[o],o.dtype),c=gt({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const tOe={kernelName:UU,backendName:"webgl",kernelFunc:eOe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nOe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:i,padInfo:s,strideHeight:r,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:h,left:d}=s;this.userCode=`
      const ivec2 strides = ivec2(${r}, ${o});
      const ivec2 pads = ivec2(${h}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${i}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iOe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,filter:r}=e,{strides:o,pad:a,dilations:l}=i,c=Zb(s.shape,r.shape,o,a,"NHWC",l);let u;const h=new nOe(c);u=n.runWebGLProgram(h,[s,r],"float32");const d=gt({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),d}const sOe={kernelName:RC,backendName:"webgl",kernelFunc:iOe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rOe(t){const{inputs:e,backend:n,attrs:i}=t,{equation:s}=i,r=e,{allDims:o,summedDims:a,idDims:l}=xP(s,r.length);_P(o.length,l,r);const{path:c,steps:u}=SP(a,l),h=u.length;let d=null,p=o.length;const m=[];for(let g=0;g<h;++g){for(const y of u[g]){const{permutationIndices:v,expandDims:b}=wP(p,l[y]);let w;CP(v)?w=r[y]:(w=Co({inputs:{x:r[y]},backend:n,attrs:{perm:v}}),m.push(w));const S=w.shape.slice();for(let k=0;k<b.length;++k)S.splice(b[k],0,1);ri(w.shape,S)||(w=gt({inputs:{x:w},backend:n,attrs:{shape:S}}),m.push(w)),d===null?d=w:(d=hD({inputs:{a:w,b:d},backend:n}),m.push(d))}g<h-1&&(c[g]>=0&&(d=Hk({inputs:{x:d},backend:n,attrs:{axis:c[g]-(o.length-p),keepDims:!1}}),m.push(d)),p--)}for(const g of m)g!==d&&n.disposeIntermediateTensorInfo(g);return d}const oOe={kernelName:GL,backendName:"webgl",kernelFunc:rOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aOe="return (x >= 0.0) ? x : (exp(x) - 1.0);",lOe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,cOe=Gn({opSnippet:aOe,packedOpSnippet:lOe}),uOe={kernelName:mb,backendName:"webgl",kernelFunc:cOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hOe="return (b >= 0.0) ? a : a * (b + 1.0);",dOe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,fOe=t=>{const{inputs:e,backend:n}=t,{dy:i,y:s}=e,r=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new K0(dOe,i.shape,s.shape):new dm(hOe,i.shape,s.shape);return n.runWebGLProgram(r,[i,s],i.dtype)},pOe={kernelName:qL,backendName:"webgl",kernelFunc:fOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mOe=`
  return vec4(equal(a, b));
`,gOe="return float(a == b);",vOe=Dr({opSnippet:gOe,packedOpSnippet:mOe,dtype:"bool",cpuKernelImpl:XLe}),yOe={kernelName:LC,backendName:"webgl",kernelFunc:vOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bOe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${fP};
  float a1 = ${pP};
  float a2 = ${mP};
  float a3 = ${gP};
  float a4 = ${vP};
  float a5 = ${yP};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,xOe=Gn({opSnippet:bOe}),wOe={kernelName:gb,backendName:"webgl",kernelFunc:xOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Oe=X0+`
  return exp(x);
`,SOe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cY=Gn({opSnippet:_Oe,packedOpSnippet:SOe,cpuKernelImpl:YLe,dtype:"float32"}),COe={kernelName:vb,backendName:"webgl",kernelFunc:cY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IT(t){const{inputs:e,attrs:n,backend:i}=t,{dim:s}=n,{input:r}=e,o=r.shape.length,a=r.shape.slice();let l=s;return s<0&&(ce(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),gt({inputs:{x:r},backend:i,attrs:{shape:a}})}const kOe={kernelName:PC,backendName:"webgl",kernelFunc:IT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K6="return exp(x) - 1.0;",IOe=Gn({opSnippet:K6,packedOpSnippet:K6,cpuKernelImpl:ZLe}),NOe={kernelName:yb,backendName:"webgl",kernelFunc:IOe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X6{constructor(e,n,i){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const r=i?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=i?`${s}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${r};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uY(t,e,n){const i=n.texData.get(t.dataId),s=He(t.shape),r=t.shape[t.shape.length-1],o=s/r,a=gt({inputs:{x:t},backend:n,attrs:{shape:[o,r]}}),l=a.shape,c=new X6("real",l,e),u=new X6("imag",l,e),h=[{dataId:i.complexTensorInfos.real.dataId,dtype:i.complexTensorInfos.real.dtype,shape:l},{dataId:i.complexTensorInfos.imag.dataId,dtype:i.complexTensorInfos.imag.dtype,shape:l}],d=n.runWebGLProgram(c,h,"float32"),p=n.runWebGLProgram(u,h,"float32"),m=Af({inputs:{real:d,imag:p},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p);const g=gt({inputs:{x:m},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(m),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EOe(t){const{inputs:e,backend:n}=t,{input:i}=e;return uY(i,!1,n)}const TOe={kernelName:KL,backendName:"webgl",kernelFunc:EOe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AOe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yx(t){const{backend:e,attrs:n}=t,{shape:i,value:s}=n;let{dtype:r}=n;if(r=r||D0(s),r==="string"){const o=_s(r,He(i));return o.fill(s),e.makeTensorInfo(i,r,o)}else{const o=new AOe(i,s),a=[[s]];return e.runWebGLProgram(o,[],r,a)}}const ROe={kernelName:XL,backendName:"webgl",kernelFunc:yx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LOe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const POe={kernelName:YL,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,i=e,s=new LOe(n.shape);return i.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6="return floor(x);",DOe=Gn({opSnippet:Y6,packedOpSnippet:Y6,cpuKernelImpl:QLe}),$Oe={kernelName:bb,backendName:"webgl",kernelFunc:DOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OOe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,MOe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,FOe=Dr({opSnippet:OOe,packedOpSnippet:MOe,dtype:"int32"}),BOe={kernelName:xb,backendName:"webgl",kernelFunc:FOe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zOe{constructor(e){this.variableNames=["A"];const n=ko(),[i,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${i}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jOe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=ko(),[i,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${i}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VOe={kernelName:ove,backendName:"webgl",kernelFunc:WOe};let og,FN=ze().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function WOe(t){const{inputs:e,backend:n,attrs:i}=t;let{pixels:s}=e;const{numChannels:r}=i,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],h=[c,l,r];if(a||o){const g=ze().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(og==null||g!==FN)&&(FN=g,og=document.createElement("canvas").getContext("2d",{willReadFrequently:FN})),og.canvas.width=l,og.canvas.height=c,og.drawImage(s,0,0,l,c),s=og.canvas}const d=n.makeTensorInfo(u,"int32");n.texData.get(d.dataId).usage=qa.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),s);const p=ze().getBool("WEBGL_PACK")?new jOe(h):new zOe(h),m=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UOe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,filter:r,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:m}=i,g=Oh(u),y=Lr(s.shape,r.shape,l,h,c,d,!1,g);let v;const b=[],w=o!=null,S=a!=null,k=p==="leakyrelu",I=()=>{const E=[s,r],O=(F,R)=>{if(R==="NCHW"&&F.shape.length===1&&F.shape[0]!==1){const $=gt({inputs:{x:F},backend:n,attrs:{shape:[F.shape[0],1,1]}});return b.push($),$}return F};if(w&&E.push(O(o,u)),S&&E.push(O(a,u)),k){const F=n.makeTensorInfo([],"float32",_f(m,"float32"));E.push(F),b.push(F)}return E};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))v=sY({x:s,filter:r,convInfo:y,backend:n,bias:o,activation:p,preluActivationWeights:a,leakyreluAlpha:m});else if(y.strideWidth<=2&&g==="channelsLast"&&ze().getBool("WEBGL_EXP_CONV")){const E=p?Ey(p,!0):null,O=new iY(y,w,E,S,k),F=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],R=I();v=n.runWebGLProgram(O,R,"float32",F)}else if(ze().getBool("WEBGL_CONV_IM2COL"))v=rY({x:s,filter:r,convInfo:y,backend:n,bias:o,activation:p,preluActivationWeights:a,leakyreluAlpha:m});else{const E=p?Ey(p,!1):null,O=new nY(y,w,E,S,k),F=I();v=n.runWebGLProgram(O,F,"float32")}const T=gt({inputs:{x:v},backend:n,attrs:{shape:y.outShape}});return b.push(v),b.forEach(E=>n.disposeIntermediateTensorInfo(E)),T}const HOe={kernelName:O_,backendName:"webgl",kernelFunc:UOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GOe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,filter:r,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=i,m=[];let g=u;g==null&&(g=[1,1]),ce(Xr(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);const y=Lr(s.shape,r.shape,l,g,c,h,!0),v=ze().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,b=d?Ey(d,v):null,w=[s,r],S=o!=null,k=a!=null,I=d==="leakyrelu";if(S&&w.push(o),k&&w.push(a),I){const F=n.makeTensorInfo([],"float32",_f(p,"float32"));w.push(F),m.push(F)}let T;v?T=new lY(y,S,b,k,I):T=new aY(y,S,b,k,I);const E=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],O=n.runWebGLProgram(T,w,"float32",E);return m.forEach(F=>n.disposeIntermediateTensorInfo(F)),O}const qOe={kernelName:cH,backendName:"webgl",kernelFunc:GOe};class KOe{constructor(e,n,i,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=i;const r=Si(i.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${r} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XOe(t){const{inputs:e,backend:n}=t,{params:i,indices:s}=e,r=s.shape,o=r[r.length-1],a=He(i.shape),[l,c,u,h]=nP(i,s),d=gt({inputs:{x:s},backend:n,attrs:{shape:[c,o]}}),p=gt({inputs:{x:i},backend:n,attrs:{shape:[He(i.shape)/u,u]}});if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const v=n.readSync(s.dataId),b=n.bufferSync(i),w=JLe(v,b,i.dtype,c,o,u,h,i.shape,a);return n.makeTensorInfo(l,i.dtype,w.values)}const m=new KOe(o,h,[c,u],i.shape),g=n.runWebGLProgram(m,[p,d],p.dtype),y=gt({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}const YOe={kernelName:HU,backendName:"webgl",kernelFunc:XOe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZOe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const i=Si(this.rank),s=QOe(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function QOe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[];for(let s=0;s<t.length;s++)s===2?i.push("index"):i.push(`${n[s]}`);return i.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hY(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,indices:r}=e,{axis:o,batchDims:a}=i,l=In(o,s.shape)[0];if(ze().get("DEBUG")){const b=n.readSync(r.dataId),w=s.shape[l];for(let S=0;S<b.length;++S){const k=b[S];ce(k<=w-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${w-1}]`)}}const c=IP(s,r,l,a),u=He(r.shape),h=[],d=gt({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=gt({inputs:{x:r},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});h.push(d),h.push(p);const m=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,r])||s.dtype==="string"){const b=n.bufferSync(p),w=n.bufferSync(d),S=e3e(w,b,m);return h.forEach(k=>n.disposeIntermediateTensorInfo(k)),n.makeTensorInfo(c.outputShape,S.dtype,S.values)}const g=new ZOe(d.shape,m),y=n.runWebGLProgram(g,[d,p],d.dtype);h.push(y);const v=gt({inputs:{x:y},backend:n,attrs:{shape:c.outputShape}});return h.forEach(b=>n.disposeIntermediateTensorInfo(b)),v}const JOe={kernelName:$C,backendName:"webgl",kernelFunc:hY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4e="return float(a > b);",t4e=`
  return vec4(greaterThan(a, b));
`,n4e=Dr({opSnippet:e4e,packedOpSnippet:t4e,cpuKernelImpl:t3e,dtype:"bool"}),i4e={kernelName:OC,backendName:"webgl",kernelFunc:n4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s4e="return float(a >= b);",r4e=`
  return vec4(greaterThanEqual(a, b));
`,o4e=Dr({opSnippet:s4e,packedOpSnippet:r4e,dtype:"bool",cpuKernelImpl:n3e}),a4e={kernelName:wb,backendName:"webgl",kernelFunc:o4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l4e(t){const{inputs:e,backend:n}=t,{input:i}=e;return uY(i,!0,n)}const c4e={kernelName:ZL,backendName:"webgl",kernelFunc:l4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e="return float(!isnan(x) && !isinf(x));",h4e=Gn({opSnippet:u4e,dtype:"bool"}),d4e={kernelName:Sb,backendName:"webgl",kernelFunc:h4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f4e="return float(isinf(x));",p4e=Gn({opSnippet:f4e,dtype:"bool"}),m4e={kernelName:Cb,backendName:"webgl",kernelFunc:p4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g4e="return float(isnan(x));",v4e=Gn({opSnippet:g4e,dtype:"bool"}),y4e={kernelName:kb,backendName:"webgl",kernelFunc:v4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b4e="return float(a < b);",x4e=`
  return vec4(lessThan(a, b));
`,w4e=Dr({opSnippet:b4e,packedOpSnippet:x4e,cpuKernelImpl:i3e,dtype:"bool"}),_4e={kernelName:FC,backendName:"webgl",kernelFunc:w4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S4e="return float(a <= b);",C4e=`
  return vec4(lessThanEqual(a, b));
`,k4e=Dr({opSnippet:S4e,packedOpSnippet:C4e,cpuKernelImpl:s3e,dtype:"bool"}),I4e={kernelName:BC,backendName:"webgl",kernelFunc:k4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N4e(t){const{backend:e,attrs:n}=t,{start:i,stop:s,num:r}=n,o=r3e(i,s,r);return e.makeTensorInfo([o.length],"float32",o)}const E4e={kernelName:GU,backendName:"webgl",kernelFunc:N4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4e=X0+`
  return x < 0.0 ? 0./0. : log(x);
`,A4e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,R4e=Gn({opSnippet:T4e,packedOpSnippet:A4e,cpuKernelImpl:o3e}),L4e={kernelName:Ib,backendName:"webgl",kernelFunc:R4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P4e=X0+`
  return log(1.0 + x);
`,D4e=Gn({opSnippet:P4e}),$4e={kernelName:Nb,backendName:"webgl",kernelFunc:D4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O4e="return float(a >= 1.0 && b >= 1.0);",M4e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,F4e=Dr({opSnippet:O4e,packedOpSnippet:M4e,dtype:"bool"}),B4e={kernelName:zC,backendName:"webgl",kernelFunc:F4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z4e="return float(!(x >= 1.0));",j4e=Gn({opSnippet:z4e}),V4e={kernelName:jC,backendName:"webgl",kernelFunc:j4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W4e="return float(a >= 1.0 || b >= 1.0);",U4e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,H4e=Dr({opSnippet:W4e,packedOpSnippet:U4e,dtype:"bool"}),G4e={kernelName:VC,backendName:"webgl",kernelFunc:H4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q4e{constructor(e,n,i,s,r){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${i}) + float(${s}) * sum`;r===.5?l=`inversesqrt(${c})`:r===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K4e{constructor(e,n,i,s,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${i}) + float(${s}) * sum`;r===.5?l=`inversesqrt(${c})`:r===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X4e=t=>{const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{depthRadius:r,bias:o,alpha:a,beta:l}=i,c=ze().getBool("WEBGL_PACK_NORMALIZATION")?new K4e(s.shape,r,o,a,l):new q4e(s.shape,r,o,a,l);return n.runWebGLProgram(c,[s],s.dtype)},Y4e={kernelName:WC,backendName:"webgl",kernelFunc:X4e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z4e{constructor(e,n,i,s,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=i,this.alpha=s,this.beta=r,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${i});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${r})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${r});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q4e=t=>{const{inputs:e,backend:n,attrs:i}=t,{x:s,y:r,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=i,h=new Z4e(s.shape,a,l,c,u);return n.runWebGLProgram(h,[s,r,o],s.dtype)},J4e={kernelName:JL,backendName:"webgl",kernelFunc:Q4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eMe(t,e,n,i){const s=He(e),o=He(t.shape)/s,a=gt({inputs:{x:t},attrs:{shape:[o,s]},backend:i}),l=Tm(a,t.dtype,"max",i),c=gt({inputs:{x:l},attrs:{shape:n},backend:i});return i.disposeIntermediateTensorInfo(a),i.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dY(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{reductionIndices:r,keepDims:o}=i,a=s.shape.length,l=In(r,s.shape);let c=l;const u=os(c,a),h=u!=null,d=n.shouldExecuteOnCPU([s]);let p=s;if(h){if(d){const w=n.texData.get(p.dataId).values,S=new Array(a);for(let T=0;T<S.length;T++)S[T]=s.shape[u[T]];const k=cD(w,s.shape,s.dtype,u,S);p=n.makeTensorInfo(S,s.dtype);const I=n.texData.get(p.dataId);I.values=k}else p=Uk(s,u,n);c=Is(c.length,a)}Pr("max",c,a);const[m,g]=mr(p.shape,c);let y=m;o&&(y=Fs(m,l));let v;if(d){const w=n.texData.get(p.dataId).values,S=a3e(w,He(g),y,s.dtype);v=n.makeTensorInfo(y,s.dtype);const k=n.texData.get(v.dataId);k.values=S}else v=eMe(p,g,y,n);return h&&n.disposeIntermediateTensorInfo(p),v}const tMe={kernelName:UC,backendName:"webgl",kernelFunc:dY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nMe=uD+`
  return max(a, b);
`,iMe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Em+`
  return result;
`,sMe=Dr({opSnippet:nMe,packedOpSnippet:iMe,cpuKernelImpl:l3e}),rMe={kernelName:Eb,backendName:"webgl",kernelFunc:sMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oMe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e;mx(s,"maxPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=i,c=1;ce(Xr(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Fl(s.shape,r,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&ri(u.inShape,u.outShape))return Aa({inputs:{x:s},backend:n});const h=new Ty(u,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}const aMe={kernelName:HC,backendName:"webgl",kernelFunc:oMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lMe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{filterSize:r,strides:o,pad:a,dataFormat:l,dimRoundingMode:c}=i,u=[1,1,1],h=$h(s.shape,r,o,u,a,c,l),d=new dD(h,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const cMe={kernelName:GC,backendName:"webgl",kernelFunc:lMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uMe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,i=e.strideWidth,s=e.dilationHeight,r=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=r-1-e.padInfo.top,l=o-1-e.padInfo.left,c=r*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${r};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class hMe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,i=e.strideHeight,s=e.strideWidth,r=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,h=l-1-e.padInfo.front,d=c-1-e.padInfo.top,p=u-1-e.padInfo.left,m=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${h}, ${d}, ${p});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${r}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dMe(t){const{inputs:e,backend:n,attrs:i}=t,{dy:s,input:r}=e,o=r,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=i,h=[1,1,1],d=$h(o.shape,a,l,h,c,u),p=new dD(d,"max",!0),m=n.runWebGLProgram(p,[o],o.dtype),g=new hMe(d),y=n.runWebGLProgram(g,[s,m],o.dtype);return n.disposeIntermediateTensorInfo(m),y}const fMe={kernelName:t3,backendName:"webgl",kernelFunc:dMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pMe(t){const{inputs:e,backend:n,attrs:i}=t,{dy:s,input:r,output:o}=e,a=r;mx([r,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=i,d=Fl(a.shape,l,c,1,u,h),p=!0,m=new Ty(d,"max",p),g=n.runWebGLProgram(m,[a],a.dtype),y=new uMe(d),v=n.runWebGLProgram(y,[s,g],a.dtype);return n.disposeIntermediateTensorInfo(g),v}const mMe={kernelName:e3,backendName:"webgl",kernelFunc:pMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gMe(t,e,n,i){let s=new Ty(n,"max",!1);const r=i.runWebGLProgram(s,[t],"float32");s=new Ty(n,"max",!0,!0,e);const o=i.runWebGLProgram(s,[t],"float32");return[r,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vMe={kernelName:qU,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:i}=t,{filterSize:s,strides:r,pad:o,includeBatchInIndex:a}=e,l=n;ce(i.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${i.shape.length}.`);const c=[1,1];ce(Xr(r,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${c}'`);const u=Fl(i.shape,s,r,c,o),[h,d]=gMe(i,a,u,l);return[h,d]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yMe(t,e,n,i){const s=He(e),o=He(t.shape)/s,a=gt({inputs:{x:t},attrs:{shape:[o,s]},backend:i}),l=Tm(a,"float32","mean",i),c=gt({inputs:{x:l},attrs:{shape:n},backend:i});return i.disposeIntermediateTensorInfo(a),i.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bMe={kernelName:qC,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:i}=t,{keepDims:s,axis:r}=e,o=n,a=i.shape.length,l=In(r,i.shape);let c=l;const u=os(c,a),h=u!=null,d=o.shouldExecuteOnCPU([i]),p=[];let m=i;if(h){if(d){const S=o.texData.get(m.dataId).values,k=new Array(a);for(let E=0;E<k.length;E++)k[E]=i.shape[u[E]];const I=cD(S,i.shape,i.dtype,u,k);m=o.makeTensorInfo(k,i.dtype);const T=o.texData.get(m.dataId);T.values=I}else m=Uk(i,u,o);p.push(m),c=Is(c.length,a)}Pr("sum",c,a);const[g,y]=mr(m.shape,c);let v=g;s&&(v=Fs(g,l));const b=yMe(m,y,v,o);for(const w of p)o.disposeIntermediateTensorInfo(w);return b}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xMe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,keepDims:o}=i,a=s.shape.length,l=In(r,s.shape);let c=l;const u=os(c,a);let h=s;u!=null&&(h=Co({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Is(c.length,s.shape.length)),Pr("min",c,a);const[d,p]=mr(h.shape,c),m=He(p),g=gt({inputs:{x:h},backend:n,attrs:{shape:[-1,m]}}),y=Tm(g,g.dtype,"min",n);let v;if(o){const b=Fs(d,l);v=gt({inputs:{x:y},backend:n,attrs:{shape:b}})}else v=gt({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(h),v}const wMe={kernelName:KC,backendName:"webgl",kernelFunc:xMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Me=uD+`
  return min(a, b);
`,SMe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Em+`
  return result;
`,CMe=Dr({opSnippet:_Me,packedOpSnippet:SMe,cpuKernelImpl:c3e}),kMe={kernelName:Tb,backendName:"webgl",kernelFunc:CMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IMe{constructor(e,n,i){this.variableNames=["x"],this.outputShape=n.map((u,h)=>u[0]+e[h]+u[1]);const s=e.length,r=Si(s),o=n.map(u=>u[0]).join(","),a=n.map((u,h)=>u[0]+e[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=i==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${o});
      ${r} end = ${r}(${a});

      void main() {
        ${r} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${r} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NMe{constructor(e,n,i){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const s=e.length,r=Si(s),o=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+e[g]).join(","),l=yo("rc",s),c=yo("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,h=s===1?"source":`vec2(${c.slice(-2).join()})`,d=i==="reflect"?0:1;let p="";if(s===1){const m=`
        ${r} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;p=`
        ${r} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[s-1]} += 1;
        if(${u}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
      `}else{const m=`
        ${r} source = rc;
        ${r} lt = ${r}(lessThan(source, start));
        ${r} gte = ${r}(greaterThanEqual(source, end));
        ${r} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;p=`
        ${r} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[s-1]} += 1;
        if(${u}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${m}
          result[2] = getChannel(getX(${c.join()}), ${h});
          ${l[s-1]} += 1;
          if(${u}) {
            ${m}
            result[3] = getChannel(getX(${c.join()}), ${h});
          }
        }
      `}this.userCode=`
      const ${r} start = ${r}(${o});
      const ${r} end = ${r}(${a});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EMe=({inputs:t,backend:e,attrs:n})=>{const{x:i}=t,{paddings:s,mode:r}=n,o=ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new NMe(i.shape,s,r):new IMe(i.shape,s,r);return e.runWebGLProgram(o,[i],i.dtype)},TMe={kernelName:XC,backendName:"webgl",kernelFunc:EMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AMe=`if (b == 0.0) return NAN;
  return mod(a, b);`,RMe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Em+`
  return result;
`,LMe=Dr({opSnippet:AMe,packedOpSnippet:RMe}),PMe={kernelName:Ab,backendName:"webgl",kernelFunc:LMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DMe{constructor(e,n,i){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,i],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Me=`
if (a == b) {
  return 1.0;
};
return a / b;`,OMe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,fY=Dr({opSnippet:$Me,packedOpSnippet:OMe,checkOutOfBounds:!0}),MMe={kernelName:pb,backendName:"webgl",kernelFunc:fY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z6="return a - b;",pY=Dr({opSnippet:Z6,packedOpSnippet:Z6,supportsComplex:!0,cpuKernelImpl:A3e}),FMe={kernelName:Gb,backendName:"webgl",kernelFunc:pY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mY(t){const{inputs:e,backend:n,attrs:i}=t,{logits:s}=e,{dim:r}=i,o=In([r],s.shape),a=dY({inputs:{x:s},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=Fs(a.shape,o),c=gt({inputs:{x:a},backend:n,attrs:{shape:l}}),u=pY({inputs:{a:s,b:c},backend:n}),h=cY({inputs:{x:u},backend:n}),d=Hk({inputs:{x:h},backend:n,attrs:{axis:o,keepDims:!1}}),p=gt({inputs:{x:d},backend:n,attrs:{shape:l}}),m=fY({inputs:{a:h,b:p},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),m}const BMe={kernelName:fk,backendName:"webgl",kernelFunc:mY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zMe(t){const{inputs:e,backend:n,attrs:i}=t,{logits:s}=e,{numSamples:r,seed:o,normalized:a}=i,l=a?s:mY({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],u=l.shape[1],h=new DMe(c,u,r),d=[[o]],p=n.runWebGLProgram(h,[l],"int32",d);return a||n.disposeIntermediateTensorInfo(l),p}const jMe={kernelName:KU,backendName:"webgl",kernelFunc:zMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VMe=zl+`
  return -x;
`,WMe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function UMe(t){const{inputs:e,backend:n}=t,{x:i}=e;if(n.shouldExecuteOnCPU([i])){const r=n.texData.get(i.dataId),[o,a]=h3e(r.values,i.shape,i.dtype);return n.makeTensorInfo(a,i.dtype,o)}let s;return ze().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Ed(i.shape,WMe):s=new hu(i.shape,VMe),n.runWebGLProgram(s,[i],i.dtype)}const HMe={kernelName:YC,backendName:"webgl",kernelFunc:UMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GMe=Z3;function qMe(t){Ua("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:i}=t,{boxes:s,scores:r}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=i,c=n.readSync(s.dataId),u=n.readSync(r.dataId),{selectedIndices:h}=GMe(c,u,o,a,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const KMe={kernelName:n3,backendName:"webgl",kernelFunc:qMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XMe=Q3;function YMe(t){Ua("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:i}=t,{boxes:s,scores:r}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=i,u=n.readSync(s.dataId),h=n.readSync(r.dataId),{selectedIndices:d,validOutputs:p}=XMe(u,h,o,a,l,c);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const ZMe={kernelName:i3,backendName:"webgl",kernelFunc:YMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QMe=J3;function JMe(t){Ua("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:i}=t,{boxes:s,scores:r}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=i,u=n.readSync(s.dataId),h=n.readSync(r.dataId),d=o,p=a,m=l,g=c,{selectedIndices:y,selectedScores:v}=QMe(u,h,d,p,m,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const eFe={kernelName:s3,backendName:"webgl",kernelFunc:JMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tFe{constructor(e,n,i,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${i}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nFe=t=>{const{inputs:e,backend:n,attrs:i}=t,{indices:s}=e,{dtype:r,depth:o,onValue:a,offValue:l}=i,c=He(s.shape),u=new tFe(c,o,a,l),h=gt({inputs:{x:s},backend:n,attrs:{shape:[c]}}),d=n.runWebGLProgram(u,[h],r);n.disposeIntermediateTensorInfo(h);const p=[...s.shape,o],m=gt({inputs:{x:d},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(d),m},iFe={kernelName:JC,backendName:"webgl",kernelFunc:nFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lS(t){const{inputs:e,backend:n}=t,{x:i}=e;if(i.dtype==="complex64"){const s=vx({inputs:{input:i},backend:n}),r=lS({inputs:{x:s},backend:n}),o=Gk({inputs:{input:i},backend:n}),a=lS({inputs:{x:o},backend:n}),l=Af({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return yx({attrs:{shape:i.shape,dtype:i.dtype,value:i.dtype==="string"?"":0},backend:n})}const sFe={kernelName:gk,backendName:"webgl",kernelFunc:lS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gY(t){const{inputs:e,backend:n}=t,{x:i}=e;if(i.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(i.dtype==="complex64"){const s=vx({inputs:{input:i},backend:n}),r=gY({inputs:{x:s},backend:n}),o=Gk({inputs:{input:i},backend:n}),a=lS({inputs:{x:o},backend:n}),l=Af({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return yx({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:n})}const rFe={kernelName:QC,backendName:"webgl",kernelFunc:gY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oFe(t){const{inputs:e,backend:n,attrs:i}=t,{axis:s}=i;if(e.length===1)return IT({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const r=e[0].shape,o=e[0].dtype;e.forEach(u=>{kL(r,u.shape,"All tensors passed to stack must have matching shapes"),ce(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const h=IT({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(h),h}),c=tY({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const aFe={kernelName:ek,backendName:"webgl",kernelFunc:oFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lFe{constructor(e,n,i){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const s=e.length,r=Si(s),o=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${o});
      ${r} end = ${r}(${a});

      void main() {
        ${r} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${r} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cFe{constructor(e,n,i){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((g,y)=>g[0]+e[y]+g[1]);const s=e.length,r=Si(s),o=n.map(g=>g[0]).join(","),a=n.map((g,y)=>g[0]+e[y]).join(","),l=yo("rc",s),c=yo("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,h=s===1?"source":`vec2(${c.slice(-2).join()})`,d=[`${r} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${u}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${u}) {`],p=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let m="";for(let g=0,y=s===1?2:4;g<y;g++)m+=`
        ${d[g]}
        if (${p}) {
          result[${g}] = float(value);
        } else {
          ${r} source = rc - start;
          result[${g}] = getChannel(getX(${c.join()}), ${h});
        }
      `;m+=s===1?"} ":"}}",this.userCode=`
      const ${r} start = ${r}(${o});
      const ${r} end = ${r}(${a});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vY=t=>{const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{paddings:r,constantValue:o}=i;if(He(s.shape)===0){const c=r.map((u,h)=>u[0]+s.shape[h]+u[1]);return yx({backend:n,attrs:{shape:c,value:o,dtype:s.dtype}})}const a=ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new cFe(s.shape,r,o):new lFe(s.shape,r,o),l=[[o]];return n.runWebGLProgram(a,[s],s.dtype,l)},uFe={kernelName:tk,backendName:"webgl",kernelFunc:vY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hFe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,dFe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Em+`
  return result;
`,fFe=Dr({opSnippet:hFe,packedOpSnippet:dFe}),pFe={kernelName:Lb,backendName:"webgl",kernelFunc:fFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mFe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{axis:r,keepDims:o}=i,a=s.shape.length,l=[],c=In(r,s.shape);let u=c;const h=os(u,a);let d=s;h!=null&&(d=Co({inputs:{x:s},backend:n,attrs:{perm:h}}),u=Is(u.length,a),l.push(d)),Pr("prod",u,a);let p;if(n.shouldExecuteOnCPU([d])){const m=n.texData.get(d.dataId).values,{outVals:g,outShape:y,outDtype:v}=f3e(d.shape,d.dtype,m,u);p=n.makeTensorInfo(y,v,g)}else{const[m,g]=mr(d.shape,u),y=He(g),v=gt({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),b=v3(s.dtype),w=Tm(v,b,"prod",n);p=gt({inputs:{x:w},backend:n,attrs:{shape:m}}),l.push(v),l.push(w)}if(o){l.push(p);const m=Fs(p.shape,c);p=gt({inputs:{x:p},backend:n,attrs:{shape:m}})}return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const gFe={kernelName:ik,backendName:"webgl",kernelFunc:mFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFe(t){const{inputs:e,backend:n,attrs:i}=t,{paramsNestedSplits:s,paramsDenseValues:r,indices:o}=e,{outputRaggedRank:a}=i,l=s.map(v=>n.readSync(v.dataId)),c=s.map(v=>v.shape),u=n.readSync(r.dataId),h=n.readSync(o.dataId),[d,p,m]=p3e(l,c,u,r.shape,r.dtype,h,o.shape,a),g=d.map(v=>n.makeTensorInfo([v.length],"int32",v)),y=n.makeTensorInfo(m,r.dtype,p);return g.concat([y])}const yFe={kernelName:XU,backendName:"webgl",kernelFunc:vFe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bFe(t){const{inputs:e,backend:n}=t,{starts:i,limits:s,deltas:r}=e,o=n.readSync(i.dataId),a=n.readSync(s.dataId),l=n.readSync(r.dataId),[c,u]=m3e(o,i.shape,i.dtype,a,s.shape,l,r.shape),h=n.makeTensorInfo([c.length],"int32",c),d=n.makeTensorInfo([u.length],i.dtype,u);return[h,d]}const xFe={kernelName:YU,backendName:"webgl",kernelFunc:bFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wFe(t){const{inputs:e,backend:n,attrs:i}=t,{shape:s,values:r,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=i,c=n.readSync(s.dataId),u=n.readSync(r.dataId),h=n.readSync(o.dataId),d=a.map(y=>n.readSync(y.dataId)),p=a.map(y=>y.shape),[m,g]=g3e(c,s.shape,u,r.shape,r.dtype,h,o.shape,d,p,l);return n.makeTensorInfo(m,r.dtype,g)}const _Fe={kernelName:ZU,backendName:"webgl",kernelFunc:wFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yY=t=>{const{backend:e,attrs:n}=t,{start:i,stop:s,step:r,dtype:o}=n,a=v3e(i,s,r,o);return e.makeTensorInfo([a.length],o,a)},SFe={kernelName:r3,backendName:"webgl",kernelFunc:yY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CFe="return 1.0 / x;",kFe=Gn({opSnippet:CFe}),IFe={kernelName:Pb,backendName:"webgl",kernelFunc:kFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NFe=zl+`
  return (x < 0.0) ? 0.0 : x;
`,EFe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,TFe=Gn({opSnippet:NFe,packedOpSnippet:EFe}),AFe={kernelName:Db,backendName:"webgl",kernelFunc:TFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RFe=zl+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,LFe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,PFe=Gn({opSnippet:RFe,packedOpSnippet:LFe}),DFe={kernelName:$b,backendName:"webgl",kernelFunc:PFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Fe{constructor(e,n,i,s,r){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,i,c];const u=[s&&n>1?a-1:a,s&&i>1?l-1:l],h=[s&&n>1?n-1:n,s&&i>1?i-1:i];let d;r?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/h[0]},
          ${u[1]/h[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OFe{constructor(e,n,i,s,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,i,c];const u=[s&&n>1?a-1:a,s&&i>1?l-1:l],h=[s&&n>1?n-1:n,s&&i>1?i-1:i];let d;r?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/h[0]},
          ${u[1]/h[1]},
          ${u[1]/h[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${i-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MFe(t){const{inputs:e,backend:n,attrs:i}=t,{images:s}=e,{alignCorners:r,halfPixelCenters:o,size:a}=i,[l,c]=a,u=ze().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new OFe(s.shape,l,c,r,o):new $Fe(s.shape,l,c,r,o);return n.runWebGLProgram(u,[s],"float32")}const FFe={kernelName:ok,backendName:"webgl",kernelFunc:MFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BFe{constructor(e,n,i){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,r]=n,[,o,a]=e,l=[i&&o>1?s-1:s,i&&a>1?r-1:r],c=[i&&o>1?o-1:o,i&&a>1?a-1:a],u=l[0]/c[0],h=l[1]/c[1],d=1/u,p=1/h,m=Math.ceil(d)*2+2,g=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${h});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${p});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${r-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(t){const{inputs:e,backend:n,attrs:i}=t,{images:s,dy:r}=e,{alignCorners:o}=i,a=new BFe(r.shape,s.shape,o);return n.runWebGLProgram(a,[r],r.dtype)}const jFe={kernelName:l3,backendName:"webgl",kernelFunc:zFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VFe{constructor(e,n,i,s,r){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,i,c];const u=[s&&n>1?a-1:a,s&&i>1?l-1:l],h=[s&&n>1?n-1:n,s&&i>1?i-1:i],d=s?"0.5":"0.0";let p;r?p="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/h[0]},
          ${u[1]/h[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WFe{constructor(e,n,i,s,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,i,c];const u=[s&&n>1?a-1:a,s&&i>1?l-1:l],h=[s&&n>1?n-1:n,s&&i>1?i-1:i],d=s?"0.5":"0.0";let p;r?p="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/h[0]},
          ${u[1]/h[1]},
          ${u[1]/h[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${i-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UFe(t){const{inputs:e,backend:n,attrs:i}=t,{images:s}=e,{alignCorners:r,halfPixelCenters:o,size:a}=i,[l,c]=a,u=ze().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new WFe(s.shape,l,c,r,o):new VFe(s.shape,l,c,r,o);return n.runWebGLProgram(u,[s],s.dtype)}const HFe={kernelName:rk,backendName:"webgl",kernelFunc:UFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GFe{constructor(e,n,i){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,r]=n,[,o,a]=e,l=[i&&o>1?s-1:s,i&&a>1?r-1:r],c=[i&&o>1?o-1:o,i&&a>1?a-1:a],u=l[0]/c[0],h=l[1]/c[1],d=1/u,p=1/h,m=Math.ceil(d)*2+2,g=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${h});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${p});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${i} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${r}) - 1),
                ${i} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qFe(t){const{inputs:e,backend:n,attrs:i}=t,{images:s,dy:r}=e,{alignCorners:o}=i,a=new GFe(r.shape,s.shape,o);return n.runWebGLProgram(a,[r],r.dtype)}const KFe={kernelName:a3,backendName:"webgl",kernelFunc:qFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XFe{constructor(e,n){this.variableNames=["x"];const i=e.length;if(i>4)throw new Error(`WebGL backend: Reverse of rank-${i} tensor is not yet supported`);if(this.outputShape=e,i===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,r=e.map((a,l)=>s(l)).join(","),o=Si(i);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${r}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YFe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const i=e.length;if(i>4)throw new Error(`WebGL backend: Reverse of rank-${i} tensor is not yet supported`);this.outputShape=e;const s=yo("rc",i),r=`${s[i-1]} + 1 < ${this.outputShape[i-1]}`,o=`${s[i-2]} + 1 < ${this.outputShape[i-2]}`,a=Si(i);i===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${r}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${r}){
            result.g = ${c(s.slice())};
          }
          if(${o}) {
            result.b = ${u(s.slice())};
            if(${r}) {
              result.a = ${h(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(m){return d(m)}function c(m){return m[i-1]="("+m[i-1]+" + 1)",d(m)}function u(m){return m[i-2]="("+m[i-2]+" + 1)",d(m)}function h(m){return m[i-1]="("+m[i-1]+" + 1)",m[i-2]="("+m[i-2]+" + 1)",d(m)}function d(m){const g=e.map((b,w)=>p(w,m)),y=g.join(","),v=g.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${v}))`}function p(m,g){return n.indexOf(m)!==-1&&e[m]!==1?`${e[m]} - ${g[m]} - 1`:`${g[m]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZFe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{dims:r}=i,o=s.shape.length,a=In(r,s.shape);if(o===0)return Aa({inputs:{x:s},backend:n});const l=ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new YFe(s.shape,a):new XFe(s.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}const QFe={kernelName:ak,backendName:"webgl",kernelFunc:ZFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JFe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const i=e[1],s=e[2];this.outputShape=e;let r="";typeof n=="number"?r=`float outputValue = ${n.toFixed(2)};`:r=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${r}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${i}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e6e={kernelName:m3,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:i}=t,{radians:s,fillValue:r,center:o}=e,a=n,l=new JFe(i.shape,r),[c,u]=uP(o,i.shape[1],i.shape[2]),h=[[c,u,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[i],i.dtype,h)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t6e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,n6e=Gn({opSnippet:t6e}),i6e={kernelName:Ob,backendName:"webgl",kernelFunc:n6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s6e="return inversesqrt(x);",r6e=Gn({opSnippet:s6e,cpuKernelImpl:y3e}),o6e={kernelName:Mb,backendName:"webgl",kernelFunc:r6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fD{constructor(e,n,i,s,r,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=Si(r.length),u=Si(o.length);let h="";i===1?h="i":i===2&&(h="i, j");const d=`getIndices(${h})`;let p="";s===1?p="i":s===2&&(p="i, coords[1]");const m=`getUpdates(${p})`;let g="";l&&(g="coords[0], coords[1]");const y=`getDefaultValue(${g})`,v=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${r});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${v};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${m};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a6e{constructor(e,n,i,s,r,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=Si(r.length),u=Si(o.length);let h="";i===1?h="i":i===2&&(h="i, j");const d=`getIndices(${h})`;let p="";s===1?p="i":s===2&&(p="i, coords[1]");const m=`getUpdates(${p})`;let g="";l&&(g="coords[0], coords[1]");const y=`getDefaultValue(${g})`,v=n>1?"strides[j]":"strides",b=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${r});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${v};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${b};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${m};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l6e(t){const{inputs:e,backend:n,attrs:i}=t,{indices:s,updates:r}=e,{shape:o}=i,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=Sm(r,s,o),d=[h/c,c];if(h===0)return n.makeTensorInfo(o,s.dtype);const p=gt({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),m=gt({inputs:{x:r},backend:n,attrs:{shape:[l,c]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0]));let y;ze().getBool("WEBGL_PACK")?y=new a6e(l,a,p.shape.length,m.shape.length,u,d):y=new fD(l,a,p.shape.length,m.shape.length,u,d);const v=n.runWebGLProgram(y,[m,p,g],m.dtype),b=gt({inputs:{x:v},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),b}const c6e={kernelName:QU,backendName:"webgl",kernelFunc:l6e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u6e{constructor(e,n,i,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,i];const r="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=ze().getNumber("WEBGL_VERSION")===2?r:o,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h6e(t){const{inputs:e,backend:n,attrs:i}=t,{sortedSequence:s,values:r}=e,{side:o}=i,a=new u6e(s.shape[0],s.shape[1],r.shape[1],o),l=[[s.shape[1]]];return n.runWebGLProgram(a,[s,r],"int32",l)}const d6e={kernelName:eH,backendName:"webgl",kernelFunc:h6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f6e{constructor(e,n,i){this.variableNames=["c","a","b"],this.outputShape=n;let s,r;if(i>4)throw Error(`Where for rank ${i} is not yet supported`);if(i===1)r="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);s=l.join(),r=c.join()}const o=Si(i);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${r}));
        } else {
          setOutput(getB(${r}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p6e(t){const{inputs:e,backend:n}=t,{condition:i,t:s,e:r}=e,o=new f6e(i.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(o,[i,s,r],Ea(s.dtype,r.dtype))}const m6e={kernelName:lk,backendName:"webgl",kernelFunc:p6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g6e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${Ek};
  float scale = ${Tk};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,v6e=Gn({opSnippet:g6e}),y6e={kernelName:Fb,backendName:"webgl",kernelFunc:v6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b6e=X0+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,x6e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,w6e=Gn({opSnippet:b6e,packedOpSnippet:x6e,cpuKernelImpl:x3e}),_6e={kernelName:Vb,backendName:"webgl",kernelFunc:w6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S6e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,C6e=Gn({opSnippet:S6e}),k6e={kernelName:jb,backendName:"webgl",kernelFunc:C6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I6e=X0+`
  return sin(x);
`,N6e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Em}
  return result;
`,E6e=Gn({opSnippet:I6e,packedOpSnippet:N6e}),T6e={kernelName:Bb,backendName:"webgl",kernelFunc:E6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A6e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,R6e=Gn({opSnippet:A6e}),L6e={kernelName:zb,backendName:"webgl",kernelFunc:R6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P6e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,D6e=Gn({opSnippet:P6e}),$6e={kernelName:Wb,backendName:"webgl",kernelFunc:D6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O6e=t=>{const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{blockShape:r,paddings:o}=i;ce(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((v,b)=>v*b),l=[[0,0]];l.push(...o);for(let v=1+r.length;v<s.shape.length;++v)l.push([0,0]);const c=[],u=vY({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),h=nx(u.shape,r,a,!1),d=ix(h.length,r.length,!1),p=sx(u.shape,r,a,!1),m=gt({inputs:{x:u},backend:n,attrs:{shape:h}}),g=Co({inputs:{x:m},backend:n,attrs:{perm:d}}),y=gt({inputs:{x:g},backend:n,attrs:{shape:p}});return c.push(u),c.push(m),c.push(g),c.forEach(v=>n.disposeIntermediateTensorInfo(v)),y},M6e={kernelName:hk,backendName:"webgl",kernelFunc:O6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6e(t){const{inputs:e,backend:n}=t,{indices:i,values:s,denseShape:r,defaultValue:o}=e;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${r.shape}`);if(i.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(i.dataId),l=n.readSync(s.dataId),c=n.readSync(r.dataId),u=n.readSync(o.dataId)[0],[h,d,p,m,g]=_3e(a,i.shape,i.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(d,i.dtype,h),n.makeTensorInfo([d[0]],s.dtype,p),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([g.length],i.dtype,new Int32Array(g))]}const B6e={kernelName:tH,backendName:"webgl",kernelFunc:F6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z6e(t){const{inputs:e,backend:n}=t,{inputIndices:i,inputShape:s,newShape:r}=e;if(i.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const o=Array.from(n.readSync(s.dataId)),a=n.readSync(i.dataId),l=Array.from(n.readSync(r.dataId)),[c,u,h]=S3e(a,i.shape,i.dtype,o,l);return[n.makeTensorInfo(u,i.dtype,c),n.makeTensorInfo([h.length],r.dtype,new Int32Array(h))]}const j6e={kernelName:nH,backendName:"webgl",kernelFunc:z6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V6e(t){const{inputs:e,backend:n}=t,{data:i,indices:s,segmentIds:r}=e;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${r.shape}`);const o=n.readSync(i.dataId),a=n.readSync(s.dataId),l=n.readSync(r.dataId),[c,u]=VX(o,i.shape,i.dtype,a,l,!0);return n.makeTensorInfo(u,i.dtype,c)}const W6e={kernelName:iH,backendName:"webgl",kernelFunc:V6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U6e(t){const{inputs:e,backend:n}=t,{data:i,indices:s,segmentIds:r}=e;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${r.shape}`);const o=n.readSync(i.dataId),a=n.readSync(s.dataId),l=n.readSync(r.dataId),[c,u]=VX(o,i.shape,i.dtype,a,l);return n.makeTensorInfo(u,i.dtype,c)}const H6e={kernelName:sH,backendName:"webgl",kernelFunc:U6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G6e(t){const{inputs:e,backend:n,attrs:i}=t,{sparseIndices:s,sparseValues:r,defaultValue:o}=e,{outputShape:a}=i,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:d}=Sm(r,s,a),p=!1;if(r.dtype==="string"){const v=n.bufferSync(s),b=n.bufferSync(r),w=rf(n.readSync(o.dataId)[0]),S=b3e(v,b,a,d,u,c,l,h,w,p);return n.makeTensorInfo(a,S.dtype,S.values)}const m=new fD(c,l,s.shape.length,r.shape.length,h,[d,1],p),g=n.runWebGLProgram(m,[r,s,o],r.dtype),y=gt({inputs:{x:g},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(g),y}const q6e={kernelName:rH,backendName:"webgl",kernelFunc:G6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K6e(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{numOrSizeSplits:r,axis:o}=i,a=In(o,s.shape)[0],l=kP(s,r,a),c=s.shape.length,u=new Array(c).fill(0),h=s.shape.slice();return l.map(d=>{const p=[...h];p[a]=d;const m=Y0({inputs:{x:s},backend:n,attrs:{begin:u,size:p}});return u[a]+=d,m})}const X6e={kernelName:dk,backendName:"webgl",kernelFunc:K6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q6="return sqrt(x);",Y6e=Gn({opSnippet:Q6,packedOpSnippet:Q6,cpuKernelImpl:C3e}),Z6e={kernelName:Ub,backendName:"webgl",kernelFunc:Y6e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q6e="return x * x;",J6e=Gn({opSnippet:Q6e}),eBe={kernelName:c3,backendName:"webgl",kernelFunc:J6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J6="return (a - b) * (a - b);",tBe=Dr({opSnippet:J6,packedOpSnippet:J6}),nBe={kernelName:Hb,backendName:"webgl",kernelFunc:tBe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iBe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const r=n.readSync(s.dataId),o=Th(r),a=k3e(o,"string",i);return n.makeTensorInfo(s.shape,"string",a)}const sBe={kernelName:u3,backendName:"webgl",kernelFunc:iBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rBe({inputs:t,attrs:e,backend:n}){const{x:i}=t,s=zl+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,r=new hu(i.shape,s);return n.runWebGLProgram(r,[i],i.dtype)}const oBe={kernelName:Yb,backendName:"webgl",kernelFunc:rBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aBe{constructor(e,n,i){this.variableNames=["x"],this.outputShape=i;const s=i.length,r=Si(i.length),o=Si(i.length);let a="";if(s===1)a="coords * strides + begin";else{let l=0;a=i.map((c,u)=>(l++,i.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${r} begin = ${r}(${e});
      ${r} strides = ${r}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lBe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{begin:r,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=i,{finalShapeSparse:p,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:v,begin:b,end:w,strides:S}=aP(s.shape,r,o,a,l,c,u,h,d);let k;if(g)k=gt({inputs:{x:s},backend:n,attrs:{shape:m}});else if(y||v){ce(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const T=sP(b,w,S),E=Y0({inputs:{x:s},backend:n,attrs:{begin:b,size:T}});k=gt({inputs:{x:E},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(E)}else if(n.shouldExecuteOnCPU([s])){const E=n.readSync(s.dataId),O=kn(s.shape,s.dtype,E),F=I3e(p,O,S,b);k=n.makeTensorInfo(m,s.dtype,F.values)}else{const E=new aBe(b,S,p);k=n.runWebGLProgram(E,[s],s.dtype)}const I=gt({inputs:{x:k},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(k),I}const cBe={kernelName:h3,backendName:"webgl",kernelFunc:lBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uBe(t){const{inputs:e,backend:n,attrs:i}=t,{separator:s,nGramWidths:r,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=i,{data:u,dataSplits:h}=e,d=n.readSync(u.dataId),p=n.readSync(h.dataId),[m,g]=N3e(d,p,s,r,o,a,l,c);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(h.shape,"int32",g)]}const hBe={kernelName:oH,backendName:"webgl",kernelFunc:uBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dBe(t){const{inputs:e,backend:n,attrs:i}=t,{skipEmpty:s}=i,{input:r,delimiter:o}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(o.dataId)[0],[c,u,h]=E3e(a,l,s),d=u.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const fBe={kernelName:aH,backendName:"webgl",kernelFunc:dBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pBe(t){const{inputs:e,backend:n,attrs:i}=t,{numBuckets:s}=i,{input:r}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(r.dataId),a=T3e(o,s);return n.makeTensorInfo(r.shape,"int32",a)}const mBe={kernelName:lH,backendName:"webgl",kernelFunc:pBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gBe="return tan(x);",vBe=Gn({opSnippet:gBe}),yBe={kernelName:qb,backendName:"webgl",kernelFunc:vBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bBe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,xBe=Gn({opSnippet:bBe}),wBe={kernelName:Kb,backendName:"webgl",kernelFunc:xBe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Be(t){const{inputs:e,backend:n,attrs:i}=t,{tensor:s,indices:r,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=Sm(o,r,s.shape),d=[h/c,c];if(h===0)return n.makeTensorInfo(s.shape,r.dtype);const p=gt({inputs:{x:r},backend:n,attrs:{shape:[l,a]}}),m=gt({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),g=gt({inputs:{x:s},backend:n,attrs:{shape:d}}),y=new fD(l,a,p.shape.length,m.shape.length,u,d,!1,!0),v=n.runWebGLProgram(y,[m,p,g],g.dtype),b=gt({inputs:{x:v},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),b}const SBe={kernelName:JU,backendName:"webgl",kernelFunc:_Be};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CBe{constructor(e,n){this.variableNames=["A"];const i=new Array(e.length);for(let o=0;o<i.length;o++)i[o]=e[o]*n[o];this.outputShape=i,this.rank=i.length;const s=Si(this.rank),r=kBe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${r}));
      }
    `}}function kBe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],i=[];for(let s=0;s<t.length;s++)i.push(`imod(${n[s]}, ${t[s]})`);return i.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bY(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{reps:r}=i;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),c=s.dtype==="string"?l.map(d=>rf(d)):l,u=kn(s.shape,s.dtype,c),h=R3e(u,r);return n.makeTensorInfo(h.shape,h.dtype,h.values)}const o=new CBe(s.shape,r);return n.runWebGLProgram(o,[s],s.dtype)}const IBe={kernelName:Xb,backendName:"webgl",kernelFunc:bY};class NBe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class EBe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ip(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function eB(t){let e=1;for(;e<t;)e*=2;return e}function TBe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s}=e,{k:r,sorted:o}=i,a=ze().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ze().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([s])||u<a||r>l){const F=n.readSync(s.dataId),[R,$]=L3e(F,c,s.dtype,r,o);return[n.makeTensorInfo(R.shape,R.dtype,R.values),n.makeTensorInfo($.shape,$.dtype,$.values)]}if(r===0)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[s,yx({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const h=n.texData.get(s.dataId),d=h!==null&&h.isPacked,p=d?n.unpackTensor(s):s,g=He(c)/u,y=gt({inputs:{x:p},attrs:{shape:[g,u]},backend:n});d&&ip(n,p);const v=eB(r),b=eB(u);let w=null;const S=()=>w===null?[y,y]:[y,w],k=(F,R,$)=>{const U=S(),W=new NBe($),H=[[u],[w===null?1:0],[Number.NEGATIVE_INFINITY],[F],[R]],G=w;w=n.runWebGLProgram(W,U,"int32",H),ip(n,G)};for(let F=1;F<v;F*=2){const R=F*2;for(let $=F;$>=1;$/=2)k(R,$,[g,b])}for(let F=b;F>v;F/=2){const R=S(),$=new EBe([g,F/2]),W=[[u],[w===null?1:0],[v]],te=w;w=n.runWebGLProgram($,R,"int32",W),ip(n,te);const H=v/2,G=H*2;for(let B=H;B>=1;B/=2)k(G,B,w.shape)}let I=w;w=Y0({inputs:{x:w},backend:n,attrs:{begin:0,size:[g,r]}}),ip(n,I);let T=hY({inputs:{x:y,indices:w},backend:n,attrs:{axis:1,batchDims:1}});ip(n,y);const E=c.slice(0,-1);E.push(r),I=w,w=gt({inputs:{x:w},attrs:{shape:E},backend:n}),ip(n,I);const O=T;return T=gt({inputs:{x:T},attrs:{shape:E},backend:n}),ip(n,O),[T,w]}const ABe={kernelName:d3,backendName:"webgl",kernelFunc:TBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RBe{constructor(e,n,i,s,r,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=i==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${r});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${r});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LBe(t){const{inputs:e,backend:n,attrs:i}=t,{image:s,transforms:r}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=i,[u,h,d,p]=s.shape,[m,g]=c??[h,d],y=[u,m,g,p],v=new RBe(h,d,o,a,l,y);return n.runWebGLProgram(v,[s,r],"float32")}const PBe={kernelName:f3,backendName:"webgl",kernelFunc:LBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DBe(t){const{inputs:e,attrs:n,backend:i}=t,{axis:s}=n,{x:r}=e;mx(r,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=i.readSync(r.dataId),{outputValues:a,outputShape:l,indices:c}=P3e(o,s,r.shape,r.dtype);return[i.makeTensorInfo(l,r.dtype,a),i.makeTensorInfo([c.length],"int32",c)]}const $Be={kernelName:p3,backendName:"webgl",kernelFunc:DBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OBe(t){const{inputs:e,backend:n,attrs:i}=t,{value:s}=e;let{axis:r}=i;r<0&&(r+=s.shape.length);const o=s,a=o.shape.length,l=s.shape[r],c=new Array(a-1);let u=0;for(let g=0;g<a;g++)g!==r&&(c[u++]=o.shape[g]);const h=[],d=new Array(a).fill(0),p=o.shape.slice();p[r]=1;const m=new Array(l);for(let g=0;g<m.length;g++){d[r]=g;const y=Y0({inputs:{x:o},backend:n,attrs:{begin:d,size:p}}),v=gt({inputs:{x:y},backend:n,attrs:{shape:c}});m[g]=v,h.push(y)}return h.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const MBe={kernelName:pk,backendName:"webgl",kernelFunc:OBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FBe{constructor(e,n){this.variableNames=["x","segmentIds"];const i=e.windowSize,s=e.batchSize,r=e.inSize,o=e.numSegments,a=o*Math.ceil(r/i);this.outputShape=[s,a];const l="0.0",c="sumValue",u=Math.floor(i/4)*4,h=i%4,d=`
        sumValue += dot(values, segFilter);
    `;let p="";r%i>0&&(p=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `);let m="";r%i>0&&(m=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${i}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${h===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${h===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${h===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BBe(t){const{inputs:e,backend:n,attrs:i}=t,{x:s,segmentIds:r}=e,{numSegments:o}=i,a=s.shape.length,l=[];let c=0;const u=os([c],a);let h=s;u!=null&&(h=Co({inputs:{x:s},backend:n,attrs:{perm:u}}),l.push(h),c=Is(1,a)[0]);const d=tG(h.shape,c,o),p=He([h.shape[c]]),m=gt({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}});l.push(m);const g=v3(s.dtype),y=(S,k,I,T,E)=>{const O=S.shape[0],F=S.shape[1],R=eG(F,E),$={windowSize:R,inSize:F,batchSize:O,numSegments:E},U=new FBe($,k),W=n.compileAndRun(U,[S,I],T);if(l.push(W),W.shape[1]===E)return W;const te=yY({backend:n,attrs:{start:0,stop:E,step:1,dtype:"float32"}}),H=bY({inputs:{x:te},backend:n,attrs:{reps:[F/R]}});return l.push(te),l.push(H),y(W,k,H,T,E)},v=y(m,"unsortedSegmentSum",r,g,o),b=gt({inputs:{x:v},backend:n,attrs:{shape:d}});let w=b;if(u!=null){l.push(b);const S=Cf(u);w=Co({inputs:{x:w},backend:n,attrs:{perm:S}})}return l.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const zBe={kernelName:mk,backendName:"webgl",kernelFunc:BBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jBe=[CPe,IPe,TPe,LPe,DPe,MPe,BPe,jPe,HPe,qPe,YPe,JPe,nDe,oDe,cDe,hDe,fDe,vDe,bDe,wDe,kDe,LDe,DDe,FDe,zDe,GDe,KDe,QDe,aPe,t$e,o$e,u$e,g$e,b$e,w$e,S$e,k$e,T$e,L$e,$$e,M$e,B$e,j$e,U$e,G$e,Y$e,Q$e,tOe,sOe,oOe,uOe,pOe,yOe,wOe,COe,kOe,NOe,TOe,ROe,POe,$Oe,BOe,VOe,HOe,qOe,YOe,JOe,i4e,a4e,oPe,c4e,s$e,d4e,m4e,y4e,cPe,_4e,I4e,E4e,L4e,$4e,B4e,V4e,G4e,Y4e,J4e,tMe,rMe,aMe,cMe,fMe,mMe,vMe,bMe,wMe,kMe,TMe,PMe,jMe,dPe,HMe,KMe,ZMe,eFe,VDe,iFe,rFe,aFe,uFe,pFe,hPe,gFe,yFe,xFe,_Fe,SFe,WDe,MMe,IFe,AFe,DFe,pPe,FFe,jFe,HFe,KFe,QFe,e6e,i6e,o6e,c6e,d6e,m6e,y6e,_6e,k6e,T6e,L6e,ADe,BMe,$6e,M6e,B6e,j6e,W6e,H6e,q6e,X6e,Z6e,eBe,nBe,sBe,oBe,cBe,hBe,fBe,mBe,FMe,wPe,yBe,wBe,SBe,IBe,ABe,PBe,_Pe,$Be,MBe,zBe,sFe];for(const t of jBe)uH(t);/*!
 * chartjs-chart-matrix v2.0.1
 * https://chartjs-chart-matrix.pages.dev/
 * (c) 2023 Jukka Kurkela
 * Released under the MIT license
 */var VBe="2.0.1";class t1 extends Ll{initialize(){this.enableOptionSharing=!0,super.initialize()}update(e){const n=this,i=n._cachedMeta;n.updateElements(i.data,0,i.data.length,e)}updateElements(e,n,i,s){const r=this,o=s==="reset",{xScale:a,yScale:l}=r._cachedMeta,c=r.resolveDataElementOptions(n,s),u=r.getSharedOptions(s,e[n],c);for(let h=n;h<n+i;h++){const d=!o&&r.getParsed(h),p=o?a.getBasePixel():a.getPixelForValue(d.x),m=o?l.getBasePixel():l.getPixelForValue(d.y),g=r.resolveDataElementOptions(h,s),{width:y,height:v,anchorX:b,anchorY:w}=g,S={x:WBe(b,p,y),y:UBe(w,m,v),width:y,height:v,options:g};r.updateElement(e[h],h,S,s)}r.updateSharedOptions(u,s)}draw(){const e=this,n=e.getMeta().data||[];let i,s;for(i=0,s=n.length;i<s;++i)n[i].draw(e._ctx)}}ft(t1,"id","matrix"),ft(t1,"version",VBe),ft(t1,"defaults",{dataElementType:"matrix",animations:{numbers:{type:"number",properties:["x","y","width","height"]}}}),ft(t1,"overrides",{interaction:{mode:"nearest",intersect:!0},scales:{x:{type:"linear",offset:!0},y:{type:"linear",reverse:!0}}});function WBe(t,e,n){return t==="left"||t==="start"?e:t==="right"||t==="end"?e-n:e-n/2}function UBe(t,e,n){return t==="top"||t==="start"?e:t==="bottom"||t==="end"?e-n:e-n/2}function xY(t,e){const{x:n,y:i,width:s,height:r}=t.getProps(["x","y","width","height"],e);return{left:n,top:i,right:n+s,bottom:i+r}}function M2(t,e,n){return Math.max(Math.min(t,n),e)}function HBe(t,e,n){const i=t.options.borderWidth;let s,r,o,a;return Mn(i)?(s=+i.top||0,r=+i.right||0,o=+i.bottom||0,a=+i.left||0):s=r=o=a=+i||0,{t:M2(s,0,n),r:M2(r,0,e),b:M2(o,0,n),l:M2(a,0,e)}}function GBe(t){const e=xY(t),n=e.right-e.left,i=e.bottom-e.top,s=HBe(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b}}}function BN(t,e,n,i){const s=e===null,r=n===null,o=!t||s&&r?!1:xY(t,i);return o&&(s||e>=o.left&&e<=o.right)&&(r||n>=o.top&&n<=o.bottom)}class NT extends Au{constructor(e){super(),this.options=void 0,this.width=void 0,this.height=void 0,e&&Object.assign(this,e)}draw(e){const n=this.options,{inner:i,outer:s}=GBe(this),r=Ud(n.borderRadius);e.save(),s.w!==i.w||s.h!==i.h?(e.beginPath(),Wd(e,{x:s.x,y:s.y,w:s.w,h:s.h,radius:r}),Wd(e,{x:i.x,y:i.y,w:i.w,h:i.h,radius:r}),e.fillStyle=n.backgroundColor,e.fill(),e.fillStyle=n.borderColor,e.fill("evenodd")):(e.beginPath(),Wd(e,{x:i.x,y:i.y,w:i.w,h:i.h,radius:r}),e.fillStyle=n.backgroundColor,e.fill()),e.restore()}inRange(e,n,i){return BN(this,e,n,i)}inXRange(e,n){return BN(this,e,null,n)}inYRange(e,n){return BN(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,width:s,height:r}=this.getProps(["x","y","width","height"],e);return{x:n+s/2,y:i+r/2}}tooltipPosition(){return this.getCenterPoint()}getRange(e){return e==="x"?this.width/2:this.height/2}}ft(NT,"id","matrix"),ft(NT,"defaults",{backgroundColor:void 0,borderColor:void 0,borderWidth:void 0,borderRadius:0,anchorX:"center",anchorY:"center",width:20,height:20});const qBe="modulepreload",KBe=function(t){return"/water_quality_system/"+t},tB={},ET=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=KBe(l),l in tB)return;tB[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":qBe,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((d,p)=>{h.addEventListener("load",d),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};var bo=Uint8Array,Ka=Uint16Array,pD=Int32Array,qk=new bo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Kk=new bo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),TT=new bo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wY=function(t,e){for(var n=new Ka(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var s=new pD(n[30]),i=1;i<30;++i)for(var r=n[i];r<n[i+1];++r)s[r]=r-n[i]<<5|i;return{b:n,r:s}},_Y=wY(qk,2),SY=_Y.b,AT=_Y.r;SY[28]=258,AT[258]=28;var CY=wY(Kk,0),XBe=CY.b,nB=CY.r,RT=new Ka(32768);for(var qi=0;qi<32768;++qi){var od=(qi&43690)>>1|(qi&21845)<<1;od=(od&52428)>>2|(od&13107)<<2,od=(od&61680)>>4|(od&3855)<<4,RT[qi]=((od&65280)>>8|(od&255)<<8)>>1}var Su=function(t,e,n){for(var i=t.length,s=0,r=new Ka(e);s<i;++s)t[s]&&++r[t[s]-1];var o=new Ka(e);for(s=1;s<e;++s)o[s]=o[s-1]+r[s-1]<<1;var a;if(n){a=new Ka(1<<e);var l=15-e;for(s=0;s<i;++s)if(t[s])for(var c=s<<4|t[s],u=e-t[s],h=o[t[s]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)a[RT[h]>>l]=c}else for(a=new Ka(i),s=0;s<i;++s)t[s]&&(a[s]=RT[o[t[s]-1]++]>>15-t[s]);return a},hf=new bo(288);for(var qi=0;qi<144;++qi)hf[qi]=8;for(var qi=144;qi<256;++qi)hf[qi]=9;for(var qi=256;qi<280;++qi)hf[qi]=7;for(var qi=280;qi<288;++qi)hf[qi]=8;var Ry=new bo(32);for(var qi=0;qi<32;++qi)Ry[qi]=5;var YBe=Su(hf,9,0),ZBe=Su(hf,9,1),QBe=Su(Ry,5,0),JBe=Su(Ry,5,1),zN=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},sc=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&n},jN=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},mD=function(t){return(t+7)/8|0},kY=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new bo(t.subarray(e,n))},eze=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],lc=function(t,e,n){var i=new Error(e||eze[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,lc),!n)throw i;return i},tze=function(t,e,n,i){var s=t.length,r=0;if(!s||e.f&&!e.l)return n||new bo(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new bo(s*3));var c=function(Ne){var Fe=n.length;if(Ne>Fe){var qe=new bo(Math.max(Fe*2,Ne));qe.set(n),n=qe}},u=e.f||0,h=e.p||0,d=e.b||0,p=e.l,m=e.d,g=e.m,y=e.n,v=s*8;do{if(!p){u=sc(t,h,1);var b=sc(t,h+1,3);if(h+=3,b)if(b==1)p=ZBe,m=JBe,g=9,y=5;else if(b==2){var I=sc(t,h,31)+257,T=sc(t,h+10,15)+4,E=I+sc(t,h+5,31)+1;h+=14;for(var O=new bo(E),F=new bo(19),R=0;R<T;++R)F[TT[R]]=sc(t,h+R*3,7);h+=T*3;for(var $=zN(F),U=(1<<$)-1,W=Su(F,$,1),R=0;R<E;){var te=W[sc(t,h,U)];h+=te&15;var w=te>>4;if(w<16)O[R++]=w;else{var H=0,G=0;for(w==16?(G=3+sc(t,h,3),h+=2,H=O[R-1]):w==17?(G=3+sc(t,h,7),h+=3):w==18&&(G=11+sc(t,h,127),h+=7);G--;)O[R++]=H}}var B=O.subarray(0,I),Y=O.subarray(I);g=zN(B),y=zN(Y),p=Su(B,g,1),m=Su(Y,y,1)}else lc(1);else{var w=mD(h)+4,S=t[w-4]|t[w-3]<<8,k=w+S;if(k>s){l&&lc(0);break}a&&c(d+S),n.set(t.subarray(w,k),d),e.b=d+=S,e.p=h=k*8,e.f=u;continue}if(h>v){l&&lc(0);break}}a&&c(d+131072);for(var ne=(1<<g)-1,le=(1<<y)-1,M=h;;M=h){var H=p[jN(t,h)&ne],j=H>>4;if(h+=H&15,h>v){l&&lc(0);break}if(H||lc(2),j<256)n[d++]=j;else if(j==256){M=h,p=null;break}else{var q=j-254;if(j>264){var R=j-257,X=qk[R];q=sc(t,h,(1<<X)-1)+SY[R],h+=X}var Z=m[jN(t,h)&le],ue=Z>>4;Z||lc(3),h+=Z&15;var Y=XBe[ue];if(ue>3){var X=Kk[ue];Y+=jN(t,h)&(1<<X)-1,h+=X}if(h>v){l&&lc(0);break}a&&c(d+131072);var fe=d+q;if(d<Y){var me=r-Y,Pe=Math.min(Y,fe);for(me+d<0&&lc(3);d<Pe;++d)n[d]=i[me+d]}for(;d<fe;++d)n[d]=n[d-Y]}}e.l=p,e.p=M,e.b=d,e.f=u,p&&(u=1,e.m=g,e.d=m,e.n=y)}while(!u);return d!=n.length&&o?kY(n,0,d):n.subarray(0,d)},Gu=function(t,e,n){n<<=e&7;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8},Dv=function(t,e,n){n<<=e&7;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8,t[i+2]|=n>>16},VN=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var s=n.length,r=n.slice();if(!s)return{t:NY,l:0};if(s==1){var o=new bo(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(k,I){return k.f-I.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,h=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=s-1;)a=n[n[c].f<n[h].f?c++:h++],l=n[c!=u&&n[c].f<n[h].f?c++:h++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var d=r[0].s,i=1;i<s;++i)r[i].s>d&&(d=r[i].s);var p=new Ka(d+1),m=LT(n[u-1],p,0);if(m>e){var i=0,g=0,y=m-e,v=1<<y;for(r.sort(function(I,T){return p[T.s]-p[I.s]||I.f-T.f});i<s;++i){var b=r[i].s;if(p[b]>e)g+=v-(1<<m-p[b]),p[b]=e;else break}for(g>>=y;g>0;){var w=r[i].s;p[w]<e?g-=1<<e-p[w]++-1:++i}for(;i>=0&&g;--i){var S=r[i].s;p[S]==e&&(--p[S],++g)}m=e}return{t:new bo(p),l:m}},LT=function(t,e,n){return t.s==-1?Math.max(LT(t.l,e,n+1),LT(t.r,e,n+1)):e[t.s]=n},iB=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ka(++e),i=0,s=t[0],r=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==s&&a!=e)++r;else{if(!s&&r>2){for(;r>138;r-=138)o(32754);r>2&&(o(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(o(s),--r;r>6;r-=6)o(8304);r>2&&(o(r-3<<5|8208),r=0)}for(;r--;)o(s);r=1,s=t[a]}return{c:n.subarray(0,i),n:e}},$v=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},IY=function(t,e,n){var i=n.length,s=mD(e+2);t[s]=i&255,t[s+1]=i>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var r=0;r<i;++r)t[s+r+4]=n[r];return(s+4+i)*8},sB=function(t,e,n,i,s,r,o,a,l,c,u){Gu(e,u++,n),++s[256];for(var h=VN(s,15),d=h.t,p=h.l,m=VN(r,15),g=m.t,y=m.l,v=iB(d),b=v.c,w=v.n,S=iB(g),k=S.c,I=S.n,T=new Ka(19),E=0;E<b.length;++E)++T[b[E]&31];for(var E=0;E<k.length;++E)++T[k[E]&31];for(var O=VN(T,7),F=O.t,R=O.l,$=19;$>4&&!F[TT[$-1]];--$);var U=c+5<<3,W=$v(s,hf)+$v(r,Ry)+o,te=$v(s,d)+$v(r,g)+o+14+3*$+$v(T,F)+2*T[16]+3*T[17]+7*T[18];if(l>=0&&U<=W&&U<=te)return IY(e,u,t.subarray(l,l+c));var H,G,B,Y;if(Gu(e,u,1+(te<W)),u+=2,te<W){H=Su(d,p,0),G=d,B=Su(g,y,0),Y=g;var ne=Su(F,R,0);Gu(e,u,w-257),Gu(e,u+5,I-1),Gu(e,u+10,$-4),u+=14;for(var E=0;E<$;++E)Gu(e,u+3*E,F[TT[E]]);u+=3*$;for(var le=[b,k],M=0;M<2;++M)for(var j=le[M],E=0;E<j.length;++E){var q=j[E]&31;Gu(e,u,ne[q]),u+=F[q],q>15&&(Gu(e,u,j[E]>>5&127),u+=j[E]>>12)}}else H=YBe,G=hf,B=QBe,Y=Ry;for(var E=0;E<a;++E){var X=i[E];if(X>255){var q=X>>18&31;Dv(e,u,H[q+257]),u+=G[q+257],q>7&&(Gu(e,u,X>>23&31),u+=qk[q]);var Z=X&31;Dv(e,u,B[Z]),u+=Y[Z],Z>3&&(Dv(e,u,X>>5&8191),u+=Kk[Z])}else Dv(e,u,H[X]),u+=G[X]}return Dv(e,u,H[256]),u+G[256]},nze=new pD([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),NY=new bo(0),ize=function(t,e,n,i,s,r){var o=r.z||t.length,a=new bo(i+o+5*(1+Math.ceil(o/7e3))+s),l=a.subarray(i,a.length-s),c=r.l,u=(r.r||0)&7;if(e){u&&(l[0]=r.r>>3);for(var h=nze[e-1],d=h>>13,p=h&8191,m=(1<<n)-1,g=r.p||new Ka(32768),y=r.h||new Ka(m+1),v=Math.ceil(n/3),b=2*v,w=function(Qe){return(t[Qe]^t[Qe+1]<<v^t[Qe+2]<<b)&m},S=new pD(25e3),k=new Ka(288),I=new Ka(32),T=0,E=0,O=r.i||0,F=0,R=r.w||0,$=0;O+2<o;++O){var U=w(O),W=O&32767,te=y[U];if(g[W]=te,y[U]=W,R<=O){var H=o-O;if((T>7e3||F>24576)&&(H>423||!c)){u=sB(t,l,0,S,k,I,E,F,$,O-$,u),F=T=E=0,$=O;for(var G=0;G<286;++G)k[G]=0;for(var G=0;G<30;++G)I[G]=0}var B=2,Y=0,ne=p,le=W-te&32767;if(H>2&&U==w(O-le))for(var M=Math.min(d,H)-1,j=Math.min(32767,O),q=Math.min(258,H);le<=j&&--ne&&W!=te;){if(t[O+B]==t[O+B-le]){for(var X=0;X<q&&t[O+X]==t[O+X-le];++X);if(X>B){if(B=X,Y=le,X>M)break;for(var Z=Math.min(le,X-2),ue=0,G=0;G<Z;++G){var fe=O-le+G&32767,me=g[fe],Pe=fe-me&32767;Pe>ue&&(ue=Pe,te=fe)}}}W=te,te=g[W],le+=W-te&32767}if(Y){S[F++]=268435456|AT[B]<<18|nB[Y];var Ne=AT[B]&31,Fe=nB[Y]&31;E+=qk[Ne]+Kk[Fe],++k[257+Ne],++I[Fe],R=O+B,++T}else S[F++]=t[O],++k[t[O]]}}for(O=Math.max(O,R);O<o;++O)S[F++]=t[O],++k[t[O]];u=sB(t,l,c,S,k,I,E,F,$,O-$,u),c||(r.r=u&7|l[u/8|0]<<3,u-=7,r.h=y,r.p=g,r.i=O,r.w=R)}else{for(var O=r.w||0;O<o+c;O+=65535){var qe=O+65535;qe>=o&&(l[u/8|0]=c,qe=o),u=IY(l,u+1,t.subarray(O,qe))}r.i=o}return kY(a,0,i+mD(u)+s)},EY=function(){var t=1,e=0;return{p:function(n){for(var i=t,s=e,r=n.length|0,o=0;o!=r;){for(var a=Math.min(o+2655,r);o<a;++o)s+=i+=n[o];i=(i&65535)+15*(i>>16),s=(s&65535)+15*(s>>16)}t=i,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},sze=function(t,e,n,i,s){if(!s&&(s={l:1},e.dictionary)){var r=e.dictionary.subarray(-32768),o=new bo(r.length+t.length);o.set(r),o.set(t,r.length),t=o,s.w=r.length}return ize(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,i,s)},TY=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},rze=function(t,e){var n=e.level,i=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=i<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=EY();s.p(e.dictionary),TY(t,2,s.d())}},oze=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&lc(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&lc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function PT(t,e){e||(e={});var n=EY();n.p(t);var i=sze(t,e,e.dictionary?6:2,4);return rze(i,e),TY(i,i.length-4,n.d()),i}function aze(t,e){return tze(t.subarray(oze(t,e),-4),{i:2},e,e)}var lze=typeof TextDecoder<"u"&&new TextDecoder,cze=0;try{lze.decode(NY,{stream:!0}),cze=1}catch{}var sn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function WN(){sn.console&&typeof sn.console.log=="function"&&sn.console.log.apply(sn.console,arguments)}var Li={log:WN,warn:function(t){sn.console&&(typeof sn.console.warn=="function"?sn.console.warn.apply(sn.console,arguments):WN.call(null,arguments))},error:function(t){sn.console&&(typeof sn.console.error=="function"?sn.console.error.apply(sn.console,arguments):WN(t))}};function UN(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){dp(i.response,e,n)},i.onerror=function(){Li.error("could not download file")},i.send()}function rB(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function F2(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var I1,DT,dp=sn.saveAs||((typeof window>"u"?"undefined":qn(window))!=="object"||window!==sn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var i=sn.URL||sn.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?rB(s.href)?UN(t,e,n):F2(s,s.target="_blank"):F2(s)):(s.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(s.href)},4e4),setTimeout(function(){F2(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(rB(t))UN(t,e,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){F2(i)})}else navigator.msSaveOrOpenBlob(function(s,r){return r===void 0?r={autoBom:!1}:qn(r)!=="object"&&(Li.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,n),e)}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return UN(t,e,n);var s=t.type==="application/octet-stream",r=/constructor/i.test(sn.HTMLElement)||sn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&r)&&(typeof FileReader>"u"?"undefined":qn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=u:location=u,i=null},a.readAsDataURL(t)}else{var l=sn.URL||sn.webkitURL,c=l.createObjectURL(t);i?i.location=c:location.href=c,i=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function AY(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],i=0;i<n.length;i++){var s=n[i].re,r=n[i].process,o=s.exec(t);o&&(e=r(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function HN(t,e){var n=t[0],i=t[1],s=t[2],r=t[3];n=ao(n,i,s,r,e[0],7,-680876936),r=ao(r,n,i,s,e[1],12,-389564586),s=ao(s,r,n,i,e[2],17,606105819),i=ao(i,s,r,n,e[3],22,-1044525330),n=ao(n,i,s,r,e[4],7,-176418897),r=ao(r,n,i,s,e[5],12,1200080426),s=ao(s,r,n,i,e[6],17,-1473231341),i=ao(i,s,r,n,e[7],22,-45705983),n=ao(n,i,s,r,e[8],7,1770035416),r=ao(r,n,i,s,e[9],12,-1958414417),s=ao(s,r,n,i,e[10],17,-42063),i=ao(i,s,r,n,e[11],22,-1990404162),n=ao(n,i,s,r,e[12],7,1804603682),r=ao(r,n,i,s,e[13],12,-40341101),s=ao(s,r,n,i,e[14],17,-1502002290),n=lo(n,i=ao(i,s,r,n,e[15],22,1236535329),s,r,e[1],5,-165796510),r=lo(r,n,i,s,e[6],9,-1069501632),s=lo(s,r,n,i,e[11],14,643717713),i=lo(i,s,r,n,e[0],20,-373897302),n=lo(n,i,s,r,e[5],5,-701558691),r=lo(r,n,i,s,e[10],9,38016083),s=lo(s,r,n,i,e[15],14,-660478335),i=lo(i,s,r,n,e[4],20,-405537848),n=lo(n,i,s,r,e[9],5,568446438),r=lo(r,n,i,s,e[14],9,-1019803690),s=lo(s,r,n,i,e[3],14,-187363961),i=lo(i,s,r,n,e[8],20,1163531501),n=lo(n,i,s,r,e[13],5,-1444681467),r=lo(r,n,i,s,e[2],9,-51403784),s=lo(s,r,n,i,e[7],14,1735328473),n=co(n,i=lo(i,s,r,n,e[12],20,-1926607734),s,r,e[5],4,-378558),r=co(r,n,i,s,e[8],11,-2022574463),s=co(s,r,n,i,e[11],16,1839030562),i=co(i,s,r,n,e[14],23,-35309556),n=co(n,i,s,r,e[1],4,-1530992060),r=co(r,n,i,s,e[4],11,1272893353),s=co(s,r,n,i,e[7],16,-155497632),i=co(i,s,r,n,e[10],23,-1094730640),n=co(n,i,s,r,e[13],4,681279174),r=co(r,n,i,s,e[0],11,-358537222),s=co(s,r,n,i,e[3],16,-722521979),i=co(i,s,r,n,e[6],23,76029189),n=co(n,i,s,r,e[9],4,-640364487),r=co(r,n,i,s,e[12],11,-421815835),s=co(s,r,n,i,e[15],16,530742520),n=uo(n,i=co(i,s,r,n,e[2],23,-995338651),s,r,e[0],6,-198630844),r=uo(r,n,i,s,e[7],10,1126891415),s=uo(s,r,n,i,e[14],15,-1416354905),i=uo(i,s,r,n,e[5],21,-57434055),n=uo(n,i,s,r,e[12],6,1700485571),r=uo(r,n,i,s,e[3],10,-1894986606),s=uo(s,r,n,i,e[10],15,-1051523),i=uo(i,s,r,n,e[1],21,-2054922799),n=uo(n,i,s,r,e[8],6,1873313359),r=uo(r,n,i,s,e[15],10,-30611744),s=uo(s,r,n,i,e[6],15,-1560198380),i=uo(i,s,r,n,e[13],21,1309151649),n=uo(n,i,s,r,e[4],6,-145523070),r=uo(r,n,i,s,e[11],10,-1120210379),s=uo(s,r,n,i,e[2],15,718787259),i=uo(i,s,r,n,e[9],21,-343485551),t[0]=Td(n,t[0]),t[1]=Td(i,t[1]),t[2]=Td(s,t[2]),t[3]=Td(r,t[3])}function Xk(t,e,n,i,s,r){return e=Td(Td(e,t),Td(i,r)),Td(e<<s|e>>>32-s,n)}function ao(t,e,n,i,s,r,o){return Xk(e&n|~e&i,t,e,s,r,o)}function lo(t,e,n,i,s,r,o){return Xk(e&i|n&~i,t,e,s,r,o)}function co(t,e,n,i,s,r,o){return Xk(e^n^i,t,e,s,r,o)}function uo(t,e,n,i,s,r,o){return Xk(n^(e|~i),t,e,s,r,o)}function RY(t){var e,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)HN(i,uze(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(HN(i,s),e=0;e<16;e++)s[e]=0;return s[14]=8*n,HN(i,s),i}function uze(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}I1=sn.atob.bind(sn),DT=sn.btoa.bind(sn);var oB="0123456789abcdef".split("");function hze(t){for(var e="",n=0;n<4;n++)e+=oB[t>>8*n+4&15]+oB[t>>8*n&15];return e}function dze(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function $T(t){return RY(t).map(dze).join("")}var fze=function(t){for(var e=0;e<t.length;e++)t[e]=hze(t[e]);return t.join("")}(RY("hello"))!="5d41402abc4b2a76b9719d911017c592";function Td(t,e){if(fze){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function OT(t,e){var n,i,s,r;if(t!==n){for(var o=(s=t,r=1+(256/t.length>>0),new Array(r+1).join(s)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}n=t,i=a}else a=i;var h=e.length,d=0,p=0,m="";for(l=0;l<h;l++)p=(p+(u=a[d=(d+1)%256]))%256,a[d]=a[p],a[p]=u,o=a[(a[d]+a[p])%256],m+=String.fromCharCode(e.charCodeAt(l)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var aB={print:4,modify:8,copy:16,"annot-forms":32};function dg(t,e,n,i){this.v=1,this.r=2;var s=192;t.forEach(function(a){if(aB.perm!==void 0)throw new Error("Invalid permission: "+a);s+=aB[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var r=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,o),this.P=-(1+(255^s)),this.encryptionKey=$T(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=OT(this.encryptionKey,this.padding)}function fg(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,i=0;i<n;i++){var s=t.charCodeAt(i);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[i]}return e}function lB(t){if(qn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,i,s){if(s=s||!1,typeof n!="string"||typeof i!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var r=Math.random().toString(35);return e[n][r]=[i,!!s],r},this.unsubscribe=function(n){for(var i in e)if(e[i][n])return delete e[i][n],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),s=[];for(var r in e[n]){var o=e[n][r];try{o[0].apply(t,i)}catch(a){sn.console&&Li.error("jsPDF PubSub Error",a.message,a)}o[1]&&s.push(r)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Ly(t){if(!(this instanceof Ly))return new Ly(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function LY(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function vd(t,e,n,i,s){if(!(this instanceof vd))return new vd(t,e,n,i,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,LY.call(this,i,s)}function Ep(t,e,n,i,s){if(!(this instanceof Ep))return new Ep(t,e,n,i,s);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,LY.call(this,i,s)}function Xt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],s=arguments[2],r=arguments[3],o=[],a=1,l=16,c="S",u=null;qn(t=t||{})==="object"&&(n=t.orientation,i=t.unit||i,s=t.format||s,r=t.compress||t.compressPdf||r,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(r===!0?["FlateEncode"]:o),i=i||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,d={},p={internal:{},__private__:{}};p.__private__.PubSub=lB;var m="1.3",g=p.__private__.getPdfVersion=function(){return m};p.__private__.setPdfVersion=function(A){m=A};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return y};var v=p.__private__.getPageFormat=function(A){return y[A]};s=s||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},w=b.COMPAT;function S(){this.saveGraphicsState(),he(new ge(mt,0,0,-mt,0,Vc()*mt).toString()+" cm"),this.setFontSize(this.getFontSize()/mt),c="n",w=b.ADVANCED}function k(){this.restoreGraphicsState(),c="S",w=b.COMPAT}var I=p.__private__.combineFontStyleAndFontWeight=function(A,ee){if(A=="bold"&&ee=="normal"||A=="bold"&&ee==400||A=="normal"&&ee=="italic"||A=="bold"&&ee=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ee&&(A=ee==400||ee==="normal"?A==="italic"?"italic":"normal":ee!=700&&ee!=="bold"||A!=="normal"?(ee==700?"bold":ee)+""+A:"bold"),A};p.advancedAPI=function(A){var ee=w===b.COMPAT;return ee&&S.call(this),typeof A!="function"||(A(this),ee&&k.call(this)),this},p.compatAPI=function(A){var ee=w===b.ADVANCED;return ee&&k.call(this),typeof A!="function"||(A(this),ee&&S.call(this)),this},p.isAdvancedAPI=function(){return w===b.ADVANCED};var T,E=function(A){if(w!==b.ADVANCED)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=p.roundToPrecision=p.__private__.roundToPrecision=function(A,ee){var pe=e||ee;if(isNaN(A)||isNaN(pe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(pe).replace(/0+$/,"")};T=p.hpf=p.__private__.hpf=typeof l=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return O(A,l)}:l==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return O(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return O(A,16)};var F=p.f2=p.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return O(A,2)},R=p.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return O(A,3)},$=p.scale=p.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return w===b.COMPAT?A*mt:w===b.ADVANCED?A:void 0},U=function(A){return w===b.COMPAT?Vc()-A:w===b.ADVANCED?A:void 0},W=function(A){return $(U(A))};p.__private__.setPrecision=p.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var te,H="00000000000000000000000000000000",G=p.__private__.getFileId=function(){return H},B=p.__private__.setFileId=function(A){return H=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():H.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Ts=new dg(u.userPermissions,u.userPassword,u.ownerPassword,H)),H};p.setFileId=function(A){return B(A),this},p.getFileId=function(){return G()};var Y=p.__private__.convertDateToPDFDate=function(A){var ee=A.getTimezoneOffset(),pe=ee<0?"+":"-",be=Math.floor(Math.abs(ee/60)),Le=Math.abs(ee%60),We=[pe,q(be),"'",q(Le),"'"].join("");return["D:",A.getFullYear(),q(A.getMonth()+1),q(A.getDate()),q(A.getHours()),q(A.getMinutes()),q(A.getSeconds()),We].join("")},ne=p.__private__.convertPDFDateToDate=function(A){var ee=parseInt(A.substr(2,4),10),pe=parseInt(A.substr(6,2),10)-1,be=parseInt(A.substr(8,2),10),Le=parseInt(A.substr(10,2),10),We=parseInt(A.substr(12,2),10),st=parseInt(A.substr(14,2),10);return new Date(ee,pe,be,Le,We,st,0)},le=p.__private__.setCreationDate=function(A){var ee;if(A===void 0&&(A=new Date),A instanceof Date)ee=Y(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ee=A}return te=ee},M=p.__private__.getCreationDate=function(A){var ee=te;return A==="jsDate"&&(ee=ne(te)),ee};p.setCreationDate=function(A){return le(A),this},p.getCreationDate=function(A){return M(A)};var j,q=p.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},X=p.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},Z=0,ue=[],fe=[],me=0,Pe=[],Ne=[],Fe=!1,qe=fe,Qe=function(){Z=0,me=0,fe=[],ue=[],Pe=[],St=Ge(),vt=Ge()};p.__private__.setCustomOutputDestination=function(A){Fe=!0,qe=A};var xe=function(A){Fe||(qe=A)};p.__private__.resetCustomOutputDestination=function(){Fe=!1,qe=fe};var he=p.__private__.out=function(A){return A=A.toString(),me+=A.length+1,qe.push(A),qe},ut=p.__private__.write=function(A){return he(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},ot=p.__private__.getArrayBuffer=function(A){for(var ee=A.length,pe=new ArrayBuffer(ee),be=new Uint8Array(pe);ee--;)be[ee]=A.charCodeAt(ee);return pe},Je=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Je};var it=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(A){return it=w===b.ADVANCED?A/mt:A,this};var ht,at=p.__private__.getFontSize=p.getFontSize=function(){return w===b.COMPAT?it:it*mt},wt=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(A){return wt=A,this},p.__private__.getR2L=p.getR2L=function(){return wt};var Rt,Ft=p.__private__.setZoomMode=function(A){var ee=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))ht=A;else if(isNaN(A)){if(ee.indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');ht=A}else ht=parseInt(A,10)};p.__private__.getZoomMode=function(){return ht};var pt,Ot=p.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');Rt=A};p.__private__.getPageMode=function(){return Rt};var Ht=p.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');pt=A};p.__private__.getLayoutMode=function(){return pt},p.__private__.setDisplayMode=p.setDisplayMode=function(A,ee,pe){return Ft(A),Ht(ee),Ot(pe),this};var Bt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(A){if(Object.keys(Bt).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Bt[A]},p.__private__.getDocumentProperties=function(){return Bt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(A){for(var ee in Bt)Bt.hasOwnProperty(ee)&&A[ee]&&(Bt[ee]=A[ee]);return this},p.__private__.setDocumentProperty=function(A,ee){if(Object.keys(Bt).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Bt[A]=ee};var nn,mt,di,gn,Bs,Vn={},ki={},Js=[],$n={},rl={},fi={},gr={},na=null,Ti=0,on=[],Wn=new lB(p),ia=t.hotfixes||[],Ji={},sa={},Qr=[],ge=function A(ee,pe,be,Le,We,st){if(!(this instanceof A))return new A(ee,pe,be,Le,We,st);isNaN(ee)&&(ee=1),isNaN(pe)&&(pe=0),isNaN(be)&&(be=0),isNaN(Le)&&(Le=1),isNaN(We)&&(We=0),isNaN(st)&&(st=0),this._matrix=[ee,pe,be,Le,We,st]};Object.defineProperty(ge.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(ge.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(ge.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(ge.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(ge.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(ge.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(ge.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(ge.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(ge.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(ge.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(ge.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(ge.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(ge.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ge.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ge.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ge.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ge.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(A)},ge.prototype.multiply=function(A){var ee=A.sx*this.sx+A.shy*this.shx,pe=A.sx*this.shy+A.shy*this.sy,be=A.shx*this.sx+A.sy*this.shx,Le=A.shx*this.shy+A.sy*this.sy,We=A.tx*this.sx+A.ty*this.shx+this.tx,st=A.tx*this.shy+A.ty*this.sy+this.ty;return new ge(ee,pe,be,Le,We,st)},ge.prototype.decompose=function(){var A=this.sx,ee=this.shy,pe=this.shx,be=this.sy,Le=this.tx,We=this.ty,st=Math.sqrt(A*A+ee*ee),xt=(A/=st)*pe+(ee/=st)*be;pe-=A*xt,be-=ee*xt;var At=Math.sqrt(pe*pe+be*be);return xt/=At,A*(be/=At)<ee*(pe/=At)&&(A=-A,ee=-ee,xt=-xt,st=-st),{scale:new ge(st,0,0,At,0,0),translate:new ge(1,0,0,1,Le,We),rotate:new ge(A,ee,-ee,A,0,0),skew:new ge(1,0,xt,1,0,0)}},ge.prototype.toString=function(A){return this.join(" ")},ge.prototype.inversed=function(){var A=this.sx,ee=this.shy,pe=this.shx,be=this.sy,Le=this.tx,We=this.ty,st=1/(A*be-ee*pe),xt=be*st,At=-ee*st,hn=-pe*st,cn=A*st;return new ge(xt,At,hn,cn,-xt*Le-hn*We,-At*Le-cn*We)},ge.prototype.applyToPoint=function(A){var ee=A.x*this.sx+A.y*this.shx+this.tx,pe=A.x*this.shy+A.y*this.sy+this.ty;return new zu(ee,pe)},ge.prototype.applyToRectangle=function(A){var ee=this.applyToPoint(A),pe=this.applyToPoint(new zu(A.x+A.w,A.y+A.h));return new aa(ee.x,ee.y,pe.x-ee.x,pe.y-ee.y)},ge.prototype.clone=function(){var A=this.sx,ee=this.shy,pe=this.shx,be=this.sy,Le=this.tx,We=this.ty;return new ge(A,ee,pe,be,Le,We)},p.Matrix=ge;var Ee=p.matrixMult=function(A,ee){return ee.multiply(A)},Be=new ge(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Be;var Ke=function(A,ee){if(!rl[A]){var pe=(ee instanceof vd?"Sh":"P")+(Object.keys($n).length+1).toString(10);ee.id=pe,rl[A]=pe,$n[pe]=ee,Wn.publish("addPattern",ee)}};p.ShadingPattern=vd,p.TilingPattern=Ep,p.addShadingPattern=function(A,ee){return E("addShadingPattern()"),Ke(A,ee),this},p.beginTilingPattern=function(A){E("beginTilingPattern()"),Bf(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},p.endTilingPattern=function(A,ee){E("endTilingPattern()"),ee.stream=Ne[j].join(`
`),Ke(A,ee),Wn.publish("endTilingPattern",ee),Qr.pop().restore()};var lt=p.__private__.newObject=function(){var A=Ge();return Mt(A,!0),A},Ge=p.__private__.newObjectDeferred=function(){return Z++,ue[Z]=function(){return me},Z},Mt=function(A,ee){return ee=typeof ee=="boolean"&&ee,ue[A]=me,ee&&he(A+" 0 obj"),A},Nt=p.__private__.newAdditionalObject=function(){var A={objId:Ge(),content:""};return Pe.push(A),A},St=Ge(),vt=Ge(),Et=p.__private__.decodeColorString=function(A){var ee=A.split(" ");if(ee.length!==2||ee[1]!=="g"&&ee[1]!=="G")ee.length===5&&(ee[4]==="k"||ee[4]==="K")&&(ee=[(1-ee[0])*(1-ee[3]),(1-ee[1])*(1-ee[3]),(1-ee[2])*(1-ee[3]),"r"]);else{var pe=parseFloat(ee[0]);ee=[pe,pe,pe,"r"]}for(var be="#",Le=0;Le<3;Le++)be+=("0"+Math.floor(255*parseFloat(ee[Le])).toString(16)).slice(-2);return be},Zt=p.__private__.encodeColorString=function(A){var ee;typeof A=="string"&&(A={ch1:A});var pe=A.ch1,be=A.ch2,Le=A.ch3,We=A.ch4,st=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof pe=="string"&&pe.charAt(0)!=="#"){var xt=new AY(pe);if(xt.ok)pe=xt.toHex();else if(!/^\d*\.?\d*$/.test(pe))throw new Error('Invalid color "'+pe+'" passed to jsPDF.encodeColorString.')}if(typeof pe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(pe)&&(pe="#"+pe[1]+pe[1]+pe[2]+pe[2]+pe[3]+pe[3]),typeof pe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(pe)){var At=parseInt(pe.substr(1),16);pe=At>>16&255,be=At>>8&255,Le=255&At}if(be===void 0||We===void 0&&pe===be&&be===Le)if(typeof pe=="string")ee=pe+" "+st[0];else switch(A.precision){case 2:ee=F(pe/255)+" "+st[0];break;case 3:default:ee=R(pe/255)+" "+st[0]}else if(We===void 0||qn(We)==="object"){if(We&&!isNaN(We.a)&&We.a===0)return ee=["1.","1.","1.",st[1]].join(" ");if(typeof pe=="string")ee=[pe,be,Le,st[1]].join(" ");else switch(A.precision){case 2:ee=[F(pe/255),F(be/255),F(Le/255),st[1]].join(" ");break;default:case 3:ee=[R(pe/255),R(be/255),R(Le/255),st[1]].join(" ")}}else if(typeof pe=="string")ee=[pe,be,Le,We,st[2]].join(" ");else switch(A.precision){case 2:ee=[F(pe),F(be),F(Le),F(We),st[2]].join(" ");break;case 3:default:ee=[R(pe),R(be),R(Le),R(We),st[2]].join(" ")}return ee},Qt=p.__private__.getFilters=function(){return o},Xn=p.__private__.putStream=function(A){var ee=(A=A||{}).data||"",pe=A.filters||Qt(),be=A.alreadyAppliedFilters||[],Le=A.addLength1||!1,We=ee.length,st=A.objectId,xt=function(br){return br};if(u!==null&&st===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(xt=Ts.encryptor(st,0));var At={};pe===!0&&(pe=["FlateEncode"]);var hn=A.additionalKeyValues||[],cn=(At=Xt.API.processDataByFilters!==void 0?Xt.API.processDataByFilters(ee,pe):{data:ee,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(At.data.length!==0&&(hn.push({key:"Length",value:At.data.length}),Le===!0&&hn.push({key:"Length1",value:We})),cn.length!=0)if(cn.split("/").length-1==1)hn.push({key:"Filter",value:cn});else{hn.push({key:"Filter",value:"["+cn+"]"});for(var Bn=0;Bn<hn.length;Bn+=1)if(hn[Bn].key==="DecodeParms"){for(var Ai=[],Oi=0;Oi<At.reverseChain.split("/").length-1;Oi+=1)Ai.push("null");Ai.push(hn[Bn].value),hn[Bn].value="["+Ai.join(" ")+"]"}}he("<<");for(var ms=0;ms<hn.length;ms++)he("/"+hn[ms].key+" "+hn[ms].value);he(">>"),At.data.length!==0&&(he("stream"),he(xt(At.data)),he("endstream"))},En=p.__private__.putPage=function(A){var ee=A.number,pe=A.data,be=A.objId,Le=A.contentsObjId;Mt(be,!0),he("<</Type /Page"),he("/Parent "+A.rootDictionaryObjId+" 0 R"),he("/Resources "+A.resourceDictionaryObjId+" 0 R"),he("/MediaBox ["+parseFloat(T(A.mediaBox.bottomLeftX))+" "+parseFloat(T(A.mediaBox.bottomLeftY))+" "+T(A.mediaBox.topRightX)+" "+T(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&he("/CropBox ["+T(A.cropBox.bottomLeftX)+" "+T(A.cropBox.bottomLeftY)+" "+T(A.cropBox.topRightX)+" "+T(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&he("/BleedBox ["+T(A.bleedBox.bottomLeftX)+" "+T(A.bleedBox.bottomLeftY)+" "+T(A.bleedBox.topRightX)+" "+T(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&he("/TrimBox ["+T(A.trimBox.bottomLeftX)+" "+T(A.trimBox.bottomLeftY)+" "+T(A.trimBox.topRightX)+" "+T(A.trimBox.topRightY)+"]"),A.artBox!==null&&he("/ArtBox ["+T(A.artBox.bottomLeftX)+" "+T(A.artBox.bottomLeftY)+" "+T(A.artBox.topRightX)+" "+T(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&he("/UserUnit "+A.userUnit),Wn.publish("putPage",{objId:be,pageContext:on[ee],pageNumber:ee,page:pe}),he("/Contents "+Le+" 0 R"),he(">>"),he("endobj");var We=pe.join(`
`);return w===b.ADVANCED&&(We+=`
Q`),Mt(Le,!0),Xn({data:We,filters:Qt(),objectId:Le}),he("endobj"),be},Sn=p.__private__.putPages=function(){var A,ee,pe=[];for(A=1;A<=Ti;A++)on[A].objId=Ge(),on[A].contentsObjId=Ge();for(A=1;A<=Ti;A++)pe.push(En({number:A,data:Ne[A],objId:on[A].objId,contentsObjId:on[A].contentsObjId,mediaBox:on[A].mediaBox,cropBox:on[A].cropBox,bleedBox:on[A].bleedBox,trimBox:on[A].trimBox,artBox:on[A].artBox,userUnit:on[A].userUnit,rootDictionaryObjId:St,resourceDictionaryObjId:vt}));Mt(St,!0),he("<</Type /Pages");var be="/Kids [";for(ee=0;ee<Ti;ee++)be+=pe[ee]+" 0 R ";he(be+"]"),he("/Count "+Ti),he(">>"),he("endobj"),Wn.publish("postPutPages")},oi=function(A){Wn.publish("putFont",{font:A,out:he,newObject:lt,putStream:Xn}),A.isAlreadyPutted!==!0&&(A.objectNumber=lt(),he("<<"),he("/Type /Font"),he("/BaseFont /"+fg(A.postScriptName)),he("/Subtype /Type1"),typeof A.encoding=="string"&&he("/Encoding /"+A.encoding),he("/FirstChar 32"),he("/LastChar 255"),he(">>"),he("endobj"))},Io=function(){for(var A in Vn)Vn.hasOwnProperty(A)&&(h===!1||h===!0&&d.hasOwnProperty(A))&&oi(Vn[A])},No=function(A){A.objectNumber=lt();var ee=[];ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Form"}),ee.push({key:"BBox",value:"["+[T(A.x),T(A.y),T(A.x+A.width),T(A.y+A.height)].join(" ")+"]"}),ee.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var pe=A.pages[1].join(`
`);Xn({data:pe,additionalKeyValues:ee,objectId:A.objectNumber}),he("endobj")},vr=function(){for(var A in Ji)Ji.hasOwnProperty(A)&&No(Ji[A])},zs=function(A,ee){var pe,be=[],Le=1/(ee-1);for(pe=0;pe<1;pe+=Le)be.push(pe);if(be.push(1),A[0].offset!=0){var We={offset:0,color:A[0].color};A.unshift(We)}if(A[A.length-1].offset!=1){var st={offset:1,color:A[A.length-1].color};A.push(st)}for(var xt="",At=0,hn=0;hn<be.length;hn++){for(pe=be[hn];pe>A[At+1].offset;)At++;var cn=A[At].offset,Bn=(pe-cn)/(A[At+1].offset-cn),Ai=A[At].color,Oi=A[At+1].color;xt+=X(Math.round((1-Bn)*Ai[0]+Bn*Oi[0]).toString(16))+X(Math.round((1-Bn)*Ai[1]+Bn*Oi[1]).toString(16))+X(Math.round((1-Bn)*Ai[2]+Bn*Oi[2]).toString(16))}return xt.trim()},Pu=function(A,ee){ee||(ee=21);var pe=lt(),be=zs(A.colors,ee),Le=[];Le.push({key:"FunctionType",value:"0"}),Le.push({key:"Domain",value:"[0.0 1.0]"}),Le.push({key:"Size",value:"["+ee+"]"}),Le.push({key:"BitsPerSample",value:"8"}),Le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Xn({data:be,additionalKeyValues:Le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pe}),he("endobj"),A.objectNumber=lt(),he("<< /ShadingType "+A.type),he("/ColorSpace /DeviceRGB");var We="/Coords ["+T(parseFloat(A.coords[0]))+" "+T(parseFloat(A.coords[1]))+" ";A.type===2?We+=T(parseFloat(A.coords[2]))+" "+T(parseFloat(A.coords[3])):We+=T(parseFloat(A.coords[2]))+" "+T(parseFloat(A.coords[3]))+" "+T(parseFloat(A.coords[4]))+" "+T(parseFloat(A.coords[5])),he(We+="]"),A.matrix&&he("/Matrix ["+A.matrix.toString()+"]"),he("/Function "+pe+" 0 R"),he("/Extend [true true]"),he(">>"),he("endobj")},jl=function(A,ee){var pe=Ge(),be=lt();ee.push({resourcesOid:pe,objectOid:be}),A.objectNumber=be;var Le=[];Le.push({key:"Type",value:"/Pattern"}),Le.push({key:"PatternType",value:"1"}),Le.push({key:"PaintType",value:"1"}),Le.push({key:"TilingType",value:"1"}),Le.push({key:"BBox",value:"["+A.boundingBox.map(T).join(" ")+"]"}),Le.push({key:"XStep",value:T(A.xStep)}),Le.push({key:"YStep",value:T(A.yStep)}),Le.push({key:"Resources",value:pe+" 0 R"}),A.matrix&&Le.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),Xn({data:A.stream,additionalKeyValues:Le,objectId:A.objectNumber}),he("endobj")},Jr=function(A){var ee;for(ee in $n)$n.hasOwnProperty(ee)&&($n[ee]instanceof vd?Pu($n[ee]):$n[ee]instanceof Ep&&jl($n[ee],A))},Vl=function(A){for(var ee in A.objectNumber=lt(),he("<<"),A)switch(ee){case"opacity":he("/ca "+F(A[ee]));break;case"stroke-opacity":he("/CA "+F(A[ee]))}he(">>"),he("endobj")},Dc=function(){var A;for(A in fi)fi.hasOwnProperty(A)&&Vl(fi[A])},yn=function(){for(var A in he("/XObject <<"),Ji)Ji.hasOwnProperty(A)&&Ji[A].objectNumber>=0&&he("/"+A+" "+Ji[A].objectNumber+" 0 R");Wn.publish("putXobjectDict"),he(">>")},ti=function(){Ts.oid=lt(),he("<<"),he("/Filter /Standard"),he("/V "+Ts.v),he("/R "+Ts.r),he("/U <"+Ts.toHexString(Ts.U)+">"),he("/O <"+Ts.toHexString(Ts.O)+">"),he("/P "+Ts.P),he(">>"),he("endobj")},ra=function(){for(var A in he("/Font <<"),Vn)Vn.hasOwnProperty(A)&&(h===!1||h===!0&&d.hasOwnProperty(A))&&he("/"+A+" "+Vn[A].objectNumber+" 0 R");he(">>")},ol=function(){if(Object.keys($n).length>0){for(var A in he("/Shading <<"),$n)$n.hasOwnProperty(A)&&$n[A]instanceof vd&&$n[A].objectNumber>=0&&he("/"+A+" "+$n[A].objectNumber+" 0 R");Wn.publish("putShadingPatternDict"),he(">>")}},Yn=function(A){if(Object.keys($n).length>0){for(var ee in he("/Pattern <<"),$n)$n.hasOwnProperty(ee)&&$n[ee]instanceof p.TilingPattern&&$n[ee].objectNumber>=0&&$n[ee].objectNumber<A&&he("/"+ee+" "+$n[ee].objectNumber+" 0 R");Wn.publish("putTilingPatternDict"),he(">>")}},vn=function(){if(Object.keys(fi).length>0){var A;for(A in he("/ExtGState <<"),fi)fi.hasOwnProperty(A)&&fi[A].objectNumber>=0&&he("/"+A+" "+fi[A].objectNumber+" 0 R");Wn.publish("putGStateDict"),he(">>")}},an=function(A){Mt(A.resourcesOid,!0),he("<<"),he("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ra(),ol(),Yn(A.objectOid),vn(),yn(),he(">>"),he("endobj")},Wl=function(){var A=[];Io(),Dc(),vr(),Jr(A),Wn.publish("putResources"),A.forEach(an),an({resourcesOid:vt,objectOid:Number.MAX_SAFE_INTEGER}),Wn.publish("postPutResources")},Ul=function(){Wn.publish("putAdditionalObjects");for(var A=0;A<Pe.length;A++){var ee=Pe[A];Mt(ee.objId,!0),he(ee.content),he("endobj")}Wn.publish("postPutAdditionalObjects")},Hl=function(A){ki[A.fontName]=ki[A.fontName]||{},ki[A.fontName][A.fontStyle]=A.id},Du=function(A,ee,pe,be,Le){var We={id:"F"+(Object.keys(Vn).length+1).toString(10),postScriptName:A,fontName:ee,fontStyle:pe,encoding:be,isStandardFont:Le||!1,metadata:{}};return Wn.publish("addFont",{font:We,instance:this}),Vn[We.id]=We,Hl(We),We.id},fn=function(A){for(var ee=0,pe=Je.length;ee<pe;ee++){var be=Du.call(this,A[ee][0],A[ee][1],A[ee][2],Je[ee][3],!0);h===!1&&(d[be]=!0);var Le=A[ee][0].split("-");Hl({id:be,fontName:Le[0],fontStyle:Le[1]||""})}Wn.publish("addFonts",{fonts:Vn,dictionary:ki})},Zn=function(A){return A.foo=function(){try{return A.apply(this,arguments)}catch(be){var ee=be.stack||"";~ee.indexOf(" at ")&&(ee=ee.split(" at ")[1]);var pe="Error in function "+ee.split(`
`)[0].split("<")[0]+": "+be.message;if(!sn.console)throw new Error(pe);sn.console.error(pe,be),sn.alert&&alert(pe)}},A.foo.bar=A,A.foo},$c=function(A,ee){var pe,be,Le,We,st,xt,At,hn,cn;if(Le=(ee=ee||{}).sourceEncoding||"Unicode",st=ee.outputEncoding,(ee.autoencode||st)&&Vn[nn].metadata&&Vn[nn].metadata[Le]&&Vn[nn].metadata[Le].encoding&&(We=Vn[nn].metadata[Le].encoding,!st&&Vn[nn].encoding&&(st=Vn[nn].encoding),!st&&We.codePages&&(st=We.codePages[0]),typeof st=="string"&&(st=We[st]),st)){for(At=!1,xt=[],pe=0,be=A.length;pe<be;pe++)(hn=st[A.charCodeAt(pe)])?xt.push(String.fromCharCode(hn)):xt.push(A[pe]),xt[pe].charCodeAt(0)>>8&&(At=!0);A=xt.join("")}for(pe=A.length;At===void 0&&pe!==0;)A.charCodeAt(pe-1)>>8&&(At=!0),pe--;if(!At)return A;for(xt=ee.noBOM?[]:[254,255],pe=0,be=A.length;pe<be;pe++){if((cn=(hn=A.charCodeAt(pe))>>8)>>8)throw new Error("Character at position "+pe+" of string '"+A+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");xt.push(cn),xt.push(hn-(cn<<8))}return String.fromCharCode.apply(void 0,xt)},er=p.__private__.pdfEscape=p.pdfEscape=function(A,ee){return $c(A,ee).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yr=p.__private__.beginPage=function(A){Ne[++Ti]=[],on[Ti]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},al(Ti),xe(Ne[j])},Rm=function(A,ee){var pe,be,Le;switch(n=ee||n,typeof A=="string"&&(pe=v(A.toLowerCase()),Array.isArray(pe)&&(be=pe[0],Le=pe[1])),Array.isArray(A)&&(be=A[0]*mt,Le=A[1]*mt),isNaN(be)&&(be=s[0],Le=s[1]),(be>14400||Le>14400)&&(Li.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),Le=Math.min(14400,Le)),s=[be,Le],n.substr(0,1)){case"l":Le>be&&(s=[Le,be]);break;case"p":be>Le&&(s=[Le,be])}yr(s),Dm(Vh),he(Ao),Ff!==0&&he(Ff+" J"),eo!==0&&he(eo+" j"),Wn.publish("addPage",{pageNumber:Ti})},Fh=function(A){A>0&&A<=Ti&&(Ne.splice(A,1),on.splice(A,1),Ti--,j>Ti&&(j=Ti),this.setPage(j))},al=function(A){A>0&&A<=Ti&&(j=A)},es=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Ne.length-1},ll=function(A,ee,pe){var be,Le=void 0;return pe=pe||{},A=A!==void 0?A:Vn[nn].fontName,ee=ee!==void 0?ee:Vn[nn].fontStyle,be=A.toLowerCase(),ki[be]!==void 0&&ki[be][ee]!==void 0?Le=ki[be][ee]:ki[A]!==void 0&&ki[A][ee]!==void 0?Le=ki[A][ee]:pe.disableWarning===!1&&Li.warn("Unable to look up font label for font '"+A+"', '"+ee+"'. Refer to getFontList() for available fonts."),Le||pe.noFallback||(Le=ki.times[ee])==null&&(Le=ki.times.normal),Le},$u=p.__private__.putInfo=function(){var A=lt(),ee=function(be){return be};for(var pe in u!==null&&(ee=Ts.encryptor(A,0)),he("<<"),he("/Producer ("+er(ee("jsPDF "+Xt.version))+")"),Bt)Bt.hasOwnProperty(pe)&&Bt[pe]&&he("/"+pe.substr(0,1).toUpperCase()+pe.substr(1)+" ("+er(ee(Bt[pe]))+")");he("/CreationDate ("+er(ee(te))+")"),he(">>"),he("endobj")},Gl=p.__private__.putCatalog=function(A){var ee=(A=A||{}).rootDictionaryObjId||St;switch(lt(),he("<<"),he("/Type /Catalog"),he("/Pages "+ee+" 0 R"),ht||(ht="fullwidth"),ht){case"fullwidth":he("/OpenAction [3 0 R /FitH null]");break;case"fullheight":he("/OpenAction [3 0 R /FitV null]");break;case"fullpage":he("/OpenAction [3 0 R /Fit]");break;case"original":he("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pe=""+ht;pe.substr(pe.length-1)==="%"&&(ht=parseInt(ht)/100),typeof ht=="number"&&he("/OpenAction [3 0 R /XYZ null null "+F(ht)+"]")}switch(pt||(pt="continuous"),pt){case"continuous":he("/PageLayout /OneColumn");break;case"single":he("/PageLayout /SinglePage");break;case"two":case"twoleft":he("/PageLayout /TwoColumnLeft");break;case"tworight":he("/PageLayout /TwoColumnRight")}Rt&&he("/PageMode /"+Rt),Wn.publish("putCatalog"),he(">>"),he("endobj")},Rf=p.__private__.putTrailer=function(){he("trailer"),he("<<"),he("/Size "+(Z+1)),he("/Root "+Z+" 0 R"),he("/Info "+(Z-1)+" 0 R"),u!==null&&he("/Encrypt "+Ts.oid+" 0 R"),he("/ID [ <"+H+"> <"+H+"> ]"),he(">>")},Ou=p.__private__.putHeader=function(){he("%PDF-"+m),he("%ºß¬à")},Lf=p.__private__.putXRef=function(){var A="0000000000";he("xref"),he("0 "+(Z+1)),he("0000000000 65535 f ");for(var ee=1;ee<=Z;ee++)typeof ue[ee]=="function"?he((A+ue[ee]()).slice(-10)+" 00000 n "):ue[ee]!==void 0?he((A+ue[ee]).slice(-10)+" 00000 n "):he("0000000000 00000 n ")},Pa=p.__private__.buildDocument=function(){Qe(),xe(fe),Wn.publish("buildDocument"),Ou(),Sn(),Ul(),Wl(),u!==null&&ti(),$u(),Gl();var A=me;return Lf(),Rf(),he("startxref"),he(""+A),he("%%EOF"),xe(Ne[j]),fe.join(`
`)},ql=p.__private__.getBlob=function(A){return new Blob([ot(A)],{type:"application/pdf"})},Oc=p.output=p.__private__.output=Zn(function(A,ee){switch(typeof(ee=ee||{})=="string"?ee={filename:ee}:ee.filename=ee.filename||"generated.pdf",A){case void 0:return Pa();case"save":p.save(ee.filename);break;case"arraybuffer":return ot(Pa());case"blob":return ql(Pa());case"bloburi":case"bloburl":if(sn.URL!==void 0&&typeof sn.URL.createObjectURL=="function")return sn.URL&&sn.URL.createObjectURL(ql(Pa()))||void 0;Li.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pe="",be=Pa();try{pe=DT(be)}catch{pe=DT(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+ee.filename+";base64,"+pe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(sn)==="[object Window]"){var Le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",We=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ee.pdfObjectUrl&&(Le=ee.pdfObjectUrl,We="");var st='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Le+'"'+We+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ee)+");<\/script></body></html>",xt=sn.open();return xt!==null&&xt.document.write(st),xt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(sn)==="[object Window]"){var At='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ee.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ee.filename+'" width="500px" height="400px" /></body></html>',hn=sn.open();if(hn!==null){hn.document.write(At);var cn=this;hn.document.documentElement.querySelector("#pdfViewer").onload=function(){hn.document.title=ee.filename,hn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(cn.output("bloburl"))}}return hn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(sn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Bn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ee)+'"></iframe></body></html>',Ai=sn.open();if(Ai!==null&&(Ai.document.write(Bn),Ai.document.title=ee.filename),Ai||typeof safari>"u")return Ai;break;case"datauri":case"dataurl":return sn.document.location.href=this.output("datauristring",ee);default:return null}}),Bh=function(A){return Array.isArray(ia)===!0&&ia.indexOf(A)>-1};switch(i){case"pt":mt=1;break;case"mm":mt=72/25.4;break;case"cm":mt=72/2.54;break;case"in":mt=72;break;case"px":mt=Bh("px_scaling")==1?.75:96/72;break;case"pc":case"em":mt=12;break;case"ex":mt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);mt=i}var Ts=null;le(),B();var Lm=function(A){return u!==null?Ts.encryptor(A,0):function(ee){return ee}},zh=p.__private__.getPageInfo=p.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:on[A].objId,pageNumber:A,pageContext:on[A]}},ln=p.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ee in on)if(on[ee].objId===A)break;return zh(ee)},un=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:on[j].objId,pageNumber:j,pageContext:on[j]}};p.addPage=function(){return Rm.apply(this,arguments),this},p.setPage=function(){return al.apply(this,arguments),xe.call(this,Ne[j]),this},p.insertPage=function(A){return this.addPage(),this.movePage(j,A),this},p.movePage=function(A,ee){var pe,be;if(A>ee){pe=Ne[A],be=on[A];for(var Le=A;Le>ee;Le--)Ne[Le]=Ne[Le-1],on[Le]=on[Le-1];Ne[ee]=pe,on[ee]=be,this.setPage(ee)}else if(A<ee){pe=Ne[A],be=on[A];for(var We=A;We<ee;We++)Ne[We]=Ne[We+1],on[We]=on[We+1];Ne[ee]=pe,on[ee]=be,this.setPage(ee)}return this},p.deletePage=function(){return Fh.apply(this,arguments),this},p.__private__.text=p.text=function(A,ee,pe,be,Le){var We,st,xt,At,hn,cn,Bn,Ai,Oi,ms=(be=be||{}).scope||this;if(typeof A=="number"&&typeof ee=="number"&&(typeof pe=="string"||Array.isArray(pe))){var br=pe;pe=ee,ee=A,A=br}if(arguments[3]instanceof ge?(E("The transform parameter of text() with a Matrix value"),Oi=Le):(xt=arguments[4],At=arguments[5],qn(Bn=arguments[3])==="object"&&Bn!==null||(typeof xt=="string"&&(At=xt,xt=null),typeof Bn=="string"&&(At=Bn,Bn=null),typeof Bn=="number"&&(xt=Bn,Bn=null),be={flags:Bn,angle:xt,align:At})),isNaN(ee)||isNaN(pe)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return ms;var As="",Da=!1,Hi=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:Bu,$r=ms.internal.scaleFactor;function Fm(pi){return pi=pi.split("	").join(Array(be.TabLen||9).join(" ")),er(pi,Bn)}function Ro(pi){for(var mi,cs=pi.concat(),gi=[],dl=cs.length;dl--;)typeof(mi=cs.shift())=="string"?gi.push(mi):Array.isArray(pi)&&(mi.length===1||mi[1]===void 0&&mi[2]===void 0)?gi.push(mi[0]):gi.push([mi[0],mi[1],mi[2]]);return gi}function Vf(pi,mi){var cs;if(typeof pi=="string")cs=mi(pi)[0];else if(Array.isArray(pi)){for(var gi,dl,Zh=pi.concat(),fl=[],zm=Zh.length;zm--;)typeof(gi=Zh.shift())=="string"?fl.push(mi(gi)[0]):Array.isArray(gi)&&typeof gi[0]=="string"&&(dl=mi(gi[0],gi[1],gi[2]),fl.push([dl[0],dl[1],dl[2]]));cs=fl}return cs}var $a=!1,Wf=!0;if(typeof A=="string")$a=!0;else if(Array.isArray(A)){var Yl=A.concat();st=[];for(var ju,gs=Yl.length;gs--;)(typeof(ju=Yl.shift())!="string"||Array.isArray(ju)&&typeof ju[0]!="string")&&(Wf=!1);$a=Wf}if($a===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var qh=it/ms.internal.scaleFactor,Lo=qh*(Hi-1);switch(be.baseline){case"bottom":pe-=Lo;break;case"top":pe+=qh-Lo;break;case"hanging":pe+=qh-2*Lo;break;case"middle":pe+=qh/2-Lo}if((cn=be.maxWidth||0)>0&&(typeof A=="string"?A=ms.splitTextToSize(A,cn):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(pi,mi){return pi.concat(ms.splitTextToSize(mi,cn))},[]))),We={text:A,x:ee,y:pe,options:be,mutex:{pdfEscape:er,activeFontKey:nn,fonts:Vn,activeFontSize:it}},Wn.publish("preProcessText",We),A=We.text,xt=(be=We.options).angle,!(Oi instanceof ge)&&xt&&typeof xt=="number"){xt*=Math.PI/180,be.rotationDirection===0&&(xt=-xt),w===b.ADVANCED&&(xt=-xt);var Zl=Math.cos(xt),Uf=Math.sin(xt);Oi=new ge(Zl,Uf,-Uf,Zl,0,0)}else xt&&xt instanceof ge&&(Oi=xt);w!==b.ADVANCED||Oi||(Oi=Be),(hn=be.charSpace||Wh)!==void 0&&(As+=T($(hn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ai=be.horizontalScale)!==void 0&&(As+=T(100*Ai)+` Tz
`),be.lang;var xr=-1,Q0=be.renderingMode!==void 0?be.renderingMode:be.stroke,Po=ms.internal.getCurrentPageInfo().pageContext;switch(Q0){case 0:case!1:case"fill":xr=0;break;case 1:case!0:case"stroke":xr=1;break;case 2:case"fillThenStroke":xr=2;break;case 3:case"invisible":xr=3;break;case 4:case"fillAndAddForClipping":xr=4;break;case 5:case"strokeAndAddPathForClipping":xr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":xr=6;break;case 7:case"addToPathForClipping":xr=7}var Bm=Po.usedRenderingMode!==void 0?Po.usedRenderingMode:-1;xr!==-1?As+=xr+` Tr
`:Bm!==-1&&(As+=`0 Tr
`),xr!==-1&&(Po.usedRenderingMode=xr),At=be.align||"left";var tr,Kh=it*Hi,la=ms.internal.pageSize.getWidth(),Vu=Vn[nn];hn=be.charSpace||Wh,cn=be.maxWidth||0,Bn=Object.assign({autoencode:!0,noBOM:!0},be.flags);var Ql=[],Jl=function(pi){return ms.getStringUnitWidth(pi,{font:Vu,charSpace:hn,fontSize:it,doKerning:!1})*it/$r};if(Object.prototype.toString.call(A)==="[object Array]"){var nr;st=Ro(A),At!=="left"&&(tr=st.map(Jl));var ir,Oa=0;if(At==="right"){ee-=tr[0],A=[],gs=st.length;for(var to=0;to<gs;to++)to===0?(ir=ps(ee),nr=To(pe)):(ir=$(Oa-tr[to]),nr=-Kh),A.push([st[to],ir,nr]),Oa=tr[to]}else if(At==="center"){ee-=tr[0]/2,A=[],gs=st.length;for(var ca=0;ca<gs;ca++)ca===0?(ir=ps(ee),nr=To(pe)):(ir=$((Oa-tr[ca])/2),nr=-Kh),A.push([st[ca],ir,nr]),Oa=tr[ca]}else if(At==="left"){A=[],gs=st.length;for(var Wc=0;Wc<gs;Wc++)A.push(st[Wc])}else if(At==="justify"&&Vu.encoding==="Identity-H"){A=[],gs=st.length,cn=cn!==0?cn:la;for(var cl=0,ls=0;ls<gs;ls++)if(nr=ls===0?To(pe):-Kh,ir=ls===0?ps(ee):cl,ls<gs-1){var Uc=$((cn-tr[ls])/(st[ls].split(" ").length-1)),Or=st[ls].split(" ");A.push([Or[0]+" ",ir,nr]),cl=0;for(var Do=1;Do<Or.length;Do++){var Xh=(Jl(Or[Do-1]+" "+Or[Do])-Jl(Or[Do]))*$r+Uc;Do==Or.length-1?A.push([Or[Do],Xh,0]):A.push([Or[Do]+" ",Xh,0]),cl-=Xh}}else A.push([st[ls],ir,nr]);A.push(["",cl,0])}else{if(At!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],gs=st.length,cn=cn!==0?cn:la,ls=0;ls<gs;ls++)nr=ls===0?To(pe):-Kh,ir=ls===0?ps(ee):0,ls<gs-1?Ql.push(T($((cn-tr[ls])/(st[ls].split(" ").length-1)))):Ql.push(0),A.push([st[ls],ir,nr])}}var Hf=typeof be.R2L=="boolean"?be.R2L:wt;Hf===!0&&(A=Vf(A,function(pi,mi,cs){return[pi.split("").reverse().join(""),mi,cs]})),We={text:A,x:ee,y:pe,options:be,mutex:{pdfEscape:er,activeFontKey:nn,fonts:Vn,activeFontSize:it}},Wn.publish("postProcessText",We),A=We.text,Da=We.mutex.isHex||!1;var Gf=Vn[nn].encoding;Gf!=="WinAnsiEncoding"&&Gf!=="StandardEncoding"||(A=Vf(A,function(pi,mi,cs){return[Fm(pi),mi,cs]})),st=Ro(A),A=[];for(var wr,ul,Hc,hl=0,Yh=1,Gc=Array.isArray(st[0])?Yh:hl,qc="",ec=function(pi,mi,cs){var gi="";return cs instanceof ge?(cs=typeof be.angle=="number"?Ee(cs,new ge(1,0,0,1,pi,mi)):Ee(new ge(1,0,0,1,pi,mi),cs),w===b.ADVANCED&&(cs=Ee(new ge(1,0,0,-1,0,0),cs)),gi=cs.join(" ")+` Tm
`):gi=T(pi)+" "+T(mi)+` Td
`,gi},ua=0;ua<st.length;ua++){switch(qc="",Gc){case Yh:Hc=(Da?"<":"(")+st[ua][0]+(Da?">":")"),wr=parseFloat(st[ua][1]),ul=parseFloat(st[ua][2]);break;case hl:Hc=(Da?"<":"(")+st[ua]+(Da?">":")"),wr=ps(ee),ul=To(pe)}Ql!==void 0&&Ql[ua]!==void 0&&(qc=Ql[ua]+` Tw
`),ua===0?A.push(qc+ec(wr,ul,Oi)+Hc):Gc===hl?A.push(qc+Hc):Gc===Yh&&A.push(qc+ec(wr,ul,Oi)+Hc)}A=Gc===hl?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var sr=`BT
/`;return sr+=nn+" "+it+` Tf
`,sr+=T(it*Hi)+` TL
`,sr+=zc+`
`,sr+=As,sr+=A,he(sr+="ET"),d[nn]=!0,ms};var oa=p.__private__.clip=p.clip=function(A){return he(A==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return oa("evenodd")},p.__private__.discardPath=p.discardPath=function(){return he("n"),this};var On=p.__private__.isValidStyle=function(A){var ee=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(ee=!0),ee};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(A){return On(A)&&(c=A),this};var Pf=p.__private__.getStyle=p.getStyle=function(A){var ee=c;switch(A){case"D":case"S":ee="S";break;case"F":ee="f";break;case"FD":case"DF":ee="B";break;case"f":case"f*":case"B":case"B*":ee=A}return ee},jh=p.close=function(){return he("h"),this};p.stroke=function(){return he("S"),this},p.fill=function(A){return Mc("f",A),this},p.fillEvenOdd=function(A){return Mc("f*",A),this},p.fillStroke=function(A){return Mc("B",A),this},p.fillStrokeEvenOdd=function(A){return Mc("B*",A),this};var Mc=function(A,ee){qn(ee)==="object"?Df(ee,A):he(A)},Mu=function(A){A===null||w===b.ADVANCED&&A===void 0||(A=Pf(A),he(A))};function Kl(A,ee,pe,be,Le){var We=new Ep(ee||this.boundingBox,pe||this.xStep,be||this.yStep,this.gState,Le||this.matrix);We.stream=this.stream;var st=A+"$$"+this.cloneIndex+++"$$";return Ke(st,We),We}var Df=function(A,ee){var pe=rl[A.key],be=$n[pe];if(be instanceof vd)he("q"),he(Fu(ee)),be.gState&&p.setGState(be.gState),he(A.matrix.toString()+" cm"),he("/"+pe+" sh"),he("Q");else if(be instanceof Ep){var Le=new ge(1,0,0,-1,0,Vc());A.matrix&&(Le=Le.multiply(A.matrix||Be),pe=Kl.call(be,A.key,A.boundingBox,A.xStep,A.yStep,Le).id),he("q"),he("/Pattern cs"),he("/"+pe+" scn"),be.gState&&p.setGState(be.gState),he(ee),he("Q")}},Fu=function(A){switch(A){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},as=p.moveTo=function(A,ee){return he(T($(A))+" "+T(W(ee))+" m"),this},Eo=p.lineTo=function(A,ee){return he(T($(A))+" "+T(W(ee))+" l"),this},Xl=p.curveTo=function(A,ee,pe,be,Le,We){return he([T($(A)),T(W(ee)),T($(pe)),T(W(be)),T($(Le)),T(W(We)),"c"].join(" ")),this};p.__private__.line=p.line=function(A,ee,pe,be,Le){if(isNaN(A)||isNaN(ee)||isNaN(pe)||isNaN(be)||!On(Le))throw new Error("Invalid arguments passed to jsPDF.line");return w===b.COMPAT?this.lines([[pe-A,be-ee]],A,ee,[1,1],Le||"S"):this.lines([[pe-A,be-ee]],A,ee,[1,1]).stroke()},p.__private__.lines=p.lines=function(A,ee,pe,be,Le,We){var st,xt,At,hn,cn,Bn,Ai,Oi,ms,br,As,Da;if(typeof A=="number"&&(Da=pe,pe=ee,ee=A,A=Da),be=be||[1,1],We=We||!1,isNaN(ee)||isNaN(pe)||!Array.isArray(A)||!Array.isArray(be)||!On(Le)||typeof We!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(as(ee,pe),st=be[0],xt=be[1],hn=A.length,br=ee,As=pe,At=0;At<hn;At++)(cn=A[At]).length===2?(br=cn[0]*st+br,As=cn[1]*xt+As,Eo(br,As)):(Bn=cn[0]*st+br,Ai=cn[1]*xt+As,Oi=cn[2]*st+br,ms=cn[3]*xt+As,br=cn[4]*st+br,As=cn[5]*xt+As,Xl(Bn,Ai,Oi,ms,br,As));return We&&jh(),Mu(Le),this},p.path=function(A){for(var ee=0;ee<A.length;ee++){var pe=A[ee],be=pe.c;switch(pe.op){case"m":as(be[0],be[1]);break;case"l":Eo(be[0],be[1]);break;case"c":Xl.apply(this,be);break;case"h":jh()}}return this},p.__private__.rect=p.rect=function(A,ee,pe,be,Le){if(isNaN(A)||isNaN(ee)||isNaN(pe)||isNaN(be)||!On(Le))throw new Error("Invalid arguments passed to jsPDF.rect");return w===b.COMPAT&&(be=-be),he([T($(A)),T(W(ee)),T($(pe)),T($(be)),"re"].join(" ")),Mu(Le),this},p.__private__.triangle=p.triangle=function(A,ee,pe,be,Le,We,st){if(isNaN(A)||isNaN(ee)||isNaN(pe)||isNaN(be)||isNaN(Le)||isNaN(We)||!On(st))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pe-A,be-ee],[Le-pe,We-be],[A-Le,ee-We]],A,ee,[1,1],st,!0),this},p.__private__.roundedRect=p.roundedRect=function(A,ee,pe,be,Le,We,st){if(isNaN(A)||isNaN(ee)||isNaN(pe)||isNaN(be)||isNaN(Le)||isNaN(We)||!On(st))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var xt=4/3*(Math.SQRT2-1);return Le=Math.min(Le,.5*pe),We=Math.min(We,.5*be),this.lines([[pe-2*Le,0],[Le*xt,0,Le,We-We*xt,Le,We],[0,be-2*We],[0,We*xt,-Le*xt,We,-Le,We],[2*Le-pe,0],[-Le*xt,0,-Le,-We*xt,-Le,-We],[0,2*We-be],[0,-We*xt,Le*xt,-We,Le,-We]],A+Le,ee,[1,1],st,!0),this},p.__private__.ellipse=p.ellipse=function(A,ee,pe,be,Le){if(isNaN(A)||isNaN(ee)||isNaN(pe)||isNaN(be)||!On(Le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var We=4/3*(Math.SQRT2-1)*pe,st=4/3*(Math.SQRT2-1)*be;return as(A+pe,ee),Xl(A+pe,ee-st,A+We,ee-be,A,ee-be),Xl(A-We,ee-be,A-pe,ee-st,A-pe,ee),Xl(A-pe,ee+st,A-We,ee+be,A,ee+be),Xl(A+We,ee+be,A+pe,ee+st,A+pe,ee),Mu(Le),this},p.__private__.circle=p.circle=function(A,ee,pe,be){if(isNaN(A)||isNaN(ee)||isNaN(pe)||!On(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,ee,pe,pe,be)},p.setFont=function(A,ee,pe){return pe&&(ee=I(ee,pe)),nn=ll(A,ee,{disableWarning:!1}),this};var Pm=p.__private__.getFont=p.getFont=function(){return Vn[ll.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var A,ee,pe={};for(A in ki)if(ki.hasOwnProperty(A))for(ee in pe[A]=[],ki[A])ki[A].hasOwnProperty(ee)&&pe[A].push(ee);return pe},p.addFont=function(A,ee,pe,be,Le){var We=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&We.indexOf(arguments[3])!==-1?Le=arguments[3]:arguments[3]&&We.indexOf(arguments[3])==-1&&(pe=I(pe,be)),Le=Le||"Identity-H",Du.call(this,A,ee,pe,Le)};var Bu,Vh=t.lineWidth||.200025,Fc=p.__private__.getLineWidth=p.getLineWidth=function(){return Vh},Dm=p.__private__.setLineWidth=p.setLineWidth=function(A){return Vh=A,he(T($(A))+" w"),this};p.__private__.setLineDash=Xt.API.setLineDash=Xt.API.setLineDashPattern=function(A,ee){if(A=A||[],ee=ee||0,isNaN(ee)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(pe){return T($(pe))}).join(" "),ee=T($(ee)),he("["+A+"] "+ee+" d"),this};var $f=p.__private__.getLineHeight=p.getLineHeight=function(){return it*Bu};p.__private__.getLineHeight=p.getLineHeight=function(){return it*Bu};var Tn=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(Bu=A),this},$m=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Bu};Tn(t.lineHeight);var ps=p.__private__.getHorizontalCoordinate=function(A){return $(A)},To=p.__private__.getVerticalCoordinate=function(A){return w===b.ADVANCED?A:on[j].mediaBox.topRightY-on[j].mediaBox.bottomLeftY-$(A)},Om=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(A){return T(ps(A))},Bc=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(A){return T(To(A))},Ao=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Et(Ao)},p.__private__.setStrokeColor=p.setDrawColor=function(A,ee,pe,be){return Ao=Zt({ch1:A,ch2:ee,ch3:pe,ch4:be,pdfColorType:"draw",precision:2}),he(Ao),this};var Of=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Et(Of)},p.__private__.setFillColor=p.setFillColor=function(A,ee,pe,be){return Of=Zt({ch1:A,ch2:ee,ch3:pe,ch4:be,pdfColorType:"fill",precision:2}),he(Of),this};var zc=t.textColor||"0 g",Z0=p.__private__.getTextColor=p.getTextColor=function(){return Et(zc)};p.__private__.setTextColor=p.setTextColor=function(A,ee,pe,be){return zc=Zt({ch1:A,ch2:ee,ch3:pe,ch4:be,pdfColorType:"text",precision:3}),this};var Wh=t.charSpace,Mf=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Wh||0)};p.__private__.setCharSpace=p.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Wh=A,this};var Ff=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(A){var ee=p.CapJoinStyles[A];if(ee===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ff=ee,he(ee+" J"),this};var eo=0;p.__private__.setLineJoin=p.setLineJoin=function(A){var ee=p.CapJoinStyles[A];if(ee===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return eo=ee,he(ee+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return he(T($(A))+" M"),this},p.GState=Ly,p.setGState=function(A){(A=typeof A=="string"?fi[gr[A]]:Mm(null,A)).equals(na)||(he("/"+A.id+" gs"),na=A)};var Mm=function(A,ee){if(!A||!gr[A]){var pe=!1;for(var be in fi)if(fi.hasOwnProperty(be)&&fi[be].equals(ee)){pe=!0;break}if(pe)ee=fi[be];else{var Le="GS"+(Object.keys(fi).length+1).toString(10);fi[Le]=ee,ee.id=Le}return A&&(gr[A]=ee.id),Wn.publish("addGState",ee),ee}};p.addGState=function(A,ee){return Mm(A,ee),this},p.saveGraphicsState=function(){return he("q"),Js.push({key:nn,size:it,color:zc}),this},p.restoreGraphicsState=function(){he("Q");var A=Js.pop();return nn=A.key,it=A.size,zc=A.color,na=null,this},p.setCurrentTransformationMatrix=function(A){return he(A.toString()+" cm"),this},p.comment=function(A){return he("#"+A),this};var zu=function(A,ee){var pe=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pe},set:function(We){isNaN(We)||(pe=parseFloat(We))}});var be=ee||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(We){isNaN(We)||(be=parseFloat(We))}});var Le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Le},set:function(We){Le=We.toString()}}),this},aa=function(A,ee,pe,be){zu.call(this,A,ee),this.type="rect";var Le=pe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Le},set:function(st){isNaN(st)||(Le=parseFloat(st))}});var We=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return We},set:function(st){isNaN(st)||(We=parseFloat(st))}}),this},Uh=function(){this.page=Ti,this.currentPage=j,this.pages=Ne.slice(0),this.pagesContext=on.slice(0),this.x=di,this.y=gn,this.matrix=Bs,this.width=jc(j),this.height=Vc(j),this.outputDestination=qe,this.id="",this.objectNumber=-1};Uh.prototype.restore=function(){Ti=this.page,j=this.currentPage,on=this.pagesContext,Ne=this.pages,di=this.x,gn=this.y,Bs=this.matrix,Gh(j,this.width),jf(j,this.height),qe=this.outputDestination};var Bf=function(A,ee,pe,be,Le){Qr.push(new Uh),Ti=j=0,Ne=[],di=A,gn=ee,Bs=Le,yr([pe,be])},zf=function(A){if(sa[A])Qr.pop().restore();else{var ee=new Uh,pe="Xo"+(Object.keys(Ji).length+1).toString(10);ee.id=pe,sa[A]=pe,Ji[pe]=ee,Wn.publish("addFormObject",ee),Qr.pop().restore()}};for(var Hh in p.beginFormObject=function(A,ee,pe,be,Le){return Bf(A,ee,pe,be,Le),this},p.endFormObject=function(A){return zf(A),this},p.doFormObject=function(A,ee){var pe=Ji[sa[A]];return he("q"),he(ee.toString()+" cm"),he("/"+pe.id+" Do"),he("Q"),this},p.getFormObject=function(A){var ee=Ji[sa[A]];return{x:ee.x,y:ee.y,width:ee.width,height:ee.height,matrix:ee.matrix}},p.save=function(A,ee){return A=A||"generated.pdf",(ee=ee||{}).returnPromise=ee.returnPromise||!1,ee.returnPromise===!1?(dp(ql(Pa()),A),typeof dp.unload=="function"&&sn.setTimeout&&setTimeout(dp.unload,911),this):new Promise(function(pe,be){try{var Le=dp(ql(Pa()),A);typeof dp.unload=="function"&&sn.setTimeout&&setTimeout(dp.unload,911),pe(Le)}catch(We){be(We.message)}})},Xt.API)Xt.API.hasOwnProperty(Hh)&&(Hh==="events"&&Xt.API.events.length?function(A,ee){var pe,be,Le;for(Le=ee.length-1;Le!==-1;Le--)pe=ee[Le][0],be=ee[Le][1],A.subscribe.apply(A,[pe].concat(typeof be=="function"?[be]:be))}(Wn,Xt.API.events):p[Hh]=Xt.API[Hh]);var jc=p.getPageWidth=function(A){return(on[A=A||j].mediaBox.topRightX-on[A].mediaBox.bottomLeftX)/mt},Gh=p.setPageWidth=function(A,ee){on[A].mediaBox.topRightX=ee*mt+on[A].mediaBox.bottomLeftX},Vc=p.getPageHeight=function(A){return(on[A=A||j].mediaBox.topRightY-on[A].mediaBox.bottomLeftY)/mt},jf=p.setPageHeight=function(A,ee){on[A].mediaBox.topRightY=ee*mt+on[A].mediaBox.bottomLeftY};return p.internal={pdfEscape:er,getStyle:Pf,getFont:Pm,getFontSize:at,getCharSpace:Mf,getTextColor:Z0,getLineHeight:$f,getLineHeightFactor:$m,getLineWidth:Fc,write:ut,getHorizontalCoordinate:ps,getVerticalCoordinate:To,getCoordinateString:Om,getVerticalCoordinateString:Bc,collections:{},newObject:lt,newAdditionalObject:Nt,newObjectDeferred:Ge,newObjectDeferredBegin:Mt,getFilters:Qt,putStream:Xn,events:Wn,scaleFactor:mt,pageSize:{getWidth:function(){return jc(j)},setWidth:function(A){Gh(j,A)},getHeight:function(){return Vc(j)},setHeight:function(A){jf(j,A)}},encryptionOptions:u,encryption:Ts,getEncryptor:Lm,output:Oc,getNumberOfPages:es,pages:Ne,out:he,f2:F,f3:R,getPageInfo:zh,getPageInfoByObjId:ln,getCurrentPageInfo:un,getPDFVersion:g,Point:zu,Rectangle:aa,Matrix:ge,hasHotfix:Bh},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return jc(j)},set:function(A){Gh(j,A)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Vc(j)},set:function(A){jf(j,A)},enumerable:!0,configurable:!0}),fn.call(p,Je),nn="F1",Rm(s,n),Wn.publish("initialized"),p}dg.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},dg.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},dg.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},dg.prototype.processOwnerPassword=function(t,e){return OT($T(e).substr(0,5),t)},dg.prototype.encryptor=function(t,e){var n=$T(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return OT(n,i)}},Ly.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||qn(t)!==qn(this))return!1;var i=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&i--;return i===0},Xt.API={events:[]},Xt.version="2.5.2";var ys=Xt.API,gD=1,Am=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ag=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},pn=function(t){return t.toFixed(2)},ad=function(t){return t.toFixed(5)};ys.__acroform__={};var La=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},cB=function(t){return t*gD},eu=function(t){var e=new DY,n=Pt.internal.getHeight(t)||0,i=Pt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(pn(i)),Number(pn(n))],e},pze=ys.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},mze=ys.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},gze=ys.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Ps=ys.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return gze(t,e-1)},Ds=ys.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return pze(t,e-1)},$s=ys.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return mze(t,e-1)},vze=ys.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,s=t[0],r=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(s)||0,l.lowerLeft_Y=i(r+a)||0,l.upperRight_X=n(s+o)||0,l.upperRight_Y=i(r)||0,[Number(pn(l.lowerLeft_X)),Number(pn(l.lowerLeft_Y)),Number(pn(l.upperRight_X)),Number(pn(l.upperRight_Y))]},yze=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,i=MT(t,n),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+pn(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var r=eu(t);return r.scope=t.scope,r.stream=e.join(`
`),r}},MT=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(R){return R.split(`
`)}):s.map(function(R){return[R]});var r=n,o=Pt.internal.getHeight(t)||0;o=o<0?-o:o;var a=Pt.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(R,$,U){if(R+1<s.length){var W=$+" "+s[R+1][0];return B2(W,t,U).width<=a-4}return!1};r++;e:for(;r>0;){e="",r--;var c,u,h=B2("3",t,r).height,d=t.multiline?o-r:(o-h)/2,p=d+=2,m=0,g=0,y=0;if(r<=0){e=`(...) Tj
`,e+="% Width of Text: "+B2(e,t,r=12).width+", FieldWidth:"+a+`
`;break}for(var v="",b=0,w=0;w<s.length;w++)if(s.hasOwnProperty(w)){var S=!1;if(s[w].length!==1&&y!==s[w].length-1){if((h+2)*(b+2)+2>o)continue e;v+=s[w][y],S=!0,g=w,w--}else{v=(v+=s[w][y]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var k=parseInt(w),I=l(k,v,r),T=w>=s.length-1;if(I&&!T){v+=" ",y=0;continue}if(I||T){if(T)g=k;else if(t.multiline&&(h+2)*(b+2)+2>o)continue e}else{if(!t.multiline||(h+2)*(b+2)+2>o)continue e;g=k}}for(var E="",O=m;O<=g;O++){var F=s[O];if(t.multiline){if(O===g){E+=F[y]+" ",y=(y+1)%F.length;continue}if(O===m){E+=F[F.length-1]+" ";continue}}E+=F[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,u=B2(E,t,r).width,t.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;case"left":default:c=2}e+=pn(c)+" "+pn(p)+` Td
`,e+="("+Am(E)+`) Tj
`,e+=-pn(c)+` 0 Td
`,p=-(r+2),u=0,m=S?g:g+1,b++,v=""}break}return i.text=e,i.fontSize=r,i},B2=function(t,e,n){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},bze={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},xze=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},wze=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var i=n,s=t[n];e.internal.newObjectDeferredBegin(s.objId,!0),qn(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[i]}},_ze=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Lc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(bze)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");gD=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new $Y,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in i)if(i.hasOwnProperty(s)){var r=i[s];r.objId=void 0,r.hasAnnotation&&xze(r,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(i,s){var r=!i;for(var o in i||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(o)){var a=i[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=vze(a.Rect,s)),s.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Pt.createDefaultAppearanceStream(a),qn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=yze(a);l.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var h="";for(var d in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(d)){var p=a.appearanceStreamContent[d];if(h+="/"+d+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var m=p[o];typeof m=="function"&&(m=m.call(s,a)),h+="/"+o+" "+m+" ",s.internal.acroformPlugin.xForms.indexOf(m)>=0||s.internal.acroformPlugin.xForms.push(m)}}else typeof(m=p)=="function"&&(m=m.call(s,a)),h+="/"+o+" "+m,s.internal.acroformPlugin.xForms.indexOf(m)>=0||s.internal.acroformPlugin.xForms.push(m);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:a.objId}),s.internal.out("endobj")}r&&wze(s.internal.acroformPlugin.xForms,s)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},PY=ys.__acroform__.arrayToPdfArray=function(t,e,n){var i=function(o){return o};if(Array.isArray(t)){for(var s="[",r=0;r<t.length;r++)switch(r!==0&&(s+=" "),qn(t[r])){case"boolean":case"number":case"object":s+=t[r].toString();break;case"string":t[r].substr(0,1)!=="/"?(e!==void 0&&n&&(i=n.internal.getEncryptor(e)),s+="("+Am(i(t[r].toString()))+")"):s+=t[r].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},GN=function(t,e,n){var i=function(s){return s};return e!==void 0&&n&&(i=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Am(i(t))+")"},du=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};du.prototype.toString=function(){return this.objId+" 0 R"},du.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},du.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(r){return r!="content"&&r!="appearanceStreamContent"&&r!="scope"&&r!="objId"&&r.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var i=e[n],s=this[i];s&&(Array.isArray(s)?t.push({key:i,value:PY(s,this.objId,this.scope)}):s instanceof du?(s.scope=this.scope,t.push({key:i,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:i,value:s}))}return t};var DY=function(){du.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};La(DY,du);var $Y=function(){du.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Am(n(t))+")"}},set:function(n){t=n}})};La($Y,du);var Lc=function t(){du.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');e=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ps(e,3)},set:function(v){v?this.F=Ds(e,3):this.F=$s(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');n=v}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(v){i=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(v){i[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(v){i[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(v){i[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(v){i[3]=v}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof cS)return;r="FieldObject"+t.FieldNum++}var v=function(b){return b};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+Am(v(r))+")"},set:function(v){r=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(v){r=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(v){a=v}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/gD:c},set:function(v){c=v}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(v){u=v}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof cS||this instanceof Xd))return GN(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=v}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof ar?d:GN(d,this.objId,this.scope)},set:function(v){v=v.toString(),d=this instanceof ar?v:v.substr(0,1)==="("?ag(v.substr(1,v.length-2)):ag(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ar?ag(d.substr(1,d.length-1)):d},set:function(v){v=v.toString(),d=this instanceof ar?"/"+v:v}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ar?p:GN(p,this.objId,this.scope)},set:function(v){v=v.toString(),p=this instanceof ar?v:v.substr(0,1)==="("?ag(v.substr(1,v.length-2)):ag(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ar?ag(p.substr(1,p.length-1)):p},set:function(v){v=v.toString(),p=this instanceof ar?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(v){v=!!v,g=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(v){m=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,1)},set:function(v){v?this.Ff=Ds(this.Ff,1):this.Ff=$s(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,2)},set:function(v){v?this.Ff=Ds(this.Ff,2):this.Ff=$s(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,3)},set:function(v){v?this.Ff=Ds(this.Ff,3):this.Ff=$s(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');y=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(y){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:y=2;break;case"center":case 1:y=1;break;case"left":case 0:default:y=0}}})};La(Lc,du);var Mp=function(){Lc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return PY(e,this.objId,this.scope)},set:function(n){var i,s;s=[],typeof(i=n)=="string"&&(s=function(r,o,a){a||(a=1);for(var l,c=[];l=o.exec(r);)c.push(l[a]);return c}(i,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,18)},set:function(n){n?this.Ff=Ds(this.Ff,18):this.Ff=$s(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ds(this.Ff,19):this.Ff=$s(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,20)},set:function(n){n?(this.Ff=Ds(this.Ff,20),e.sort()):this.Ff=$s(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,22)},set:function(n){n?this.Ff=Ds(this.Ff,22):this.Ff=$s(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,23)},set:function(n){n?this.Ff=Ds(this.Ff,23):this.Ff=$s(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,27)},set:function(n){n?this.Ff=Ds(this.Ff,27):this.Ff=$s(this.Ff,27)}}),this.hasAppearanceStream=!1};La(Mp,Lc);var Fp=function(){Mp.call(this),this.fontName="helvetica",this.combo=!1};La(Fp,Mp);var Bp=function(){Fp.call(this),this.combo=!0};La(Bp,Fp);var N1=function(){Bp.call(this),this.edit=!0};La(N1,Bp);var ar=function(){Lc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,15)},set:function(n){n?this.Ff=Ds(this.Ff,15):this.Ff=$s(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,16)},set:function(n){n?this.Ff=Ds(this.Ff,16):this.Ff=$s(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,17)},set:function(n){n?this.Ff=Ds(this.Ff,17):this.Ff=$s(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,26)},set:function(n){n?this.Ff=Ds(this.Ff,26):this.Ff=$s(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(r){return r};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,s=[];for(i in s.push("<<"),e)s.push("/"+i+" ("+Am(n(e[i]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){qn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};La(ar,Lc);var E1=function(){ar.call(this),this.pushButton=!0};La(E1,ar);var zp=function(){ar.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};La(zp,ar);var cS=function(){var t,e;Lc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(a){return a};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var r,o=[];for(r in o.push("<<"),i)o.push("/"+r+" ("+Am(s(i[r]))+")");return o.push(">>"),o.join(`
`)},set:function(s){qn(s)==="object"&&(i=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(s){typeof s=="string"&&(i.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Pt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};La(cS,Lc),zp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},zp.prototype.createOption=function(t){var e=new cS;return e.Parent=this,e.optionName=t,this.Kids.push(e),Sze.call(this.scope,e),e};var T1=function(){ar.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Pt.CheckBox.createAppearanceStream()};La(T1,ar);var Xd=function(){Lc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,13)},set:function(e){e?this.Ff=Ds(this.Ff,13):this.Ff=$s(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,21)},set:function(e){e?this.Ff=Ds(this.Ff,21):this.Ff=$s(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,23)},set:function(e){e?this.Ff=Ds(this.Ff,23):this.Ff=$s(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,24)},set:function(e){e?this.Ff=Ds(this.Ff,24):this.Ff=$s(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,25)},set:function(e){e?this.Ff=Ds(this.Ff,25):this.Ff=$s(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,26)},set:function(e){e?this.Ff=Ds(this.Ff,26):this.Ff=$s(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};La(Xd,Lc);var A1=function(){Xd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,14)},set:function(t){t?this.Ff=Ds(this.Ff,14):this.Ff=$s(this.Ff,14)}}),this.password=!0};La(A1,Xd);var Pt={CheckBox:{createAppearanceStream:function(){return{N:{On:Pt.CheckBox.YesNormal},D:{On:Pt.CheckBox.YesPushDown,Off:Pt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=eu(t);e.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),r=MT(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+pn(Pt.internal.getWidth(t))+" "+pn(Pt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+pn(r.fontSize)+" Tf "+s),n.push("BT"),n.push(r.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=eu(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=[],r=Pt.internal.getHeight(t),o=Pt.internal.getWidth(t),a=MT(t,t.caption);return s.push("1 g"),s.push("0 0 "+pn(o)+" "+pn(r)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+pn(o-1)+" "+pn(r-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+pn(a.fontSize)+" Tf "+i),s.push(a.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=eu(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+pn(Pt.internal.getWidth(t))+" "+pn(Pt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Pt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Pt.RadioButton.Circle.YesNormal,e.D[t]=Pt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=eu(t);e.scope=t.scope;var n=[],i=Pt.internal.getWidth(t)<=Pt.internal.getHeight(t)?Pt.internal.getWidth(t)/4:Pt.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var s=Pt.internal.Bezier_C,r=Number((i*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+ad(Pt.internal.getWidth(t)/2)+" "+ad(Pt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),n.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),n.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),n.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=eu(t);e.scope=t.scope;var n=[],i=Pt.internal.getWidth(t)<=Pt.internal.getHeight(t)?Pt.internal.getWidth(t)/4:Pt.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),r=Number((s*Pt.internal.Bezier_C).toFixed(5)),o=Number((i*Pt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ad(Pt.internal.getWidth(t)/2)+" "+ad(Pt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),n.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),n.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),n.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+ad(Pt.internal.getWidth(t)/2)+" "+ad(Pt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=eu(t);e.scope=t.scope;var n=[],i=Pt.internal.getWidth(t)<=Pt.internal.getHeight(t)?Pt.internal.getWidth(t)/4:Pt.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),r=Number((s*Pt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ad(Pt.internal.getWidth(t)/2)+" "+ad(Pt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),n.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),n.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),n.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Pt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Pt.RadioButton.Cross.YesNormal,e.D[t]=Pt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=eu(t);e.scope=t.scope;var n=[],i=Pt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+pn(Pt.internal.getWidth(t)-2)+" "+pn(Pt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(pn(i.x1.x)+" "+pn(i.x1.y)+" m"),n.push(pn(i.x2.x)+" "+pn(i.x2.y)+" l"),n.push(pn(i.x4.x)+" "+pn(i.x4.y)+" m"),n.push(pn(i.x3.x)+" "+pn(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=eu(t);e.scope=t.scope;var n=Pt.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+pn(Pt.internal.getWidth(t))+" "+pn(Pt.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+pn(Pt.internal.getWidth(t)-2)+" "+pn(Pt.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(pn(n.x1.x)+" "+pn(n.x1.y)+" m"),i.push(pn(n.x2.x)+" "+pn(n.x2.y)+" l"),i.push(pn(n.x4.x)+" "+pn(n.x4.y)+" m"),i.push(pn(n.x3.x)+" "+pn(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=eu(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+pn(Pt.internal.getWidth(t))+" "+pn(Pt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Pt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Pt.internal.getWidth(t),n=Pt.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},Pt.internal.getWidth=function(t){var e=0;return qn(t)==="object"&&(e=cB(t.Rect[2])),e},Pt.internal.getHeight=function(t){var e=0;return qn(t)==="object"&&(e=cB(t.Rect[3])),e};var Sze=ys.addField=function(t){if(_ze(this,t),!(t instanceof Lc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ys.AcroFormChoiceField=Mp,ys.AcroFormListBox=Fp,ys.AcroFormComboBox=Bp,ys.AcroFormEditBox=N1,ys.AcroFormButton=ar,ys.AcroFormPushButton=E1,ys.AcroFormRadioButton=zp,ys.AcroFormCheckBox=T1,ys.AcroFormTextField=Xd,ys.AcroFormPasswordField=A1,ys.AcroFormAppearance=Pt,ys.AcroForm={ChoiceField:Mp,ListBox:Fp,ComboBox:Bp,EditBox:N1,Button:ar,PushButton:E1,RadioButton:zp,CheckBox:T1,TextField:Xd,PasswordField:A1,Appearance:Pt},Xt.AcroForm={ChoiceField:Mp,ListBox:Fp,ComboBox:Bp,EditBox:N1,Button:ar,PushButton:E1,RadioButton:zp,CheckBox:T1,TextField:Xd,PasswordField:A1,Appearance:Pt};var Cze=Xt.AcroForm;function OY(t){return t.reduce(function(e,n,i){return e[n]=i,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(R,$){var U,W,te,H,G,B=e;if(($=$||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(I(R))for(G in n)for(te=n[G],U=0;U<te.length;U+=1){for(H=!0,W=0;W<te[U].length;W+=1)if(te[U][W]!==void 0&&te[U][W]!==R[W]){H=!1;break}if(H===!0){B=G;break}}else for(G in n)for(te=n[G],U=0;U<te.length;U+=1){for(H=!0,W=0;W<te[U].length;W+=1)if(te[U][W]!==void 0&&te[U][W]!==R.charCodeAt(W)){H=!1;break}if(H===!0){B=G;break}}return B===e&&$!==e&&(B=$),B},s=function R($){for(var U=this.internal.write,W=this.internal.putStream,te=(0,this.internal.getFilters)();te.indexOf("FlateEncode")!==-1;)te.splice(te.indexOf("FlateEncode"),1);$.objectId=this.internal.newObject();var H=[];if(H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Image"}),H.push({key:"Width",value:$.width}),H.push({key:"Height",value:$.height}),$.colorSpace===y.INDEXED?H.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+($.palette.length/3-1)+" "+("sMask"in $&&$.sMask!==void 0?$.objectId+2:$.objectId+1)+" 0 R]"}):(H.push({key:"ColorSpace",value:"/"+$.colorSpace}),$.colorSpace===y.DEVICE_CMYK&&H.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),H.push({key:"BitsPerComponent",value:$.bitsPerComponent}),"decodeParameters"in $&&$.decodeParameters!==void 0&&H.push({key:"DecodeParms",value:"<<"+$.decodeParameters+">>"}),"transparency"in $&&Array.isArray($.transparency)){for(var G="",B=0,Y=$.transparency.length;B<Y;B++)G+=$.transparency[B]+" "+$.transparency[B]+" ";H.push({key:"Mask",value:"["+G+"]"})}$.sMask!==void 0&&H.push({key:"SMask",value:$.objectId+1+" 0 R"});var ne=$.filter!==void 0?["/"+$.filter]:void 0;if(W({data:$.data,additionalKeyValues:H,alreadyAppliedFilters:ne,objectId:$.objectId}),U("endobj"),"sMask"in $&&$.sMask!==void 0){var le="/Predictor "+$.predictor+" /Colors 1 /BitsPerComponent "+$.bitsPerComponent+" /Columns "+$.width,M={width:$.width,height:$.height,colorSpace:"DeviceGray",bitsPerComponent:$.bitsPerComponent,decodeParameters:le,data:$.sMask};"filter"in $&&(M.filter=$.filter),R.call(this,M)}if($.colorSpace===y.INDEXED){var j=this.internal.newObject();W({data:E(new Uint8Array($.palette)),objectId:j}),U("endobj")}},r=function(){var R=this.internal.collections.addImage_images;for(var $ in R)s.call(this,R[$])},o=function(){var R,$=this.internal.collections.addImage_images,U=this.internal.write;for(var W in $)U("/I"+(R=$[W]).index,R.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",r),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var R=this.internal.collections.addImage_images;return a.call(this),R},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(R){return typeof t["process"+R.toUpperCase()]=="function"},h=function(R){return qn(R)==="object"&&R.nodeType===1},d=function(R,$){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var U=""+R.getAttribute("src");if(U.indexOf("data:image/")===0)return I1(unescape(U).split("base64,").pop());var W=t.loadFile(U,!0);if(W!==void 0)return W}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var te;switch($){case"PNG":te="image/png";break;case"WEBP":te="image/webp";break;case"JPEG":case"JPG":default:te="image/jpeg"}return I1(R.toDataURL(te,1).split("base64,").pop())}},p=function(R){var $=this.internal.collections.addImage_images;if($){for(var U in $)if(R===$[U].alias)return $[U]}},m=function(R,$,U){return R||$||(R=-96,$=-96),R<0&&(R=-1*U.width*72/R/this.internal.scaleFactor),$<0&&($=-1*U.height*72/$/this.internal.scaleFactor),R===0&&(R=$*U.width/U.height),$===0&&($=R*U.height/U.width),[R,$]},g=function(R,$,U,W,te,H){var G=m.call(this,U,W,te),B=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,ne=l.call(this);if(U=G[0],W=G[1],ne[te.index]=te,H){H*=Math.PI/180;var le=Math.cos(H),M=Math.sin(H),j=function(X){return X.toFixed(4)},q=[j(le),j(M),j(-1*M),j(le),0,0,"cm"]}this.internal.write("q"),H?(this.internal.write([1,"0","0",1,B(R),Y($+W),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([B(U),"0","0",B(W),"0","0","cm"].join(" "))):this.internal.write([B(U),"0","0",B(W),B(R),Y($+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+te.index+" Do"),this.internal.write("Q")},y=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(R){var $,U,W=0;if(typeof R=="string")for(U=R.length,$=0;$<U;$++)W=(W<<5)-W+R.charCodeAt($),W|=0;else if(I(R))for(U=R.byteLength/2,$=0;$<U;$++)W=(W<<5)-W+R[$],W|=0;return W},w=t.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var $=!0;return R.length===0&&($=!1),R.length%4!=0&&($=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&($=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&($=!1),$},S=t.__addimage__.extractImageFromDataUrl=function(R){var $=(R=R||"").split("base64,"),U=null;if($.length===2){var W=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec($[0]);Array.isArray(W)&&(U={mimeType:W[1],charset:W[2],data:$[1]})}return U},k=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(R){return k()&&R instanceof ArrayBuffer};var I=t.__addimage__.isArrayBufferView=function(R){return k()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},T=t.__addimage__.binaryStringToUint8Array=function(R){for(var $=R.length,U=new Uint8Array($),W=0;W<$;W++)U[W]=R.charCodeAt(W);return U},E=t.__addimage__.arrayBufferToBinaryString=function(R){for(var $="",U=I(R)?R:new Uint8Array(R),W=0;W<U.length;W+=8192)$+=String.fromCharCode.apply(null,U.subarray(W,W+8192));return $};t.addImage=function(){var R,$,U,W,te,H,G,B,Y;if(typeof arguments[1]=="number"?($=e,U=arguments[1],W=arguments[2],te=arguments[3],H=arguments[4],G=arguments[5],B=arguments[6],Y=arguments[7]):($=arguments[1],U=arguments[2],W=arguments[3],te=arguments[4],H=arguments[5],G=arguments[6],B=arguments[7],Y=arguments[8]),qn(R=arguments[0])==="object"&&!h(R)&&"imageData"in R){var ne=R;R=ne.imageData,$=ne.format||$||e,U=ne.x||U||0,W=ne.y||W||0,te=ne.w||ne.width||te,H=ne.h||ne.height||H,G=ne.alias||G,B=ne.compression||B,Y=ne.rotation||ne.angle||Y}var le=this.internal.getFilters();if(B===void 0&&le.indexOf("FlateEncode")!==-1&&(B="SLOW"),isNaN(U)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var M=O.call(this,R,$,G,B);return g.call(this,U,W,te,H,M,Y),this};var O=function(R,$,U,W){var te,H,G;if(typeof R=="string"&&i(R)===e){R=unescape(R);var B=F(R,!1);(B!==""||(B=t.loadFile(R,!0))!==void 0)&&(R=B)}if(h(R)&&(R=d(R,$)),$=i(R,$),!u($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(((G=U)==null||G.length===0)&&(U=function(Y){return typeof Y=="string"||I(Y)?b(Y):I(Y.data)?b(Y.data):null}(R)),(te=p.call(this,U))||(k()&&(R instanceof Uint8Array||$==="RGBA"||(H=R,R=T(R))),te=this["process"+$.toUpperCase()](R,c.call(this),U,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in t.image_compression?Y:v.NONE}(W),H)),!te)throw new Error("An unknown error occurred whilst processing the image.");return te},F=t.__addimage__.convertBase64ToBinaryString=function(R,$){var U;$=typeof $!="boolean"||$;var W,te="";if(typeof R=="string"){W=(U=S(R))!==null?U.data:R;try{te=I1(W)}catch(H){if($)throw w(W)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+H.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};t.getImageProperties=function(R){var $,U,W="";if(h(R)&&(R=d(R)),typeof R=="string"&&i(R)===e&&((W=F(R,!1))===""&&(W=t.loadFile(R)||""),R=W),U=i(R),!u(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(!k()||R instanceof Uint8Array||(R=T(R)),!($=this["process"+U.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return $.fileType=U,$}})(Xt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Xt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var i,s,r,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,h=0;h<c.length&&!u;h++)switch((i=c[h]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var d=0;d<c.length;d++){i=c[d];var p=this.internal.pdfEscape,m=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(g.objId),b=i.title||"Note";r="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(i.bounds.x)+" "+a(i.bounds.y+i.bounds.h)+" "+o(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y)+"] ")+"/Contents ("+p(v(i.contents))+")",r+=" /Popup "+y.objId+" 0 R",r+=" /P "+l.objId+" 0 R",r+=" /T ("+p(v(b))+") >>",g.content=r;var w=g.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(i.bounds.x+30)+" "+a(i.bounds.y+i.bounds.h)+" "+o(i.bounds.x+i.bounds.w+30)+" "+a(i.bounds.y)+"] ")+" /Parent "+w,i.open&&(r+=" /Open true"),r+=" >>",y.content=r,this.internal.write(g.objId,"0 R",y.objId,"0 R");break;case"freetext":s="/Rect ["+o(i.bounds.x)+" "+a(i.bounds.y)+" "+o(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y+i.bounds.h)+"] ";var S=i.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(m(i.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+S+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(i.options.name){var k=this.annotations._nameMap[i.options.name];i.options.pageNumber=k.page,i.options.top=k.y}else i.options.top||(i.options.top=0);if(s="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",r="",i.options.url)r="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(m(i.options.url))+") >>";else if(i.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,r+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var I=a(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),r+=" /XYZ "+i.options.left+" "+I+" "+i.options.zoom+"]"}r!=""&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},t.link=function(n,i,s,r,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(i),w:l(n+s),h:c(i+r)},options:o,type:"link"})},t.textWithLink=function(n,i,s,r){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(r.maxWidth!==void 0){a=r.maxWidth;var u=this.splitTextToSize(n,a).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(n,i,s,r),s+=.2*c,r.align==="center"&&(i-=l/2),r.align==="right"&&(i-=l),this.link(i,s-c,a,o,r),l},t.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}}(Xt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var r=t.__arabicParser__.isInArabicSubstitutionA=function(g){return e[g.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},a=t.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&r(g)&&e[g.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&s.indexOf(g.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&r(g)&&e[g.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&r(g)&&e[g.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&r(g)&&e[g.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&r(g)&&e[g.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(g){var y=0,v=n,b="",w=0;for(y=0;y<g.length;y+=1)v[g.charCodeAt(y)]!==void 0?(w++,typeof(v=v[g.charCodeAt(y)])=="number"&&(b+=String.fromCharCode(v),v=n,w=0),y===g.length-1&&(v=n,b+=g.charAt(y-(w-1)),y-=w-1,w=0)):(v=n,b+=g.charAt(y-w),y-=w,w=0);return b};t.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&i[g.charCodeAt(0)]!==void 0};var d=t.__arabicParser__.getCorrectForm=function(g,y,v){return o(g)?r(g)===!1?-1:!c(g)||!o(y)&&!o(v)||!o(v)&&a(y)||a(g)&&!o(y)||a(g)&&l(y)||a(g)&&a(y)?0:u(g)&&o(y)&&!a(y)&&o(v)&&c(v)?3:a(g)||!o(v)?1:2:-1},p=function(g){var y=0,v=0,b=0,w="",S="",k="",I=(g=g||"").split("\\s+"),T=[];for(y=0;y<I.length;y+=1){for(T.push(""),v=0;v<I[y].length;v+=1)w=I[y][v],S=I[y][v-1],k=I[y][v+1],o(w)?(b=d(w,S,k),T[y]+=b!==-1?String.fromCharCode(e[w.charCodeAt(0)][b]):w):T[y]+=w;T[y]=h(T[y])}return T.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var g,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(y)){var b=0;for(v=[],b=0;b<y.length;b+=1)Array.isArray(y[b])?v.push([p(y[b][0]),y[b][1],y[b][2]]):v.push([p(y[b])]);g=v}else g=p(y);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};t.events.push(["preProcessText",m])}(Xt.API),Xt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(a){r=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,i){var s;if((n=n||"2d")!=="2d")return null;for(s in i)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=i[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Xt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new r,this.internal.__cell__.pages=1},r=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var d=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(g){m=g}}),this};r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},r.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){i.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),h=c.font||this.getFont(),d=c.scaleFactor||this.internal.scaleFactor,p=0,m=0,g=0,y=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var v=c.maxWidth;v>0?typeof l=="string"?l=this.splitTextToSize(l,v):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(w,S){return w.concat(y.splitTextToSize(S,v))},[])):l=Array.isArray(l)?l:[l];for(var b=0;b<l.length;b++)p<(g=this.getStringUnitWidth(l[b],{font:h})*u)&&(p=g);return p!==0&&(m=l.length),{w:p/=d,h:Math.max((m*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/d,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new r(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof r?arguments[0]:new r(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,d=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,p&&d&&(this.printHeaderRow(l.lineNumber,!0),l.y+=d[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,h,d){if(i.call(this),!u)throw new Error("No data for PDF table.");var p,m,g,y,v=[],b=[],w=[],S={},k={},I=[],T=[],E=(d=d||{}).autoSize||!1,O=d.printHeaders!==!1,F=d.css&&d.css["font-size"]!==void 0?16*d.css["font-size"]:d.fontSize||12,R=d.margins||Object.assign({width:this.getPageWidth()},e),$=typeof d.padding=="number"?d.padding:3,U=d.headerBackgroundColor||"#c8c8c8",W=d.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=$,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=W,this.setFontSize(F),h==null)b=v=Object.keys(u[0]),w=v.map(function(){return"left"});else if(Array.isArray(h)&&qn(h[0])==="object")for(v=h.map(function(ne){return ne.name}),b=h.map(function(ne){return ne.prompt||ne.name||""}),w=h.map(function(ne){return ne.align||"left"}),p=0;p<h.length;p+=1)k[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(b=v=h,w=v.map(function(){return"left"}));if(E||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<v.length;p+=1){for(S[y=v[p]]=u.map(function(ne){return ne[y]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(b[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=S[y],this.setFont(void 0,"normal"),g=0;g<m.length;g+=1)I.push(this.getTextDimensions(m[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[y]=Math.max.apply(null,I)+$+$,I=[]}if(O){var te={};for(p=0;p<v.length;p+=1)te[v[p]]={},te[v[p]].text=b[p],te[v[p]].align=w[p];var H=a.call(this,te,k);T=v.map(function(ne){return new r(l,c,k[ne],H,te[ne].text,void 0,te[ne].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var G=h.reduce(function(ne,le){return ne[le.name]=le.align,ne},{});for(p=0;p<u.length;p+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:p,data:u[p]},this);var B=a.call(this,u[p],k);for(g=0;g<v.length;g+=1){var Y=u[p][v[g]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:p,col:g,data:Y},this),o.call(this,new r(l,c,k[v[g]],B,Y,p+2,G[v[g]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,d=this.internal.scaleFactor;return Object.keys(l).map(function(p){var m=l[p];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,c[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/d+u+u},this).reduce(function(p,m){return Math.max(p,m)},0)};t.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new r(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var d=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,d.push(u)),u.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(m)}d.length>0&&this.setTableHeaderRow(d),this.setFont(void 0,"normal"),n=!1}}(Xt.API);var MY={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},FY=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],FT=OY(FY),BY=[100,200,300,400,500,600,700,800,900],kze=OY(BY);function BT(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(r){return MY[r=r||"normal"]?r:"normal"}(t.style),i=function(r){if(!r)return 400;if(typeof r=="number")return r>=100&&r<=900&&r%100==0?r:400;if(/^\d00$/.test(r))return parseInt(r);switch(r){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(r){return typeof FT[r=r||"normal"]=="number"?r:"normal"}(t.stretch);return{family:e,style:n,weight:i,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,n,i].join(" ")}}}function uB(t,e,n,i){var s;for(s=n;s>=0&&s<e.length;s+=i)if(t[e[s]])return t[e[s]];for(s=n;s>=0&&s<e.length;s-=i)if(t[e[s]])return t[e[s]]}var Ize={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},hB={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function dB(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Nze(t,e,n){for(var i=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},Ize,n.genericFontFamilies||{}),r=null,o=null,a=0;a<e.length;++a)if(s[(r=BT(e[a])).family]&&(r.family=s[r.family]),t.hasOwnProperty(r.family)){o=t[r.family];break}if(!(o=o||t[i]))throw new Error("Could not find a font-family for the rule '"+dB(r)+"' and default family '"+i+"'.");if(o=function(l,c){if(c[l])return c[l];var u=FT[l],h=u<=FT.normal?-1:1,d=uB(c,FY,u,h);if(!d)throw new Error("Could not find a matching font-stretch value for "+l);return d}(r.stretch,o),o=function(l,c){if(c[l])return c[l];for(var u=MY[l],h=0;h<u.length;++h)if(c[u[h]])return c[u[h]];throw new Error("Could not find a matching font-style for "+l)}(r.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=kze[l],h=uB(c,BY,u,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(r.weight,o)))throw new Error("Failed to resolve a font for the rule '"+dB(r)+"'.");return o}function fB(t){return t.trimLeft()}function Eze(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function Tze(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var z2,pB,mB,qN=["times"];(function(t){var e,n,i,s,r,o,a,l,c,u=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new l,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,r=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var h=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var j=M;Object.defineProperty(this,"pdf",{get:function(){return j}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(xe){q=!!xe}});var X=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return X},set:function(xe){X=!!xe}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(xe){isNaN(xe)||(Z=xe)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(xe){isNaN(xe)||(ue=xe)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(xe){var he;typeof xe=="number"?he=[xe,xe,xe,xe]:((he=new Array(4))[0]=xe[0],he[1]=xe.length>=2?xe[1]:he[0],he[2]=xe.length>=3?xe[2]:he[0],he[3]=xe.length>=4?xe[3]:he[1]),c.margin=he}});var fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return fe},set:function(xe){fe=xe}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(xe){me=xe}});var Pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Pe},set:function(xe){Pe=xe}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(xe){xe instanceof u&&(c=xe)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(xe){c.path=xe}});var Ne=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ne},set:function(xe){Ne=xe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(xe){var he;he=d(xe),this.ctx.fillStyle=he.style,this.ctx.isFillTransparent=he.a===0,this.ctx.fillOpacity=he.a,this.pdf.setFillColor(he.r,he.g,he.b,{a:he.a}),this.pdf.setTextColor(he.r,he.g,he.b,{a:he.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(xe){var he=d(xe);this.ctx.strokeStyle=he.style,this.ctx.isStrokeTransparent=he.a===0,this.ctx.strokeOpacity=he.a,he.a===0?this.pdf.setDrawColor(255,255,255):(he.a,this.pdf.setDrawColor(he.r,he.g,he.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(xe){["butt","round","square"].indexOf(xe)!==-1&&(this.ctx.lineCap=xe,this.pdf.setLineCap(xe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(xe){isNaN(xe)||(this.ctx.lineWidth=xe,this.pdf.setLineWidth(xe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(xe){["bevel","round","miter"].indexOf(xe)!==-1&&(this.ctx.lineJoin=xe,this.pdf.setLineJoin(xe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(xe){isNaN(xe)||(this.ctx.miterLimit=xe,this.pdf.setMiterLimit(xe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(xe){this.ctx.textBaseline=xe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(xe){["right","end","center","left","start"].indexOf(xe)!==-1&&(this.ctx.textAlign=xe)}});var Fe=null;function qe(xe,he){if(Fe===null){var ut=function(ot){var Je=[];return Object.keys(ot).forEach(function(it){ot[it].forEach(function(ht){var at=null;switch(ht){case"bold":at={family:it,weight:"bold"};break;case"italic":at={family:it,style:"italic"};break;case"bolditalic":at={family:it,weight:"bold",style:"italic"};break;case"":case"normal":at={family:it}}at!==null&&(at.ref={name:it,style:ht},Je.push(at))})}),Je}(xe.getFontList());Fe=function(ot){for(var Je={},it=0;it<ot.length;++it){var ht=BT(ot[it]),at=ht.family,wt=ht.stretch,Rt=ht.style,Ft=ht.weight;Je[at]=Je[at]||{},Je[at][wt]=Je[at][wt]||{},Je[at][wt][Rt]=Je[at][wt][Rt]||{},Je[at][wt][Rt][Ft]=ht}return Je}(ut.concat(he))}return Fe}var Qe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Qe},set:function(xe){Fe=null,Qe=xe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(xe){var he;if(this.ctx.font=xe,(he=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(xe))!==null){var ut=he[1],ot=(he[2],he[3]),Je=he[4],it=(he[5],he[6]),ht=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Je)[2];Je=Math.floor(ht==="px"?parseFloat(Je)*this.pdf.internal.scaleFactor:ht==="em"?parseFloat(Je)*this.pdf.getFontSize():parseFloat(Je)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Je);var at=function(Bt){var nn,mt,di=[],gn=Bt.trim();if(gn==="")return qN;if(gn in hB)return[hB[gn]];for(;gn!=="";){switch(mt=null,nn=(gn=fB(gn)).charAt(0)){case'"':case"'":mt=Eze(gn.substring(1),nn);break;default:mt=Tze(gn)}if(mt===null||(di.push(mt[0]),(gn=fB(mt[1]))!==""&&gn.charAt(0)!==","))return qN;gn=gn.replace(/^,/,"")}return di}(it);if(this.fontFaces){var wt=Nze(qe(this.pdf,this.fontFaces),at.map(function(Bt){return{family:Bt,stretch:"normal",weight:ot,style:ut}}));this.pdf.setFont(wt.ref.name,wt.ref.style)}else{var Rt="";(ot==="bold"||parseInt(ot,10)>=700||ut==="bold")&&(Rt="bold"),ut==="italic"&&(Rt+="italic"),Rt.length===0&&(Rt="normal");for(var Ft="",pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ot=0;Ot<at.length;Ot++){if(this.pdf.internal.getFont(at[Ot],Rt,{noFallback:!0,disableWarning:!0})!==void 0){Ft=at[Ot];break}if(Rt==="bolditalic"&&this.pdf.internal.getFont(at[Ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ft=at[Ot],Rt="bold";else if(this.pdf.internal.getFont(at[Ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ft=at[Ot],Rt="normal";break}}if(Ft===""){for(var Ht=0;Ht<at.length;Ht++)if(pt[at[Ht]]){Ft=pt[at[Ht]];break}}Ft=Ft===""?"Times":Ft,this.pdf.setFont(Ft,Rt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(xe){this.ctx.globalCompositeOperation=xe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(xe){this.ctx.globalAlpha=xe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(xe){this.ctx.lineDashOffset=xe,le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(xe){this.ctx.lineDash=xe,le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(xe){this.ctx.ignoreClearRect=!!xe}})};h.prototype.setLineDash=function(M){this.lineDash=M},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){S.call(this,"fill",!1)},h.prototype.stroke=function(){S.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(M,j){if(isNaN(M)||isNaN(j))throw Li.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new o(M,j));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(M,j)},h.prototype.closePath=function(){var M=new o(0,0),j=0;for(j=this.path.length-1;j!==-1;j--)if(this.path[j].type==="begin"&&qn(this.path[j+1])==="object"&&typeof this.path[j+1].x=="number"){M=new o(this.path[j+1].x,this.path[j+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},h.prototype.lineTo=function(M,j){if(isNaN(M)||isNaN(j))throw Li.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new o(M,j));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(q.x,q.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),S.call(this,null,!0)},h.prototype.quadraticCurveTo=function(M,j,q,X){if(isNaN(q)||isNaN(X)||isNaN(M)||isNaN(j))throw Li.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new o(q,X)),ue=this.ctx.transform.applyToPoint(new o(M,j));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(Z.x,Z.y)},h.prototype.bezierCurveTo=function(M,j,q,X,Z,ue){if(isNaN(Z)||isNaN(ue)||isNaN(M)||isNaN(j)||isNaN(q)||isNaN(X))throw Li.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var fe=this.ctx.transform.applyToPoint(new o(Z,ue)),me=this.ctx.transform.applyToPoint(new o(M,j)),Pe=this.ctx.transform.applyToPoint(new o(q,X));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:Pe.x,y2:Pe.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new o(fe.x,fe.y)},h.prototype.arc=function(M,j,q,X,Z,ue){if(isNaN(M)||isNaN(j)||isNaN(q)||isNaN(X)||isNaN(Z))throw Li.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var fe=this.ctx.transform.applyToPoint(new o(M,j));M=fe.x,j=fe.y;var me=this.ctx.transform.applyToPoint(new o(0,q)),Pe=this.ctx.transform.applyToPoint(new o(0,0));q=Math.sqrt(Math.pow(me.x-Pe.x,2)+Math.pow(me.y-Pe.y,2))}Math.abs(Z-X)>=2*Math.PI&&(X=0,Z=2*Math.PI),this.path.push({type:"arc",x:M,y:j,radius:q,startAngle:X,endAngle:Z,counterclockwise:ue})},h.prototype.arcTo=function(M,j,q,X,Z){throw new Error("arcTo not implemented.")},h.prototype.rect=function(M,j,q,X){if(isNaN(M)||isNaN(j)||isNaN(q)||isNaN(X))throw Li.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,j),this.lineTo(M+q,j),this.lineTo(M+q,j+X),this.lineTo(M,j+X),this.lineTo(M,j),this.lineTo(M+q,j),this.lineTo(M,j)},h.prototype.fillRect=function(M,j,q,X){if(isNaN(M)||isNaN(j)||isNaN(q)||isNaN(X))throw Li.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,j,q,X),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},h.prototype.strokeRect=function(M,j,q,X){if(isNaN(M)||isNaN(j)||isNaN(q)||isNaN(X))throw Li.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(M,j,q,X),this.stroke())},h.prototype.clearRect=function(M,j,q,X){if(isNaN(M)||isNaN(j)||isNaN(q)||isNaN(X))throw Li.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,j,q,X))},h.prototype.save=function(M){M=typeof M!="boolean"||M;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(j),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var X=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=X}},h.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(j),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(M){var j,q,X,Z;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))j=0,q=0,X=0,Z=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ue!==null)j=parseInt(ue[1]),q=parseInt(ue[2]),X=parseInt(ue[3]),Z=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)j=parseInt(ue[1]),q=parseInt(ue[2]),X=parseInt(ue[3]),Z=parseFloat(ue[4]);else{if(Z=1,typeof M=="string"&&M.charAt(0)!=="#"){var fe=new AY(M);M=fe.ok?fe.toHex():"#000000"}M.length===4?(j=M.substring(1,2),j+=j,q=M.substring(2,3),q+=q,X=M.substring(3,4),X+=X):(j=M.substring(1,3),q=M.substring(3,5),X=M.substring(5,7)),j=parseInt(j,16),q=parseInt(q,16),X=parseInt(X,16)}}return{r:j,g:q,b:X,a:Z,style:M}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(M,j,q,X){if(isNaN(j)||isNaN(q)||typeof M!="string")throw Li.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(X=isNaN(X)?void 0:X,!p.call(this)){var Z=B(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;$.call(this,{text:M,x:j,y:q,scale:ue,angle:Z,align:this.textAlign,maxWidth:X})}},h.prototype.strokeText=function(M,j,q,X){if(isNaN(j)||isNaN(q)||typeof M!="string")throw Li.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){X=isNaN(X)?void 0:X;var Z=B(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;$.call(this,{text:M,x:j,y:q,scale:ue,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:X})}},h.prototype.measureText=function(M){if(typeof M!="string")throw Li.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var j=this.pdf,q=this.pdf.internal.scaleFactor,X=j.internal.getFontSize(),Z=j.getStringUnitWidth(M)*X/j.internal.scaleFactor,ue=function(fe){var me=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this};return new ue({width:Z*=Math.round(96*q/72*1e4)/1e4})},h.prototype.scale=function(M,j){if(isNaN(M)||isNaN(j))throw Li.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new l(M,0,0,j,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},h.prototype.rotate=function(M){if(isNaN(M))throw Li.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var j=new l(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(j)},h.prototype.translate=function(M,j){if(isNaN(M)||isNaN(j))throw Li.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new l(1,0,0,1,M,j);this.ctx.transform=this.ctx.transform.multiply(q)},h.prototype.transform=function(M,j,q,X,Z,ue){if(isNaN(M)||isNaN(j)||isNaN(q)||isNaN(X)||isNaN(Z)||isNaN(ue))throw Li.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var fe=new l(M,j,q,X,Z,ue);this.ctx.transform=this.ctx.transform.multiply(fe)},h.prototype.setTransform=function(M,j,q,X,Z,ue){M=isNaN(M)?1:M,j=isNaN(j)?0:j,q=isNaN(q)?0:q,X=isNaN(X)?1:X,Z=isNaN(Z)?0:Z,ue=isNaN(ue)?0:ue,this.ctx.transform=new l(M,j,q,X,Z,ue)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(M,j,q,X,Z,ue,fe,me,Pe){var Ne=this.pdf.getImageProperties(M),Fe=1,qe=1,Qe=1,xe=1;X!==void 0&&me!==void 0&&(Qe=me/X,xe=Pe/Z,Fe=Ne.width/X*me/X,qe=Ne.height/Z*Pe/Z),ue===void 0&&(ue=j,fe=q,j=0,q=0),X!==void 0&&me===void 0&&(me=X,Pe=Z),X===void 0&&me===void 0&&(me=Ne.width,Pe=Ne.height);for(var he,ut=this.ctx.transform.decompose(),ot=B(ut.rotate.shx),Je=new l,it=(Je=(Je=(Je=Je.multiply(ut.translate)).multiply(ut.skew)).multiply(ut.scale)).applyToRectangle(new a(ue-j*Qe,fe-q*xe,X*Fe,Z*qe)),ht=y.call(this,it),at=[],wt=0;wt<ht.length;wt+=1)at.indexOf(ht[wt])===-1&&at.push(ht[wt]);if(w(at),this.autoPaging)for(var Rt=at[0],Ft=at[at.length-1],pt=Rt;pt<Ft+1;pt++){this.pdf.setPage(pt);var Ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ht=pt===1?this.posY+this.margin[0]:this.margin[0],Bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=pt===1?0:Bt+(pt-2)*nn;if(this.ctx.clip_path.length!==0){var di=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(he,this.posX+this.margin[3],-mt+Ht+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=di}var gn=JSON.parse(JSON.stringify(it));gn=b([gn],this.posX+this.margin[3],-mt+Ht+this.ctx.prevPageLastElemOffset)[0];var Bs=(pt>Rt||pt<Ft)&&g.call(this);Bs&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ot,nn,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",gn.x,gn.y,gn.w,gn.h,null,null,ot),Bs&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",it.x,it.y,it.w,it.h,null,null,ot)};var y=function(M,j,q){var X=[];j=j||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":X.push(Math.floor((M.y+Z)/q)+1);break;case"arc":X.push(Math.floor((M.y+Z-M.radius)/q)+1),X.push(Math.floor((M.y+Z+M.radius)/q)+1);break;case"qct":var ue=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);X.push(Math.floor((ue.y+Z)/q)+1),X.push(Math.floor((ue.y+ue.h+Z)/q)+1);break;case"bct":var fe=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);X.push(Math.floor((fe.y+Z)/q)+1),X.push(Math.floor((fe.y+fe.h+Z)/q)+1);break;case"rect":X.push(Math.floor((M.y+Z)/q)+1),X.push(Math.floor((M.y+M.h+Z)/q)+1)}for(var me=0;me<X.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<X[me];)v.call(this);return X},v=function(){var M=this.fillStyle,j=this.strokeStyle,q=this.font,X=this.lineCap,Z=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=j,this.font=q,this.lineCap=X,this.lineWidth=Z,this.lineJoin=ue},b=function(M,j,q){for(var X=0;X<M.length;X++)switch(M[X].type){case"bct":M[X].x2+=j,M[X].y2+=q;case"qct":M[X].x1+=j,M[X].y1+=q;case"mt":case"lt":case"arc":default:M[X].x+=j,M[X].y+=q}return M},w=function(M){return M.sort(function(j,q){return j-q})},S=function(M,j){for(var q,X,Z=this.fillStyle,ue=this.strokeStyle,fe=this.lineCap,me=this.lineWidth,Pe=Math.abs(me*this.ctx.transform.scaleX),Ne=this.lineJoin,Fe=JSON.parse(JSON.stringify(this.path)),qe=JSON.parse(JSON.stringify(this.path)),Qe=[],xe=0;xe<qe.length;xe++)if(qe[xe].x!==void 0)for(var he=y.call(this,qe[xe]),ut=0;ut<he.length;ut+=1)Qe.indexOf(he[ut])===-1&&Qe.push(he[ut]);for(var ot=0;ot<Qe.length;ot++)for(;this.pdf.internal.getNumberOfPages()<Qe[ot];)v.call(this);if(w(Qe),this.autoPaging)for(var Je=Qe[0],it=Qe[Qe.length-1],ht=Je;ht<it+1;ht++){this.pdf.setPage(ht),this.fillStyle=Z,this.strokeStyle=ue,this.lineCap=fe,this.lineWidth=Pe,this.lineJoin=Ne;var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],wt=ht===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=ht===1?0:Rt+(ht-2)*Ft;if(this.ctx.clip_path.length!==0){var Ot=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(q,this.posX+this.margin[3],-pt+wt+this.ctx.prevPageLastElemOffset),k.call(this,M,!0),this.path=Ot}if(X=JSON.parse(JSON.stringify(Fe)),this.path=b(X,this.posX+this.margin[3],-pt+wt+this.ctx.prevPageLastElemOffset),j===!1||ht===0){var Ht=(ht>Je||ht<it)&&g.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,Ft,null).clip().discardPath()),k.call(this,M,j),Ht&&this.pdf.restoreGraphicsState()}this.lineWidth=me}else this.lineWidth=Pe,k.call(this,M,j),this.lineWidth=me;this.path=Fe},k=function(M,j){if((M!=="stroke"||j||!m.call(this))&&(M==="stroke"||j||!p.call(this))){for(var q,X,Z=[],ue=this.path,fe=0;fe<ue.length;fe++){var me=ue[fe];switch(me.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:me,deltas:[],abs:[]});break;case"lt":var Pe=Z.length;if(ue[fe-1]&&!isNaN(ue[fe-1].x)&&(q=[me.x-ue[fe-1].x,me.y-ue[fe-1].y],Pe>0)){for(;Pe>=0;Pe--)if(Z[Pe-1].close!==!0&&Z[Pe-1].begin!==!0){Z[Pe-1].deltas.push(q),Z[Pe-1].abs.push(me);break}}break;case"bct":q=[me.x1-ue[fe-1].x,me.y1-ue[fe-1].y,me.x2-ue[fe-1].x,me.y2-ue[fe-1].y,me.x-ue[fe-1].x,me.y-ue[fe-1].y],Z[Z.length-1].deltas.push(q);break;case"qct":var Ne=ue[fe-1].x+2/3*(me.x1-ue[fe-1].x),Fe=ue[fe-1].y+2/3*(me.y1-ue[fe-1].y),qe=me.x+2/3*(me.x1-me.x),Qe=me.y+2/3*(me.y1-me.y),xe=me.x,he=me.y;q=[Ne-ue[fe-1].x,Fe-ue[fe-1].y,qe-ue[fe-1].x,Qe-ue[fe-1].y,xe-ue[fe-1].x,he-ue[fe-1].y],Z[Z.length-1].deltas.push(q);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(me)}}X=j?null:M==="stroke"?"stroke":"fill";for(var ut=!1,ot=0;ot<Z.length;ot++)if(Z[ot].arc)for(var Je=Z[ot].abs,it=0;it<Je.length;it++){var ht=Je[it];ht.type==="arc"?E.call(this,ht.x,ht.y,ht.radius,ht.startAngle,ht.endAngle,ht.counterclockwise,void 0,j,!ut):U.call(this,ht.x,ht.y),ut=!0}else if(Z[ot].close===!0)this.pdf.internal.out("h"),ut=!1;else if(Z[ot].begin!==!0){var at=Z[ot].start.x,wt=Z[ot].start.y;W.call(this,Z[ot].deltas,at,wt),ut=!0}X&&O.call(this,X),j&&F.call(this)}},I=function(M){var j=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=j*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-q;case"top":return M+j-q;case"hanging":return M+j-2*q;case"middle":return M+j/2-q;case"ideographic":return M;case"alphabetic":default:return M}},T=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(j,q){this.colorStops.push([j,q])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(M,j,q,X,Z,ue,fe,me,Pe){for(var Ne=H.call(this,q,X,Z,ue),Fe=0;Fe<Ne.length;Fe++){var qe=Ne[Fe];Fe===0&&(Pe?R.call(this,qe.x1+M,qe.y1+j):U.call(this,qe.x1+M,qe.y1+j)),te.call(this,M,j,qe.x2,qe.y2,qe.x3,qe.y3,qe.x4,qe.y4)}me?F.call(this):O.call(this,fe)},O=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(M,j){this.pdf.internal.out(n(M)+" "+i(j)+" m")},$=function(M){var j;switch(M.align){case"right":case"end":j="right";break;case"center":j="center";break;case"left":case"start":default:j="left"}var q=this.pdf.getTextDimensions(M.text),X=I.call(this,M.y),Z=T.call(this,X)-q.h,ue=this.ctx.transform.applyToPoint(new o(M.x,X)),fe=this.ctx.transform.decompose(),me=new l;me=(me=(me=me.multiply(fe.translate)).multiply(fe.skew)).multiply(fe.scale);for(var Pe,Ne,Fe,qe=this.ctx.transform.applyToRectangle(new a(M.x,X,q.w,q.h)),Qe=me.applyToRectangle(new a(M.x,Z,q.w,q.h)),xe=y.call(this,Qe),he=[],ut=0;ut<xe.length;ut+=1)he.indexOf(xe[ut])===-1&&he.push(xe[ut]);if(w(he),this.autoPaging)for(var ot=he[0],Je=he[he.length-1],it=ot;it<Je+1;it++){this.pdf.setPage(it);var ht=it===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[2],Rt=wt-this.margin[0],Ft=this.pdf.internal.pageSize.width-this.margin[1],pt=Ft-this.margin[3],Ot=it===1?0:at+(it-2)*Rt;if(this.ctx.clip_path.length!==0){var Ht=this.path;Pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Pe,this.posX+this.margin[3],-1*Ot+ht),k.call(this,"fill",!0),this.path=Ht}var Bt=b([JSON.parse(JSON.stringify(Qe))],this.posX+this.margin[3],-Ot+ht+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*M.scale),Fe=this.lineWidth,this.lineWidth=Fe*M.scale);var nn=this.autoPaging!=="text";if(nn||Bt.y+Bt.h<=wt){if(nn||Bt.y>=ht&&Bt.x<=Ft){var mt=nn?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||Ft-Bt.x)[0],di=b([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-Ot+ht+this.ctx.prevPageLastElemOffset)[0],gn=nn&&(it>ot||it<Je)&&g.call(this);gn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pt,Rt,null).clip().discardPath()),this.pdf.text(mt,di.x,di.y,{angle:M.angle,align:j,renderingMode:M.renderingMode}),gn&&this.pdf.restoreGraphicsState()}}else Bt.y<wt&&(this.ctx.prevPageLastElemOffset+=wt-Bt.y);M.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=Fe)}else M.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*M.scale),Fe=this.lineWidth,this.lineWidth=Fe*M.scale),this.pdf.text(M.text,ue.x+this.posX,ue.y+this.posY,{angle:M.angle,align:j,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=Fe)},U=function(M,j,q,X){q=q||0,X=X||0,this.pdf.internal.out(n(M+q)+" "+i(j+X)+" l")},W=function(M,j,q){return this.pdf.lines(M,j,q,null,null)},te=function(M,j,q,X,Z,ue,fe,me){this.pdf.internal.out([e(s(q+M)),e(r(X+j)),e(s(Z+M)),e(r(ue+j)),e(s(fe+M)),e(r(me+j)),"c"].join(" "))},H=function(M,j,q,X){for(var Z=2*Math.PI,ue=Math.PI/2;j>q;)j-=Z;var fe=Math.abs(q-j);fe<Z&&X&&(fe=Z-fe);for(var me=[],Pe=X?-1:1,Ne=j;fe>1e-5;){var Fe=Ne+Pe*Math.min(fe,ue);me.push(G.call(this,M,Ne,Fe)),fe-=Math.abs(Fe-Ne),Ne=Fe}return me},G=function(M,j,q){var X=(q-j)/2,Z=M*Math.cos(X),ue=M*Math.sin(X),fe=Z,me=-ue,Pe=fe*fe+me*me,Ne=Pe+fe*Z+me*ue,Fe=4/3*(Math.sqrt(2*Pe*Ne)-Ne)/(fe*ue-me*Z),qe=fe-Fe*me,Qe=me+Fe*fe,xe=qe,he=-Qe,ut=X+j,ot=Math.cos(ut),Je=Math.sin(ut);return{x1:M*Math.cos(j),y1:M*Math.sin(j),x2:qe*ot-Qe*Je,y2:qe*Je+Qe*ot,x3:xe*ot-he*Je,y3:xe*Je+he*ot,x4:M*Math.cos(q),y4:M*Math.sin(q)}},B=function(M){return 180*M/Math.PI},Y=function(M,j,q,X,Z,ue){var fe=M+.5*(q-M),me=j+.5*(X-j),Pe=Z+.5*(q-Z),Ne=ue+.5*(X-ue),Fe=Math.min(M,Z,fe,Pe),qe=Math.max(M,Z,fe,Pe),Qe=Math.min(j,ue,me,Ne),xe=Math.max(j,ue,me,Ne);return new a(Fe,Qe,qe-Fe,xe-Qe)},ne=function(M,j,q,X,Z,ue,fe,me){var Pe,Ne,Fe,qe,Qe,xe,he,ut,ot,Je,it,ht,at,wt,Rt=q-M,Ft=X-j,pt=Z-q,Ot=ue-X,Ht=fe-Z,Bt=me-ue;for(Ne=0;Ne<41;Ne++)ot=(he=(Fe=M+(Pe=Ne/40)*Rt)+Pe*((Qe=q+Pe*pt)-Fe))+Pe*(Qe+Pe*(Z+Pe*Ht-Qe)-he),Je=(ut=(qe=j+Pe*Ft)+Pe*((xe=X+Pe*Ot)-qe))+Pe*(xe+Pe*(ue+Pe*Bt-xe)-ut),Ne==0?(it=ot,ht=Je,at=ot,wt=Je):(it=Math.min(it,ot),ht=Math.min(ht,Je),at=Math.max(at,ot),wt=Math.max(wt,Je));return new a(Math.round(it),Math.round(ht),Math.round(at-it),Math.round(wt-ht))},le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,j,q=(M=this.ctx.lineDash,j=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:j}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(Xt.API),function(t){var e=function(r){var o,a,l,c,u,h,d,p,m,g;for(a=[],l=0,c=(r+=o="\0\0\0\0".slice(r.length%4||4)).length;c>l;l+=4)(u=(r.charCodeAt(l)<<24)+(r.charCodeAt(l+1)<<16)+(r.charCodeAt(l+2)<<8)+r.charCodeAt(l+3))!==0?(h=(u=((u=((u=((u=(u-(g=u%85))/85)-(m=u%85))/85)-(p=u%85))/85)-(d=u%85))/85)%85,a.push(h+33,d+33,p+33,m+33,g+33)):a.push(122);return function(y,v){for(var b=v;b>0;b--)y.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(r){var o,a,l,c,u,h=String,d="length",p=255,m="charCodeAt",g="slice",y="replace";for(r[g](-2),r=r[g](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),l=[],c=0,u=(r+=o="uuuuu"[g](r[d]%5||5))[d];u>c;c+=5)a=52200625*(r[m](c)-33)+614125*(r[m](c+1)-33)+7225*(r[m](c+2)-33)+85*(r[m](c+3)-33)+(r[m](c+4)-33),l.push(p&a>>24,p&a>>16,p&a>>8,p&a);return function(v,b){for(var w=b;w>0;w--)v.pop()}(l,o[d]),h.fromCharCode.apply(h,l)},i=function(r){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((r=r.replace(/\s/g,"")).indexOf(">")!==-1&&(r=r.substr(0,r.indexOf(">"))),r.length%2&&(r+="0"),o.test(r)===!1)return"";for(var a="",l=0;l<r.length;l+=2)a+=String.fromCharCode("0x"+(r[l]+r[l+1]));return a},s=function(r){for(var o=new Uint8Array(r.length),a=r.length;a--;)o[a]=r.charCodeAt(a);return r=(o=PT(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(r,o){var a=0,l=r||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Xt.API),function(t){t.loadFile=function(e,n,i){return function(s,r,o){r=r!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,u){var h=new XMLHttpRequest,d=0,p=function(m){var g=m.length,y=[],v=String.fromCharCode;for(d=0;d<g;d+=1)y.push(v(255&m.charCodeAt(d)));return y.join("")};if(h.open("GET",l,!c),h.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(h.onload=function(){h.status===200?u(p(this.responseText)):u(void 0)}),h.send(null),c&&h.status===200)return p(h.responseText)}(s,r,o)}catch{}return a}(e,n,i)},t.loadImageFile=t.loadFile}(Xt.API),function(t){function e(){return(sn.html2canvas?Promise.resolve(sn.html2canvas):ET(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(sn.DOMPurify?Promise.resolve(sn.DOMPurify):ET(()=>import("./purify.es-a-CayzAK.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var i=function(o){var a=qn(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},s=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},r=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(r.prototype=Object.create(Promise.prototype)).constructor=r,r.convert=function(o,a){return o.__proto__=a||r.prototype,o},r.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},r.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(i(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:s("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},r.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},r.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,u){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),d=c.firstChild;d;d=d.nextSibling)u!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||h.appendChild(l(d,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},r.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},r.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var d=0;d<c.length;++d){var p=c[d],m=p.src.find(function(g){return g.format==="truetype"});m&&l.addFont(m.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),a(this.prop.container,h)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},r.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},r.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},r.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},r.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},r.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},r.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},r.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},r.prototype.set=function(o){if(i(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in r.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},r.prototype.get=function(o,a){return this.then(function(){var l=o in r.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},r.prototype.setMargin=function(o){return this.then(function(){switch(i(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},r.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Xt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},r.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},r.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},r.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,c),h}).then(c,u).then(function(h){return l.updateProgress(1),h})})},r.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:r.convert(Object.assign({},this),Promise.prototype),u=l.call(c,o,a);return r.convert(u,this.__proto__)},r.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},r.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},r.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return r.convert(a,this)},r.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},r.prototype.error=function(o){return this.then(function(){throw new Error(o)})},r.prototype.using=r.prototype.set,r.prototype.saveAs=r.prototype.save,r.prototype.export=r.prototype.output,r.prototype.run=r.prototype.then,Xt.getPageSize=function(o,a,l){if(qn(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+l).toLowerCase(),d={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+a}var p,m=0,g=0;if(d.hasOwnProperty(h))m=d[h][1]/u,g=d[h][0]/u;else try{m=l[1],g=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",g>m&&(p=g,g=m,m=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",m>g&&(p=g,g=m,m=p)}return{width:g,height:m,unit:a,k:u,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(BT):null;var l=new r(a);return a.worker?l:l.from(o).doCallback()}}(Xt.API),Xt.API.addJS=function(t){return mB=t,this.internal.events.subscribe("postPutResources",function(){z2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(z2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),pB=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+mB+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){z2!==void 0&&pB!==void 0&&this.internal.out("/Names <</JavaScript "+z2+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),r=0;r<s.length;r++){var o=s[r],a=i.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(r=0;r<c;r++){var h=n.internal.newObject();u.push(h);var d=n.internal.getPageInfo(r+1);n.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),r=0;r<u.length;r++)n.internal.write("(page_"+(r+1)+")"+u[r]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,s,r){var o={title:s,options:r,children:[]};return i==null&&(i=this.root),i.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var s=0;s<i.children.length;s++)this.genIds_r(i.children[s])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<i.children.length;r++){var o=i.children[r];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(i)),r>0&&this.line("/Prev "+this.makeRef(i.children[r-1])),r<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[r+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<i.children.length;c++)this.renderItems(i.children[c])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,s){for(var r=0;r<s.children.length;r++)i.count++,this.count_r(i,s.children[r]);return i.count}}])}(Xt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,i,s,r,o,a){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(h){for(var d,p=256*h.charCodeAt(4)+h.charCodeAt(5),m=h.length,g={width:0,height:0,numcomponents:1},y=4;y<m;y+=2){if(y+=p,e.indexOf(h.charCodeAt(y+1))!==-1){d=256*h.charCodeAt(y+5)+h.charCodeAt(y+6),g={width:256*h.charCodeAt(y+7)+h.charCodeAt(y+8),height:d,numcomponents:h.charCodeAt(y+9)};break}p=256*h.charCodeAt(y+2)+h.charCodeAt(y+3)}return g}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:i,alias:s}}return u}}(Xt.API);var lg,j2,gB,vB,yB,Aze=function(){var t,e,n;function i(r){var o,a,l,c,u,h,d,p,m,g,y,v,b,w;for(this.data=r,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),m=(function(){var S,k;for(k=[],S=0;S<4;++S)k.push(String.fromCharCode(this.data[this.pos++]));return k}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,h.delay=1e3*u/c,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(m==="fdAT"&&(this.pos+=4,o-=4),r=(h!=null?h.data:void 0)||this.imgData,v=0;0<=o?v<o:v>o;0<=o?++v:--v)r.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((g=l-this.transparency.indexed.length)>0)for(b=0;0<=g?b<g:b>g;0<=g?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":d=(y=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,y.slice(0,d)),this.text[p]=String.fromCharCode.apply(String,y.slice(d+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(w=this.colorType)===4||w===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(r){var o,a;for(a=[],o=0;0<=r?o<r:o>r;0<=r?++o:--o)a.push(this.data[this.pos++]);return a},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(r){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(r==null&&(r=this.imgData),r.length===0)return new Uint8Array(0);function u(h,d,p,m){var g,y,v,b,w,S,k,I,T,E,O,F,R,$,U,W,te,H,G,B,Y,ne=Math.ceil((c.width-h)/p),le=Math.ceil((c.height-d)/m),M=c.width==ne&&c.height==le;for($=o*ne,F=M?a:new Uint8Array($*le),S=r.length,R=0,y=0;R<le&&l<S;){switch(r[l++]){case 0:for(b=te=0;te<$;b=te+=1)F[y++]=r[l++];break;case 1:for(b=H=0;H<$;b=H+=1)g=r[l++],w=b<o?0:F[y-o],F[y++]=(g+w)%256;break;case 2:for(b=G=0;G<$;b=G+=1)g=r[l++],v=(b-b%o)/o,U=R&&F[(R-1)*$+v*o+b%o],F[y++]=(U+g)%256;break;case 3:for(b=B=0;B<$;b=B+=1)g=r[l++],v=(b-b%o)/o,w=b<o?0:F[y-o],U=R&&F[(R-1)*$+v*o+b%o],F[y++]=(g+Math.floor((w+U)/2))%256;break;case 4:for(b=Y=0;Y<$;b=Y+=1)g=r[l++],v=(b-b%o)/o,w=b<o?0:F[y-o],R===0?U=W=0:(U=F[(R-1)*$+v*o+b%o],W=v&&F[(R-1)*$+(v-1)*o+b%o]),k=w+U-W,I=Math.abs(k-w),E=Math.abs(k-U),O=Math.abs(k-W),T=I<=E&&I<=O?w:E<=O?U:W,F[y++]=(g+T)%256;break;default:throw new Error("Invalid filter algorithm: "+r[l-1])}if(!M){var j=((d+R*m)*c.width+h)*o,q=R*$;for(b=0;b<ne;b+=1){for(var X=0;X<o;X+=1)a[j++]=F[q++];j+=(p-1)*o}}R++}}return r=aze(r),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),a},i.prototype.decodePalette=function(){var r,o,a,l,c,u,h,d,p;for(a=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+a.length),l=0,r=0,o=h=0,d=a.length;h<d;o=h+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(p=u[r++])!=null?p:255;return c},i.prototype.copyToImageData=function(r,o){var a,l,c,u,h,d,p,m,g,y,v;if(l=this.colors,g=null,a=this.hasAlphaChannel,this.palette.length&&(g=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),l=4,a=!0),m=(c=r.data||r).length,h=g||o,u=d=0,l===1)for(;u<m;)p=g?4*o[u/4]:d,y=h[p++],c[u++]=y,c[u++]=y,c[u++]=y,c[u++]=a?h[p++]:255,d=p;else for(;u<m;)p=g?4*o[u/4]:d,c[u++]=h[p++],c[u++]=h[p++],c[u++]=h[p++],c[u++]=a?h[p++]:255,d=p},i.prototype.decode=function(){var r;return r=new Uint8Array(this.width*this.height*4),this.copyToImageData(r,this.decodePixels()),r};var s=function(){if(Object.prototype.toString.call(sn)==="[object Window]"){try{e=sn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(r){var o;if(s()===!0)return n.width=r.width,n.height=r.height,n.clearRect(0,0,r.width,r.height),n.putImageData(r,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(r){var o,a,l,c,u,h,d,p;if(this.animation){for(p=[],a=u=0,h=(d=this.animation.frames).length;u<h;a=++u)o=d[a],l=r.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,p.push(o.image=t(l));return p}},i.prototype.renderFrame=function(r,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&r.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?r.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&r.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&r.clearRect(a.xOffset,a.yOffset,a.width,a.height),r.drawImage(a.image,a.xOffset,a.yOffset)},i.prototype.animate=function(r){var o,a,l,c,u,h,d=this;return a=0,h=this.animation,c=h.numFrames,l=h.frames,u=h.numPlays,(o=function(){var p,m;if(p=a++%c,m=l[p],d.renderFrame(r,p),c>1&&a/c<u)return d.animation._timeout=setTimeout(o,m.delay)})()},i.prototype.stopAnimation=function(){var r;return clearTimeout((r=this.animation)!=null?r._timeout:void 0)},i.prototype.render=function(r){var o,a;return r._png&&r._png.stopAnimation(),r._png=this,r.width=this.width,r.height=this.height,o=r.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Rze(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,s=t[e++],r=s>>7,o=1<<(7&s)+1;t[e++],t[e++];var a=null,l=null;r&&(a=e,l=o,e+=3*o);var c=!0,u=[],h=0,d=null,p=0,m=null;for(this.width=n,this.height=i;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var g=t[e++];h=t[e++]|t[e++]<<8,d=t[e++],!(1&g)&&(d=null),p=g>>2&7,e++;break;case 254:for(;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var y=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,S=t[e++],k=S>>6&1,I=1<<(7&S)+1,T=a,E=l,O=!1;S>>7&&(O=!0,T=e,E=I,e+=3*I);var F=e;for(e++;;){var R;if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}u.push({x:y,y:v,width:b,height:w,has_local_palette:O,palette_offset:T,palette_size:E,data_offset:F,data_length:e-F,transparent_index:d,interlaced:!!k,delay:h,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function($){if($<0||$>=u.length)throw new Error("Frame index out of range.");return u[$]},this.decodeAndBlitFrameBGRA=function($,U){var W=this.frameInfo($),te=W.width*W.height,H=new Uint8Array(te);bB(t,W.data_offset,H,te);var G=W.palette_offset,B=W.transparent_index;B===null&&(B=256);var Y=W.width,ne=n-Y,le=Y,M=4*(W.y*n+W.x),j=4*((W.y+W.height)*n+W.x),q=M,X=4*ne;W.interlaced===!0&&(X+=4*n*7);for(var Z=8,ue=0,fe=H.length;ue<fe;++ue){var me=H[ue];if(le===0&&(le=Y,(q+=X)>=j&&(X=4*ne+4*n*(Z-1),q=M+(Y+ne)*(Z<<1),Z>>=1)),me===B)q+=4;else{var Pe=t[G+3*me],Ne=t[G+3*me+1],Fe=t[G+3*me+2];U[q++]=Fe,U[q++]=Ne,U[q++]=Pe,U[q++]=255}--le}},this.decodeAndBlitFrameRGBA=function($,U){var W=this.frameInfo($),te=W.width*W.height,H=new Uint8Array(te);bB(t,W.data_offset,H,te);var G=W.palette_offset,B=W.transparent_index;B===null&&(B=256);var Y=W.width,ne=n-Y,le=Y,M=4*(W.y*n+W.x),j=4*((W.y+W.height)*n+W.x),q=M,X=4*ne;W.interlaced===!0&&(X+=4*n*7);for(var Z=8,ue=0,fe=H.length;ue<fe;++ue){var me=H[ue];if(le===0&&(le=Y,(q+=X)>=j&&(X=4*ne+4*n*(Z-1),q=M+(Y+ne)*(Z<<1),Z>>=1)),me===B)q+=4;else{var Pe=t[G+3*me],Ne=t[G+3*me+1],Fe=t[G+3*me+2];U[q++]=Pe,U[q++]=Ne,U[q++]=Fe,U[q++]=255}--le}}}function bB(t,e,n,i){for(var s=t[e++],r=1<<s,o=r+1,a=o+1,l=s+1,c=(1<<l)-1,u=0,h=0,d=0,p=t[e++],m=new Int32Array(4096),g=null;;){for(;u<16&&p!==0;)h|=t[e++]<<u,u+=8,p===1?p=t[e++]:--p;if(u<l)break;var y=h&c;if(h>>=l,u-=l,y!==r){if(y===o)break;for(var v=y<a?y:g,b=0,w=v;w>r;)w=m[w]>>8,++b;var S=w;if(d+b+(v!==y?1:0)>i)return void Li.log("Warning, gif stream longer than expected.");n[d++]=S;var k=d+=b;for(v!==y&&(n[d++]=S),w=v;b--;)w=m[w],n[--k]=255&w,w>>=8;g!==null&&a<4096&&(m[a++]=g<<8|S,a>=c+1&&l<12&&(++l,c=c<<1|1)),g=y}else a=o+1,c=(1<<(l=s+1))-1,g=null}return d!==i&&Li.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function KN(t){var e,n,i,s,r,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),h=new Array(65535),d=new Array(65535),p=new Array(64),m=new Array(64),g=[],y=0,v=7,b=new Array(64),w=new Array(64),S=new Array(64),k=new Array(256),I=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],$=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function H(M,j){for(var q=0,X=0,Z=new Array,ue=1;ue<=16;ue++){for(var fe=1;fe<=M[ue];fe++)Z[j[X]]=[],Z[j[X]][0]=q,Z[j[X]][1]=ue,X++,q++;q*=2}return Z}function G(M){for(var j=M[0],q=M[1]-1;q>=0;)j&1<<q&&(y|=1<<v),q--,--v<0&&(y==255?(B(255),B(0)):B(y),v=7,y=0)}function B(M){g.push(M)}function Y(M){B(M>>8&255),B(255&M)}function ne(M,j,q,X,Z){for(var ue,fe=Z[0],me=Z[240],Pe=function(Je,it){var ht,at,wt,Rt,Ft,pt,Ot,Ht,Bt,nn,mt=0;for(Bt=0;Bt<8;++Bt){ht=Je[mt],at=Je[mt+1],wt=Je[mt+2],Rt=Je[mt+3],Ft=Je[mt+4],pt=Je[mt+5],Ot=Je[mt+6];var di=ht+(Ht=Je[mt+7]),gn=ht-Ht,Bs=at+Ot,Vn=at-Ot,ki=wt+pt,Js=wt-pt,$n=Rt+Ft,rl=Rt-Ft,fi=di+$n,gr=di-$n,na=Bs+ki,Ti=Bs-ki;Je[mt]=fi+na,Je[mt+4]=fi-na;var on=.707106781*(Ti+gr);Je[mt+2]=gr+on,Je[mt+6]=gr-on;var Wn=.382683433*((fi=rl+Js)-(Ti=Vn+gn)),ia=.5411961*fi+Wn,Ji=1.306562965*Ti+Wn,sa=.707106781*(na=Js+Vn),Qr=gn+sa,ge=gn-sa;Je[mt+5]=ge+ia,Je[mt+3]=ge-ia,Je[mt+1]=Qr+Ji,Je[mt+7]=Qr-Ji,mt+=8}for(mt=0,Bt=0;Bt<8;++Bt){ht=Je[mt],at=Je[mt+8],wt=Je[mt+16],Rt=Je[mt+24],Ft=Je[mt+32],pt=Je[mt+40],Ot=Je[mt+48];var Ee=ht+(Ht=Je[mt+56]),Be=ht-Ht,Ke=at+Ot,lt=at-Ot,Ge=wt+pt,Mt=wt-pt,Nt=Rt+Ft,St=Rt-Ft,vt=Ee+Nt,Et=Ee-Nt,Zt=Ke+Ge,Qt=Ke-Ge;Je[mt]=vt+Zt,Je[mt+32]=vt-Zt;var Xn=.707106781*(Qt+Et);Je[mt+16]=Et+Xn,Je[mt+48]=Et-Xn;var En=.382683433*((vt=St+Mt)-(Qt=lt+Be)),Sn=.5411961*vt+En,oi=1.306562965*Qt+En,Io=.707106781*(Zt=Mt+lt),No=Be+Io,vr=Be-Io;Je[mt+40]=vr+Sn,Je[mt+24]=vr-Sn,Je[mt+8]=No+oi,Je[mt+56]=No-oi,mt++}for(Bt=0;Bt<64;++Bt)nn=Je[Bt]*it[Bt],p[Bt]=nn>0?nn+.5|0:nn-.5|0;return p}(M,j),Ne=0;Ne<64;++Ne)m[T[Ne]]=Pe[Ne];var Fe=m[0]-q;q=m[0],Fe==0?G(X[0]):(G(X[d[ue=32767+Fe]]),G(h[ue]));for(var qe=63;qe>0&&m[qe]==0;)qe--;if(qe==0)return G(fe),q;for(var Qe,xe=1;xe<=qe;){for(var he=xe;m[xe]==0&&xe<=qe;)++xe;var ut=xe-he;if(ut>=16){Qe=ut>>4;for(var ot=1;ot<=Qe;++ot)G(me);ut&=15}ue=32767+m[xe],G(Z[(ut<<4)+d[ue]]),G(h[ue]),xe++}return qe!=63&&G(fe),q}function le(M){M=Math.min(Math.max(M,1),100),r!=M&&(function(j){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],X=0;X<64;X++){var Z=o((q[X]*j+50)/100);Z=Math.min(Math.max(Z,1),255),a[T[X]]=Z}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],fe=0;fe<64;fe++){var me=o((ue[fe]*j+50)/100);me=Math.min(Math.max(me,1),255),l[T[fe]]=me}for(var Pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ne=0,Fe=0;Fe<8;Fe++)for(var qe=0;qe<8;qe++)c[Ne]=1/(a[T[Ne]]*Pe[Fe]*Pe[qe]*8),u[Ne]=1/(l[T[Ne]]*Pe[Fe]*Pe[qe]*8),Ne++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),r=M)}this.encode=function(M,j){j&&le(j),g=new Array,y=0,v=7,Y(65496),Y(65504),Y(16),B(74),B(70),B(73),B(70),B(0),B(1),B(1),B(0),Y(1),Y(1),B(0),B(0),function(){Y(65499),Y(132),B(0);for(var at=0;at<64;at++)B(a[at]);B(1);for(var wt=0;wt<64;wt++)B(l[wt])}(),function(at,wt){Y(65472),Y(17),B(8),Y(wt),Y(at),B(3),B(1),B(17),B(0),B(2),B(17),B(1),B(3),B(17),B(1)}(M.width,M.height),function(){Y(65476),Y(418),B(0);for(var at=0;at<16;at++)B(E[at+1]);for(var wt=0;wt<=11;wt++)B(O[wt]);B(16);for(var Rt=0;Rt<16;Rt++)B(F[Rt+1]);for(var Ft=0;Ft<=161;Ft++)B(R[Ft]);B(1);for(var pt=0;pt<16;pt++)B($[pt+1]);for(var Ot=0;Ot<=11;Ot++)B(U[Ot]);B(17);for(var Ht=0;Ht<16;Ht++)B(W[Ht+1]);for(var Bt=0;Bt<=161;Bt++)B(te[Bt])}(),Y(65498),Y(12),B(3),B(1),B(0),B(2),B(17),B(3),B(17),B(0),B(63),B(0);var q=0,X=0,Z=0;y=0,v=7,this.encode.displayName="_encode_";for(var ue,fe,me,Pe,Ne,Fe,qe,Qe,xe,he=M.data,ut=M.width,ot=M.height,Je=4*ut,it=0;it<ot;){for(ue=0;ue<Je;){for(Ne=Je*it+ue,qe=-1,Qe=0,xe=0;xe<64;xe++)Fe=Ne+(Qe=xe>>3)*Je+(qe=4*(7&xe)),it+Qe>=ot&&(Fe-=Je*(it+1+Qe-ot)),ue+qe>=Je&&(Fe-=ue+qe-Je+4),fe=he[Fe++],me=he[Fe++],Pe=he[Fe++],b[xe]=(I[fe]+I[me+256>>0]+I[Pe+512>>0]>>16)-128,w[xe]=(I[fe+768>>0]+I[me+1024>>0]+I[Pe+1280>>0]>>16)-128,S[xe]=(I[fe+1280>>0]+I[me+1536>>0]+I[Pe+1792>>0]>>16)-128;q=ne(b,c,q,e,i),X=ne(w,u,X,n,s),Z=ne(S,u,Z,n,s),ue+=32}it+=8}if(v>=0){var ht=[];ht[1]=v+1,ht[0]=(1<<v+1)-1,G(ht)}return Y(65497),new Uint8Array(g)},t=t||50,function(){for(var M=String.fromCharCode,j=0;j<256;j++)k[j]=M(j)}(),e=H(E,O),n=H($,U),i=H(F,R),s=H(W,te),function(){for(var M=1,j=2,q=1;q<=15;q++){for(var X=M;X<j;X++)d[32767+X]=q,h[32767+X]=[],h[32767+X][1]=q,h[32767+X][0]=X;for(var Z=-(j-1);Z<=-M;Z++)d[32767+Z]=q,h[32767+Z]=[],h[32767+Z][1]=q,h[32767+Z][0]=j-1+Z;M<<=1,j<<=1}}(),function(){for(var M=0;M<256;M++)I[M]=19595*M,I[M+256>>0]=38470*M,I[M+512>>0]=7471*M+32768,I[M+768>>0]=-11059*M,I[M+1024>>0]=-21709*M,I[M+1280>>0]=32768*M+8421375,I[M+1536>>0]=-27439*M,I[M+1792>>0]=-5329*M}(),le(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function rc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function xB(t){function e(E){if(!E)throw Error("assert :P")}function n(E,O,F){for(var R=0;4>R;R++)if(E[O+R]!=F.charCodeAt(R))return!0;return!1}function i(E,O,F,R,$){for(var U=0;U<$;U++)E[O+U]=F[R+U]}function s(E,O,F,R){for(var $=0;$<R;$++)E[O+$]=F}function r(E){return new Int32Array(E)}function o(E,O){for(var F=[],R=0;R<E;R++)F.push(new O);return F}function a(E,O){var F=[];return function R($,U,W){for(var te=W[U],H=0;H<te&&($.push(W.length>U+1?[]:new O),!(W.length<U+1));H++)R($[H],U+1,W)}(F,0,E),F}var l=function(){var E=this;function O(_,N){for(var D=1<<N-1>>>0;_&D;)D>>>=1;return D?(_&D-1)+D:_}function F(_,N,D,z,J){e(!(z%D));do _[N+(z-=D)]=J;while(0<z)}function R(_,N,D,z,J){if(e(2328>=J),512>=J)var ie=r(512);else if((ie=r(J))==null)return 0;return function(se,oe,ae,de,_e,Oe){var Me,Te,Ze=oe,Ue=1<<ae,Se=r(16),Ie=r(16);for(e(_e!=0),e(de!=null),e(se!=null),e(0<ae),Te=0;Te<_e;++Te){if(15<de[Te])return 0;++Se[de[Te]]}if(Se[0]==_e)return 0;for(Ie[1]=0,Me=1;15>Me;++Me){if(Se[Me]>1<<Me)return 0;Ie[Me+1]=Ie[Me]+Se[Me]}for(Te=0;Te<_e;++Te)Me=de[Te],0<de[Te]&&(Oe[Ie[Me]++]=Te);if(Ie[15]==1)return(de=new $).g=0,de.value=Oe[0],F(se,Ze,1,Ue,de),Ue;var Xe,tt=-1,Ye=Ue-1,Tt=0,bt=1,Kt=1,_t=1<<ae;for(Te=0,Me=1,_e=2;Me<=ae;++Me,_e<<=1){if(bt+=Kt<<=1,0>(Kt-=Se[Me]))return 0;for(;0<Se[Me];--Se[Me])(de=new $).g=Me,de.value=Oe[Te++],F(se,Ze+Tt,_e,_t,de),Tt=O(Tt,Me)}for(Me=ae+1,_e=2;15>=Me;++Me,_e<<=1){if(bt+=Kt<<=1,0>(Kt-=Se[Me]))return 0;for(;0<Se[Me];--Se[Me]){if(de=new $,(Tt&Ye)!=tt){for(Ze+=_t,Xe=1<<(tt=Me)-ae;15>tt&&!(0>=(Xe-=Se[tt]));)++tt,Xe<<=1;Ue+=_t=1<<(Xe=tt-ae),se[oe+(tt=Tt&Ye)].g=Xe+ae,se[oe+tt].value=Ze-oe-tt}de.g=Me-ae,de.value=Oe[Te++],F(se,Ze+(Tt>>ae),_e,_t,de),Tt=O(Tt,Me)}}return bt!=2*Ie[15]-1?0:Ue}(_,N,D,z,J,ie)}function $(){this.value=this.g=0}function U(){this.value=this.g=0}function W(){this.G=o(5,$),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(gs,U)}function te(_,N,D,z){e(_!=null),e(N!=null),e(2147483648>z),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=N,_.pa=D,_.Jd=N,_.Yc=D+z,_.Zc=4<=z?D+z-4+1:D,ue(_)}function H(_,N){for(var D=0;0<N--;)D|=me(_,128)<<N;return D}function G(_,N){var D=H(_,N);return fe(_)?-D:D}function B(_,N,D,z){var J,ie=0;for(e(_!=null),e(N!=null),e(4294967288>z),_.Sb=z,_.Ra=0,_.u=0,_.h=0,4<z&&(z=4),J=0;J<z;++J)ie+=N[D+J]<<8*J;_.Ra=ie,_.bb=z,_.oa=N,_.pa=D}function Y(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<Zl-8>>>0,++_.bb,_.u-=8;q(_)&&(_.h=1,_.u=0)}function ne(_,N){if(e(0<=N),!_.h&&N<=Lo){var D=j(_)&qh[N];return _.u+=N,Y(_),D}return _.h=1,_.u=0}function le(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(_){return _.Ra>>>(_.u&Zl-1)>>>0}function q(_){return e(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>Zl}function X(_,N){_.u=N,_.h=q(_)}function Z(_){_.u>=Uf&&(e(_.u>=Uf),Y(_))}function ue(_){e(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(e(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function fe(_){return H(_,1)}function me(_,N){var D=_.Ca;0>_.b&&ue(_);var z=_.b,J=D*N>>>8,ie=(_.I>>>z>J)+0;for(ie?(D-=J,_.I-=J+1<<z>>>0):D=J+1,z=D,J=0;256<=z;)J+=8,z>>=8;return z=7^J+xr[z],_.b-=z,_.Ca=(D<<z)-1,ie}function Pe(_,N,D){_[N+0]=D>>24&255,_[N+1]=D>>16&255,_[N+2]=D>>8&255,_[N+3]=D>>0&255}function Ne(_,N){return _[N+0]<<0|_[N+1]<<8}function Fe(_,N){return Ne(_,N)|_[N+2]<<16}function qe(_,N){return Ne(_,N)|Ne(_,N+2)<<16}function Qe(_,N){var D=1<<N;return e(_!=null),e(0<N),_.X=r(D),_.X==null?0:(_.Mb=32-N,_.Xa=N,1)}function xe(_,N){e(_!=null),e(N!=null),e(_.Xa==N.Xa),i(N.X,0,_.X,0,1<<N.Xa)}function he(){this.X=[],this.Xa=this.Mb=0}function ut(_,N,D,z){e(D!=null),e(z!=null);var J=D[0],ie=z[0];return J==0&&(J=(_*ie+N/2)/N),ie==0&&(ie=(N*J+_/2)/_),0>=J||0>=ie?0:(D[0]=J,z[0]=ie,1)}function ot(_,N){return _+(1<<N)-1>>>N}function Je(_,N){return((4278255360&_)+(4278255360&N)>>>0&4278255360)+((16711935&_)+(16711935&N)>>>0&16711935)>>>0}function it(_,N){E[N]=function(D,z,J,ie,se,oe,ae){var de;for(de=0;de<se;++de){var _e=E[_](oe[ae+de-1],J,ie+de);oe[ae+de]=Je(D[z+de],_e)}}}function ht(){this.ud=this.hd=this.jd=0}function at(_,N){return((4278124286&(_^N))>>>1)+(_&N)>>>0}function wt(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function Rt(_,N){return wt(_+(_-N+.5>>1))}function Ft(_,N,D){return Math.abs(N-D)-Math.abs(_-D)}function pt(_,N,D,z,J,ie,se){for(z=ie[se-1],D=0;D<J;++D)ie[se+D]=z=Je(_[N+D],z)}function Ot(_,N,D,z,J){var ie;for(ie=0;ie<D;++ie){var se=_[N+ie],oe=se>>8&255,ae=16711935&(ae=(ae=16711935&se)+((oe<<16)+oe));z[J+ie]=(4278255360&se)+ae>>>0}}function Ht(_,N){N.jd=_>>0&255,N.hd=_>>8&255,N.ud=_>>16&255}function Bt(_,N,D,z,J,ie){var se;for(se=0;se<z;++se){var oe=N[D+se],ae=oe>>>8,de=oe,_e=255&(_e=(_e=oe>>>16)+((_.jd<<24>>24)*(ae<<24>>24)>>>5));de=255&(de=(de=de+((_.hd<<24>>24)*(ae<<24>>24)>>>5))+((_.ud<<24>>24)*(_e<<24>>24)>>>5)),J[ie+se]=(4278255360&oe)+(_e<<16)+de}}function nn(_,N,D,z,J){E[N]=function(ie,se,oe,ae,de,_e,Oe,Me,Te){for(ae=Oe;ae<Me;++ae)for(Oe=0;Oe<Te;++Oe)de[_e++]=J(oe[z(ie[se++])])},E[_]=function(ie,se,oe,ae,de,_e,Oe){var Me=8>>ie.b,Te=ie.Ea,Ze=ie.K[0],Ue=ie.w;if(8>Me)for(ie=(1<<ie.b)-1,Ue=(1<<Me)-1;se<oe;++se){var Se,Ie=0;for(Se=0;Se<Te;++Se)Se&ie||(Ie=z(ae[de++])),_e[Oe++]=J(Ze[Ie&Ue]),Ie>>=Me}else E["VP8LMapColor"+D](ae,de,Ze,Ue,_e,Oe,se,oe,Te)}}function mt(_,N,D,z,J){for(D=N+D;N<D;){var ie=_[N++];z[J++]=ie>>16&255,z[J++]=ie>>8&255,z[J++]=ie>>0&255}}function di(_,N,D,z,J){for(D=N+D;N<D;){var ie=_[N++];z[J++]=ie>>16&255,z[J++]=ie>>8&255,z[J++]=ie>>0&255,z[J++]=ie>>24&255}}function gn(_,N,D,z,J){for(D=N+D;N<D;){var ie=(se=_[N++])>>16&240|se>>12&15,se=se>>0&240|se>>28&15;z[J++]=ie,z[J++]=se}}function Bs(_,N,D,z,J){for(D=N+D;N<D;){var ie=(se=_[N++])>>16&248|se>>13&7,se=se>>5&224|se>>3&31;z[J++]=ie,z[J++]=se}}function Vn(_,N,D,z,J){for(D=N+D;N<D;){var ie=_[N++];z[J++]=ie>>0&255,z[J++]=ie>>8&255,z[J++]=ie>>16&255}}function ki(_,N,D,z,J,ie){if(ie==0)for(D=N+D;N<D;)Pe(z,((ie=_[N++])[0]>>24|ie[1]>>8&65280|ie[2]<<8&16711680|ie[3]<<24)>>>0),J+=32;else i(z,J,_,N,D)}function Js(_,N){E[N][0]=E[_+"0"],E[N][1]=E[_+"1"],E[N][2]=E[_+"2"],E[N][3]=E[_+"3"],E[N][4]=E[_+"4"],E[N][5]=E[_+"5"],E[N][6]=E[_+"6"],E[N][7]=E[_+"7"],E[N][8]=E[_+"8"],E[N][9]=E[_+"9"],E[N][10]=E[_+"10"],E[N][11]=E[_+"11"],E[N][12]=E[_+"12"],E[N][13]=E[_+"13"],E[N][14]=E[_+"0"],E[N][15]=E[_+"0"]}function $n(_){return _==Wm||_==Um||_==Hm||_==f}function rl(){this.eb=[],this.size=this.A=this.fb=0}function fi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function gr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rl,this.f.kb=new fi,this.sd=null}function na(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ti(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function on(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function Wn(_,N){var D=_.T,z=N.ba.f.RGBA,J=z.eb,ie=z.fb+_.ka*z.A,se=Fr[N.ba.S],oe=_.y,ae=_.O,de=_.f,_e=_.N,Oe=_.ea,Me=_.W,Te=N.cc,Ze=N.dc,Ue=N.Mc,Se=N.Nc,Ie=_.ka,Xe=_.ka+_.T,tt=_.U,Ye=tt+1>>1;for(Ie==0?se(oe,ae,null,null,de,_e,Oe,Me,de,_e,Oe,Me,J,ie,null,null,tt):(se(N.ec,N.fc,oe,ae,Te,Ze,Ue,Se,de,_e,Oe,Me,J,ie-z.A,J,ie,tt),++D);Ie+2<Xe;Ie+=2)Te=de,Ze=_e,Ue=Oe,Se=Me,_e+=_.Rc,Me+=_.Rc,ie+=2*z.A,se(oe,(ae+=2*_.fa)-_.fa,oe,ae,Te,Ze,Ue,Se,de,_e,Oe,Me,J,ie-z.A,J,ie,tt);return ae+=_.fa,_.j+Xe<_.o?(i(N.ec,N.fc,oe,ae,tt),i(N.cc,N.dc,de,_e,Ye),i(N.Mc,N.Nc,Oe,Me,Ye),D--):1&Xe||se(oe,ae,null,null,de,_e,Oe,Me,de,_e,Oe,Me,J,ie+z.A,null,null,tt),D}function ia(_,N,D){var z=_.F,J=[_.J];if(z!=null){var ie=_.U,se=N.ba.S,oe=se==Xf||se==Hm;N=N.ba.f.RGBA;var ae=[0],de=_.ka;ae[0]=_.T,_.Kb&&(de==0?--ae[0]:(--de,J[0]-=_.width),_.j+_.ka+_.T==_.o&&(ae[0]=_.o-_.j-de));var _e=N.eb;de=N.fb+de*N.A,_=mi(z,J[0],_.width,ie,ae,_e,de+(oe?0:3),N.A),e(D==ae),_&&$n(se)&&sr(_e,de,oe,ie,ae,N.A)}return 0}function Ji(_){var N=_.ma,D=N.ba.S,z=11>D,J=D==qf||D==Kf||D==Xf||D==Vm||D==12||$n(D);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!Wf(N.Oa,_,J?11:12))return 0;if(J&&$n(D)&&st(),_.da)alert("todo:use_scaling");else{if(z){if(N.Ib=on,_.Kb){if(D=_.U+1>>1,N.memory=r(_.U+2*D),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+_.U,N.Mc=N.cc,N.Nc=N.dc+D,N.Ib=Wn,st()}}else alert("todo:EmitYUV");J&&(N.Jb=ia,z&&Le())}if(z&&!bD){for(_=0;256>_;++_)YY[_]=89858*(_-128)+Sx>>_x,JY[_]=-22014*(_-128)+Sx,QY[_]=-45773*(_-128),ZY[_]=113618*(_-128)+Sx>>_x;for(_=nv;_<eI;++_)N=76283*(_-16)+Sx>>_x,eZ[_-nv]=Hi(N,255),tZ[_-nv]=Hi(N+8>>4,15);bD=1}return 1}function sa(_){var N=_.ma,D=_.U,z=_.T;return e(!(1&_.ka)),0>=D||0>=z?0:(D=N.Ib(_,N),N.Jb!=null&&N.Jb(_,N,D),N.Dc+=D,1)}function Qr(_){_.ma.memory=null}function ge(_,N,D,z){return ne(_,8)!=47?0:(N[0]=ne(_,14)+1,D[0]=ne(_,14)+1,z[0]=ne(_,1),ne(_,3)!=0?0:!_.h)}function Ee(_,N){if(4>_)return _+1;var D=_-2>>1;return(2+(1&_)<<D)+ne(N,D)+1}function Be(_,N){return 120<N?N-120:1<=(D=((D=ye[N-1])>>4)*_+(8-(15&D)))?D:1;var D}function Ke(_,N,D){var z=j(D),J=_[N+=255&z].g-8;return 0<J&&(X(D,D.u+8),z=j(D),N+=_[N].value,N+=z&(1<<J)-1),X(D,D.u+_[N].g),_[N].value}function lt(_,N,D){return D.g+=_.g,D.value+=_.value<<N>>>0,e(8>=D.g),_.g}function Ge(_,N,D){var z=_.xc;return e((N=z==0?0:_.vc[_.md*(D>>z)+(N>>z)])<_.Wb),_.Ya[N]}function Mt(_,N,D,z){var J=_.ab,ie=_.c*N,se=_.C;N=se+N;var oe=D,ae=z;for(z=_.Ta,D=_.Ua;0<J--;){var de=_.gc[J],_e=se,Oe=N,Me=oe,Te=ae,Ze=(ae=z,oe=D,de.Ea);switch(e(_e<Oe),e(Oe<=de.nc),de.hc){case 2:Bm(Me,Te,(Oe-_e)*Ze,ae,oe);break;case 0:var Ue=_e,Se=Oe,Ie=ae,Xe=oe,tt=(_t=de).Ea;Ue==0&&(Q0(Me,Te,null,null,1,Ie,Xe),pt(Me,Te+1,0,0,tt-1,Ie,Xe+1),Te+=tt,Xe+=tt,++Ue);for(var Ye=1<<_t.b,Tt=Ye-1,bt=ot(tt,_t.b),Kt=_t.K,_t=_t.w+(Ue>>_t.b)*bt;Ue<Se;){var ai=Kt,yi=_t,Qn=1;for(Po(Me,Te,Ie,Xe-tt,1,Ie,Xe);Qn<tt;){var zn=(Qn&~Tt)+Ye;zn>tt&&(zn=tt),(0,Ql[ai[yi++]>>8&15])(Me,Te+ +Qn,Ie,Xe+Qn-tt,zn-Qn,Ie,Xe+Qn),Qn=zn}Te+=tt,Xe+=tt,++Ue&Tt||(_t+=bt)}Oe!=de.nc&&i(ae,oe-Ze,ae,oe+(Oe-_e-1)*Ze,Ze);break;case 1:for(Ze=Me,Se=Te,tt=(Me=de.Ea)-(Xe=Me&~(Ie=(Te=1<<de.b)-1)),Ue=ot(Me,de.b),Ye=de.K,de=de.w+(_e>>de.b)*Ue;_e<Oe;){for(Tt=Ye,bt=de,Kt=new ht,_t=Se+Xe,ai=Se+Me;Se<_t;)Ht(Tt[bt++],Kt),Jl(Kt,Ze,Se,Te,ae,oe),Se+=Te,oe+=Te;Se<ai&&(Ht(Tt[bt++],Kt),Jl(Kt,Ze,Se,tt,ae,oe),Se+=tt,oe+=tt),++_e&Ie||(de+=Ue)}break;case 3:if(Me==ae&&Te==oe&&0<de.b){for(Se=ae,Me=Ze=oe+(Oe-_e)*Ze-(Xe=(Oe-_e)*ot(de.Ea,de.b)),Te=ae,Ie=oe,Ue=[],Xe=(tt=Xe)-1;0<=Xe;--Xe)Ue[Xe]=Te[Ie+Xe];for(Xe=tt-1;0<=Xe;--Xe)Se[Me+Xe]=Ue[Xe];tr(de,_e,Oe,ae,Ze,ae,oe)}else tr(de,_e,Oe,Me,Te,ae,oe)}oe=z,ae=D}ae!=D&&i(z,D,oe,ae,ie)}function Nt(_,N){var D=_.V,z=_.Ba+_.c*_.C,J=N-_.C;if(e(N<=_.l.o),e(16>=J),0<J){var ie=_.l,se=_.Ta,oe=_.Ua,ae=ie.width;if(Mt(_,J,D,z),J=oe=[oe],e((D=_.C)<(z=N)),e(ie.v<ie.va),z>ie.o&&(z=ie.o),D<ie.j){var de=ie.j-D;D=ie.j,J[0]+=de*ae}if(D>=z?D=0:(J[0]+=4*ie.v,ie.ka=D-ie.j,ie.U=ie.va-ie.v,ie.T=z-D,D=1),D){if(oe=oe[0],11>(D=_.ca).S){var _e=D.f.RGBA,Oe=(z=D.S,J=ie.U,ie=ie.T,de=_e.eb,_e.A),Me=ie;for(_e=_e.fb+_.Ma*_e.A;0<Me--;){var Te=se,Ze=oe,Ue=J,Se=de,Ie=_e;switch(z){case jm:nr(Te,Ze,Ue,Se,Ie);break;case qf:ir(Te,Ze,Ue,Se,Ie);break;case Wm:ir(Te,Ze,Ue,Se,Ie),sr(Se,Ie,0,Ue,1,0);break;case J0:ca(Te,Ze,Ue,Se,Ie);break;case Kf:ki(Te,Ze,Ue,Se,Ie,1);break;case Um:ki(Te,Ze,Ue,Se,Ie,1),sr(Se,Ie,0,Ue,1,0);break;case Xf:ki(Te,Ze,Ue,Se,Ie,0);break;case Hm:ki(Te,Ze,Ue,Se,Ie,0),sr(Se,Ie,1,Ue,1,0);break;case Vm:Oa(Te,Ze,Ue,Se,Ie);break;case f:Oa(Te,Ze,Ue,Se,Ie),pi(Se,Ie,Ue,1,0);break;case bx:to(Te,Ze,Ue,Se,Ie);break;default:e(0)}oe+=ae,_e+=Oe}_.Ma+=ie}else alert("todo:EmitRescaledRowsYUVA");e(_.Ma<=D.height)}}_.C=N,e(_.C<=_.i)}function St(_){var N;if(0<_.ua)return 0;for(N=0;N<_.Wb;++N){var D=_.Ya[N].G,z=_.Ya[N].H;if(0<D[1][z[1]+0].g||0<D[2][z[2]+0].g||0<D[3][z[3]+0].g)return 0}return 1}function vt(_,N,D,z,J,ie){if(_.Z!=0){var se=_.qd,oe=_.rd;for(e(vi[_.Z]!=null);N<D;++N)vi[_.Z](se,oe,z,J,z,J,ie),se=z,oe=J,J+=ie;_.qd=se,_.rd=oe}}function Et(_,N){var D=_.l.ma,z=D.Z==0||D.Z==1?_.l.j:_.C;if(z=_.C<z?z:_.C,e(N<=_.l.o),N>z){var J=_.l.width,ie=D.ca,se=D.tb+J*z,oe=_.V,ae=_.Ba+_.c*z,de=_.gc;e(_.ab==1),e(de[0].hc==3),la(de[0],z,N,oe,ae,ie,se),vt(D,z,N,ie,se,J)}_.C=_.Ma=N}function Zt(_,N,D,z,J,ie,se){var oe=_.$/z,ae=_.$%z,de=_.m,_e=_.s,Oe=D+_.$,Me=Oe;J=D+z*J;var Te=D+z*ie,Ze=280+_e.ua,Ue=_.Pb?oe:16777216,Se=0<_e.ua?_e.Wa:null,Ie=_e.wc,Xe=Oe<Te?Ge(_e,ae,oe):null;e(_.C<ie),e(Te<=J);var tt=!1;e:for(;;){for(;tt||Oe<Te;){var Ye=0;if(oe>=Ue){var Tt=Oe-D;e((Ue=_).Pb),Ue.wd=Ue.m,Ue.xd=Tt,0<Ue.s.ua&&xe(Ue.s.Wa,Ue.s.vb),Ue=oe+je}if(ae&Ie||(Xe=Ge(_e,ae,oe)),e(Xe!=null),Xe.Qb&&(N[Oe]=Xe.qb,tt=!0),!tt)if(Z(de),Xe.jc){Ye=de,Tt=N;var bt=Oe,Kt=Xe.pd[j(Ye)&gs-1];e(Xe.jc),256>Kt.g?(X(Ye,Ye.u+Kt.g),Tt[bt]=Kt.value,Ye=0):(X(Ye,Ye.u+Kt.g-256),e(256<=Kt.value),Ye=Kt.value),Ye==0&&(tt=!0)}else Ye=Ke(Xe.G[0],Xe.H[0],de);if(de.h)break;if(tt||256>Ye){if(!tt)if(Xe.nd)N[Oe]=(Xe.qb|Ye<<8)>>>0;else{if(Z(de),tt=Ke(Xe.G[1],Xe.H[1],de),Z(de),Tt=Ke(Xe.G[2],Xe.H[2],de),bt=Ke(Xe.G[3],Xe.H[3],de),de.h)break;N[Oe]=(bt<<24|tt<<16|Ye<<8|Tt)>>>0}if(tt=!1,++Oe,++ae>=z&&(ae=0,++oe,se!=null&&oe<=ie&&!(oe%16)&&se(_,oe),Se!=null))for(;Me<Oe;)Ye=N[Me++],Se.X[(506832829*Ye&4294967295)>>>Se.Mb]=Ye}else if(280>Ye){if(Ye=Ee(Ye-256,de),Tt=Ke(Xe.G[4],Xe.H[4],de),Z(de),Tt=Be(z,Tt=Ee(Tt,de)),de.h)break;if(Oe-D<Tt||J-Oe<Ye)break e;for(bt=0;bt<Ye;++bt)N[Oe+bt]=N[Oe+bt-Tt];for(Oe+=Ye,ae+=Ye;ae>=z;)ae-=z,++oe,se!=null&&oe<=ie&&!(oe%16)&&se(_,oe);if(e(Oe<=J),ae&Ie&&(Xe=Ge(_e,ae,oe)),Se!=null)for(;Me<Oe;)Ye=N[Me++],Se.X[(506832829*Ye&4294967295)>>>Se.Mb]=Ye}else{if(!(Ye<Ze))break e;for(tt=Ye-280,e(Se!=null);Me<Oe;)Ye=N[Me++],Se.X[(506832829*Ye&4294967295)>>>Se.Mb]=Ye;Ye=Oe,e(!(tt>>>(Tt=Se).Xa)),N[Ye]=Tt.X[tt],tt=!0}tt||e(de.h==q(de))}if(_.Pb&&de.h&&Oe<J)e(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&xe(_.s.vb,_.s.Wa);else{if(de.h)break e;se!=null&&se(_,oe>ie?ie:oe),_.a=0,_.$=Oe-D}return 1}return _.a=3,0}function Qt(_){e(_!=null),_.vc=null,_.yc=null,_.Ya=null;var N=_.Wa;N!=null&&(N.X=null),_.vb=null,e(_!=null)}function Xn(){var _=new zf;return _==null?null:(_.a=0,_.xb=ev,Js("Predictor","VP8LPredictors"),Js("Predictor","VP8LPredictors_C"),Js("PredictorAdd","VP8LPredictorsAdd"),Js("PredictorAdd","VP8LPredictorsAdd_C"),Bm=Ot,Jl=Bt,nr=mt,ir=di,Oa=gn,to=Bs,ca=Vn,E.VP8LMapColor32b=Kh,E.VP8LMapColor8b=Vu,_)}function En(_,N,D,z,J){var ie=1,se=[_],oe=[N],ae=z.m,de=z.s,_e=null,Oe=0;e:for(;;){if(D)for(;ie&&ne(ae,1);){var Me=se,Te=oe,Ze=z,Ue=1,Se=Ze.m,Ie=Ze.gc[Ze.ab],Xe=ne(Se,2);if(Ze.Oc&1<<Xe)ie=0;else{switch(Ze.Oc|=1<<Xe,Ie.hc=Xe,Ie.Ea=Me[0],Ie.nc=Te[0],Ie.K=[null],++Ze.ab,e(4>=Ze.ab),Xe){case 0:case 1:Ie.b=ne(Se,3)+2,Ue=En(ot(Ie.Ea,Ie.b),ot(Ie.nc,Ie.b),0,Ze,Ie.K),Ie.K=Ie.K[0];break;case 3:var tt,Ye=ne(Se,8)+1,Tt=16<Ye?0:4<Ye?1:2<Ye?2:3;if(Me[0]=ot(Ie.Ea,Tt),Ie.b=Tt,tt=Ue=En(Ye,1,0,Ze,Ie.K)){var bt,Kt=Ye,_t=Ie,ai=1<<(8>>_t.b),yi=r(ai);if(yi==null)tt=0;else{var Qn=_t.K[0],zn=_t.w;for(yi[0]=_t.K[0][0],bt=1;bt<1*Kt;++bt)yi[bt]=Je(Qn[zn+bt],yi[bt-1]);for(;bt<4*ai;++bt)yi[bt]=0;_t.K[0]=null,_t.K[0]=yi,tt=1}}Ue=tt;break;case 2:break;default:e(0)}ie=Ue}}if(se=se[0],oe=oe[0],ie&&ne(ae,1)&&!(ie=1<=(Oe=ne(ae,4))&&11>=Oe)){z.a=3;break e}var Ri;if(Ri=ie)t:{var Ii,bn,js,da=z,Vs=se,fa=oe,bi=Oe,Fa=D,Ba=da.m,_r=da.s,Br=[null],Oo=1,ml=0,Yc=De[bi];n:for(;;){if(Fa&&ne(Ba,1)){var Sr=ne(Ba,3)+2,Wu=ot(Vs,Sr),Yf=ot(fa,Sr),qm=Wu*Yf;if(!En(Wu,Yf,0,da,Br))break n;for(Br=Br[0],_r.xc=Sr,Ii=0;Ii<qm;++Ii){var ed=Br[Ii]>>8&65535;Br[Ii]=ed,ed>=Oo&&(Oo=ed+1)}}if(Ba.h)break n;for(bn=0;5>bn;++bn){var vs=P[bn];!bn&&0<bi&&(vs+=1<<bi),ml<vs&&(ml=vs)}var tI=o(Oo*Yc,$),_D=Oo,SD=o(_D,W);if(SD==null)var kx=null;else e(65536>=_D),kx=SD;var iv=r(ml);if(kx==null||iv==null||tI==null){da.a=1;break n}var Ix=tI;for(Ii=js=0;Ii<Oo;++Ii){var tc=kx[Ii],Km=tc.G,Xm=tc.H,CD=0,Nx=1,kD=0;for(bn=0;5>bn;++bn){vs=P[bn],Km[bn]=Ix,Xm[bn]=js,!bn&&0<bi&&(vs+=1<<bi);s:{var Ex,nI=vs,Tx=da,sv=iv,sZ=Ix,rZ=js,iI=0,td=Tx.m,oZ=ne(td,1);if(s(sv,0,0,nI),oZ){var aZ=ne(td,1)+1,lZ=ne(td,1),ID=ne(td,lZ==0?1:8);sv[ID]=1,aZ==2&&(sv[ID=ne(td,8)]=1);var Ax=1}else{var ND=r(19),ED=ne(td,4)+4;if(19<ED){Tx.a=3;var Rx=0;break s}for(Ex=0;Ex<ED;++Ex)ND[re[Ex]]=ne(td,3);var sI=void 0,rv=void 0,TD=Tx,cZ=ND,Lx=nI,AD=sv,rI=0,nd=TD.m,RD=8,LD=o(128,$);i:for(;R(LD,0,7,cZ,19);){if(ne(nd,1)){var uZ=2+2*ne(nd,3);if((sI=2+ne(nd,uZ))>Lx)break i}else sI=Lx;for(rv=0;rv<Lx&&sI--;){Z(nd);var PD=LD[0+(127&j(nd))];X(nd,nd.u+PD.g);var Ym=PD.value;if(16>Ym)AD[rv++]=Ym,Ym!=0&&(RD=Ym);else{var hZ=Ym==16,DD=Ym-16,dZ=C[DD],$D=ne(nd,x[DD])+dZ;if(rv+$D>Lx)break i;for(var fZ=hZ?RD:0;0<$D--;)AD[rv++]=fZ}}rI=1;break i}rI||(TD.a=3),Ax=rI}(Ax=Ax&&!td.h)&&(iI=R(sZ,rZ,8,sv,nI)),Ax&&iI!=0?Rx=iI:(Tx.a=3,Rx=0)}if(Rx==0)break n;if(Nx&&V[bn]==1&&(Nx=Ix[js].g==0),CD+=Ix[js].g,js+=Rx,3>=bn){var ov,oI=iv[0];for(ov=1;ov<vs;++ov)iv[ov]>oI&&(oI=iv[ov]);kD+=oI}}if(tc.nd=Nx,tc.Qb=0,Nx&&(tc.qb=(Km[3][Xm[3]+0].value<<24|Km[1][Xm[1]+0].value<<16|Km[2][Xm[2]+0].value)>>>0,CD==0&&256>Km[0][Xm[0]+0].value&&(tc.Qb=1,tc.qb+=Km[0][Xm[0]+0].value<<8)),tc.jc=!tc.Qb&&6>kD,tc.jc){var Px,Uu=tc;for(Px=0;Px<gs;++Px){var id=Px,sd=Uu.pd[id],Dx=Uu.G[0][Uu.H[0]+id];256<=Dx.value?(sd.g=Dx.g+256,sd.value=Dx.value):(sd.g=0,sd.value=0,id>>=lt(Dx,8,sd),id>>=lt(Uu.G[1][Uu.H[1]+id],16,sd),id>>=lt(Uu.G[2][Uu.H[2]+id],0,sd),lt(Uu.G[3][Uu.H[3]+id],24,sd))}}}_r.vc=Br,_r.Wb=Oo,_r.Ya=kx,_r.yc=tI,Ri=1;break t}Ri=0}if(!(ie=Ri)){z.a=3;break e}if(0<Oe){if(de.ua=1<<Oe,!Qe(de.Wa,Oe)){z.a=1,ie=0;break e}}else de.ua=0;var aI=z,OD=se,pZ=oe,lI=aI.s,cI=lI.xc;if(aI.c=OD,aI.i=pZ,lI.md=ot(OD,cI),lI.wc=cI==0?-1:(1<<cI)-1,D){z.xb=Zk;break e}if((_e=r(se*oe))==null){z.a=1,ie=0;break e}ie=(ie=Zt(z,_e,0,se,oe,oe,null))&&!ae.h;break e}return ie?(J!=null?J[0]=_e:(e(_e==null),e(D)),z.$=0,D||Qt(de)):Qt(de),ie}function Sn(_,N){var D=_.c*_.i,z=D+N+16*N;return e(_.c<=N),_.V=r(z),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+D+N,1)}function oi(_,N){var D=_.C,z=N-D,J=_.V,ie=_.Ba+_.c*D;for(e(N<=_.l.o);0<z;){var se=16<z?16:z,oe=_.l.ma,ae=_.l.width,de=ae*se,_e=oe.ca,Oe=oe.tb+ae*D,Me=_.Ta,Te=_.Ua;Mt(_,se,J,ie),cs(Me,Te,_e,Oe,de),vt(oe,D,D+se,_e,Oe,ae),z-=se,J+=se*_.c,D+=se}e(D==N),_.C=_.Ma=N}function Io(){this.ub=this.yd=this.td=this.Rb=0}function No(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function vr(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function zs(){this.Yb=function(){var _=[];return function N(D,z,J){for(var ie=J[z],se=0;se<ie&&(D.push(J.length>z+1?[]:0),!(J.length<z+1));se++)N(D[se],z+1,J)}(_,0,[3,11]),_}()}function Pu(){this.jb=r(3),this.Wc=a([4,8],zs),this.Xc=a([4,17],zs)}function jl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function Jr(){this.ld=this.La=this.dd=this.tc=0}function Vl(){this.Na=this.la=0}function Dc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function yn(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ti(){this.uc=this.M=this.Nb=0,this.wa=Array(new Jr),this.Y=0,this.ya=Array(new yn),this.aa=0,this.l=new Yn}function ra(){this.y=r(16),this.f=r(8),this.ea=r(8)}function ol(){this.cb=this.a=0,this.sc="",this.m=new le,this.Od=new Io,this.Kc=new No,this.ed=new jl,this.Qa=new vr,this.Ic=this.$c=this.Aa=0,this.D=new ti,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,le),this.ia=0,this.pb=o(4,Dc),this.Pa=new Pu,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ra),this.Hd=0,this.rb=Array(new Vl),this.sb=0,this.wa=Array(new Jr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new yn),this.L=this.aa=0,this.gd=a([4,2],Jr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Yn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function vn(){var _=new ol;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,Wt||(Wt=Hl)),_}function an(_,N,D){return _.a==0&&(_.a=N,_.sc=D,_.cb=0),0}function Wl(_,N,D){return 3<=D&&_[N+0]==157&&_[N+1]==1&&_[N+2]==42}function Ul(_,N){if(_==null)return 0;if(_.a=0,_.sc="OK",N==null)return an(_,2,"null VP8Io passed to VP8GetHeaders()");var D=N.data,z=N.w,J=N.ha;if(4>J)return an(_,7,"Truncated header.");var ie=D[z+0]|D[z+1]<<8|D[z+2]<<16,se=_.Od;if(se.Rb=!(1&ie),se.td=ie>>1&7,se.yd=ie>>4&1,se.ub=ie>>5,3<se.td)return an(_,3,"Incorrect keyframe parameters.");if(!se.yd)return an(_,4,"Frame not displayable.");z+=3,J-=3;var oe=_.Kc;if(se.Rb){if(7>J)return an(_,7,"cannot parse picture header");if(!Wl(D,z,J))return an(_,3,"Bad code word");oe.c=16383&(D[z+4]<<8|D[z+3]),oe.Td=D[z+4]>>6,oe.i=16383&(D[z+6]<<8|D[z+5]),oe.Ud=D[z+6]>>6,z+=7,J-=7,_.za=oe.c+15>>4,_.Ub=oe.i+15>>4,N.width=oe.c,N.height=oe.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,s((ie=_.Pa).jb,0,255,ie.jb.length),e((ie=_.Qa)!=null),ie.Cb=0,ie.Bb=0,ie.Fb=1,s(ie.Zb,0,0,ie.Zb.length),s(ie.Lb,0,0,ie.Lb)}if(se.ub>J)return an(_,7,"bad partition length");te(ie=_.m,D,z,se.ub),z+=se.ub,J-=se.ub,se.Rb&&(oe.Ld=fe(ie),oe.Kd=fe(ie)),oe=_.Qa;var ae,de=_.Pa;if(e(ie!=null),e(oe!=null),oe.Cb=fe(ie),oe.Cb){if(oe.Bb=fe(ie),fe(ie)){for(oe.Fb=fe(ie),ae=0;4>ae;++ae)oe.Zb[ae]=fe(ie)?G(ie,7):0;for(ae=0;4>ae;++ae)oe.Lb[ae]=fe(ie)?G(ie,6):0}if(oe.Bb)for(ae=0;3>ae;++ae)de.jb[ae]=fe(ie)?H(ie,8):255}else oe.Bb=0;if(ie.Ka)return an(_,3,"cannot parse segment header");if((oe=_.ed).zd=fe(ie),oe.Tb=H(ie,6),oe.wb=H(ie,3),oe.Pc=fe(ie),oe.Pc&&fe(ie)){for(de=0;4>de;++de)fe(ie)&&(oe.vd[de]=G(ie,6));for(de=0;4>de;++de)fe(ie)&&(oe.od[de]=G(ie,6))}if(_.L=oe.Tb==0?0:oe.zd?1:2,ie.Ka)return an(_,3,"cannot parse filter header");var _e=J;if(J=ae=z,z=ae+_e,oe=_e,_.Xb=(1<<H(_.m,2))-1,_e<3*(de=_.Xb))D=7;else{for(ae+=3*de,oe-=3*de,_e=0;_e<de;++_e){var Oe=D[J+0]|D[J+1]<<8|D[J+2]<<16;Oe>oe&&(Oe=oe),te(_.Jc[+_e],D,ae,Oe),ae+=Oe,oe-=Oe,J+=3}te(_.Jc[+de],D,ae,oe),D=ae<z?0:5}if(D!=0)return an(_,D,"cannot parse partitions");for(D=H(ae=_.m,7),J=fe(ae)?G(ae,4):0,z=fe(ae)?G(ae,4):0,oe=fe(ae)?G(ae,4):0,de=fe(ae)?G(ae,4):0,ae=fe(ae)?G(ae,4):0,_e=_.Qa,Oe=0;4>Oe;++Oe){if(_e.Cb){var Me=_e.Zb[Oe];_e.Fb||(Me+=D)}else{if(0<Oe){_.pb[Oe]=_.pb[0];continue}Me=D}var Te=_.pb[Oe];Te.Sc[0]=et[Hi(Me+J,127)],Te.Sc[1]=Ct[Hi(Me+0,127)],Te.Eb[0]=2*et[Hi(Me+z,127)],Te.Eb[1]=101581*Ct[Hi(Me+oe,127)]>>16,8>Te.Eb[1]&&(Te.Eb[1]=8),Te.Qc[0]=et[Hi(Me+de,117)],Te.Qc[1]=Ct[Hi(Me+ae,127)],Te.lc=Me+ae}if(!se.Rb)return an(_,4,"Not a key frame.");for(fe(ie),se=_.Pa,D=0;4>D;++D){for(J=0;8>J;++J)for(z=0;3>z;++z)for(oe=0;11>oe;++oe)de=me(ie,Jh[D][J][z][oe])?H(ie,8):ha[D][J][z][oe],se.Wc[D][J].Yb[z][oe]=de;for(J=0;17>J;++J)se.Xc[D][J]=se.Wc[D][Yk[J]]}return _.kc=fe(ie),_.kc&&(_.Bd=H(ie,8)),_.cb=1}function Hl(_,N,D,z,J,ie,se){var oe=N[J].Yb[D];for(D=0;16>J;++J){if(!me(_,oe[D+0]))return J;for(;!me(_,oe[D+1]);)if(oe=N[++J].Yb[0],D=0,J==16)return 16;var ae=N[J+1].Yb;if(me(_,oe[D+2])){var de=_,_e=0;if(me(de,(Me=oe)[(Oe=D)+3]))if(me(de,Me[Oe+6])){for(oe=0,Oe=2*(_e=me(de,Me[Oe+8]))+(Me=me(de,Me[Oe+9+_e])),_e=0,Me=Cn[Oe];Me[oe];++oe)_e+=_e+me(de,Me[oe]);_e+=3+(8<<Oe)}else me(de,Me[Oe+7])?(_e=7+2*me(de,165),_e+=me(de,145)):_e=5+me(de,159);else _e=me(de,Me[Oe+4])?3+me(de,Me[Oe+5]):2;oe=ae[2]}else _e=1,oe=ae[1];ae=se+Mr[J],0>(de=_).b&&ue(de);var Oe,Me=de.b,Te=(Oe=de.Ca>>1)-(de.I>>Me)>>31;--de.b,de.Ca+=Te,de.Ca|=1,de.I-=(Oe+1&Te)<<Me,ie[ae]=((_e^Te)-Te)*z[(0<J)+0]}return 16}function Du(_){var N=_.rb[_.sb-1];N.la=0,N.Na=0,s(_.zc,0,0,_.zc.length),_.ja=0}function fn(_,N){if(_==null)return 0;if(N==null)return an(_,2,"NULL VP8Io parameter in VP8Decode().");if(!_.cb&&!Ul(_,N))return 0;if(e(_.cb),N.ac==null||N.ac(N)){N.ob&&(_.L=0);var D=Cx[_.L];if(_.L==2?(_.yb=0,_.zb=0):(_.yb=N.v-D>>4,_.zb=N.j-D>>4,0>_.yb&&(_.yb=0),0>_.zb&&(_.zb=0)),_.Va=N.o+15+D>>4,_.Hb=N.va+15+D>>4,_.Hb>_.za&&(_.Hb=_.za),_.Va>_.Ub&&(_.Va=_.Ub),0<_.L){var z=_.ed;for(D=0;4>D;++D){var J;if(_.Qa.Cb){var ie=_.Qa.Lb[D];_.Qa.Fb||(ie+=z.Tb)}else ie=z.Tb;for(J=0;1>=J;++J){var se=_.gd[D][J],oe=ie;if(z.Pc&&(oe+=z.vd[0],J&&(oe+=z.od[0])),0<(oe=0>oe?0:63<oe?63:oe)){var ae=oe;0<z.wb&&(ae=4<z.wb?ae>>2:ae>>1)>9-z.wb&&(ae=9-z.wb),1>ae&&(ae=1),se.dd=ae,se.tc=2*oe+ae,se.ld=40<=oe?2:15<=oe?1:0}else se.tc=0;se.La=J}}}D=0}else an(_,6,"Frame setup failed"),D=_.a;if(D=D==0){if(D){_.$c=0,0<_.Aa||(_.Ic=iZ);e:{D=_.Ic,z=4*(ae=_.za);var de=32*ae,_e=ae+1,Oe=0<_.L?ae*(0<_.Aa?2:1):0,Me=(_.Aa==2?2:1)*ae;if((se=z+832+(J=3*(16*D+Cx[_.L])/2*de)+(ie=_.Fa!=null&&0<_.Fa.length?_.Kc.c*_.Kc.i:0))!=se)D=0;else{if(se>_.Vb){if(_.Vb=0,_.Ec=r(se),_.Fc=0,_.Ec==null){D=an(_,1,"no memory during frame initialization.");break e}_.Vb=se}se=_.Ec,oe=_.Fc,_.Ac=se,_.Bc=oe,oe+=z,_.Gd=o(de,ra),_.Hd=0,_.rb=o(_e+1,Vl),_.sb=1,_.wa=Oe?o(Oe,Jr):null,_.Y=0,_.D.Nb=0,_.D.wa=_.wa,_.D.Y=_.Y,0<_.Aa&&(_.D.Y+=ae),e(!0),_.oc=se,_.pc=oe,oe+=832,_.ya=o(Me,yn),_.aa=0,_.D.ya=_.ya,_.D.aa=_.aa,_.Aa==2&&(_.D.aa+=ae),_.R=16*ae,_.B=8*ae,ae=(de=Cx[_.L])*_.R,de=de/2*_.B,_.sa=se,_.ta=oe+ae,_.qa=_.sa,_.ra=_.ta+16*D*_.R+de,_.Ha=_.qa,_.Ia=_.ra+8*D*_.B+de,_.$c=0,oe+=J,_.mb=ie?se:null,_.nb=ie?oe:null,e(oe+ie<=_.Fc+_.Vb),Du(_),s(_.Ac,_.Bc,0,z),D=1}}if(D){if(N.ka=0,N.y=_.sa,N.O=_.ta,N.f=_.qa,N.N=_.ra,N.ea=_.Ha,N.Vd=_.Ia,N.fa=_.R,N.Rc=_.B,N.F=null,N.J=0,!zm){for(D=-255;255>=D;++D)gi[255+D]=0>D?-D:D;for(D=-1020;1020>=D;++D)dl[1020+D]=-128>D?-128:127<D?127:D;for(D=-112;112>=D;++D)Zh[112+D]=-16>D?-16:15<D?15:D;for(D=-255;510>=D;++D)fl[255+D]=0>D?0:255<D?255:D;zm=1}Wc=$u,cl=Fh,Uc=al,Or=es,Do=ll,ls=Rm,Xh=Of,Hf=zc,Gf=Mf,wr=Ff,ul=Z0,Hc=Wh,hl=eo,Yh=Mm,Gc=$m,qc=ps,ec=To,ua=Om,Ma[0]=On,Ma[1]=Rf,Ma[2]=un,Ma[3]=oa,Ma[4]=Pf,Ma[5]=Mc,Ma[6]=jh,Ma[7]=Mu,Ma[8]=Df,Ma[9]=Kl,Xc[0]=Bh,Xc[1]=Lf,Xc[2]=Pa,Xc[3]=ql,Xc[4]=Ts,Xc[5]=Lm,Xc[6]=zh,pl[0]=Xl,pl[1]=Ou,pl[2]=Fu,pl[3]=as,pl[4]=Bu,pl[5]=Pm,pl[6]=Vh,D=1}else D=0}D&&(D=function(Te,Ze){for(Te.M=0;Te.M<Te.Va;++Te.M){var Ue,Se=Te.Jc[Te.M&Te.Xb],Ie=Te.m,Xe=Te;for(Ue=0;Ue<Xe.za;++Ue){var tt=Ie,Ye=Xe,Tt=Ye.Ac,bt=Ye.Bc+4*Ue,Kt=Ye.zc,_t=Ye.ya[Ye.aa+Ue];if(Ye.Qa.Bb?_t.$b=me(tt,Ye.Pa.jb[0])?2+me(tt,Ye.Pa.jb[2]):me(tt,Ye.Pa.jb[1]):_t.$b=0,Ye.kc&&(_t.Ad=me(tt,Ye.Bd)),_t.Za=!me(tt,145)+0,_t.Za){var ai=_t.Ob,yi=0;for(Ye=0;4>Ye;++Ye){var Qn,zn=Kt[0+Ye];for(Qn=0;4>Qn;++Qn){zn=io[Tt[bt+Qn]][zn];for(var Ri=Rs[me(tt,zn[0])];0<Ri;)Ri=Rs[2*Ri+me(tt,zn[Ri])];zn=-Ri,Tt[bt+Qn]=zn}i(ai,yi,Tt,bt,4),yi+=4,Kt[0+Ye]=zn}}else zn=me(tt,156)?me(tt,128)?1:3:me(tt,163)?2:0,_t.Ob[0]=zn,s(Tt,bt,zn,4),s(Kt,0,zn,4);_t.Dd=me(tt,142)?me(tt,114)?me(tt,183)?1:3:2:0}if(Xe.m.Ka)return an(Te,7,"Premature end-of-partition0 encountered.");for(;Te.ja<Te.za;++Te.ja){if(Xe=Se,tt=(Ie=Te).rb[Ie.sb-1],Tt=Ie.rb[Ie.sb+Ie.ja],Ue=Ie.ya[Ie.aa+Ie.ja],bt=Ie.kc?Ue.Ad:0)tt.la=Tt.la=0,Ue.Za||(tt.Na=Tt.Na=0),Ue.Hc=0,Ue.Gc=0,Ue.ia=0;else{var Ii,bn;if(tt=Tt,Tt=Xe,bt=Ie.Pa.Xc,Kt=Ie.ya[Ie.aa+Ie.ja],_t=Ie.pb[Kt.$b],Ye=Kt.ad,ai=0,yi=Ie.rb[Ie.sb-1],zn=Qn=0,s(Ye,ai,0,384),Kt.Za)var js=0,da=bt[3];else{Ri=r(16);var Vs=tt.Na+yi.Na;if(Vs=Wt(Tt,bt[1],Vs,_t.Eb,0,Ri,0),tt.Na=yi.Na=(0<Vs)+0,1<Vs)Wc(Ri,0,Ye,ai);else{var fa=Ri[0]+3>>3;for(Ri=0;256>Ri;Ri+=16)Ye[ai+Ri]=fa}js=1,da=bt[0]}var bi=15&tt.la,Fa=15&yi.la;for(Ri=0;4>Ri;++Ri){var Ba=1&Fa;for(fa=bn=0;4>fa;++fa)bi=bi>>1|(Ba=(Vs=Wt(Tt,da,Vs=Ba+(1&bi),_t.Sc,js,Ye,ai))>js)<<7,bn=bn<<2|(3<Vs?3:1<Vs?2:Ye[ai+0]!=0),ai+=16;bi>>=4,Fa=Fa>>1|Ba<<7,Qn=(Qn<<8|bn)>>>0}for(da=bi,js=Fa>>4,Ii=0;4>Ii;Ii+=2){for(bn=0,bi=tt.la>>4+Ii,Fa=yi.la>>4+Ii,Ri=0;2>Ri;++Ri){for(Ba=1&Fa,fa=0;2>fa;++fa)Vs=Ba+(1&bi),bi=bi>>1|(Ba=0<(Vs=Wt(Tt,bt[2],Vs,_t.Qc,0,Ye,ai)))<<3,bn=bn<<2|(3<Vs?3:1<Vs?2:Ye[ai+0]!=0),ai+=16;bi>>=2,Fa=Fa>>1|Ba<<5}zn|=bn<<4*Ii,da|=bi<<4<<Ii,js|=(240&Fa)<<Ii}tt.la=da,yi.la=js,Kt.Hc=Qn,Kt.Gc=zn,Kt.ia=43690&zn?0:_t.ia,bt=!(Qn|zn)}if(0<Ie.L&&(Ie.wa[Ie.Y+Ie.ja]=Ie.gd[Ue.$b][Ue.Za],Ie.wa[Ie.Y+Ie.ja].La|=!bt),Xe.Ka)return an(Te,7,"Premature end-of-file encountered.")}if(Du(Te),Ie=Ze,Xe=1,Ue=(Se=Te).D,tt=0<Se.L&&Se.M>=Se.zb&&Se.M<=Se.Va,Se.Aa==0)e:{if(Ue.M=Se.M,Ue.uc=tt,Vf(Se,Ue),Xe=1,Ue=(bn=Se.D).Nb,tt=(zn=Cx[Se.L])*Se.R,Tt=zn/2*Se.B,Ri=16*Ue*Se.R,fa=8*Ue*Se.B,bt=Se.sa,Kt=Se.ta-tt+Ri,_t=Se.qa,Ye=Se.ra-Tt+fa,ai=Se.Ha,yi=Se.Ia-Tt+fa,Fa=(bi=bn.M)==0,Qn=bi>=Se.Va-1,Se.Aa==2&&Vf(Se,bn),bn.uc)for(Ba=(Vs=Se).D.M,e(Vs.D.uc),bn=Vs.yb;bn<Vs.Hb;++bn){js=bn,da=Ba;var _r=(Br=(vs=Vs).D).Nb;Ii=vs.R;var Br=Br.wa[Br.Y+js],Oo=vs.sa,ml=vs.ta+16*_r*Ii+16*js,Yc=Br.dd,Sr=Br.tc;if(Sr!=0)if(e(3<=Sr),vs.L==1)0<js&&qc(Oo,ml,Ii,Sr+4),Br.La&&ua(Oo,ml,Ii,Sr),0<da&&Gc(Oo,ml,Ii,Sr+4),Br.La&&ec(Oo,ml,Ii,Sr);else{var Wu=vs.B,Yf=vs.qa,qm=vs.ra+8*_r*Wu+8*js,ed=vs.Ha,vs=vs.Ia+8*_r*Wu+8*js;_r=Br.ld,0<js&&(Hf(Oo,ml,Ii,Sr+4,Yc,_r),wr(Yf,qm,ed,vs,Wu,Sr+4,Yc,_r)),Br.La&&(Hc(Oo,ml,Ii,Sr,Yc,_r),Yh(Yf,qm,ed,vs,Wu,Sr,Yc,_r)),0<da&&(Xh(Oo,ml,Ii,Sr+4,Yc,_r),Gf(Yf,qm,ed,vs,Wu,Sr+4,Yc,_r)),Br.La&&(ul(Oo,ml,Ii,Sr,Yc,_r),hl(Yf,qm,ed,vs,Wu,Sr,Yc,_r))}}if(Se.ia&&alert("todo:DitherRow"),Ie.put!=null){if(bn=16*bi,bi=16*(bi+1),Fa?(Ie.y=Se.sa,Ie.O=Se.ta+Ri,Ie.f=Se.qa,Ie.N=Se.ra+fa,Ie.ea=Se.Ha,Ie.W=Se.Ia+fa):(bn-=zn,Ie.y=bt,Ie.O=Kt,Ie.f=_t,Ie.N=Ye,Ie.ea=ai,Ie.W=yi),Qn||(bi-=zn),bi>Ie.o&&(bi=Ie.o),Ie.F=null,Ie.J=null,Se.Fa!=null&&0<Se.Fa.length&&bn<bi&&(Ie.J=jf(Se,Ie,bn,bi-bn),Ie.F=Se.mb,Ie.F==null&&Ie.F.length==0)){Xe=an(Se,3,"Could not decode alpha data.");break e}bn<Ie.j&&(zn=Ie.j-bn,bn=Ie.j,e(!(1&zn)),Ie.O+=Se.R*zn,Ie.N+=Se.B*(zn>>1),Ie.W+=Se.B*(zn>>1),Ie.F!=null&&(Ie.J+=Ie.width*zn)),bn<bi&&(Ie.O+=Ie.v,Ie.N+=Ie.v>>1,Ie.W+=Ie.v>>1,Ie.F!=null&&(Ie.J+=Ie.v),Ie.ka=bn-Ie.j,Ie.U=Ie.va-Ie.v,Ie.T=bi-bn,Xe=Ie.put(Ie))}Ue+1!=Se.Ic||Qn||(i(Se.sa,Se.ta-tt,bt,Kt+16*Se.R,tt),i(Se.qa,Se.ra-Tt,_t,Ye+8*Se.B,Tt),i(Se.Ha,Se.Ia-Tt,ai,yi+8*Se.B,Tt))}if(!Xe)return an(Te,6,"Output aborted.")}return 1}(_,N)),N.bc!=null&&N.bc(N),D&=1}return D?(_.cb=0,D):0}function Zn(_,N,D,z,J){J=_[N+D+32*z]+(J>>3),_[N+D+32*z]=-256&J?0>J?0:255:J}function $c(_,N,D,z,J,ie){Zn(_,N,0,D,z+J),Zn(_,N,1,D,z+ie),Zn(_,N,2,D,z-ie),Zn(_,N,3,D,z-J)}function er(_){return(20091*_>>16)+_}function yr(_,N,D,z){var J,ie=0,se=r(16);for(J=0;4>J;++J){var oe=_[N+0]+_[N+8],ae=_[N+0]-_[N+8],de=(35468*_[N+4]>>16)-er(_[N+12]),_e=er(_[N+4])+(35468*_[N+12]>>16);se[ie+0]=oe+_e,se[ie+1]=ae+de,se[ie+2]=ae-de,se[ie+3]=oe-_e,ie+=4,N++}for(J=ie=0;4>J;++J)oe=(_=se[ie+0]+4)+se[ie+8],ae=_-se[ie+8],de=(35468*se[ie+4]>>16)-er(se[ie+12]),Zn(D,z,0,0,oe+(_e=er(se[ie+4])+(35468*se[ie+12]>>16))),Zn(D,z,1,0,ae+de),Zn(D,z,2,0,ae-de),Zn(D,z,3,0,oe-_e),ie++,z+=32}function Rm(_,N,D,z){var J=_[N+0]+4,ie=35468*_[N+4]>>16,se=er(_[N+4]),oe=35468*_[N+1]>>16;$c(D,z,0,J+se,_=er(_[N+1]),oe),$c(D,z,1,J+ie,_,oe),$c(D,z,2,J-ie,_,oe),$c(D,z,3,J-se,_,oe)}function Fh(_,N,D,z,J){yr(_,N,D,z),J&&yr(_,N+16,D,z+4)}function al(_,N,D,z){cl(_,N+0,D,z,1),cl(_,N+32,D,z+128,1)}function es(_,N,D,z){var J;for(_=_[N+0]+4,J=0;4>J;++J)for(N=0;4>N;++N)Zn(D,z,N,J,_)}function ll(_,N,D,z){_[N+0]&&Or(_,N+0,D,z),_[N+16]&&Or(_,N+16,D,z+4),_[N+32]&&Or(_,N+32,D,z+128),_[N+48]&&Or(_,N+48,D,z+128+4)}function $u(_,N,D,z){var J,ie=r(16);for(J=0;4>J;++J){var se=_[N+0+J]+_[N+12+J],oe=_[N+4+J]+_[N+8+J],ae=_[N+4+J]-_[N+8+J],de=_[N+0+J]-_[N+12+J];ie[0+J]=se+oe,ie[8+J]=se-oe,ie[4+J]=de+ae,ie[12+J]=de-ae}for(J=0;4>J;++J)se=(_=ie[0+4*J]+3)+ie[3+4*J],oe=ie[1+4*J]+ie[2+4*J],ae=ie[1+4*J]-ie[2+4*J],de=_-ie[3+4*J],D[z+0]=se+oe>>3,D[z+16]=de+ae>>3,D[z+32]=se-oe>>3,D[z+48]=de-ae>>3,z+=64}function Gl(_,N,D){var z,J=N-32,ie=no,se=255-_[J-1];for(z=0;z<D;++z){var oe,ae=ie,de=se+_[N-1];for(oe=0;oe<D;++oe)_[N+oe]=ae[de+_[J+oe]];N+=32}}function Rf(_,N){Gl(_,N,4)}function Ou(_,N){Gl(_,N,8)}function Lf(_,N){Gl(_,N,16)}function Pa(_,N){var D;for(D=0;16>D;++D)i(_,N+32*D,_,N-32,16)}function ql(_,N){var D;for(D=16;0<D;--D)s(_,N,_[N-1],16),N+=32}function Oc(_,N,D){var z;for(z=0;16>z;++z)s(N,D+32*z,_,16)}function Bh(_,N){var D,z=16;for(D=0;16>D;++D)z+=_[N-1+32*D]+_[N+D-32];Oc(z>>5,_,N)}function Ts(_,N){var D,z=8;for(D=0;16>D;++D)z+=_[N-1+32*D];Oc(z>>4,_,N)}function Lm(_,N){var D,z=8;for(D=0;16>D;++D)z+=_[N+D-32];Oc(z>>4,_,N)}function zh(_,N){Oc(128,_,N)}function ln(_,N,D){return _+2*N+D+2>>2}function un(_,N){var D,z=N-32;for(z=new Uint8Array([ln(_[z-1],_[z+0],_[z+1]),ln(_[z+0],_[z+1],_[z+2]),ln(_[z+1],_[z+2],_[z+3]),ln(_[z+2],_[z+3],_[z+4])]),D=0;4>D;++D)i(_,N+32*D,z,0,z.length)}function oa(_,N){var D=_[N-1],z=_[N-1+32],J=_[N-1+64],ie=_[N-1+96];Pe(_,N+0,16843009*ln(_[N-1-32],D,z)),Pe(_,N+32,16843009*ln(D,z,J)),Pe(_,N+64,16843009*ln(z,J,ie)),Pe(_,N+96,16843009*ln(J,ie,ie))}function On(_,N){var D,z=4;for(D=0;4>D;++D)z+=_[N+D-32]+_[N-1+32*D];for(z>>=3,D=0;4>D;++D)s(_,N+32*D,z,4)}function Pf(_,N){var D=_[N-1+0],z=_[N-1+32],J=_[N-1+64],ie=_[N-1-32],se=_[N+0-32],oe=_[N+1-32],ae=_[N+2-32],de=_[N+3-32];_[N+0+96]=ln(z,J,_[N-1+96]),_[N+1+96]=_[N+0+64]=ln(D,z,J),_[N+2+96]=_[N+1+64]=_[N+0+32]=ln(ie,D,z),_[N+3+96]=_[N+2+64]=_[N+1+32]=_[N+0+0]=ln(se,ie,D),_[N+3+64]=_[N+2+32]=_[N+1+0]=ln(oe,se,ie),_[N+3+32]=_[N+2+0]=ln(ae,oe,se),_[N+3+0]=ln(de,ae,oe)}function jh(_,N){var D=_[N+1-32],z=_[N+2-32],J=_[N+3-32],ie=_[N+4-32],se=_[N+5-32],oe=_[N+6-32],ae=_[N+7-32];_[N+0+0]=ln(_[N+0-32],D,z),_[N+1+0]=_[N+0+32]=ln(D,z,J),_[N+2+0]=_[N+1+32]=_[N+0+64]=ln(z,J,ie),_[N+3+0]=_[N+2+32]=_[N+1+64]=_[N+0+96]=ln(J,ie,se),_[N+3+32]=_[N+2+64]=_[N+1+96]=ln(ie,se,oe),_[N+3+64]=_[N+2+96]=ln(se,oe,ae),_[N+3+96]=ln(oe,ae,ae)}function Mc(_,N){var D=_[N-1+0],z=_[N-1+32],J=_[N-1+64],ie=_[N-1-32],se=_[N+0-32],oe=_[N+1-32],ae=_[N+2-32],de=_[N+3-32];_[N+0+0]=_[N+1+64]=ie+se+1>>1,_[N+1+0]=_[N+2+64]=se+oe+1>>1,_[N+2+0]=_[N+3+64]=oe+ae+1>>1,_[N+3+0]=ae+de+1>>1,_[N+0+96]=ln(J,z,D),_[N+0+64]=ln(z,D,ie),_[N+0+32]=_[N+1+96]=ln(D,ie,se),_[N+1+32]=_[N+2+96]=ln(ie,se,oe),_[N+2+32]=_[N+3+96]=ln(se,oe,ae),_[N+3+32]=ln(oe,ae,de)}function Mu(_,N){var D=_[N+0-32],z=_[N+1-32],J=_[N+2-32],ie=_[N+3-32],se=_[N+4-32],oe=_[N+5-32],ae=_[N+6-32],de=_[N+7-32];_[N+0+0]=D+z+1>>1,_[N+1+0]=_[N+0+64]=z+J+1>>1,_[N+2+0]=_[N+1+64]=J+ie+1>>1,_[N+3+0]=_[N+2+64]=ie+se+1>>1,_[N+0+32]=ln(D,z,J),_[N+1+32]=_[N+0+96]=ln(z,J,ie),_[N+2+32]=_[N+1+96]=ln(J,ie,se),_[N+3+32]=_[N+2+96]=ln(ie,se,oe),_[N+3+64]=ln(se,oe,ae),_[N+3+96]=ln(oe,ae,de)}function Kl(_,N){var D=_[N-1+0],z=_[N-1+32],J=_[N-1+64],ie=_[N-1+96];_[N+0+0]=D+z+1>>1,_[N+2+0]=_[N+0+32]=z+J+1>>1,_[N+2+32]=_[N+0+64]=J+ie+1>>1,_[N+1+0]=ln(D,z,J),_[N+3+0]=_[N+1+32]=ln(z,J,ie),_[N+3+32]=_[N+1+64]=ln(J,ie,ie),_[N+3+64]=_[N+2+64]=_[N+0+96]=_[N+1+96]=_[N+2+96]=_[N+3+96]=ie}function Df(_,N){var D=_[N-1+0],z=_[N-1+32],J=_[N-1+64],ie=_[N-1+96],se=_[N-1-32],oe=_[N+0-32],ae=_[N+1-32],de=_[N+2-32];_[N+0+0]=_[N+2+32]=D+se+1>>1,_[N+0+32]=_[N+2+64]=z+D+1>>1,_[N+0+64]=_[N+2+96]=J+z+1>>1,_[N+0+96]=ie+J+1>>1,_[N+3+0]=ln(oe,ae,de),_[N+2+0]=ln(se,oe,ae),_[N+1+0]=_[N+3+32]=ln(D,se,oe),_[N+1+32]=_[N+3+64]=ln(z,D,se),_[N+1+64]=_[N+3+96]=ln(J,z,D),_[N+1+96]=ln(ie,J,z)}function Fu(_,N){var D;for(D=0;8>D;++D)i(_,N+32*D,_,N-32,8)}function as(_,N){var D;for(D=0;8>D;++D)s(_,N,_[N-1],8),N+=32}function Eo(_,N,D){var z;for(z=0;8>z;++z)s(N,D+32*z,_,8)}function Xl(_,N){var D,z=8;for(D=0;8>D;++D)z+=_[N+D-32]+_[N-1+32*D];Eo(z>>4,_,N)}function Pm(_,N){var D,z=4;for(D=0;8>D;++D)z+=_[N+D-32];Eo(z>>3,_,N)}function Bu(_,N){var D,z=4;for(D=0;8>D;++D)z+=_[N-1+32*D];Eo(z>>3,_,N)}function Vh(_,N){Eo(128,_,N)}function Fc(_,N,D){var z=_[N-D],J=_[N+0],ie=3*(J-z)+Qh[1020+_[N-2*D]-_[N+D]],se=Kc[112+(ie+4>>3)];_[N-D]=no[255+z+Kc[112+(ie+3>>3)]],_[N+0]=no[255+J-se]}function Dm(_,N,D,z){var J=_[N+0],ie=_[N+D];return $o[255+_[N-2*D]-_[N-D]]>z||$o[255+ie-J]>z}function $f(_,N,D,z){return 4*$o[255+_[N-D]-_[N+0]]+$o[255+_[N-2*D]-_[N+D]]<=z}function Tn(_,N,D,z,J){var ie=_[N-3*D],se=_[N-2*D],oe=_[N-D],ae=_[N+0],de=_[N+D],_e=_[N+2*D],Oe=_[N+3*D];return 4*$o[255+oe-ae]+$o[255+se-de]>z?0:$o[255+_[N-4*D]-ie]<=J&&$o[255+ie-se]<=J&&$o[255+se-oe]<=J&&$o[255+Oe-_e]<=J&&$o[255+_e-de]<=J&&$o[255+de-ae]<=J}function $m(_,N,D,z){var J=2*z+1;for(z=0;16>z;++z)$f(_,N+z,D,J)&&Fc(_,N+z,D)}function ps(_,N,D,z){var J=2*z+1;for(z=0;16>z;++z)$f(_,N+z*D,1,J)&&Fc(_,N+z*D,1)}function To(_,N,D,z){var J;for(J=3;0<J;--J)$m(_,N+=4*D,D,z)}function Om(_,N,D,z){var J;for(J=3;0<J;--J)ps(_,N+=4,D,z)}function Bc(_,N,D,z,J,ie,se,oe){for(ie=2*ie+1;0<J--;){if(Tn(_,N,D,ie,se))if(Dm(_,N,D,oe))Fc(_,N,D);else{var ae=_,de=N,_e=D,Oe=ae[de-2*_e],Me=ae[de-_e],Te=ae[de+0],Ze=ae[de+_e],Ue=ae[de+2*_e],Se=27*(Xe=Qh[1020+3*(Te-Me)+Qh[1020+Oe-Ze]])+63>>7,Ie=18*Xe+63>>7,Xe=9*Xe+63>>7;ae[de-3*_e]=no[255+ae[de-3*_e]+Xe],ae[de-2*_e]=no[255+Oe+Ie],ae[de-_e]=no[255+Me+Se],ae[de+0]=no[255+Te-Se],ae[de+_e]=no[255+Ze-Ie],ae[de+2*_e]=no[255+Ue-Xe]}N+=z}}function Ao(_,N,D,z,J,ie,se,oe){for(ie=2*ie+1;0<J--;){if(Tn(_,N,D,ie,se))if(Dm(_,N,D,oe))Fc(_,N,D);else{var ae=_,de=N,_e=D,Oe=ae[de-_e],Me=ae[de+0],Te=ae[de+_e],Ze=Kc[112+((Ue=3*(Me-Oe))+4>>3)],Ue=Kc[112+(Ue+3>>3)],Se=Ze+1>>1;ae[de-2*_e]=no[255+ae[de-2*_e]+Se],ae[de-_e]=no[255+Oe+Ue],ae[de+0]=no[255+Me-Ze],ae[de+_e]=no[255+Te-Se]}N+=z}}function Of(_,N,D,z,J,ie){Bc(_,N,D,1,16,z,J,ie)}function zc(_,N,D,z,J,ie){Bc(_,N,1,D,16,z,J,ie)}function Z0(_,N,D,z,J,ie){var se;for(se=3;0<se;--se)Ao(_,N+=4*D,D,1,16,z,J,ie)}function Wh(_,N,D,z,J,ie){var se;for(se=3;0<se;--se)Ao(_,N+=4,1,D,16,z,J,ie)}function Mf(_,N,D,z,J,ie,se,oe){Bc(_,N,J,1,8,ie,se,oe),Bc(D,z,J,1,8,ie,se,oe)}function Ff(_,N,D,z,J,ie,se,oe){Bc(_,N,1,J,8,ie,se,oe),Bc(D,z,1,J,8,ie,se,oe)}function eo(_,N,D,z,J,ie,se,oe){Ao(_,N+4*J,J,1,8,ie,se,oe),Ao(D,z+4*J,J,1,8,ie,se,oe)}function Mm(_,N,D,z,J,ie,se,oe){Ao(_,N+4,1,J,8,ie,se,oe),Ao(D,z+4,1,J,8,ie,se,oe)}function zu(){this.ba=new gr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ti,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function aa(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Uh(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bf(){this.ua=0,this.Wa=new he,this.vb=new he,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new W,this.yc=new $}function zf(){this.xb=this.a=0,this.l=new Yn,this.ca=new gr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bf,this.ab=0,this.gc=o(4,Uh),this.Oc=0}function Hh(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Yn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function jc(_,N,D,z,J,ie,se){for(_=_==null?0:_[N+0],N=0;N<se;++N)J[ie+N]=_+D[z+N]&255,_=J[ie+N]}function Gh(_,N,D,z,J,ie,se){var oe;if(_==null)jc(null,null,D,z,J,ie,se);else for(oe=0;oe<se;++oe)J[ie+oe]=_[N+oe]+D[z+oe]&255}function Vc(_,N,D,z,J,ie,se){if(_==null)jc(null,null,D,z,J,ie,se);else{var oe,ae=_[N+0],de=ae,_e=ae;for(oe=0;oe<se;++oe)de=_e+(ae=_[N+oe])-de,_e=D[z+oe]+(-256&de?0>de?0:255:de)&255,de=ae,J[ie+oe]=_e}}function jf(_,N,D,z){var J=N.width,ie=N.o;if(e(_!=null&&N!=null),0>D||0>=z||D+z>ie)return null;if(!_.Cc){if(_.ga==null){var se;if(_.ga=new Hh,(se=_.ga==null)||(se=N.width*N.o,e(_.Gb.length==0),_.Gb=r(se),_.Uc=0,_.Gb==null?se=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,se=1),se=!se),!se){se=_.ga;var oe=_.Fa,ae=_.P,de=_.qc,_e=_.mb,Oe=_.nb,Me=ae+1,Te=de-1,Ze=se.l;if(e(oe!=null&&_e!=null&&N!=null),vi[0]=null,vi[1]=jc,vi[2]=Gh,vi[3]=Vc,se.ca=_e,se.tb=Oe,se.c=N.width,se.i=N.height,e(0<se.c&&0<se.i),1>=de)N=0;else if(se.$a=oe[ae+0]>>0&3,se.Z=oe[ae+0]>>2&3,se.Lc=oe[ae+0]>>4&3,ae=oe[ae+0]>>6&3,0>se.$a||1<se.$a||4<=se.Z||1<se.Lc||ae)N=0;else if(Ze.put=sa,Ze.ac=Ji,Ze.bc=Qr,Ze.ma=se,Ze.width=N.width,Ze.height=N.height,Ze.Da=N.Da,Ze.v=N.v,Ze.va=N.va,Ze.j=N.j,Ze.o=N.o,se.$a)e:{e(se.$a==1),N=Xn();t:for(;;){if(N==null){N=0;break e}if(e(se!=null),se.mc=N,N.c=se.c,N.i=se.i,N.l=se.l,N.l.ma=se,N.l.width=se.c,N.l.height=se.i,N.a=0,B(N.m,oe,Me,Te),!En(se.c,se.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&St(N.s)?(se.ic=1,oe=N.c*N.i,N.Ta=null,N.Ua=0,N.V=r(oe),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(se.ic=0,N=Sn(N,se.c)),!N))break t;N=1;break e}se.mc=null,N=0}else N=Te>=se.c*se.i;se=!N}if(se)return null;_.ga.Lc!=1?_.Ga=0:z=ie-D}e(_.ga!=null),e(D+z<=ie);e:{if(N=(oe=_.ga).c,ie=oe.l.o,oe.$a==0){if(Me=_.rc,Te=_.Vc,Ze=_.Fa,ae=_.P+1+D*N,de=_.mb,_e=_.nb+D*N,e(ae<=_.P+_.qc),oe.Z!=0)for(e(vi[oe.Z]!=null),se=0;se<z;++se)vi[oe.Z](Me,Te,Ze,ae,de,_e,N),Me=de,Te=_e,_e+=N,ae+=N;else for(se=0;se<z;++se)i(de,_e,Ze,ae,N),Me=de,Te=_e,_e+=N,ae+=N;_.rc=Me,_.Vc=Te}else{if(e(oe.mc!=null),N=D+z,e((se=oe.mc)!=null),e(N<=se.i),se.C>=N)N=1;else if(oe.ic||Le(),oe.ic){oe=se.V,Me=se.Ba,Te=se.c;var Ue=se.i,Se=(Ze=1,ae=se.$/Te,de=se.$%Te,_e=se.m,Oe=se.s,se.$),Ie=Te*Ue,Xe=Te*N,tt=Oe.wc,Ye=Se<Xe?Ge(Oe,de,ae):null;e(Se<=Ie),e(N<=Ue),e(St(Oe));t:for(;;){for(;!_e.h&&Se<Xe;){if(de&tt||(Ye=Ge(Oe,de,ae)),e(Ye!=null),Z(_e),256>(Ue=Ke(Ye.G[0],Ye.H[0],_e)))oe[Me+Se]=Ue,++Se,++de>=Te&&(de=0,++ae<=N&&!(ae%16)&&Et(se,ae));else{if(!(280>Ue)){Ze=0;break t}Ue=Ee(Ue-256,_e);var Tt,bt=Ke(Ye.G[4],Ye.H[4],_e);if(Z(_e),!(Se>=(bt=Be(Te,bt=Ee(bt,_e)))&&Ie-Se>=Ue)){Ze=0;break t}for(Tt=0;Tt<Ue;++Tt)oe[Me+Se+Tt]=oe[Me+Se+Tt-bt];for(Se+=Ue,de+=Ue;de>=Te;)de-=Te,++ae<=N&&!(ae%16)&&Et(se,ae);Se<Xe&&de&tt&&(Ye=Ge(Oe,de,ae))}e(_e.h==q(_e))}Et(se,ae>N?N:ae);break t}!Ze||_e.h&&Se<Ie?(Ze=0,se.a=_e.h?5:3):se.$=Se,N=Ze}else N=Zt(se,se.V,se.Ba,se.c,se.i,N,oi);if(!N){z=0;break e}}D+z>=ie&&(_.Cc=1),z=1}if(!z)return null;if(_.Cc&&((z=_.ga)!=null&&(z.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+D*J}function A(_,N,D,z,J,ie){for(;0<J--;){var se,oe=_,ae=N+(D?1:0),de=_,_e=N+(D?0:3);for(se=0;se<z;++se){var Oe=de[_e+4*se];Oe!=255&&(Oe*=32897,oe[ae+4*se+0]=oe[ae+4*se+0]*Oe>>23,oe[ae+4*se+1]=oe[ae+4*se+1]*Oe>>23,oe[ae+4*se+2]=oe[ae+4*se+2]*Oe>>23)}N+=ie}}function ee(_,N,D,z,J){for(;0<z--;){var ie;for(ie=0;ie<D;++ie){var se=_[N+2*ie+0],oe=15&(de=_[N+2*ie+1]),ae=4369*oe,de=(240&de|de>>4)*ae>>16;_[N+2*ie+0]=(240&se|se>>4)*ae>>16&240|(15&se|se<<4)*ae>>16>>4&15,_[N+2*ie+1]=240&de|oe}N+=J}}function pe(_,N,D,z,J,ie,se,oe){var ae,de,_e=255;for(de=0;de<J;++de){for(ae=0;ae<z;++ae){var Oe=_[N+ae];ie[se+4*ae]=Oe,_e&=Oe}N+=D,se+=oe}return _e!=255}function be(_,N,D,z,J){var ie;for(ie=0;ie<J;++ie)D[z+ie]=_[N+ie]>>8}function Le(){sr=A,pi=ee,mi=pe,cs=be}function We(_,N,D){E[_]=function(z,J,ie,se,oe,ae,de,_e,Oe,Me,Te,Ze,Ue,Se,Ie,Xe,tt){var Ye,Tt=tt-1>>1,bt=oe[ae+0]|de[_e+0]<<16,Kt=Oe[Me+0]|Te[Ze+0]<<16;e(z!=null);var _t=3*bt+Kt+131074>>2;for(N(z[J+0],255&_t,_t>>16,Ue,Se),ie!=null&&(_t=3*Kt+bt+131074>>2,N(ie[se+0],255&_t,_t>>16,Ie,Xe)),Ye=1;Ye<=Tt;++Ye){var ai=oe[ae+Ye]|de[_e+Ye]<<16,yi=Oe[Me+Ye]|Te[Ze+Ye]<<16,Qn=bt+ai+Kt+yi+524296,zn=Qn+2*(ai+Kt)>>3;_t=zn+bt>>1,bt=(Qn=Qn+2*(bt+yi)>>3)+ai>>1,N(z[J+2*Ye-1],255&_t,_t>>16,Ue,Se+(2*Ye-1)*D),N(z[J+2*Ye-0],255&bt,bt>>16,Ue,Se+(2*Ye-0)*D),ie!=null&&(_t=Qn+Kt>>1,bt=zn+yi>>1,N(ie[se+2*Ye-1],255&_t,_t>>16,Ie,Xe+(2*Ye-1)*D),N(ie[se+2*Ye+0],255&bt,bt>>16,Ie,Xe+(2*Ye+0)*D)),bt=ai,Kt=yi}1&tt||(_t=3*bt+Kt+131074>>2,N(z[J+tt-1],255&_t,_t>>16,Ue,Se+(tt-1)*D),ie!=null&&(_t=3*Kt+bt+131074>>2,N(ie[se+tt-1],255&_t,_t>>16,Ie,Xe+(tt-1)*D)))}}function st(){Fr[jm]=Qk,Fr[qf]=xx,Fr[J0]=Jk,Fr[Kf]=Gm,Fr[Xf]=tv,Fr[Vm]=wx,Fr[bx]=KY,Fr[Wm]=xx,Fr[Um]=Gm,Fr[Hm]=tv,Fr[f]=wx}function xt(_){return _&~XY?0>_?0:255:_>>yD}function At(_,N){return xt((19077*_>>8)+(26149*N>>8)-14234)}function hn(_,N,D){return xt((19077*_>>8)-(6419*N>>8)-(13320*D>>8)+8708)}function cn(_,N){return xt((19077*_>>8)+(33050*N>>8)-17685)}function Bn(_,N,D,z,J){z[J+0]=At(_,D),z[J+1]=hn(_,N,D),z[J+2]=cn(_,N)}function Ai(_,N,D,z,J){z[J+0]=cn(_,N),z[J+1]=hn(_,N,D),z[J+2]=At(_,D)}function Oi(_,N,D,z,J){var ie=hn(_,N,D);N=ie<<3&224|cn(_,N)>>3,z[J+0]=248&At(_,D)|ie>>5,z[J+1]=N}function ms(_,N,D,z,J){var ie=240&cn(_,N)|15;z[J+0]=240&At(_,D)|hn(_,N,D)>>4,z[J+1]=ie}function br(_,N,D,z,J){z[J+0]=255,Bn(_,N,D,z,J+1)}function As(_,N,D,z,J){Ai(_,N,D,z,J),z[J+3]=255}function Da(_,N,D,z,J){Bn(_,N,D,z,J),z[J+3]=255}function Hi(_,N){return 0>_?0:_>N?N:_}function $r(_,N,D){E[_]=function(z,J,ie,se,oe,ae,de,_e,Oe){for(var Me=_e+(-2&Oe)*D;_e!=Me;)N(z[J+0],ie[se+0],oe[ae+0],de,_e),N(z[J+1],ie[se+0],oe[ae+0],de,_e+D),J+=2,++se,++ae,_e+=2*D;1&Oe&&N(z[J+0],ie[se+0],oe[ae+0],de,_e)}}function Fm(_,N,D){return D==0?_==0?N==0?6:5:N==0?4:0:D}function Ro(_,N,D,z,J){switch(_>>>30){case 3:cl(N,D,z,J,0);break;case 2:ls(N,D,z,J);break;case 1:Or(N,D,z,J)}}function Vf(_,N){var D,z,J=N.M,ie=N.Nb,se=_.oc,oe=_.pc+40,ae=_.oc,de=_.pc+584,_e=_.oc,Oe=_.pc+600;for(D=0;16>D;++D)se[oe+32*D-1]=129;for(D=0;8>D;++D)ae[de+32*D-1]=129,_e[Oe+32*D-1]=129;for(0<J?se[oe-1-32]=ae[de-1-32]=_e[Oe-1-32]=129:(s(se,oe-32-1,127,21),s(ae,de-32-1,127,9),s(_e,Oe-32-1,127,9)),z=0;z<_.za;++z){var Me=N.ya[N.aa+z];if(0<z){for(D=-1;16>D;++D)i(se,oe+32*D-4,se,oe+32*D+12,4);for(D=-1;8>D;++D)i(ae,de+32*D-4,ae,de+32*D+4,4),i(_e,Oe+32*D-4,_e,Oe+32*D+4,4)}var Te=_.Gd,Ze=_.Hd+z,Ue=Me.ad,Se=Me.Hc;if(0<J&&(i(se,oe-32,Te[Ze].y,0,16),i(ae,de-32,Te[Ze].f,0,8),i(_e,Oe-32,Te[Ze].ea,0,8)),Me.Za){var Ie=se,Xe=oe-32+16;for(0<J&&(z>=_.za-1?s(Ie,Xe,Te[Ze].y[15],4):i(Ie,Xe,Te[Ze+1].y,0,4)),D=0;4>D;D++)Ie[Xe+128+D]=Ie[Xe+256+D]=Ie[Xe+384+D]=Ie[Xe+0+D];for(D=0;16>D;++D,Se<<=2)Ie=se,Xe=oe+xD[D],Ma[Me.Ob[D]](Ie,Xe),Ro(Se,Ue,16*+D,Ie,Xe)}else if(Ie=Fm(z,J,Me.Ob[0]),Xc[Ie](se,oe),Se!=0)for(D=0;16>D;++D,Se<<=2)Ro(Se,Ue,16*+D,se,oe+xD[D]);for(D=Me.Gc,Ie=Fm(z,J,Me.Dd),pl[Ie](ae,de),pl[Ie](_e,Oe),Se=Ue,Ie=ae,Xe=de,255&(Me=D>>0)&&(170&Me?Uc(Se,256,Ie,Xe):Do(Se,256,Ie,Xe)),Me=_e,Se=Oe,255&(D>>=8)&&(170&D?Uc(Ue,320,Me,Se):Do(Ue,320,Me,Se)),J<_.Ub-1&&(i(Te[Ze].y,0,se,oe+480,16),i(Te[Ze].f,0,ae,de+224,8),i(Te[Ze].ea,0,_e,Oe+224,8)),D=8*ie*_.B,Te=_.sa,Ze=_.ta+16*z+16*ie*_.R,Ue=_.qa,Me=_.ra+8*z+D,Se=_.Ha,Ie=_.Ia+8*z+D,D=0;16>D;++D)i(Te,Ze+D*_.R,se,oe+32*D,16);for(D=0;8>D;++D)i(Ue,Me+D*_.B,ae,de+32*D,8),i(Se,Ie+D*_.B,_e,Oe+32*D,8)}}function $a(_,N,D,z,J,ie,se,oe,ae){var de=[0],_e=[0],Oe=0,Me=ae!=null?ae.kd:0,Te=ae??new aa;if(_==null||12>D)return 7;Te.data=_,Te.w=N,Te.ha=D,N=[N],D=[D],Te.gb=[Te.gb];e:{var Ze=N,Ue=D,Se=Te.gb;if(e(_!=null),e(Ue!=null),e(Se!=null),Se[0]=0,12<=Ue[0]&&!n(_,Ze[0],"RIFF")){if(n(_,Ze[0]+8,"WEBP")){Se=3;break e}var Ie=qe(_,Ze[0]+4);if(12>Ie||4294967286<Ie){Se=3;break e}if(Me&&Ie>Ue[0]-8){Se=7;break e}Se[0]=Ie,Ze[0]+=12,Ue[0]-=12}Se=0}if(Se!=0)return Se;for(Ie=0<Te.gb[0],D=D[0];;){e:{var Xe=_;Ue=N,Se=D;var tt=de,Ye=_e,Tt=Ze=[0];if((_t=Oe=[Oe])[0]=0,8>Se[0])Se=7;else{if(!n(Xe,Ue[0],"VP8X")){if(qe(Xe,Ue[0]+4)!=10){Se=3;break e}if(18>Se[0]){Se=7;break e}var bt=qe(Xe,Ue[0]+8),Kt=1+Fe(Xe,Ue[0]+12);if(2147483648<=Kt*(Xe=1+Fe(Xe,Ue[0]+15))){Se=3;break e}Tt!=null&&(Tt[0]=bt),tt!=null&&(tt[0]=Kt),Ye!=null&&(Ye[0]=Xe),Ue[0]+=18,Se[0]-=18,_t[0]=1}Se=0}}if(Oe=Oe[0],Ze=Ze[0],Se!=0)return Se;if(Ue=!!(2&Ze),!Ie&&Oe)return 3;if(ie!=null&&(ie[0]=!!(16&Ze)),se!=null&&(se[0]=Ue),oe!=null&&(oe[0]=0),se=de[0],Ze=_e[0],Oe&&Ue&&ae==null){Se=0;break}if(4>D){Se=7;break}if(Ie&&Oe||!Ie&&!Oe&&!n(_,N[0],"ALPH")){D=[D],Te.na=[Te.na],Te.P=[Te.P],Te.Sa=[Te.Sa];e:{bt=_,Se=N,Ie=D;var _t=Te.gb;tt=Te.na,Ye=Te.P,Tt=Te.Sa,Kt=22,e(bt!=null),e(Ie!=null),Xe=Se[0];var ai=Ie[0];for(e(tt!=null),e(Tt!=null),tt[0]=null,Ye[0]=null,Tt[0]=0;;){if(Se[0]=Xe,Ie[0]=ai,8>ai){Se=7;break e}var yi=qe(bt,Xe+4);if(4294967286<yi){Se=3;break e}var Qn=8+yi+1&-2;if(Kt+=Qn,0<_t&&Kt>_t){Se=3;break e}if(!n(bt,Xe,"VP8 ")||!n(bt,Xe,"VP8L")){Se=0;break e}if(ai[0]<Qn){Se=7;break e}n(bt,Xe,"ALPH")||(tt[0]=bt,Ye[0]=Xe+8,Tt[0]=yi),Xe+=Qn,ai-=Qn}}if(D=D[0],Te.na=Te.na[0],Te.P=Te.P[0],Te.Sa=Te.Sa[0],Se!=0)break}D=[D],Te.Ja=[Te.Ja],Te.xa=[Te.xa];e:if(_t=_,Se=N,Ie=D,tt=Te.gb[0],Ye=Te.Ja,Tt=Te.xa,bt=Se[0],Xe=!n(_t,bt,"VP8 "),Kt=!n(_t,bt,"VP8L"),e(_t!=null),e(Ie!=null),e(Ye!=null),e(Tt!=null),8>Ie[0])Se=7;else{if(Xe||Kt){if(_t=qe(_t,bt+4),12<=tt&&_t>tt-12){Se=3;break e}if(Me&&_t>Ie[0]-8){Se=7;break e}Ye[0]=_t,Se[0]+=8,Ie[0]-=8,Tt[0]=Kt}else Tt[0]=5<=Ie[0]&&_t[bt+0]==47&&!(_t[bt+4]>>5),Ye[0]=Ie[0];Se=0}if(D=D[0],Te.Ja=Te.Ja[0],Te.xa=Te.xa[0],N=N[0],Se!=0)break;if(4294967286<Te.Ja)return 3;if(oe==null||Ue||(oe[0]=Te.xa?2:1),se=[se],Ze=[Ze],Te.xa){if(5>D){Se=7;break}oe=se,Me=Ze,Ue=ie,_==null||5>D?_=0:5<=D&&_[N+0]==47&&!(_[N+4]>>5)?(Ie=[0],_t=[0],tt=[0],B(Ye=new M,_,N,D),ge(Ye,Ie,_t,tt)?(oe!=null&&(oe[0]=Ie[0]),Me!=null&&(Me[0]=_t[0]),Ue!=null&&(Ue[0]=tt[0]),_=1):_=0):_=0}else{if(10>D){Se=7;break}oe=Ze,_==null||10>D||!Wl(_,N+3,D-3)?_=0:(Me=_[N+0]|_[N+1]<<8|_[N+2]<<16,Ue=16383&(_[N+7]<<8|_[N+6]),_=16383&(_[N+9]<<8|_[N+8]),1&Me||3<(Me>>1&7)||!(Me>>4&1)||Me>>5>=Te.Ja||!Ue||!_?_=0:(se&&(se[0]=Ue),oe&&(oe[0]=_),_=1))}if(!_||(se=se[0],Ze=Ze[0],Oe&&(de[0]!=se||_e[0]!=Ze)))return 3;ae!=null&&(ae[0]=Te,ae.offset=N-ae.w,e(4294967286>N-ae.w),e(ae.offset==ae.ha-D));break}return Se==0||Se==7&&Oe&&ae==null?(ie!=null&&(ie[0]|=Te.na!=null&&0<Te.na.length),z!=null&&(z[0]=se),J!=null&&(J[0]=Ze),0):Se}function Wf(_,N,D){var z=N.width,J=N.height,ie=0,se=0,oe=z,ae=J;if(N.Da=_!=null&&0<_.Da,N.Da&&(oe=_.cd,ae=_.bd,ie=_.v,se=_.j,11>D||(ie&=-2,se&=-2),0>ie||0>se||0>=oe||0>=ae||ie+oe>z||se+ae>J))return 0;if(N.v=ie,N.j=se,N.va=ie+oe,N.o=se+ae,N.U=oe,N.T=ae,N.da=_!=null&&0<_.da,N.da){if(!ut(oe,ae,D=[_.ib],ie=[_.hb]))return 0;N.ib=D[0],N.hb=ie[0]}return N.ob=_!=null&&_.ob,N.Kb=_==null||!_.Sd,N.da&&(N.ob=N.ib<3*z/4&&N.hb<3*J/4,N.Kb=0),1}function Yl(_){if(_==null)return 2;if(11>_.S){var N=_.f.RGBA;N.fb+=(_.height-1)*N.A,N.A=-N.A}else N=_.f.kb,_=_.height,N.O+=(_-1)*N.fa,N.fa=-N.fa,N.N+=(_-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(_-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(_-1)*N.lb,N.lb=-N.lb);return 0}function ju(_,N,D,z){if(z==null||0>=_||0>=N)return 2;if(D!=null){if(D.Da){var J=D.cd,ie=D.bd,se=-2&D.v,oe=-2&D.j;if(0>se||0>oe||0>=J||0>=ie||se+J>_||oe+ie>N)return 2;_=J,N=ie}if(D.da){if(!ut(_,N,J=[D.ib],ie=[D.hb]))return 2;_=J[0],N=ie[0]}}z.width=_,z.height=N;e:{var ae=z.width,de=z.height;if(_=z.S,0>=ae||0>=de||!(_>=jm&&13>_))_=2;else{if(0>=z.Rd&&z.sd==null){se=ie=J=N=0;var _e=(oe=ae*wD[_])*de;if(11>_||(ie=(de+1)/2*(N=(ae+1)/2),_==12&&(se=(J=ae)*de)),(de=r(_e+2*ie+se))==null){_=1;break e}z.sd=de,11>_?((ae=z.f.RGBA).eb=de,ae.fb=0,ae.A=oe,ae.size=_e):((ae=z.f.kb).y=de,ae.O=0,ae.fa=oe,ae.Fd=_e,ae.f=de,ae.N=0+_e,ae.Ab=N,ae.Cd=ie,ae.ea=de,ae.W=0+_e+ie,ae.Db=N,ae.Ed=ie,_==12&&(ae.F=de,ae.J=0+_e+2*ie),ae.Tc=se,ae.lb=J)}if(N=1,J=z.S,ie=z.width,se=z.height,J>=jm&&13>J)if(11>J)_=z.f.RGBA,N&=(oe=Math.abs(_.A))*(se-1)+ie<=_.size,N&=oe>=ie*wD[J],N&=_.eb!=null;else{_=z.f.kb,oe=(ie+1)/2,_e=(se+1)/2,ae=Math.abs(_.fa),de=Math.abs(_.Ab);var Oe=Math.abs(_.Db),Me=Math.abs(_.lb),Te=Me*(se-1)+ie;N&=ae*(se-1)+ie<=_.Fd,N&=de*(_e-1)+oe<=_.Cd,N=(N&=Oe*(_e-1)+oe<=_.Ed)&ae>=ie&de>=oe&Oe>=oe,N&=_.y!=null,N&=_.f!=null,N&=_.ea!=null,J==12&&(N&=Me>=ie,N&=Te<=_.Tc,N&=_.F!=null)}else N=0;_=N?0:2}}return _!=0||D!=null&&D.fd&&(_=Yl(z)),_}var gs=64,qh=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Lo=24,Zl=32,Uf=8,xr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];it("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(_){return _},E.Predictor2=function(_,N,D){return N[D+0]},E.Predictor3=function(_,N,D){return N[D+1]},E.Predictor4=function(_,N,D){return N[D-1]},E.Predictor5=function(_,N,D){return at(at(_,N[D+1]),N[D+0])},E.Predictor6=function(_,N,D){return at(_,N[D-1])},E.Predictor7=function(_,N,D){return at(_,N[D+0])},E.Predictor8=function(_,N,D){return at(N[D-1],N[D+0])},E.Predictor9=function(_,N,D){return at(N[D+0],N[D+1])},E.Predictor10=function(_,N,D){return at(at(_,N[D-1]),at(N[D+0],N[D+1]))},E.Predictor11=function(_,N,D){var z=N[D+0];return 0>=Ft(z>>24&255,_>>24&255,(N=N[D-1])>>24&255)+Ft(z>>16&255,_>>16&255,N>>16&255)+Ft(z>>8&255,_>>8&255,N>>8&255)+Ft(255&z,255&_,255&N)?z:_},E.Predictor12=function(_,N,D){var z=N[D+0];return(wt((_>>24&255)+(z>>24&255)-((N=N[D-1])>>24&255))<<24|wt((_>>16&255)+(z>>16&255)-(N>>16&255))<<16|wt((_>>8&255)+(z>>8&255)-(N>>8&255))<<8|wt((255&_)+(255&z)-(255&N)))>>>0},E.Predictor13=function(_,N,D){var z=N[D-1];return(Rt((_=at(_,N[D+0]))>>24&255,z>>24&255)<<24|Rt(_>>16&255,z>>16&255)<<16|Rt(_>>8&255,z>>8&255)<<8|Rt(_>>0&255,z>>0&255))>>>0};var Q0=E.PredictorAdd0;E.PredictorAdd1=pt,it("Predictor2","PredictorAdd2"),it("Predictor3","PredictorAdd3"),it("Predictor4","PredictorAdd4"),it("Predictor5","PredictorAdd5"),it("Predictor6","PredictorAdd6"),it("Predictor7","PredictorAdd7"),it("Predictor8","PredictorAdd8"),it("Predictor9","PredictorAdd9"),it("Predictor10","PredictorAdd10"),it("Predictor11","PredictorAdd11"),it("Predictor12","PredictorAdd12"),it("Predictor13","PredictorAdd13");var Po=E.PredictorAdd2;nn("ColorIndexInverseTransform","MapARGB","32b",function(_){return _>>8&255},function(_){return _}),nn("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(_){return _},function(_){return _>>8&255});var Bm,tr=E.ColorIndexInverseTransform,Kh=E.MapARGB,la=E.VP8LColorIndexInverseTransformAlpha,Vu=E.MapAlpha,Ql=E.VP8LPredictorsAdd=[];Ql.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var Jl,nr,ir,Oa,to,ca,Wc,cl,ls,Uc,Or,Do,Xh,Hf,Gf,wr,ul,Hc,hl,Yh,Gc,qc,ec,ua,sr,pi,mi,cs,gi=r(511),dl=r(2041),Zh=r(225),fl=r(767),zm=0,Qh=dl,Kc=Zh,no=fl,$o=gi,jm=0,qf=1,J0=2,Kf=3,Xf=4,Vm=5,bx=6,Wm=7,Um=8,Hm=9,f=10,x=[2,3,7],C=[3,3,11],P=[280,256,256,256,40],V=[0,1,1,1,0],re=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ye=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],De=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],je=8,et=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ct=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Wt=null,Cn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Mr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Rs=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ha=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],io=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Jh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Yk=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Xc=[],Ma=[],pl=[],Zk=1,ev=2,vi=[],Fr=[];We("UpsampleRgbLinePair",Bn,3),We("UpsampleBgrLinePair",Ai,3),We("UpsampleRgbaLinePair",Da,4),We("UpsampleBgraLinePair",As,4),We("UpsampleArgbLinePair",br,4),We("UpsampleRgba4444LinePair",ms,2),We("UpsampleRgb565LinePair",Oi,2);var Qk=E.UpsampleRgbLinePair,Jk=E.UpsampleBgrLinePair,xx=E.UpsampleRgbaLinePair,Gm=E.UpsampleBgraLinePair,tv=E.UpsampleArgbLinePair,wx=E.UpsampleRgba4444LinePair,KY=E.UpsampleRgb565LinePair,_x=16,Sx=1<<_x-1,nv=-227,eI=482,yD=6,XY=(256<<yD)-1,bD=0,YY=r(256),ZY=r(256),QY=r(256),JY=r(256),eZ=r(eI-nv),tZ=r(eI-nv);$r("YuvToRgbRow",Bn,3),$r("YuvToBgrRow",Ai,3),$r("YuvToRgbaRow",Da,4),$r("YuvToBgraRow",As,4),$r("YuvToArgbRow",br,4),$r("YuvToRgba4444Row",ms,2),$r("YuvToRgb565Row",Oi,2);var xD=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Cx=[0,2,8],nZ=[8,7,6,4,4,2,2,2,1,1,1,1],iZ=1;this.WebPDecodeRGBA=function(_,N,D,z,J){var ie=qf,se=new zu,oe=new gr;se.ba=oe,oe.S=ie,oe.width=[oe.width],oe.height=[oe.height];var ae=oe.width,de=oe.height,_e=new na;if(_e==null||_==null)var Oe=2;else e(_e!=null),Oe=$a(_,N,D,_e.width,_e.height,_e.Pd,_e.Qd,_e.format,null);if(Oe!=0?ae=0:(ae!=null&&(ae[0]=_e.width[0]),de!=null&&(de[0]=_e.height[0]),ae=1),ae){oe.width=oe.width[0],oe.height=oe.height[0],z!=null&&(z[0]=oe.width),J!=null&&(J[0]=oe.height);e:{if(z=new Yn,(J=new aa).data=_,J.w=N,J.ha=D,J.kd=1,N=[0],e(J!=null),((_=$a(J.data,J.w,J.ha,null,null,null,N,null,J))==0||_==7)&&N[0]&&(_=4),(N=_)==0){if(e(se!=null),z.data=J.data,z.w=J.w+J.offset,z.ha=J.ha-J.offset,z.put=sa,z.ac=Ji,z.bc=Qr,z.ma=se,J.xa){if((_=Xn())==null){se=1;break e}if(function(Me,Te){var Ze=[0],Ue=[0],Se=[0];t:for(;;){if(Me==null)return 0;if(Te==null)return Me.a=2,0;if(Me.l=Te,Me.a=0,B(Me.m,Te.data,Te.w,Te.ha),!ge(Me.m,Ze,Ue,Se)){Me.a=3;break t}if(Me.xb=ev,Te.width=Ze[0],Te.height=Ue[0],!En(Ze[0],Ue[0],1,Me,null))break t;return 1}return e(Me.a!=0),0}(_,z)){if(z=(N=ju(z.width,z.height,se.Oa,se.ba))==0){t:{z=_;n:for(;;){if(z==null){z=0;break t}if(e(z.s.yc!=null),e(z.s.Ya!=null),e(0<z.s.Wb),e((D=z.l)!=null),e((J=D.ma)!=null),z.xb!=0){if(z.ca=J.ba,z.tb=J.tb,e(z.ca!=null),!Wf(J.Oa,D,Kf)){z.a=2;break n}if(!Sn(z,D.width)||D.da)break n;if((D.da||$n(z.ca.S))&&Le(),11>z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),z.ca.f.kb.F!=null&&Le()),z.Pb&&0<z.s.ua&&z.s.vb.X==null&&!Qe(z.s.vb,z.s.Wa.Xa)){z.a=1;break n}z.xb=0}if(!Zt(z,z.V,z.Ba,z.c,z.i,D.o,Nt))break n;J.Dc=z.Ma,z=1;break t}e(z.a!=0),z=0}z=!z}z&&(N=_.a)}else N=_.a}else{if((_=new vn)==null){se=1;break e}if(_.Fa=J.na,_.P=J.P,_.qc=J.Sa,Ul(_,z)){if((N=ju(z.width,z.height,se.Oa,se.ba))==0){if(_.Aa=0,D=se.Oa,e((J=_)!=null),D!=null){if(0<(ae=0>(ae=D.Md)?0:100<ae?255:255*ae/100)){for(de=_e=0;4>de;++de)12>(Oe=J.pb[de]).lc&&(Oe.ia=ae*nZ[0>Oe.lc?0:Oe.lc]>>3),_e|=Oe.ia;_e&&(alert("todo:VP8InitRandom"),J.ia=1)}J.Ga=D.Id,100<J.Ga?J.Ga=100:0>J.Ga&&(J.Ga=0)}fn(_,z)||(N=_.a)}}else N=_.a}N==0&&se.Oa!=null&&se.Oa.fd&&(N=Yl(se.ba))}se=N}ie=se!=0?null:11>ie?oe.f.RGBA.eb:oe.f.kb.y}else ie=null;return ie};var wD=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(E,O){for(var F="",R=0;R<4;R++)F+=String.fromCharCode(E[O++]);return F}function u(E,O){return(E[O+0]<<0|E[O+1]<<8|E[O+2]<<16)>>>0}function h(E,O){return(E[O+0]<<0|E[O+1]<<8|E[O+2]<<16|E[O+3]<<24)>>>0}new l;var d=[0],p=[0],m=[],g=new l,y=t,v=function(E,O){var F={},R=0,$=!1,U=0,W=0;if(F.frames=[],!function(j,q,X,Z){for(var ue=0;ue<Z;ue++)if(j[q+ue]!=X.charCodeAt(ue))return!0;return!1}(E,O,"RIFF",4)){var te,H;for(h(E,O+=4),O+=8;O<E.length;){var G=c(E,O),B=h(E,O+=4);O+=4;var Y=B+(1&B);switch(G){case"VP8 ":case"VP8L":F.frames[R]===void 0&&(F.frames[R]={}),(M=F.frames[R]).src_off=$?W:O-8,M.src_size=U+B+8,R++,$&&($=!1,U=0,W=0);break;case"VP8X":(M=F.header={}).feature_flags=E[O];var ne=O+4;M.canvas_width=1+u(E,ne),ne+=3,M.canvas_height=1+u(E,ne),ne+=3;break;case"ALPH":$=!0,U=Y+8,W=O-8;break;case"ANIM":(M=F.header).bgcolor=h(E,O),ne=O+4,M.loop_count=(te=E)[(H=ne)+0]<<0|te[H+1]<<8,ne+=2;break;case"ANMF":var le,M;(M=F.frames[R]={}).offset_x=2*u(E,O),O+=3,M.offset_y=2*u(E,O),O+=3,M.width=1+u(E,O),O+=3,M.height=1+u(E,O),O+=3,M.duration=u(E,O),O+=3,le=E[O++],M.dispose=1&le,M.blend=le>>1&1}G!="ANMF"&&(O+=Y)}return F}}(y,0);v.response=y,v.rgbaoutput=!0,v.dataurl=!1;var b=v.header?v.header:null,w=v.frames?v.frames:null;if(b){b.loop_counter=b.loop_count,d=[b.canvas_height],p=[b.canvas_width];for(var S=0;S<w.length&&w[S].blend!=0;S++);}var k=w[0],I=g.WebPDecodeRGBA(y,k.src_off,k.src_size,p,d);k.rgba=I,k.imgwidth=p[0],k.imgheight=d[0];for(var T=0;T<p[0]*d[0]*4;T++)m[T]=I[T];return this.width=p,this.height=d,this.data=m,this}(function(t){var e=function(){return typeof PT=="function"},n=function(d,p,m,g){var y=4,v=o;switch(g){case t.image_compression.FAST:y=1,v=r;break;case t.image_compression.MEDIUM:y=6,v=a;break;case t.image_compression.SLOW:y=9,v=l}d=i(d,p,m,v);var b=PT(d,{level:y});return t.__addimage__.arrayBufferToBinaryString(b)},i=function(d,p,m,g){for(var y,v,b,w=d.length/p,S=new Uint8Array(d.length+w),k=u(),I=0;I<w;I+=1){if(b=I*p,y=d.subarray(b,b+p),g)S.set(g(y,m,v),b+I);else{for(var T,E=k.length,O=[];T<E;T+=1)O[T]=k[T](y,m,v);var F=h(O.concat());S.set(O[F],b+I)}v=y}return S},s=function(d){var p=Array.apply([],d);return p.unshift(0),p},r=function(d,p){var m,g=[],y=d.length;g[0]=1;for(var v=0;v<y;v+=1)m=d[v-p]||0,g[v+1]=d[v]-m+256&255;return g},o=function(d,p,m){var g,y=[],v=d.length;y[0]=2;for(var b=0;b<v;b+=1)g=m&&m[b]||0,y[b+1]=d[b]-g+256&255;return y},a=function(d,p,m){var g,y,v=[],b=d.length;v[0]=3;for(var w=0;w<b;w+=1)g=d[w-p]||0,y=m&&m[w]||0,v[w+1]=d[w]+256-(g+y>>>1)&255;return v},l=function(d,p,m){var g,y,v,b,w=[],S=d.length;w[0]=4;for(var k=0;k<S;k+=1)g=d[k-p]||0,y=m&&m[k]||0,v=m&&m[k-p]||0,b=c(g,y,v),w[k+1]=d[k]-b+256&255;return w},c=function(d,p,m){if(d===p&&p===m)return d;var g=Math.abs(p-m),y=Math.abs(d-m),v=Math.abs(d+p-m-m);return g<=y&&g<=v?d:y<=v?p:m},u=function(){return[s,r,o,a,l]},h=function(d){var p=d.map(function(m){return m.reduce(function(g,y){return g+Math.abs(y)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(d,p,m,g){var y,v,b,w,S,k,I,T,E,O,F,R,$,U,W,te=this.decode.FLATE_DECODE,H="";if(this.__addimage__.isArrayBuffer(d)&&(d=new Uint8Array(d)),this.__addimage__.isArrayBufferView(d)){if(d=(b=new Aze(d)).imgData,v=b.bits,y=b.colorSpace,S=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){E=(T=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,F=new Uint8Array(E*b.colors),O=new Uint8Array(E);var G,B=b.pixelBitlength-b.bits;for(U=0,W=0;U<E;U++){for($=T[U],G=0;G<B;)F[W++]=$>>>G&255,G+=b.bits;O[U]=$>>>G&255}}if(b.bits===16){E=(T=new Uint32Array(b.decodePixels().buffer)).length,F=new Uint8Array(E*(32/b.pixelBitlength)*b.colors),O=new Uint8Array(E*(32/b.pixelBitlength)),R=b.colors>1,U=0,W=0;for(var Y=0;U<E;)$=T[U++],F[W++]=$>>>0&255,R&&(F[W++]=$>>>16&255,$=T[U++],F[W++]=$>>>0&255),O[Y++]=$>>>16&255;v=8}g!==t.image_compression.NONE&&e()?(d=n(F,b.width*b.colors,b.colors,g),I=n(O,b.width,1,g)):(d=F,I=O,te=void 0)}if(b.colorType===3&&(y=this.color_spaces.INDEXED,k=b.palette,b.transparency.indexed)){var ne=b.transparency.indexed,le=0;for(U=0,E=ne.length;U<E;++U)le+=ne[U];if((le/=255)===E-1&&ne.indexOf(0)!==-1)w=[ne.indexOf(0)];else if(le!==E){for(T=b.decodePixels(),O=new Uint8Array(T.length),U=0,E=T.length;U<E;U++)O[U]=ne[T[U]];I=n(O,b.width,1)}}var M=function(j){var q;switch(j){case t.image_compression.FAST:q=11;break;case t.image_compression.MEDIUM:q=13;break;case t.image_compression.SLOW:q=14;break;default:q=12}return q}(g);return te===this.decode.FLATE_DECODE&&(H="/Predictor "+M+" "),H+="/Colors "+S+" /BitsPerComponent "+v+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:m,data:d,index:p,filter:te,decodeParameters:H,transparency:w,palette:k,sMask:I,predictor:M,width:b.width,height:b.height,bitsPerComponent:v,colorSpace:y}}}})(Xt.API),function(t){t.processGIF89A=function(e,n,i,s){var r=new Rze(e),o=r.width,a=r.height,l=[];r.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new KN(100).encode(c,100);return t.processJPEG.call(this,u,n,i,s)},t.processGIF87A=t.processGIF89A}(Xt.API),rc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:i,blue:n,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},rc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Li.log("bit decode error:"+n)}},rc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var r=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+8*s*4,a=0;a<8&&8*s+a<this.width;a++){var l=this.palette[r>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},rc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<t;s++){var r=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+2*s*4,a=r>>4,l=15&r,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},rc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),r=n*this.width*4+4*i;if(s<this.palette.length){var o=this.palette[s];this.data[r]=o.red,this.data[r+1]=o.green,this.data[r+2]=o.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}t!==0&&(this.pos+=4-t)}},rc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(r&e)/e*255|0,a=(r>>5&e)/e*255|0,l=(r>>10&e)/e*255|0,c=r>>15?255:0,u=i*this.width*4+4*s;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=t}},rc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,u=s*this.width*4+4*r;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},rc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=r,this.data[o+1]=s,this.data[o+2]=i,this.data[o+3]=255}this.pos+=this.width%4}},rc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=r,this.data[a+1]=s,this.data[a+2]=i,this.data[a+3]=o}},rc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,i,s){var r=new rc(e,!1),o=r.width,a=r.height,l={data:r.getData(),width:o,height:a},c=new KN(100).encode(l,100);return t.processJPEG.call(this,c,n,i,s)}}(Xt.API),xB.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,i,s){var r=new xB(e),o=r.width,a=r.height,l={data:r.getData(),width:o,height:a},c=new KN(100).encode(l,100);return t.processJPEG.call(this,c,n,i,s)}}(Xt.API),Xt.API.processRGBA=function(t,e,n){for(var i=t.data,s=i.length,r=new Uint8Array(s/4*3),o=new Uint8Array(s/4),a=0,l=0,c=0;c<s;c+=4){var u=i[c],h=i[c+1],d=i[c+2],p=i[c+3];r[a++]=u,r[a++]=h,r[a++]=d,o[l++]=p}var m=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Xt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},lg=Xt.API,j2=lg.getCharWidthsArray=function(t,e){var n,i,s=(e=e||{}).font||this.internal.getFont(),r=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:s.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,u=c.fof?c.fof:1,h=e.doKerning!==!1,d=0,p=t.length,m=0,g=a[0]||l,y=[];for(n=0;n<p;n++)i=t.charCodeAt(n),typeof s.metadata.widthOfString=="function"?y.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(i))+o*(1e3/r)||0)/1e3):(d=h&&qn(c[i])==="object"&&!isNaN(parseInt(c[i][m],10))?c[i][m]/u:0,y.push((a[i]||g)/l+d)),m=i;return y},gB=lg.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return lg.processArabic&&(t=lg.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,n,s)/n:j2.apply(this,arguments).reduce(function(r,o){return r+o},0)},vB=function(t,e,n,i){for(var s=[],r=0,o=t.length,a=0;r!==o&&a+e[r]<n;)a+=e[r],r++;s.push(t.slice(0,r));var l=r;for(a=0;r!==o;)a+e[r]>i&&(s.push(t.slice(l,r)),a=0,l=r),a+=e[r],r++;return l!==r&&s.push(t.slice(l,r)),s},yB=function(t,e,n){n||(n={});var i,s,r,o,a,l,c,u=[],h=[u],d=n.textIndent||0,p=0,m=0,g=t.split(" "),y=j2.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?g[0].length+2:n.lineIndent||0){var v=Array(l).join(" "),b=[];g.map(function(S){(S=S.split(/\s*\n/)).length>1?b=b.concat(S.map(function(k,I){return(I&&k.length?`
`:"")+k})):b.push(S[0])}),g=b,l=gB.apply(this,[v,n])}for(r=0,o=g.length;r<o;r++){var w=0;if(i=g[r],l&&i[0]==`
`&&(i=i.substr(1),w=1),d+p+(m=(s=j2.apply(this,[i,n])).reduce(function(S,k){return S+k},0))>e||w){if(m>e){for(a=vB.apply(this,[i,s,e-(d+p),e]),u.push(a.shift()),u=[a.pop()];a.length;)h.push([a.shift()]);m=s.slice(i.length-(u[0]?u[0].length:0)).reduce(function(S,k){return S+k},0)}else u=[i];h.push(u),d=m+l,p=y}else u.push(i),d+=p+m,p=y}return c=l?function(S,k){return(k?v:"")+S.join(" ")}:function(S){return S.join(" ")},h.map(c)},lg.splitTextToSize=function(t,e,n){var i,s=(n=n||{}).fontSize||this.internal.getFontSize(),r=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/s;r.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,r.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=i.length;a<l;a++)c=c.concat(yB.apply(this,[i[a],o,r]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},i={},s=0;s<e.length;s++)n[e[s]]="0123456789abcdef"[s],i["0123456789abcdef"[s]]=e[s];var r=function(h){return"0x"+parseInt(h,10).toString(16)},o=t.__fontmetrics__.compress=function(h){var d,p,m,g,y=["{"];for(var v in h){if(d=h[v],isNaN(parseInt(v,10))?p="'"+v+"'":(v=parseInt(v,10),p=(p=r(v).slice(2)).slice(0,-1)+i[p.slice(-1)]),typeof d=="number")d<0?(m=r(d).slice(3),g="-"):(m=r(d).slice(2),g=""),m=g+m.slice(0,-1)+i[m.slice(-1)];else{if(qn(d)!=="object")throw new Error("Don't know what to do with value type "+qn(d)+".");m=o(d)}y.push(p+m)}return y.push("}"),y.join("")},a=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var d,p,m,g,y={},v=1,b=y,w=[],S="",k="",I=h.length-1,T=1;T<I;T+=1)(g=h[T])=="'"?d?(m=d.join(""),d=void 0):d=[]:d?d.push(g):g=="{"?(w.push([b,m]),b={},m=void 0):g=="}"?((p=w.pop())[0][p[1]]=b,m=void 0,b=p[0]):g=="-"?v=-1:m===void 0?n.hasOwnProperty(g)?(S+=n[g],m=parseInt(S,16)*v,v=1,S=""):S+=g:n.hasOwnProperty(g)?(k+=n[g],b[m]=parseInt(k,16)*v,v=1,m=void 0,k=""):k+=g;return y},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var d=h.font,p=u.Unicode[d.postScriptName];p&&(d.metadata.Unicode={},d.metadata.Unicode.widths=p.widths,d.metadata.Unicode.kerning=p.kerning);var m=c.Unicode[d.postScriptName];m&&(d.metadata.Unicode.encoding=m,d.encoding=m.codePages[0])}])}(Xt.API),function(t){var e=function(n){for(var i=n.length,s=new Uint8Array(i),r=0;r<i;r++)s[r]=n.charCodeAt(r);return s};t.API.events.push(["addFont",function(n){var i=void 0,s=n.font,r=n.instance;if(!s.isStandardFont){if(r===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(i=r.existsFileInVFS(s.postScriptName)===!1?r.loadFile(s.postScriptName):r.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(I1(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,i)}}])}(Xt),function(t){function e(){return(sn.canvg?Promise.resolve(sn.canvg):ET(()=>import("./index.es-DnZOe6i9.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Xt.API.addSvgAsImage=function(n,i,s,r,o,a,l,c){if(isNaN(i)||isNaN(s))throw Li.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(o))throw Li.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=r,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(m){return m.fromString(h,n,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(d)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),i,s,r,o,l,c)})}}(),Xt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var s=0;s<this.internal.pages[i].length;s++)this.internal.pages[i][s]=this.internal.pages[i][s].replace(e,n);return this},Xt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,s,r,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,h=0;function d(m,g){var y,v=!1;for(y=0;y<m.length;y+=1)m[y]===g&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=a.length;for(h=0;h<p;h+=1)n[a[h]].value=n[a[h]].defaultValue,n[a[h]].explicitSet=!1}if(qn(t)==="object"){for(s in t)if(r=t[s],d(a,s)&&r!==void 0){if(n[s].type==="boolean"&&typeof r=="boolean")n[s].value=r;else if(n[s].type==="name"&&d(n[s].valueSet,r))n[s].value=r;else if(n[s].type==="integer"&&Number.isInteger(r))n[s].value=r;else if(n[s].type==="array"){for(c=0;c<r.length;c+=1)if(i=!0,r[c].length===1&&typeof r[c][0]=="number")l.push(String(r[c]-1));else if(r[c].length>1){for(u=0;u<r[c].length;u+=1)typeof r[c][u]!="number"&&(i=!1);i===!0&&l.push([r[c][0]-1,r[c][1]-1].join(" "))}n[s].value="["+l.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,g=[];for(m in n)n[m].explicitSet===!0&&(n[m].type==="name"?g.push("/"+m+" /"+n[m].value):g.push("/"+m+" "+n[m].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(i)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=r.length+o.length+a.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+r+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Xt.API),function(t){var e=t.API,n=e.pdfEscape16=function(r,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],h=0,d=r.length;h<d;++h){if(a=o.metadata.characterToGlyph(r.charCodeAt(h)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=r.charCodeAt(h),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},i=function(r){var o,a,l,c,u,h,d;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,d=(a=Object.keys(r).sort(function(p,m){return p-m})).length;h<d;h++)o=a[h],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),r[o]!==void 0&&r[o]!==null&&typeof r[o].toString=="function"&&(c=("0000"+r[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(r){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var h=a.metadata.Unicode.widths,d=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",m=0;m<d.length;m++)p+=String.fromCharCode(d[m]);var g=c();u({data:p,addLength1:!0,objectId:g}),l("endobj");var y=c();u({data:i(a.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var v=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+fg(a.fontName)),l("/FontFile2 "+g+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var b=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+fg(a.fontName)),l("/FontDescriptor "+v+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+y+" 0 R"),l("/BaseFont /"+fg(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+b+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(r)}]),e.events.push(["putFont",function(r){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var h=a.metadata.rawData,d="",p=0;p<h.length;p++)d+=String.fromCharCode(h[p]);var m=c();u({data:d,addLength1:!0,objectId:m}),l("endobj");var g=c();u({data:i(a.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var y=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+fg(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var v=0;v<a.metadata.hmtx.widths.length;v++)a.metadata.hmtx.widths[v]=parseInt(a.metadata.hmtx.widths[v]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+fg(a.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(r)}]);var s=function(r){var o,a=r.text||"",l=r.x,c=r.y,u=r.options||{},h=r.mutex||{},d=h.pdfEscape,p=h.activeFontKey,m=h.fonts,g=p,y="",v=0,b="",w=m[g].encoding;if(m[g].encoding!=="Identity-H")return{text:a,x:l,y:c,options:u,mutex:h};for(b=a,g=p,Array.isArray(a)&&(b=a[0]),v=0;v<b.length;v+=1)m[g].metadata.hasOwnProperty("cmap")&&(o=m[g].metadata.cmap.unicode.codeMap[b[v].charCodeAt(0)]),o||b[v].charCodeAt(0)<256&&m[g].metadata.hasOwnProperty("Unicode")?y+=b[v]:y+="";var S="";return parseInt(g.slice(1))<14||w==="WinAnsiEncoding"?S=d(y,g).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(S=n(y,m[g])),h.isHex=!0,{text:S,x:l,y:c,options:u,mutex:h}};e.events.push(["postProcessText",function(r){var o=r.text||"",a=[],l={text:o,x:r.x,y:r.y,options:r.options,mutex:r.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([s(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(s(Object.assign({},l,{text:o[c]})).text);r.text=a}else r.text=s(Object.assign({},l,{text:o})).text}])}(Xt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,i){return e.call(this),this.internal.vFS[n]=i,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Xt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var s,r,o,a,l,c,u,h=e,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,w=0;this.__bidiEngine__={};var S=function(R){var $=R.charCodeAt(),U=$>>8,W=g[U];return W!==void 0?h[256*W+(255&$)]:U===252||U===253?"AL":v.test(U)?"L":U===8?"R":"N"},k=function(R){for(var $,U=0;U<R.length;U++){if(($=S(R.charAt(U)))==="L")return!1;if($==="R")return!0}return!1},I=function(R,$,U,W){var te,H,G,B,Y=$[W];switch(Y){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(Y="AN");break;case"AL":b=!0,Y="R";break;case"WS":Y="N";break;case"CS":W<1||W+1>=$.length||(te=U[W-1])!=="EN"&&te!=="AN"||(H=$[W+1])!=="EN"&&H!=="AN"?Y="N":b&&(H="AN"),Y=H===te?H:"N";break;case"ES":Y=(te=W>0?U[W-1]:"B")==="EN"&&W+1<$.length&&$[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&U[W-1]==="EN"){Y="EN";break}if(b){Y="N";break}for(G=W+1,B=$.length;G<B&&$[G]==="ET";)G++;Y=G<B&&$[G]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(B=$.length,G=W+1;G<B&&$[G]==="NSM";)G++;if(G<B){var ne=R[W],le=ne>=1425&&ne<=2303||ne===64286;if(te=$[G],le&&(te==="R"||te==="AL")){Y="R";break}}}Y=W<1||(te=$[W-1])==="B"?"N":U[W-1];break;case"B":b=!1,s=!0,Y=w;break;case"S":r=!0,Y="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":Y="N"}return Y},T=function(R,$,U){var W=R.split("");return U&&E(W,U,{hiLevel:w}),W.reverse(),$&&$.reverse(),W.join("")},E=function(R,$,U){var W,te,H,G,B,Y=-1,ne=R.length,le=0,M=[],j=w?p:d,q=[];for(b=!1,s=!1,r=!1,te=0;te<ne;te++)q[te]=S(R[te]);for(H=0;H<ne;H++){if(B=le,M[H]=I(R,q,M,H),W=240&(le=j[B][m[M[H]]]),le&=15,$[H]=G=j[le][5],W>0)if(W===16){for(te=Y;te<H;te++)$[te]=1;Y=-1}else Y=-1;if(j[le][6])Y===-1&&(Y=H);else if(Y>-1){for(te=Y;te<H;te++)$[te]=G;Y=-1}q[H]==="B"&&($[H]=0),U.hiLevel|=G}r&&function(X,Z,ue){for(var fe=0;fe<ue;fe++)if(X[fe]==="S"){Z[fe]=w;for(var me=fe-1;me>=0&&X[me]==="WS";me--)Z[me]=w}}(q,$,ne)},O=function(R,$,U,W,te){if(!(te.hiLevel<R)){if(R===1&&w===1&&!s)return $.reverse(),void(U&&U.reverse());for(var H,G,B,Y,ne=$.length,le=0;le<ne;){if(W[le]>=R){for(B=le+1;B<ne&&W[B]>=R;)B++;for(Y=le,G=B-1;Y<G;Y++,G--)H=$[Y],$[Y]=$[G],$[G]=H,U&&(H=U[Y],U[Y]=U[G],U[G]=H);le=B}le++}}},F=function(R,$,U){var W=R.split(""),te={hiLevel:w};return U||(U=[]),E(W,U,te),function(H,G,B){if(B.hiLevel!==0&&u)for(var Y,ne=0;ne<H.length;ne++)G[ne]===1&&(Y=y.indexOf(H[ne]))>=0&&(H[ne]=y[Y+1])}(W,U,te),O(2,W,$,U,te),O(1,W,$,U,te),W.join("")};return this.__bidiEngine__.doBidiReorder=function(R,$,U){if(function(te,H){if(H)for(var G=0;G<te.length;G++)H[G]=G;a===void 0&&(a=k(te)),c===void 0&&(c=k(te))}(R,$),o||!l||c)if(o&&l&&a^c)w=a?1:0,R=T(R,$,U);else if(!o&&l&&c)w=a?1:0,R=F(R,$,U),R=T(R,$);else if(!o||a||l||c){if(o&&!l&&a^c)R=T(R,$),a?(w=0,R=F(R,$,U)):(w=1,R=F(R,$,U),R=T(R,$));else if(o&&a&&!l&&c)w=1,R=F(R,$,U),R=T(R,$);else if(!o&&!l&&a^c){var W=u;a?(w=1,R=F(R,$,U),w=0,u=!1,R=F(R,$,U),u=W):(w=0,R=F(R,$,U),R=T(R,$),w=1,u=!1,R=F(R,$,U),u=W,R=T(R,$))}}else w=0,R=F(R,$,U);else w=a?1:0,R=F(R,$,U);return R},this.__bidiEngine__.setOptions=function(R){R&&(o=R.isInputVisual,l=R.isOutputVisual,a=R.isInputRtl,c=R.isOutputRtl,u=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var s=i.text,r=(i.x,i.y,i.options||{}),o=(i.mutex,r.lang,[]);if(r.isInputVisual=typeof r.isInputVisual!="boolean"||r.isInputVisual,n.setOptions(r),Object.prototype.toString.call(s)==="[object Array]"){var a=0;for(o=[],a=0;a<s.length;a+=1)Object.prototype.toString.call(s[a])==="[object Array]"?o.push([n.doBidiReorder(s[a][0]),s[a][1],s[a][2]]):o.push([n.doBidiReorder(s[a])]);i.text=o}else i.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(Xt),Xt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new df(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Gze(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Lze(this.contents),this.head=new Dze(this),this.name=new Bze(this),this.cmap=new zY(this),this.toUnicode={},this.hhea=new $ze(this),this.maxp=new zze(this),this.hmtx=new jze(this),this.post=new Mze(this),this.os2=new Oze(this),this.loca=new Hze(this),this.glyf=new Vze(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,i,s,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(i=255&(s=this.post.italic_angle),32768&(n=s>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(r=this.familyClass)===1||r===2||r===3||r===4||r===5||r===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,i){var s,r,o,a;for(o=0,r=0,a=(e=""+e).length;0<=a?r<a:r>a;r=0<=a?++r:--r)s=e.charCodeAt(r),o+=this.widthOfGlyph(this.characterToGlyph(s))+i*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},t}();var Pc,df=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,i;for(i=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(e){var n,i,s;for(s=[],n=0,i=e.length;0<=i?n<i:n>i;n=0<=i?++n:--n)s.push(this.writeByte(e.charCodeAt(n)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,i,s,r,o,a,l;return e=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),r=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^s)+16777216*(255^r)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*i+4294967296*s+16777216*r+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,i;return n=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,i;for(n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n.push(this.readByte());return n},t.prototype.write=function(e){var n,i,s,r;for(r=[],i=0,s=e.length;i<s;i++)n=e[i],r.push(this.writeByte(n));return r},t}(),Lze=function(){var t;function e(n){var i,s,r;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,r=this.tableCount;0<=r?s<r:s>r;s=0<=r?++s:--s)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(n){var i,s,r,o,a,l,c,u,h,d,p,m,g;for(g in p=Object.keys(n).length,l=Math.log(2),h=16*Math.floor(Math.log(p)/l),o=Math.floor(h/l),u=16*p-h,(s=new df).writeInt(this.scalarType),s.writeShort(p),s.writeShort(h),s.writeShort(o),s.writeShort(u),r=16*p,c=s.pos+r,a=null,m=[],n)for(d=n[g],s.writeString(g),s.writeInt(t(d)),s.writeInt(c),s.writeInt(d.length),m=m.concat(d),g==="head"&&(a=c),c+=d.length;c%4;)m.push(0),c++;return s.write(m),i=2981146554-t(s.data),s.pos=a+8,s.writeUInt32(i),s.data},t=function(n){var i,s,r,o;for(n=jY.call(n);n.length%4;)n.push(0);for(r=new df(n),s=0,i=0,o=n.length;i<o;i=i+=4)s+=r.readUInt32();return 4294967295&s},e}(),Pze={}.hasOwnProperty,Lu=function(t,e){for(var n in e)Pze.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Pc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Dze=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lu(e,Pc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var i;return(i=new df).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},e}(),wB=function(){function t(e,n){var i,s,r,o,a,l,c,u,h,d,p,m,g,y,v,b,w;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),d=p/2,e.pos+=6,r=function(){var S,k;for(k=[],l=S=0;0<=d?S<d:S>d;l=0<=d?++S:--S)k.push(e.readUInt16());return k}(),e.pos+=2,g=function(){var S,k;for(k=[],l=S=0;0<=d?S<d:S>d;l=0<=d?++S:--S)k.push(e.readUInt16());return k}(),c=function(){var S,k;for(k=[],l=S=0;0<=d?S<d:S>d;l=0<=d?++S:--S)k.push(e.readUInt16());return k}(),u=function(){var S,k;for(k=[],l=S=0;0<=d?S<d:S>d;l=0<=d?++S:--S)k.push(e.readUInt16());return k}(),s=(this.length-e.pos+this.offset)/2,a=function(){var S,k;for(k=[],l=S=0;0<=s?S<s:S>s;l=0<=s?++S:--S)k.push(e.readUInt16());return k}(),l=v=0,w=r.length;v<w;l=++v)for(y=r[l],i=b=m=g[l];m<=y?b<=y:b>=y;i=m<=y?++b:--b)u[l]===0?o=i+c[l]:(o=a[u[l]/2+(i-m)-(d-l)]||0)!==0&&(o+=c[l]),this.codeMap[i]=65535&o}e.pos=h}return t.encode=function(e,n){var i,s,r,o,a,l,c,u,h,d,p,m,g,y,v,b,w,S,k,I,T,E,O,F,R,$,U,W,te,H,G,B,Y,ne,le,M,j,q,X,Z,ue,fe,me,Pe,Ne,Fe;switch(W=new df,o=Object.keys(e).sort(function(qe,Qe){return qe-Qe}),n){case"macroman":for(g=0,y=function(){var qe=[];for(m=0;m<256;++m)qe.push(0);return qe}(),b={0:0},r={},te=0,Y=o.length;te<Y;te++)b[me=e[s=o[te]]]==null&&(b[me]=++g),r[s]={old:e[s],new:b[e[s]]},y[s]=b[e[s]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(y),{charMap:r,subtable:W.data,maxGlyphID:g+1};case"unicode":for($=[],h=[],w=0,b={},i={},v=c=null,H=0,ne=o.length;H<ne;H++)b[k=e[s=o[H]]]==null&&(b[k]=++w),i[s]={old:k,new:b[k]},a=b[k]-s,v!=null&&a===c||(v&&h.push(v),$.push(s),c=a),v=s;for(v&&h.push(v),h.push(65535),$.push(65535),F=2*(O=$.length),E=2*Math.pow(Math.log(O)/Math.LN2,2),d=Math.log(E/2)/Math.LN2,T=2*O-E,l=[],I=[],p=[],m=G=0,le=$.length;G<le;m=++G){if(R=$[m],u=h[m],R===65535){l.push(0),I.push(0);break}if(R-(U=i[R].new)>=32768)for(l.push(0),I.push(2*(p.length+O-m)),s=B=R;R<=u?B<=u:B>=u;s=R<=u?++B:--B)p.push(i[s].new);else l.push(U-R),I.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*O+2*p.length),W.writeUInt16(0),W.writeUInt16(F),W.writeUInt16(E),W.writeUInt16(d),W.writeUInt16(T),ue=0,M=h.length;ue<M;ue++)s=h[ue],W.writeUInt16(s);for(W.writeUInt16(0),fe=0,j=$.length;fe<j;fe++)s=$[fe],W.writeUInt16(s);for(Pe=0,q=l.length;Pe<q;Pe++)a=l[Pe],W.writeUInt16(a);for(Ne=0,X=I.length;Ne<X;Ne++)S=I[Ne],W.writeUInt16(S);for(Fe=0,Z=p.length;Fe<Z;Fe++)g=p[Fe],W.writeUInt16(g);return{charMap:i,subtable:W.data,maxGlyphID:w+1}}},t}(),zY=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lu(e,Pc),e.prototype.tag="cmap",e.prototype.parse=function(n){var i,s,r;for(n.pos=this.offset,this.version=n.readUInt16(),r=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)i=new wB(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(n,i){var s,r;return i==null&&(i="macroman"),s=wB.encode(n,i),(r=new df).writeUInt16(0),r.writeUInt16(1),s.table=r.data.concat(s.subtable),s},e}(),$ze=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lu(e,Pc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),Oze=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lu(e,Pc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var i,s;for(s=[],i=0;i<10;++i)s.push(n.readByte());return s}(),this.charRange=function(){var i,s;for(s=[],i=0;i<4;++i)s.push(n.readInt());return s}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var i,s;for(s=[],i=0;i<2;i=++i)s.push(n.readInt());return s}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),Mze=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lu(e,Pc),e.prototype.tag="post",e.prototype.parse=function(n){var i,s,r;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(s=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],r=[];n.pos<this.offset+this.length;)i=n.readByte(),r.push(this.names.push(n.readString(i)));return r;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),Fze=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Bze=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lu(e,Pc),e.prototype.tag="name",e.prototype.parse=function(n){var i,s,r,o,a,l,c,u,h,d,p;for(n.pos=this.offset,n.readShort(),i=n.readShort(),l=n.readShort(),s=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=h=0,d=s.length;h<d;o=++h)r=s[o],n.pos=r.offset,u=n.readString(r.length),a=new Fze(u,r),c[p=r.nameID]==null&&(c[p]=[]),c[r.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),zze=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lu(e,Pc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),jze=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lu(e,Pc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var i,s,r,o,a,l,c;for(n.pos=this.offset,this.metrics=[],i=0,l=this.file.hhea.numberOfMetrics;0<=l?i<l:i>l;i=0<=l?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],i=u=0;0<=r?u<r:u>r;i=0<=r?++u:--u)h.push(n.readInt16());return h}(),this.widths=(function(){var u,h,d,p;for(p=[],u=0,h=(d=this.metrics).length;u<h;u++)o=d[u],p.push(o.advance);return p}).call(this),s=this.widths[this.widths.length-1],c=[],i=a=0;0<=r?a<r:a>r;i=0<=r?++a:--a)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),jY=[].slice,Vze=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lu(e,Pc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var i,s,r,o,a,l,c,u,h,d;return n in this.cache?this.cache[n]:(o=this.file.loca,i=this.file.contents,s=o.indexOf(n),(r=o.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+s,a=(l=new df(i.read(r))).readShort(),u=l.readShort(),d=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[n]=a===-1?new Uze(l,u,d,c,h):new Wze(l,a,u,d,c,h),this.cache[n]))},e.prototype.encode=function(n,i,s){var r,o,a,l,c;for(a=[],o=[],l=0,c=i.length;l<c;l++)r=n[i[l]],o.push(a.length),r&&(a=a.concat(r.encode(s)));return o.push(a.length),{table:a,offsets:o}},e}(),Wze=function(){function t(e,n,i,s,r,o){this.raw=e,this.numberOfContours=n,this.xMin=i,this.yMin=s,this.xMax=r,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Uze=function(){function t(e,n,i,s,r){var o,a;for(this.raw=e,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,i;for(n=new df(jY.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),Hze=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lu(e,Pc),e.prototype.tag="loca",e.prototype.parse=function(n){var i,s;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var r,o;for(o=[],s=0,r=this.length;s<r;s+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var r,o;for(o=[],s=0,r=this.length;s<r;s+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,i){for(var s=new Uint32Array(this.offsets.length),r=0,o=0,a=0;a<s.length;++a)if(s[a]=r,o<i.length&&i[o]==a){++o,s[a]=r;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(r+=c)}for(var u=new Array(4*s.length),h=0;h<s.length;++h)u[4*h+3]=255&s[h],u[4*h+2]=(65280&s[h])>>8,u[4*h+1]=(16711680&s[h])>>16,u[4*h]=(4278190080&s[h])>>24;return u},e}(),Gze=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,i,s,r;for(n in s=this.font.cmap.tables[0].codeMap,e={},r=this.subset)i=r[n],e[n]=s[i];return e},t.prototype.glyphsFor=function(e){var n,i,s,r,o,a,l;for(s={},o=0,a=e.length;o<a;o++)s[r=e[o]]=this.font.glyf.glyphFor(r);for(r in n=[],s)(i=s[r])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(r in l=this.glyphsFor(n))i=l[r],s[r]=i;return s},t.prototype.encode=function(e,n){var i,s,r,o,a,l,c,u,h,d,p,m,g,y,v;for(s in i=zY.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),p={0:0},v=i.charMap)p[(l=v[s]).old]=l.new;for(m in d=i.maxGlyphID,o)m in p||(p[m]=d++);return u=function(b){var w,S;for(w in S={},b)S[b[w]]=w;return S}(p),h=Object.keys(u).sort(function(b,w){return b-w}),g=function(){var b,w,S;for(S=[],b=0,w=h.length;b<w;b++)a=h[b],S.push(u[a]);return S}(),r=this.font.glyf.encode(o,g,p),c=this.font.loca.encode(r.offsets,g),y={cmap:this.font.cmap.raw(),glyf:r.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},t}();Xt.API.PDFObject=function(){var t;function e(){}return t=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},e.convert=function(n){var i,s,r,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)i=n[a],c.push(e.convert(i));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in r=["<<"],n)o=n[s],r.push("/"+s+" "+e.convert(o));return r.push(">>"),r.join(`
`)}return""+n},e}();const qze=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Cze,AcroFormAppearance:Pt,AcroFormButton:ar,AcroFormCheckBox:T1,AcroFormChoiceField:Mp,AcroFormComboBox:Bp,AcroFormEditBox:N1,AcroFormListBox:Fp,AcroFormPasswordField:A1,AcroFormPushButton:E1,AcroFormRadioButton:zp,AcroFormTextField:Xd,GState:Ly,ShadingPattern:vd,TilingPattern:Ep,default:Xt,jsPDF:Xt},Symbol.toStringTag,{value:"Module"}));var Kze={exports:{}};const Xze=_B(qze);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,e){(function(i,s){t.exports=s(function(){try{return Xze}catch{}}())})(typeof globalThis<"u"?globalThis:typeof bc<"u"?bc:typeof window<"u"?window:typeof self<"u"?self:bc,function(n){return function(){var i={172:function(a,l){var c=this&&this.__extends||function(){var d=function(p,m){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(g[v]=y[v])},d(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");d(p,m);function g(){this.constructor=p}p.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var u=function(){function d(p,m,g){this.table=m,this.pageNumber=m.pageNumber,this.pageCount=this.pageNumber,this.settings=m.settings,this.cursor=g,this.doc=p.getDocument()}return d}();l.HookData=u;var h=function(d){c(p,d);function p(m,g,y,v,b,w){var S=d.call(this,m,g,w)||this;return S.cell=y,S.row=v,S.column=b,S.section=v.section,S}return p}(u);l.CellHookData=h},340:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var u=c(4),h=c(136),d=c(744),p=c(776),m=c(664),g=c(972);function y(v){v.API.autoTable=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];var S;b.length===1?S=b[0]:(console.error("Use of deprecated autoTable initiation"),S=b[2]||{},S.columns=b[0],S.body=b[1]);var k=(0,p.parseInput)(this,S),I=(0,g.createTable)(this,k);return(0,m.drawTable)(this,I),this},v.API.lastAutoTable=!1,v.API.previousAutoTable=!1,v.API.autoTable.previous=!1,v.API.autoTableText=function(b,w,S,k){(0,h.default)(b,w,S,k,this)},v.API.autoTableSetDefaults=function(b){return d.DocHandler.setDefaults(b,this),this},v.autoTableSetDefaults=function(b,w){d.DocHandler.setDefaults(b,w)},v.API.autoTableHtmlToJson=function(b,w){var S;if(w===void 0&&(w=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var k=new d.DocHandler(this),I=(0,u.parseHtml)(k,b,window,w,!1),T=I.head,E=I.body,O=((S=T[0])===null||S===void 0?void 0:S.map(function(F){return F.content}))||[];return{columns:O,rows:E,data:E}},v.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var b=this.lastAutoTable;return b&&b.finalY?b.finalY:0},v.API.autoTableAddPageContent=function(b){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),v.API.autoTable.globalDefaults||(v.API.autoTable.globalDefaults={}),v.API.autoTable.globalDefaults.addPageContent=b,this},v.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=y},136:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(u,h,d,p,m){p=p||{};var g=1.15,y=m.internal.scaleFactor,v=m.internal.getFontSize()/y,b=m.getLineHeightFactor?m.getLineHeightFactor():g,w=v*b,S=/\r\n|\r|\n/g,k="",I=1;if((p.valign==="middle"||p.valign==="bottom"||p.halign==="center"||p.halign==="right")&&(k=typeof u=="string"?u.split(S):u,I=k.length||1),d+=v*(2-g),p.valign==="middle"?d-=I/2*w:p.valign==="bottom"&&(d-=I*w),p.halign==="center"||p.halign==="right"){var T=v;if(p.halign==="center"&&(T*=.5),k&&I>=1){for(var E=0;E<k.length;E++)m.text(k[E],h-m.getStringUnitWidth(k[E])*T,d),d+=w;return m}h-=m.getStringUnitWidth(u)*T}return p.halign==="justify"?m.text(u,h,d,{maxWidth:p.maxWidth||100,align:"justify"}):m.text(u,h,d),m}l.default=c},420:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(m,g,y){y.applyStyles(g,!0);var v=Array.isArray(m)?m:[m],b=v.map(function(w){return y.getTextWidth(w)}).reduce(function(w,S){return Math.max(w,S)},0);return b}l.getStringWidth=c;function u(m,g,y,v){var b=g.settings.tableLineWidth,w=g.settings.tableLineColor;m.applyStyles({lineWidth:b,lineColor:w});var S=h(b,!1);S&&m.rect(y.x,y.y,g.getWidth(m.pageSize().width),v.y-y.y,S)}l.addTableBorder=u;function h(m,g){var y=m>0,v=g||g===0;return y&&v?"DF":y?"S":v?"F":null}l.getFillStyle=h;function d(m,g){var y,v,b,w;if(m=m||g,Array.isArray(m)){if(m.length>=4)return{top:m[0],right:m[1],bottom:m[2],left:m[3]};if(m.length===3)return{top:m[0],right:m[1],bottom:m[2],left:m[1]};if(m.length===2)return{top:m[0],right:m[1],bottom:m[0],left:m[1]};m.length===1?m=m[0]:m=g}return typeof m=="object"?(typeof m.vertical=="number"&&(m.top=m.vertical,m.bottom=m.vertical),typeof m.horizontal=="number"&&(m.right=m.horizontal,m.left=m.horizontal),{left:(y=m.left)!==null&&y!==void 0?y:g,top:(v=m.top)!==null&&v!==void 0?v:g,right:(b=m.right)!==null&&b!==void 0?b:g,bottom:(w=m.bottom)!==null&&w!==void 0?w:g}):(typeof m!="number"&&(m=g),{top:m,right:m,bottom:m,left:m})}l.parseSpacing=d;function p(m,g){var y=d(g.settings.margin,0);return m.pageSize().width-(y.left+y.right)}l.getPageAvailableWidth=p},796:function(a,l){var c=this&&this.__extends||function(){var p=function(m,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(y[b]=v[b])},p(m,g)};return function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(m,g);function y(){this.constructor=m}m.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var u=function(p){c(m,p);function m(g){var y=p.call(this)||this;return y._element=g,y}return m}(Array);l.HtmlRowInput=u;function h(p){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/p,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=h;function d(p){var m={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return m[p]}l.getTheme=d},903:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var u=c(420);function h(y,v,b,w,S){var k={},I=1.3333333333333333,T=p(v,function(Y){return S.getComputedStyle(Y).backgroundColor});T!=null&&(k.fillColor=T);var E=p(v,function(Y){return S.getComputedStyle(Y).color});E!=null&&(k.textColor=E);var O=g(w,b);O&&(k.cellPadding=O);var F="borderTopColor",R=I*b,$=w.borderTopWidth;if(w.borderBottomWidth===$&&w.borderRightWidth===$&&w.borderLeftWidth===$){var U=(parseFloat($)||0)/R;U&&(k.lineWidth=U)}else k.lineWidth={top:(parseFloat(w.borderTopWidth)||0)/R,right:(parseFloat(w.borderRightWidth)||0)/R,bottom:(parseFloat(w.borderBottomWidth)||0)/R,left:(parseFloat(w.borderLeftWidth)||0)/R},k.lineWidth.top||(k.lineWidth.right?F="borderRightColor":k.lineWidth.bottom?F="borderBottomColor":k.lineWidth.left&&(F="borderLeftColor"));var W=p(v,function(Y){return S.getComputedStyle(Y)[F]});W!=null&&(k.lineColor=W);var te=["left","right","center","justify"];te.indexOf(w.textAlign)!==-1&&(k.halign=w.textAlign),te=["middle","bottom","top"],te.indexOf(w.verticalAlign)!==-1&&(k.valign=w.verticalAlign);var H=parseInt(w.fontSize||"");isNaN(H)||(k.fontSize=H/I);var G=d(w);G&&(k.fontStyle=G);var B=(w.fontFamily||"").toLowerCase();return y.indexOf(B)!==-1&&(k.font=B),k}l.parseCss=h;function d(y){var v="";return(y.fontWeight==="bold"||y.fontWeight==="bolder"||parseInt(y.fontWeight)>=700)&&(v="bold"),(y.fontStyle==="italic"||y.fontStyle==="oblique")&&(v+="italic"),v}function p(y,v){var b=m(y,v);if(!b)return null;var w=b.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!w||!Array.isArray(w))return null;var S=[parseInt(w[1]),parseInt(w[2]),parseInt(w[3])],k=parseInt(w[4]);return k===0||isNaN(S[0])||isNaN(S[1])||isNaN(S[2])?null:S}function m(y,v){var b=v(y);return b==="rgba(0, 0, 0, 0)"||b==="transparent"||b==="initial"||b==="inherit"?y.parentElement==null?null:m(y.parentElement,v):b}function g(y,v){var b=[y.paddingTop,y.paddingRight,y.paddingBottom,y.paddingLeft],w=96/(72/v),S=(parseInt(y.lineHeight)-parseInt(y.fontSize))/v/2,k=b.map(function(T){return parseInt(T||"0")/w}),I=(0,u.parseSpacing)(k,0);return S>I.top&&(I.top=S),S>I.bottom&&(I.bottom=S),I}},744:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},u=function(){function h(d){this.jsPDFDocument=d,this.userStyles={textColor:d.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:d.internal.getFontSize(),fontStyle:d.internal.getFont().fontStyle,font:d.internal.getFont().fontName,lineWidth:d.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:d.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return h.setDefaults=function(d,p){p===void 0&&(p=null),p?p.__autoTableDocumentDefaults=d:c=d},h.unifyColor=function(d){return Array.isArray(d)?d:typeof d=="number"?[d,d,d]:typeof d=="string"?[d]:null},h.prototype.applyStyles=function(d,p){var m,g,y;p===void 0&&(p=!1),d.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(d.fontStyle);var v=this.jsPDFDocument.internal.getFont(),b=v.fontStyle,w=v.fontName;if(d.font&&(w=d.font),d.fontStyle){b=d.fontStyle;var S=this.getFontList()[w];S&&S.indexOf(b)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(S[0]),b=S[0])}if(this.jsPDFDocument.setFont(w,b),d.fontSize&&this.jsPDFDocument.setFontSize(d.fontSize),!p){var k=h.unifyColor(d.fillColor);k&&(m=this.jsPDFDocument).setFillColor.apply(m,k),k=h.unifyColor(d.textColor),k&&(g=this.jsPDFDocument).setTextColor.apply(g,k),k=h.unifyColor(d.lineColor),k&&(y=this.jsPDFDocument).setDrawColor.apply(y,k),typeof d.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(d.lineWidth)}},h.prototype.splitTextToSize=function(d,p,m){return this.jsPDFDocument.splitTextToSize(d,p,m)},h.prototype.rect=function(d,p,m,g,y){return this.jsPDFDocument.rect(d,p,m,g,y)},h.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},h.prototype.getTextWidth=function(d){return this.jsPDFDocument.getTextWidth(d)},h.prototype.getDocument=function(){return this.jsPDFDocument},h.prototype.setPage=function(d){this.jsPDFDocument.setPage(d)},h.prototype.addPage=function(){return this.jsPDFDocument.addPage()},h.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},h.prototype.getGlobalOptions=function(){return c||{}},h.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},h.prototype.pageSize=function(){var d=this.jsPDFDocument.internal.pageSize;return d.width==null&&(d={width:d.getWidth(),height:d.getHeight()}),d},h.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},h.prototype.getLineHeightFactor=function(){var d=this.jsPDFDocument;return d.getLineHeightFactor?d.getLineHeightFactor():1.15},h.prototype.getLineHeight=function(d){return d/this.scaleFactor()*this.getLineHeightFactor()},h.prototype.pageNumber=function(){var d=this.jsPDFDocument.internal.getCurrentPageInfo();return d?d.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},h}();l.DocHandler=u},4:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var u=c(903),h=c(796);function d(g,y,v,b,w){var S,k;b===void 0&&(b=!1),w===void 0&&(w=!1);var I;typeof y=="string"?I=v.document.querySelector(y):I=y;var T=Object.keys(g.getFontList()),E=g.scaleFactor(),O=[],F=[],R=[];if(!I)return console.error("Html table could not be found with input: ",y),{head:O,body:F,foot:R};for(var $=0;$<I.rows.length;$++){var U=I.rows[$],W=(k=(S=U==null?void 0:U.parentElement)===null||S===void 0?void 0:S.tagName)===null||k===void 0?void 0:k.toLowerCase(),te=p(T,E,v,U,b,w);te&&(W==="thead"?O.push(te):W==="tfoot"?R.push(te):F.push(te))}return{head:O,body:F,foot:R}}l.parseHtml=d;function p(g,y,v,b,w,S){for(var k=new h.HtmlRowInput(b),I=0;I<b.cells.length;I++){var T=b.cells[I],E=v.getComputedStyle(T);if(w||E.display!=="none"){var O=void 0;S&&(O=(0,u.parseCss)(g,T,y,E,v)),k.push({rowSpan:T.rowSpan,colSpan:T.colSpan,styles:O,_element:T,content:m(T)})}}var F=v.getComputedStyle(b);if(k.length>0&&(w||F.display!=="none"))return k}function m(g){var y=g.cloneNode(!0);return y.innerHTML=y.innerHTML.replace(/\n/g,"").replace(/ +/g," "),y.innerHTML=y.innerHTML.split(/<br.*?>/).map(function(v){return v.trim()}).join(`
`),y.innerText||y.textContent||""}},776:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var u=c(4),h=c(356),d=c(420),p=c(744),m=c(792);function g(I,T){var E=new p.DocHandler(I),O=E.getDocumentOptions(),F=E.getGlobalOptions();(0,m.default)(E,F,O,T);var R=(0,h.assign)({},F,O,T),$;typeof window<"u"&&($=window);var U=y(F,O,T),W=v(F,O,T),te=b(E,R),H=S(E,R,$);return{id:T.tableId,content:H,hooks:W,styles:U,settings:te}}l.parseInput=g;function y(I,T,E){for(var O={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},F=function(W){if(W==="columnStyles"){var te=I[W],H=T[W],G=E[W];O.columnStyles=(0,h.assign)({},te,H,G)}else{var B=[I,T,E],Y=B.map(function(ne){return ne[W]||{}});O[W]=(0,h.assign)({},Y[0],Y[1],Y[2])}},R=0,$=Object.keys(O);R<$.length;R++){var U=$[R];F(U)}return O}function v(I,T,E){for(var O=[I,T,E],F={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},R=0,$=O;R<$.length;R++){var U=$[R];U.didParseCell&&F.didParseCell.push(U.didParseCell),U.willDrawCell&&F.willDrawCell.push(U.willDrawCell),U.didDrawCell&&F.didDrawCell.push(U.didDrawCell),U.willDrawPage&&F.willDrawPage.push(U.willDrawPage),U.didDrawPage&&F.didDrawPage.push(U.didDrawPage)}return F}function b(I,T){var E,O,F,R,$,U,W,te,H,G,B,Y,ne=(0,d.parseSpacing)(T.margin,40/I.scaleFactor()),le=(E=w(I,T.startY))!==null&&E!==void 0?E:ne.top,M;T.showFoot===!0?M="everyPage":T.showFoot===!1?M="never":M=(O=T.showFoot)!==null&&O!==void 0?O:"everyPage";var j;T.showHead===!0?j="everyPage":T.showHead===!1?j="never":j=(F=T.showHead)!==null&&F!==void 0?F:"everyPage";var q=(R=T.useCss)!==null&&R!==void 0?R:!1,X=T.theme||(q?"plain":"striped"),Z=!!T.horizontalPageBreak,ue=($=T.horizontalPageBreakRepeat)!==null&&$!==void 0?$:null;return{includeHiddenHtml:(U=T.includeHiddenHtml)!==null&&U!==void 0?U:!1,useCss:q,theme:X,startY:le,margin:ne,pageBreak:(W=T.pageBreak)!==null&&W!==void 0?W:"auto",rowPageBreak:(te=T.rowPageBreak)!==null&&te!==void 0?te:"auto",tableWidth:(H=T.tableWidth)!==null&&H!==void 0?H:"auto",showHead:j,showFoot:M,tableLineWidth:(G=T.tableLineWidth)!==null&&G!==void 0?G:0,tableLineColor:(B=T.tableLineColor)!==null&&B!==void 0?B:200,horizontalPageBreak:Z,horizontalPageBreakRepeat:ue,horizontalPageBreakBehaviour:(Y=T.horizontalPageBreakBehaviour)!==null&&Y!==void 0?Y:"afterAllRows"}}function w(I,T){var E=I.getLastAutoTable(),O=I.scaleFactor(),F=I.pageNumber(),R=!1;if(E&&E.startPageNumber){var $=E.startPageNumber+E.pageNumber-1;R=$===F}return typeof T=="number"?T:(T==null||T===!1)&&R&&(E==null?void 0:E.finalY)!=null?E.finalY+20/O:null}function S(I,T,E){var O=T.head||[],F=T.body||[],R=T.foot||[];if(T.html){var $=T.includeHiddenHtml;if(E){var U=(0,u.parseHtml)(I,T.html,E,$,T.useCss)||{};O=U.head||O,F=U.body||O,R=U.foot||O}else console.error("Cannot parse html in non browser environment")}var W=T.columns||k(O,F,R);return{columns:W,head:O,body:F,foot:R}}function k(I,T,E){var O=I[0]||T[0]||E[0]||[],F=[];return Object.keys(O).filter(function(R){return R!=="_element"}).forEach(function(R){var $=1,U;Array.isArray(O)?U=O[parseInt(R)]:U=O[R],typeof U=="object"&&!Array.isArray(U)&&($=(U==null?void 0:U.colSpan)||1);for(var W=0;W<$;W++){var te=void 0;Array.isArray(O)?te=F.length:te=R+(W>0?"_".concat(W):"");var H={dataKey:te};F.push(H)}}),F}},792:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(h,d,p,m){for(var g=function(w){w&&typeof w!="object"&&console.error("The options parameter should be of type object, is: "+typeof w),typeof w.extendWidth<"u"&&(w.tableWidth=w.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof w.margins<"u"&&(typeof w.margin>"u"&&(w.margin=w.margins),console.error("Use of deprecated option: margins, use margin instead.")),w.startY&&typeof w.startY!="number"&&(console.error("Invalid value for startY option",w.startY),delete w.startY),!w.didDrawPage&&(w.afterPageContent||w.beforePageContent||w.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),w.didDrawPage=function(R){h.applyStyles(h.userStyles),w.beforePageContent&&w.beforePageContent(R),h.applyStyles(h.userStyles),w.afterPageContent&&w.afterPageContent(R),h.applyStyles(h.userStyles),w.afterPageAdd&&R.pageNumber>1&&R.afterPageAdd(R),h.applyStyles(h.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(R){w[R]&&console.error('The "'.concat(R,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(R){var $=R[0],U=R[1];w[U]&&(console.error("Use of deprecated option ".concat(U,". Use ").concat($," instead")),w[$]=w[U])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(R){var $=typeof R=="string"?R:R[0],U=typeof R=="string"?R:R[1];typeof w[$]<"u"&&(typeof w.styles[U]>"u"&&(w.styles[U]=w[$]),console.error("Use of deprecated option: "+$+", use the style "+U+" instead."))});for(var S=0,k=["styles","bodyStyles","headStyles","footStyles"];S<k.length;S++){var I=k[S];u(w[I]||{})}for(var T=w.columnStyles||{},E=0,O=Object.keys(T);E<O.length;E++){var F=O[E];u(T[F]||{})}},y=0,v=[d,p,m];y<v.length;y++){var b=v[y];g(b)}}l.default=c;function u(h){h.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),h.minCellHeight||(h.minCellHeight=h.rowHeight)):h.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),h.cellWidth||(h.cellWidth=h.columnWidth))}},260:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var u=c(796),h=c(172),d=c(420),p=function(){function v(b,w){this.pageNumber=1,this.pageCount=1,this.id=b.id,this.settings=b.settings,this.styles=b.styles,this.hooks=b.hooks,this.columns=w.columns,this.head=w.head,this.body=w.body,this.foot=w.foot}return v.prototype.getHeadHeight=function(b){return this.head.reduce(function(w,S){return w+S.getMaxCellHeight(b)},0)},v.prototype.getFootHeight=function(b){return this.foot.reduce(function(w,S){return w+S.getMaxCellHeight(b)},0)},v.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},v.prototype.callCellHooks=function(b,w,S,k,I,T){for(var E=0,O=w;E<O.length;E++){var F=O[E],R=new h.CellHookData(b,this,S,k,I,T),$=F(R)===!1;if(S.text=Array.isArray(S.text)?S.text:[S.text],$)return!1}return!0},v.prototype.callEndPageHooks=function(b,w){b.applyStyles(b.userStyles);for(var S=0,k=this.hooks.didDrawPage;S<k.length;S++){var I=k[S];I(new h.HookData(b,this,w))}},v.prototype.callWillDrawPageHooks=function(b,w){for(var S=0,k=this.hooks.willDrawPage;S<k.length;S++){var I=k[S];I(new h.HookData(b,this,w))}},v.prototype.getWidth=function(b){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var w=this.columns.reduce(function(k,I){return k+I.wrappedWidth},0);return w}else{var S=this.settings.margin;return b-S.left-S.right}},v}();l.Table=p;var m=function(){function v(b,w,S,k,I){I===void 0&&(I=!1),this.height=0,this.raw=b,b instanceof u.HtmlRowInput&&(this.raw=b._element,this.element=b._element),this.index=w,this.section=S,this.cells=k,this.spansMultiplePages=I}return v.prototype.getMaxCellHeight=function(b){var w=this;return b.reduce(function(S,k){var I;return Math.max(S,((I=w.cells[k.index])===null||I===void 0?void 0:I.height)||0)},0)},v.prototype.hasRowSpan=function(b){var w=this;return b.filter(function(S){var k=w.cells[S.index];return k?k.rowSpan>1:!1}).length>0},v.prototype.canEntireRowFit=function(b,w){return this.getMaxCellHeight(w)<=b},v.prototype.getMinimumRowHeight=function(b,w){var S=this;return b.reduce(function(k,I){var T=S.cells[I.index];if(!T)return 0;var E=w.getLineHeight(T.styles.fontSize),O=T.padding("vertical"),F=O+E;return F>k?F:k},0)},v}();l.Row=m;var g=function(){function v(b,w,S){var k,I;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=w,this.section=S,this.raw=b;var T=b;b!=null&&typeof b=="object"&&!Array.isArray(b)?(this.rowSpan=b.rowSpan||1,this.colSpan=b.colSpan||1,T=(I=(k=b.content)!==null&&k!==void 0?k:b.title)!==null&&I!==void 0?I:b,b._element&&(this.raw=b._element)):(this.rowSpan=1,this.colSpan=1);var E=T!=null?""+T:"",O=/\r\n|\r|\n/g;this.text=E.split(O)}return v.prototype.getTextPos=function(){var b;if(this.styles.valign==="top")b=this.y+this.padding("top");else if(this.styles.valign==="bottom")b=this.y+this.height-this.padding("bottom");else{var w=this.height-this.padding("vertical");b=this.y+w/2+this.padding("top")}var S;if(this.styles.halign==="right")S=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var k=this.width-this.padding("horizontal");S=this.x+k/2+this.padding("left")}else S=this.x+this.padding("left");return{x:S,y:b}},v.prototype.getContentHeight=function(b,w){w===void 0&&(w=1.15);var S=Array.isArray(this.text)?this.text.length:1,k=this.styles.fontSize/b*w,I=S*k+this.padding("vertical");return Math.max(I,this.styles.minCellHeight)},v.prototype.padding=function(b){var w=(0,d.parseSpacing)(this.styles.cellPadding,0);return b==="vertical"?w.top+w.bottom:b==="horizontal"?w.left+w.right:w[b]},v}();l.Cell=g;var y=function(){function v(b,w,S){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=b,this.raw=w,this.index=S}return v.prototype.getMaxCustomCellWidth=function(b){for(var w=0,S=0,k=b.allRows();S<k.length;S++){var I=k[S],T=I.cells[this.index];T&&typeof T.styles.cellWidth=="number"&&(w=Math.max(w,T.styles.cellWidth))}return w},v}();l.Column=y},356:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(u,h,d,p,m){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var g=Object(u),y=1;y<arguments.length;y++){var v=arguments[y];if(v!=null)for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(g[b]=v[b])}return g}l.assign=c},972:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var u=c(744),h=c(260),d=c(324),p=c(796),m=c(356);function g(I,T){var E=new u.DocHandler(I),O=y(T,E.scaleFactor()),F=new h.Table(T,O);return(0,d.calculateWidths)(E,F),E.applyStyles(E.userStyles),F}l.createTable=g;function y(I,T){var E=I.content,O=S(E.columns);if(E.head.length===0){var F=b(O,"head");F&&E.head.push(F)}if(E.foot.length===0){var F=b(O,"foot");F&&E.foot.push(F)}var R=I.settings.theme,$=I.styles;return{columns:O,head:v("head",E.head,O,$,R,T),body:v("body",E.body,O,$,R,T),foot:v("foot",E.foot,O,$,R,T)}}function v(I,T,E,O,F,R){var $={},U=T.map(function(W,te){for(var H=0,G={},B=0,Y=0,ne=0,le=E;ne<le.length;ne++){var M=le[ne];if($[M.index]==null||$[M.index].left===0)if(Y===0){var j=void 0;Array.isArray(W)?j=W[M.index-B-H]:j=W[M.dataKey];var q={};typeof j=="object"&&!Array.isArray(j)&&(q=(j==null?void 0:j.styles)||{});var X=k(I,M,te,F,O,R,q),Z=new h.Cell(j,X,I);G[M.dataKey]=Z,G[M.index]=Z,Y=Z.colSpan-1,$[M.index]={left:Z.rowSpan-1,times:Y}}else Y--,B++;else $[M.index].left--,Y=$[M.index].times,H++}return new h.Row(W,te,I,G)});return U}function b(I,T){var E={};return I.forEach(function(O){if(O.raw!=null){var F=w(T,O.raw);F!=null&&(E[O.dataKey]=F)}}),Object.keys(E).length>0?E:null}function w(I,T){if(I==="head"){if(typeof T=="object")return T.header||T.title||null;if(typeof T=="string"||typeof T=="number")return T}else if(I==="foot"&&typeof T=="object")return T.footer;return null}function S(I){return I.map(function(T,E){var O,F,R;return typeof T=="object"?R=(F=(O=T.dataKey)!==null&&O!==void 0?O:T.key)!==null&&F!==void 0?F:E:R=E,new h.Column(R,T,E)})}function k(I,T,E,O,F,R,$){var U=(0,p.getTheme)(O),W;I==="head"?W=F.headStyles:I==="body"?W=F.bodyStyles:I==="foot"&&(W=F.footStyles);var te=(0,m.assign)({},U.table,U[I],F.styles,W),H=F.columnStyles[T.dataKey]||F.columnStyles[T.index]||{},G=I==="body"?H:{},B=I==="body"&&E%2===0?(0,m.assign)({},U.alternateRow,F.alternateRowStyles):{},Y=(0,p.defaultStyles)(R),ne=(0,m.assign)({},Y,te,B,G);return(0,m.assign)(ne,$)}},664:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var u=c(420),h=c(260),d=c(744),p=c(356),m=c(136),g=c(224);function y(H,G){var B=G.settings,Y=B.startY,ne=B.margin,le={x:ne.left,y:Y},M=G.getHeadHeight(G.columns)+G.getFootHeight(G.columns),j=Y+ne.bottom+M;if(B.pageBreak==="avoid"){var q=G.body,X=q.reduce(function(fe,me){return fe+me.height},0);j+=X}var Z=new d.DocHandler(H);(B.pageBreak==="always"||B.startY!=null&&j>Z.pageSize().height)&&(te(Z),le.y=ne.top),G.callWillDrawPageHooks(Z,le);var ue=(0,p.assign)({},le);G.startPageNumber=Z.pageNumber(),B.horizontalPageBreak?v(Z,G,ue,le):(Z.applyStyles(Z.userStyles),(B.showHead==="firstPage"||B.showHead==="everyPage")&&G.head.forEach(function(fe){return F(Z,G,fe,le,G.columns)}),Z.applyStyles(Z.userStyles),G.body.forEach(function(fe,me){var Pe=me===G.body.length-1;O(Z,G,fe,Pe,ue,le,G.columns)}),Z.applyStyles(Z.userStyles),(B.showFoot==="lastPage"||B.showFoot==="everyPage")&&G.foot.forEach(function(fe){return F(Z,G,fe,le,G.columns)})),(0,u.addTableBorder)(Z,G,ue,le),G.callEndPageHooks(Z,le),G.finalY=le.y,H.lastAutoTable=G,H.previousAutoTable=G,H.autoTable&&(H.autoTable.previous=G),Z.applyStyles(Z.userStyles)}l.drawTable=y;function v(H,G,B,Y){var ne=(0,g.calculateAllColumnsCanFitInPage)(H,G),le=G.settings;if(le.horizontalPageBreakBehaviour==="afterAllRows")ne.forEach(function(X,Z){H.applyStyles(H.userStyles),Z>0?W(H,G,B,Y,X.columns,!0):b(H,G,Y,X.columns),w(H,G,B,Y,X.columns),k(H,G,Y,X.columns)});else for(var M=-1,j=ne[0],q=function(){var X=M;if(j){H.applyStyles(H.userStyles);var Z=j.columns;M>=0?W(H,G,B,Y,Z,!0):b(H,G,Y,Z),X=S(H,G,M+1,Y,Z),k(H,G,Y,Z)}var ue=X-M;ne.slice(1).forEach(function(fe){H.applyStyles(H.userStyles),W(H,G,B,Y,fe.columns,!0),S(H,G,M+1,Y,fe.columns,ue),k(H,G,Y,fe.columns)}),M=X};M<G.body.length-1;)q()}function b(H,G,B,Y){var ne=G.settings;H.applyStyles(H.userStyles),(ne.showHead==="firstPage"||ne.showHead==="everyPage")&&G.head.forEach(function(le){return F(H,G,le,B,Y)})}function w(H,G,B,Y,ne){H.applyStyles(H.userStyles),G.body.forEach(function(le,M){var j=M===G.body.length-1;O(H,G,le,j,B,Y,ne)})}function S(H,G,B,Y,ne,le){H.applyStyles(H.userStyles),le=le??G.body.length;var M=Math.min(B+le,G.body.length),j=-1;return G.body.slice(B,M).forEach(function(q,X){var Z=B+X===G.body.length-1,ue=U(H,G,Z,Y);q.canEntireRowFit(ue,ne)&&(F(H,G,q,Y,ne),j=B+X)}),j}function k(H,G,B,Y){var ne=G.settings;H.applyStyles(H.userStyles),(ne.showFoot==="lastPage"||ne.showFoot==="everyPage")&&G.foot.forEach(function(le){return F(H,G,le,B,Y)})}function I(H,G,B){var Y=B.getLineHeight(H.styles.fontSize),ne=H.padding("vertical"),le=Math.floor((G-ne)/Y);return Math.max(0,le)}function T(H,G,B,Y){var ne={};H.spansMultiplePages=!0,H.height=0;for(var le=0,M=0,j=B.columns;M<j.length;M++){var q=j[M],X=H.cells[q.index];if(X){Array.isArray(X.text)||(X.text=[X.text]);var Z=new h.Cell(X.raw,X.styles,X.section);Z=(0,p.assign)(Z,X),Z.text=[];var ue=I(X,G,Y);X.text.length>ue&&(Z.text=X.text.splice(ue,X.text.length));var fe=Y.scaleFactor(),me=Y.getLineHeightFactor();X.contentHeight=X.getContentHeight(fe,me),X.contentHeight>=G&&(X.contentHeight=G,Z.styles.minCellHeight-=G),X.contentHeight>H.height&&(H.height=X.contentHeight),Z.contentHeight=Z.getContentHeight(fe,me),Z.contentHeight>le&&(le=Z.contentHeight),ne[q.index]=Z}}var Pe=new h.Row(H.raw,-1,H.section,ne,!0);Pe.height=le;for(var Ne=0,Fe=B.columns;Ne<Fe.length;Ne++){var q=Fe[Ne],Z=Pe.cells[q.index];Z&&(Z.height=Pe.height);var X=H.cells[q.index];X&&(X.height=H.height)}return Pe}function E(H,G,B,Y){var ne=H.pageSize().height,le=Y.settings.margin,M=le.top+le.bottom,j=ne-M;G.section==="body"&&(j-=Y.getHeadHeight(Y.columns)+Y.getFootHeight(Y.columns));var q=G.getMinimumRowHeight(Y.columns,H),X=q<B;if(q>j)return console.error("Will not be able to print row ".concat(G.index," correctly since it's minimum height is larger than page height")),!0;if(!X)return!1;var Z=G.hasRowSpan(Y.columns),ue=G.getMaxCellHeight(Y.columns)>j;return ue?(Z&&console.error("The content of row ".concat(G.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(Z||Y.settings.rowPageBreak==="avoid")}function O(H,G,B,Y,ne,le,M){var j=U(H,G,Y,le);if(B.canEntireRowFit(j,M))F(H,G,B,le,M);else if(E(H,B,j,G)){var q=T(B,j,G,H);F(H,G,B,le,M),W(H,G,ne,le,M),O(H,G,q,Y,ne,le,M)}else W(H,G,ne,le,M),O(H,G,B,Y,ne,le,M)}function F(H,G,B,Y,ne){Y.x=G.settings.margin.left;for(var le=0,M=ne;le<M.length;le++){var j=M[le],q=B.cells[j.index];if(!q){Y.x+=j.width;continue}H.applyStyles(q.styles),q.x=Y.x,q.y=Y.y;var X=G.callCellHooks(H,G.hooks.willDrawCell,q,B,j,Y);if(X===!1){Y.x+=j.width;continue}R(H,q,Y);var Z=q.getTextPos();(0,m.default)(q.text,Z.x,Z.y,{halign:q.styles.halign,valign:q.styles.valign,maxWidth:Math.ceil(q.width-q.padding("left")-q.padding("right"))},H.getDocument()),G.callCellHooks(H,G.hooks.didDrawCell,q,B,j,Y),Y.x+=j.width}Y.y+=B.height}function R(H,G,B){var Y=G.styles;if(H.getDocument().setFillColor(H.getDocument().getFillColor()),typeof Y.lineWidth=="number"){var ne=(0,u.getFillStyle)(Y.lineWidth,Y.fillColor);ne&&H.rect(G.x,B.y,G.width,G.height,ne)}else typeof Y.lineWidth=="object"&&(Y.fillColor&&H.rect(G.x,B.y,G.width,G.height,"F"),$(H,G,B,Y.lineWidth))}function $(H,G,B,Y){var ne,le,M,j;Y.top&&(ne=B.x,le=B.y,M=B.x+G.width,j=B.y,Y.right&&(M+=.5*Y.right),Y.left&&(ne-=.5*Y.left),q(Y.top,ne,le,M,j)),Y.bottom&&(ne=B.x,le=B.y+G.height,M=B.x+G.width,j=B.y+G.height,Y.right&&(M+=.5*Y.right),Y.left&&(ne-=.5*Y.left),q(Y.bottom,ne,le,M,j)),Y.left&&(ne=B.x,le=B.y,M=B.x,j=B.y+G.height,Y.top&&(le-=.5*Y.top),Y.bottom&&(j+=.5*Y.bottom),q(Y.left,ne,le,M,j)),Y.right&&(ne=B.x+G.width,le=B.y,M=B.x+G.width,j=B.y+G.height,Y.top&&(le-=.5*Y.top),Y.bottom&&(j+=.5*Y.bottom),q(Y.right,ne,le,M,j));function q(X,Z,ue,fe,me){H.getDocument().setLineWidth(X),H.getDocument().line(Z,ue,fe,me,"S")}}function U(H,G,B,Y){var ne=G.settings.margin.bottom,le=G.settings.showFoot;return(le==="everyPage"||le==="lastPage"&&B)&&(ne+=G.getFootHeight(G.columns)),H.pageSize().height-Y.y-ne}function W(H,G,B,Y,ne,le){ne===void 0&&(ne=[]),le===void 0&&(le=!1),H.applyStyles(H.userStyles),G.settings.showFoot==="everyPage"&&!le&&G.foot.forEach(function(j){return F(H,G,j,Y,ne)}),G.callEndPageHooks(H,Y);var M=G.settings.margin;(0,u.addTableBorder)(H,G,B,Y),te(H),G.pageNumber++,G.pageCount++,Y.x=M.left,Y.y=M.top,B.y=M.top,G.callWillDrawPageHooks(H,Y),G.settings.showHead==="everyPage"&&(G.head.forEach(function(j){return F(H,G,j,Y,ne)}),H.applyStyles(H.userStyles))}l.addPage=W;function te(H){var G=H.pageNumber();H.setPage(G+1);var B=H.pageNumber();return B===G?(H.addPage(),!0):!1}},224:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var u=c(420);function h(p,m,g){var y;g===void 0&&(g={});var v=(0,u.getPageAvailableWidth)(p,m),b=new Map,w=[],S=[],k=[];m.settings.horizontalPageBreakRepeat,Array.isArray(m.settings.horizontalPageBreakRepeat)?k=m.settings.horizontalPageBreakRepeat:(typeof m.settings.horizontalPageBreakRepeat=="string"||typeof m.settings.horizontalPageBreakRepeat=="number")&&(k=[m.settings.horizontalPageBreakRepeat]),k.forEach(function(O){var F=m.columns.find(function(R){return R.dataKey===O||R.index===O});F&&!b.has(F.index)&&(b.set(F.index,!0),w.push(F.index),S.push(m.columns[F.index]),v-=F.wrappedWidth)});for(var I=!0,T=(y=g==null?void 0:g.start)!==null&&y!==void 0?y:0;T<m.columns.length;){if(b.has(T)){T++;continue}var E=m.columns[T].wrappedWidth;if(I||v>=E)I=!1,w.push(T),S.push(m.columns[T]),v-=E;else break;T++}return{colIndexes:w,columns:S,lastIndex:T-1}}function d(p,m){for(var g=[],y=0;y<m.columns.length;y++){var v=h(p,m,{start:y});v.columns.length&&(g.push(v),y=v.lastIndex)}return g}l.calculateAllColumnsCanFitInPage=d},324:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var u=c(420);function h(w,S){d(w,S);var k=[],I=0;S.columns.forEach(function(E){var O=E.getMaxCustomCellWidth(S);O?E.width=O:(E.width=E.wrappedWidth,k.push(E)),I+=E.width});var T=S.getWidth(w.pageSize().width)-I;T&&(T=p(k,T,function(E){return Math.max(E.minReadableWidth,E.minWidth)})),T&&(T=p(k,T,function(E){return E.minWidth})),T=Math.abs(T),!S.settings.horizontalPageBreak&&T>.1/w.scaleFactor()&&(T=T<1?T:Math.round(T),console.warn("Of the table content, ".concat(T," units width could not fit page"))),g(S),y(S,w),m(S)}l.calculateWidths=h;function d(w,S){var k=w.scaleFactor(),I=S.settings.horizontalPageBreak,T=(0,u.getPageAvailableWidth)(w,S);S.allRows().forEach(function(E){for(var O=0,F=S.columns;O<F.length;O++){var R=F[O],$=E.cells[R.index];if($){var U=S.hooks.didParseCell;S.callCellHooks(w,U,$,E,R,null);var W=$.padding("horizontal");$.contentWidth=(0,u.getStringWidth)($.text,$.styles,w)+W;var te=(0,u.getStringWidth)($.text.join(" ").split(/[^\S\u00A0]+/),$.styles,w);if($.minReadableWidth=te+$.padding("horizontal"),typeof $.styles.cellWidth=="number")$.minWidth=$.styles.cellWidth,$.wrappedWidth=$.styles.cellWidth;else if($.styles.cellWidth==="wrap"||I===!0)$.contentWidth>T?($.minWidth=T,$.wrappedWidth=T):($.minWidth=$.contentWidth,$.wrappedWidth=$.contentWidth);else{var H=10/k;$.minWidth=$.styles.minCellWidth||H,$.wrappedWidth=$.contentWidth,$.minWidth>$.wrappedWidth&&($.wrappedWidth=$.minWidth)}}}}),S.allRows().forEach(function(E){for(var O=0,F=S.columns;O<F.length;O++){var R=F[O],$=E.cells[R.index];if($&&$.colSpan===1)R.wrappedWidth=Math.max(R.wrappedWidth,$.wrappedWidth),R.minWidth=Math.max(R.minWidth,$.minWidth),R.minReadableWidth=Math.max(R.minReadableWidth,$.minReadableWidth);else{var U=S.styles.columnStyles[R.dataKey]||S.styles.columnStyles[R.index]||{},W=U.cellWidth||U.minCellWidth;W&&typeof W=="number"&&(R.minWidth=W,R.wrappedWidth=W)}$&&($.colSpan>1&&!R.minWidth&&(R.minWidth=$.minWidth),$.colSpan>1&&!R.wrappedWidth&&(R.wrappedWidth=$.minWidth))}})}function p(w,S,k){for(var I=S,T=w.reduce(function(H,G){return H+G.wrappedWidth},0),E=0;E<w.length;E++){var O=w[E],F=O.wrappedWidth/T,R=I*F,$=O.width+R,U=k(O),W=$<U?U:$;S-=W-O.width,O.width=W}if(S=Math.round(S*1e10)/1e10,S){var te=w.filter(function(H){return S<0?H.width>k(H):!0});te.length&&(S=p(te,S,k))}return S}l.resizeColumns=p;function m(w){for(var S={},k=1,I=w.allRows(),T=0;T<I.length;T++)for(var E=I[T],O=0,F=w.columns;O<F.length;O++){var R=F[O],$=S[R.index];if(k>1)k--,delete E.cells[R.index];else if($)$.cell.height+=E.height,k=$.cell.colSpan,delete E.cells[R.index],$.left--,$.left<=1&&delete S[R.index];else{var U=E.cells[R.index];if(!U)continue;if(U.height=E.height,U.rowSpan>1){var W=I.length-T,te=U.rowSpan>W?W:U.rowSpan;S[R.index]={cell:U,left:te,row:E}}}}}function g(w){for(var S=w.allRows(),k=0;k<S.length;k++)for(var I=S[k],T=null,E=0,O=0,F=0;F<w.columns.length;F++){var R=w.columns[F];if(O-=1,O>1&&w.columns[F+1])E+=R.width,delete I.cells[R.index];else if(T){var $=T;delete I.cells[R.index],T=null,$.width=R.width+E}else{var $=I.cells[R.index];if(!$)continue;if(O=$.colSpan,E=0,$.colSpan>1){T=$,E+=R.width;continue}$.width=R.width+E}}}function y(w,S){for(var k={count:0,height:0},I=0,T=w.allRows();I<T.length;I++){for(var E=T[I],O=0,F=w.columns;O<F.length;O++){var R=F[O],$=E.cells[R.index];if($){S.applyStyles($.styles,!0);var U=$.width-$.padding("horizontal");if($.styles.overflow==="linebreak")$.text=S.splitTextToSize($.text,U+1/S.scaleFactor(),{fontSize:$.styles.fontSize});else if($.styles.overflow==="ellipsize")$.text=v($.text,U,$.styles,S,"...");else if($.styles.overflow==="hidden")$.text=v($.text,U,$.styles,S,"");else if(typeof $.styles.overflow=="function"){var W=$.styles.overflow($.text,U);typeof W=="string"?$.text=[W]:$.text=W}$.contentHeight=$.getContentHeight(S.scaleFactor(),S.getLineHeightFactor());var te=$.contentHeight/$.rowSpan;$.rowSpan>1&&k.count*k.height<te*$.rowSpan?k={height:te,count:$.rowSpan}:k&&k.count>0&&k.height>te&&(te=k.height),te>E.height&&(E.height=te)}}k.count--}}function v(w,S,k,I,T){return w.map(function(E){return b(E,S,k,I,T)})}l.ellipsize=v;function b(w,S,k,I,T){var E=1e4*I.scaleFactor();if(S=Math.ceil(S*E)/E,S>=(0,u.getStringWidth)(w,k,I))return w;for(;S<(0,u.getStringWidth)(w+T,k,I)&&!(w.length<=1);)w=w.substring(0,w.length-1);return w.trim()+T}},964:function(a){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}a.exports=n}},s={};function r(a){var l=s[a];if(l!==void 0)return l.exports;var c=s[a]={exports:{}};return i[a].call(c.exports,c,c.exports,r),c.exports}var o={};return function(){var a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.Cell=a.Column=a.Row=a.Table=a.CellHookData=a.__drawTable=a.__createTable=a.applyPlugin=void 0;var l=r(340),c=r(776),u=r(664),h=r(972),d=r(260);Object.defineProperty(a,"Table",{enumerable:!0,get:function(){return d.Table}});var p=r(172);Object.defineProperty(a,"CellHookData",{enumerable:!0,get:function(){return p.CellHookData}});var m=r(260);Object.defineProperty(a,"Cell",{enumerable:!0,get:function(){return m.Cell}}),Object.defineProperty(a,"Column",{enumerable:!0,get:function(){return m.Column}}),Object.defineProperty(a,"Row",{enumerable:!0,get:function(){return m.Row}});function g(S){(0,l.default)(S)}a.applyPlugin=g;function y(S,k){var I=(0,c.parseInput)(S,k),T=(0,h.createTable)(S,I);(0,u.drawTable)(S,T)}function v(S,k){var I=(0,c.parseInput)(S,k);return(0,h.createTable)(S,I)}a.__createTable=v;function b(S,k){(0,u.drawTable)(S,k)}a.__drawTable=b;try{var w=r(964);w.jsPDF&&(w=w.jsPDF),g(w)}catch{}a.default=y}(),o}()})})(Kze);const Yze=()=>{const[t,e]=K.useState([]),[n,i]=K.useState([]),[s,r]=K.useState([]),[o,a]=K.useState([]),[l,c]=K.useState({}),[u,h]=K.useState(""),[d,p]=K.useState([]),[m,g]=K.useState([]),[y,v]=K.useState([]),[b,w]=K.useState([]),[S,k]=K.useState(null),[I,T]=K.useState({svm:0,tree:0,knn:0}),[E,O]=K.useState(!1);ah.register(t1,NT),K.useEffect(()=>{const M=JSON.parse(localStorage.getItem("userData"));if(M&&(h(M.username),M.devices)){const j=new Set,q={};M.devices.forEach(Z=>{Z.dates.forEach(ue=>{j.add(ue.location),q[ue.location]||(q[ue.location]=new Set),q[ue.location].add(ue.date)})}),e(Array.from(j).map(Z=>({label:Z,value:Z})));const X={};Object.keys(q).forEach(Z=>{X[Z]=Array.from(q[Z])}),c(X)}},[]),K.useEffect(()=>{b.length>0&&te()},[b]),K.useEffect(()=>{E===!0&&H()},[E]);const F=M=>{if(r(M),M.length>0){const j=M.map(X=>X.value),q=new Set;j.forEach(X=>{var Z;(Z=l[X])==null||Z.forEach(ue=>q.add(ue))}),i(Array.from(q).map(X=>({label:X,value:X})))}else i([]),a([])},R=async()=>{if(s.length===0)jt.warning("Please select at least one location.");else if(o.length===0)jt.warning("Please select at least one date.");else{const M=o.map(X=>X.value.replace(/-/g,"")),j=TR(),q=Ia(j,"devices");try{const X=await mu(q);if(X.exists()){const Z=X.val(),ue=[];Object.keys(Z).forEach(fe=>{const me=Z[fe],Pe={deviceId:fe,dates:[]};Object.keys(me).forEach(Ne=>{Ne===u&&M.forEach(Fe=>{if(me[Ne][Fe]){const qe={date:`${Fe.slice(0,4)}.${Fe.slice(4,6)}.${Fe.slice(6,8)}`,locations:[]};Object.keys(me[Ne][Fe]).forEach(()=>{const Qe=me[Ne][Fe];if(s.some(xe=>xe.value===Qe.location.coordinates)){const xe={ph:[],tds:[],turbidity:[]};Qe.location.sensor_data&&(Qe.location.sensor_data.ph&&Object.entries(Qe.location.sensor_data.ph).forEach(([he,ut])=>{xe.ph.push({time:he,value:ut})}),Qe.location.sensor_data.tds&&Object.entries(Qe.location.sensor_data.tds).forEach(([he,ut])=>{xe.tds.push({time:he,value:ut})}),Qe.location.sensor_data.turbidity&&Object.entries(Qe.location.sensor_data.turbidity).forEach(([he,ut])=>{xe.turbidity.push({time:he,value:ut})})),qe.locations.push({coordinates:Qe.location.coordinates,sensorData:xe})}}),qe.locations.length>0&&Pe.dates.push(qe)}})}),Pe.dates.length>0&&ue.push(Pe)}),w(ue),W(ue)}else console.log("No data available")}catch(X){console.error("Error fetching data:",X),jt.error("Error fetching data.")}}},$=()=>{if(b.length===0){jt.warning("No data to export");return}else U(b)},U=M=>{const j=[];j.push("Device ID,Date,Coordinates,Coordinates,PH Time,PH Value,TDS Time,TDS Value,Turbidity Time,Turbidity Value"),M.forEach(fe=>{fe.dates.forEach(me=>{me.locations.forEach(Pe=>{const{coordinates:Ne,sensorData:Fe}=Pe,qe=Math.max(Fe.ph.length,Fe.tds.length,Fe.turbidity.length);for(let Qe=0;Qe<qe;Qe++){const xe=Fe.ph[Qe]||{time:"",value:""},he=Fe.tds[Qe]||{time:"",value:""},ut=Fe.turbidity[Qe]||{time:"",value:""};j.push([fe.deviceId,me.date,Ne,xe.time,xe.value,he.time,he.value,ut.time,ut.value].join(","))}})})});const q=j.join(`
`),X=new Blob([q],{type:"text/csv"}),Z=URL.createObjectURL(X),ue=document.createElement("a");ue.href=Z,ue.download="sensor_data.csv",document.body.appendChild(ue),ue.click(),document.body.removeChild(ue)},W=M=>{const j=[];M==null||M.forEach(q=>{var X;(X=q.dates)==null||X.forEach(Z=>{var ue;(ue=Z.locations)==null||ue.forEach(fe=>{var me;(me=fe.sensorData.ph)==null||me.forEach((Pe,Ne)=>{var Fe,qe;j.push({deviceId:q.deviceId,date:Z.date,coordinates:fe.coordinates,ph:Pe.value,tds:((Fe=fe.sensorData.tds[Ne])==null?void 0:Fe.value)||0,turbidity:((qe=fe.sensorData.turbidity[Ne])==null?void 0:qe.value)||0})})})})}),p(j)},te=async()=>{if(d.length===0){jt.warning("No data to process");return}const M=d.map(Ne=>[Ne.ph,Ne.tds,Ne.turbidity]),j=d.map(Ne=>Ne.ph>7.5||Ne.turbidity>7?2:Ne.ph>=6.5&&Ne.turbidity>=3.5?1:0),q=L3(qo(j,"int32"),3),X=gw(M),Z={SVM:{predictions:[],accuracy:0},DecisionTree:{predictions:[],accuracy:0},KNN:{predictions:[],accuracy:0}},ue=d6();ue.add(y6({inputShape:[M[0].length],units:3,activation:"softmax"})),ue.compile({optimizer:fd.adam(),loss:"categoricalCrossentropy",metrics:["accuracy"]});const fe=await ue.fit(X,q,{epochs:50,batchSize:32});Z.SVM.predictions=await ue.predict(X).argMax(-1).array(),Z.SVM.accuracy=fe.history.acc[fe.epoch.length-1];const me=d6();me.add(y6({inputShape:[M[0].length],units:3,activation:"softmax"})),me.compile({optimizer:fd.adam(),loss:"categoricalCrossentropy",metrics:["accuracy"]});const Pe=await me.fit(X,q,{epochs:50,batchSize:32});Z.DecisionTree.predictions=await me.predict(X).argMax(-1).array(),Z.DecisionTree.accuracy=Pe.history.acc[Pe.epoch.length-1],g(Z.SVM.predictions),v(Z.DecisionTree.predictions),T({svm:Z.SVM.accuracy,tree:Z.DecisionTree.accuracy}),jt.success("Data Loaded!")},H=()=>{if(O(!0),G(),m.length===0||y.length===0){jt.warning("No data to visualize");return}[{id:"svmChart",title:"SVM Predictions",predictions:m,accuracy:I.svm},{id:"treeChart",title:"Decision Tree Predictions",predictions:y,accuracy:I.tree}].forEach(({id:j,title:q,predictions:X,accuracy:Z})=>{const ue={Safe:0,Moderate:0,Unsafe:0};X.forEach(fe=>{fe===0?ue.Safe++:fe===1?ue.Moderate++:fe===2&&ue.Unsafe++}),new ah(document.getElementById(j),{type:"bar",data:{labels:Object.keys(ue),datasets:[{label:q,data:Object.values(ue),backgroundColor:["#4CAF50","#FFC107","#F44336"]}]}}),document.getElementById(`${j}Accuracy`).textContent=`Accuracy: ${(Z*100).toFixed(2)}%`}),B(),ne()},G=()=>{["ph","tds","turbidity"].forEach(M=>{new ah(document.getElementById(`${M}-histogram`),{type:"bar",data:{labels:d.map((j,q)=>q+1),datasets:[{label:M,data:d.map(j=>j[M])}]}})})},B=()=>{if(!d||d.length===0){jt.warning("No data available for heat map");return}["ph","tds","turbidity"].forEach((M,j)=>{const q=d.map((Z,ue)=>({x:ue+1,y:j+1,v:Z[M]})),X=document.getElementById(`${M}-heatmap`);X?new ah(X,{type:"matrix",data:{datasets:[{label:`${M} Heat Map`,data:q,backgroundColor(Z){const ue=Z.raw.v;return ue>7?"#F44336":ue>3.5?"#FFC107":"#4CAF50"},width(Z){return Z.chart.chartArea?Z.chart.chartArea.width/d.length:0},height(Z){return Z.chart.chartArea?Z.chart.chartArea.height/3:0}}]},options:{responsive:!0,scales:{x:{type:"linear",title:{display:!0,text:"Sample Index"},min:1,max:d.length},y:{type:"linear",ticks:{callback(Z){return["ph","tds","turbidity"][Z-1]}},title:{display:!0,text:"Sensor Type"}}},plugins:{tooltip:{callbacks:{label(Z){return`Value: ${Z.raw.v}`}}}}}}):console.error(`Canvas with ID ${M}-heatmap not found.`)})},Y=()=>{if(d.length===0&&m.length===0&&y.length===0&&b.length===0){jt.warning("No data to reset");return}else jt.success("Data reset"),setTimeout(()=>{window.location.reload()},3e3)},ne=()=>{const j=["ph","tds","turbidity"].map(q=>{const X=d.map(xe=>xe[q]).filter(Boolean);if(X.length===0)return{key:q,stats:null};const Z=[...X].sort((xe,he)=>xe-he),fe=X.reduce((xe,he)=>xe+he,0)/X.length,me=Math.sqrt(X.reduce((xe,he)=>xe+(he-fe)**2,0)/X.length)||0,Pe=Math.min(...X),Ne=Math.max(...X),Fe=Z.length%2===0?(Z[Z.length/2-1]+Z[Z.length/2])/2:Z[Math.floor(Z.length/2)],qe=Z[Math.floor(Z.length*.25)],Qe=Z[Math.floor(Z.length*.75)];return{key:q,stats:{count:X.length,mean:fe.toFixed(2),std:me.toFixed(2),min:Pe,q25:qe,median:Fe,q75:Qe,max:Ne}}});k(j)},le=M=>{const j=new Xt;j.text(`Sensor Data Summary for ${M}`,10,10);const q=[{id:"svmChart",title:"SVM"},{id:"treeChart",title:"Decision  Tree"},{id:"ph-histogram",title:"pH Histogram"},{id:"tds-histogram",title:"TDS Histogram"},{id:"turbidity-histogram",title:"Turbidity Histogram"},{id:"ph-heatmap",title:"pH Heatmap"},{id:"tds-heatmap",title:"TDS Heatmap"},{id:"turbidity-heatmap",title:"Turbidity Heatmap"}];let X=20;const Z=20,ue=j.internal.pageSize.height;q.forEach((fe,me)=>{const Pe=document.getElementById(fe.id);if(Pe){const Ne=Pe.toDataURL("image/png");j.text(fe.title,10,X),X+=10;const Fe=10,qe=120,Qe=40;j.addImage(Ne,"PNG",Fe,X,qe,Qe),X+=Qe+Z,X+Qe>ue&&(j.addPage(),X=10)}}),j.autoTable({head:[["Sensor","Count","Mean","Std","Min","25%","50%","75%","Max"]],body:S.map(({key:fe,stats:me})=>[fe,me?me.count:"No Data",me?me.mean:"No Data",me?me.std:"No Data",me?me.min:"No Data",me?me.q25:"No Data",me?me.median:"No Data",me?me.q75:"No Data",me?me.max:"No Data"])}),j.save("sensor_data_summary.pdf")};return Q.jsxs(Yy,{className:"mt-4",children:[Q.jsxs(or,{className:"my-3",children:[Q.jsxs(jn,{xs:12,md:6,className:"mb-3 mb-md-0",children:[Q.jsx("label",{children:"Select Location(s):"}),Q.jsx(i0,{isMulti:!0,options:t,value:s,onChange:F,placeholder:"Select Locations..."})]}),Q.jsxs(jn,{xs:12,md:6,children:[Q.jsx("label",{children:"Select Date(s):"}),Q.jsx(i0,{isMulti:!0,options:n,value:o,onChange:a,placeholder:"Select Dates...",isDisabled:s.length===0})]})]}),Q.jsx(or,{className:"mb-3",children:Q.jsx(jn,{className:"text-center",children:Q.jsx(Ho,{variant:"primary",onClick:R,children:"Get Data"})})}),b.length>0&&Q.jsxs(or,{className:"mb-4 text-center",children:[Q.jsx(jn,{xs:12,md:4,className:"mb-3 mb-md-0",children:Q.jsx(Ho,{onClick:$,variant:"secondary",className:"w-100",children:"Download CSV"})}),Q.jsx(jn,{xs:12,md:4,className:"mb-3 mb-md-0",children:Q.jsx(Ho,{onClick:H,variant:"secondary",className:"w-100",children:"Visualize Results"})}),Q.jsx(jn,{xs:12,md:4,children:Q.jsx(Ho,{onClick:Y,variant:"secondary",className:"w-100",children:"Reset Data"})})]}),E&&Q.jsxs(Q.Fragment,{children:[Q.jsxs(or,{className:"mt-3",children:[Q.jsxs(jn,{xs:12,md:6,className:"mb-3 mb-md-0",children:[Q.jsx("canvas",{id:"svmChart"}),Q.jsx("p",{id:"svmChartAccuracy"})]}),Q.jsxs(jn,{xs:12,md:6,children:[Q.jsx("canvas",{id:"treeChart"}),Q.jsx("p",{id:"treeChartAccuracy"})]})]}),Q.jsxs(or,{className:"mt-3",children:[Q.jsx(jn,{xs:12,children:Q.jsx("p",{className:"text-center",children:"Histograms of Sensor Data"})}),Q.jsx(jn,{xs:12,md:4,className:"mb-3 mb-md-0",children:Q.jsx("canvas",{id:"ph-histogram"})}),Q.jsx(jn,{xs:12,md:4,className:"mb-3 mb-md-0",children:Q.jsx("canvas",{id:"tds-histogram"})}),Q.jsx(jn,{xs:12,md:4,children:Q.jsx("canvas",{id:"turbidity-histogram"})})]}),Q.jsxs(or,{className:"mt-3",children:[Q.jsx(jn,{xs:12,children:Q.jsx("p",{className:"text-center",children:"Heat Maps of Sensor Data"})}),Q.jsx(jn,{xs:12,md:4,className:"mb-3 mb-md-0",children:Q.jsx("canvas",{id:"ph-heatmap"})}),Q.jsx(jn,{xs:12,md:4,className:"mb-3 mb-md-0",children:Q.jsx("canvas",{id:"tds-heatmap"})}),Q.jsx(jn,{xs:12,md:4,children:Q.jsx("canvas",{id:"turbidity-heatmap"})})]}),S&&Q.jsx(or,{className:"mt-4",children:Q.jsxs(jn,{xs:12,children:[Q.jsx("h4",{className:"text-center mb-3",children:"Sensor Data Summary"}),Q.jsxs(j7,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Q.jsx("thead",{children:Q.jsxs("tr",{children:[Q.jsx("th",{children:"Sensor"}),Q.jsx("th",{children:"Count"}),Q.jsx("th",{children:"Mean"}),Q.jsx("th",{children:"Std"}),Q.jsx("th",{children:"Min"}),Q.jsx("th",{children:"25%"}),Q.jsx("th",{children:"50%"}),Q.jsx("th",{children:"75%"}),Q.jsx("th",{children:"Max"})]})}),Q.jsx("tbody",{children:S.map(({key:M,stats:j})=>Q.jsxs("tr",{children:[Q.jsx("td",{children:M}),j?Q.jsxs(Q.Fragment,{children:[Q.jsx("td",{children:j.count}),Q.jsx("td",{children:j.mean}),Q.jsx("td",{children:j.std}),Q.jsx("td",{children:j.min}),Q.jsx("td",{children:j.q25}),Q.jsx("td",{children:j.median}),Q.jsx("td",{children:j.q75}),Q.jsx("td",{children:j.max})]}):Q.jsx("td",{colSpan:"8",className:"text-center",children:"No Data"})]},M))})]})]})}),Q.jsx(or,{children:Q.jsx(Ho,{onClick:()=>le(u),variant:"secondary",className:"w-100",children:"Download PDF"})})]}),Q.jsx(C0,{})]})};function Zze(t,e){const n=K.useRef(e);K.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const Qze=1;function Jze(t){return Object.freeze({__version:Qze,map:t})}function e8e(t,e){return Object.freeze({...t,...e})}const VY=K.createContext(null),WY=VY.Provider;function t8e(){const t=K.useContext(VY);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function n8e(t){function e(n,i){const{instance:s,context:r}=t(n).current;return K.useImperativeHandle(i,()=>s),n.children==null?null:xn.createElement(WY,{value:r},n.children)}return K.forwardRef(e)}function i8e(t){function e(n,i){const{instance:s}=t(n).current;return K.useImperativeHandle(i,()=>s),null}return K.forwardRef(e)}function s8e(t,e){const n=K.useRef();K.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function UY(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var zT={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(bc,function(n){var i="1.9.4";function s(f){var x,C,P,V;for(C=1,P=arguments.length;C<P;C++){V=arguments[C];for(x in V)f[x]=V[x]}return f}var r=Object.create||function(){function f(){}return function(x){return f.prototype=x,new f}}();function o(f,x){var C=Array.prototype.slice;if(f.bind)return f.bind.apply(f,C.call(arguments,1));var P=C.call(arguments,2);return function(){return f.apply(x,P.length?P.concat(C.call(arguments)):arguments)}}var a=0;function l(f){return"_leaflet_id"in f||(f._leaflet_id=++a),f._leaflet_id}function c(f,x,C){var P,V,re,ye;return ye=function(){P=!1,V&&(re.apply(C,V),V=!1)},re=function(){P?V=arguments:(f.apply(C,arguments),setTimeout(ye,x),P=!0)},re}function u(f,x,C){var P=x[1],V=x[0],re=P-V;return f===P&&C?f:((f-V)%re+re)%re+V}function h(){return!1}function d(f,x){if(x===!1)return f;var C=Math.pow(10,x===void 0?6:x);return Math.round(f*C)/C}function p(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function m(f){return p(f).split(/\s+/)}function g(f,x){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?r(f.options):{});for(var C in x)f.options[C]=x[C];return f.options}function y(f,x,C){var P=[];for(var V in f)P.push(encodeURIComponent(C?V.toUpperCase():V)+"="+encodeURIComponent(f[V]));return(!x||x.indexOf("?")===-1?"?":"&")+P.join("&")}var v=/\{ *([\w_ -]+) *\}/g;function b(f,x){return f.replace(v,function(C,P){var V=x[P];if(V===void 0)throw new Error("No value provided for variable "+C);return typeof V=="function"&&(V=V(x)),V})}var w=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function S(f,x){for(var C=0;C<f.length;C++)if(f[C]===x)return C;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var T=0;function E(f){var x=+new Date,C=Math.max(0,16-(x-T));return T=x+C,window.setTimeout(f,C)}var O=window.requestAnimationFrame||I("RequestAnimationFrame")||E,F=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function R(f,x,C){if(C&&O===E)f.call(x);else return O.call(window,o(f,x))}function $(f){f&&F.call(window,f)}var U={__proto__:null,extend:s,create:r,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:u,falseFn:h,formatNum:d,trim:p,splitWords:m,setOptions:g,getParamString:y,template:b,isArray:w,indexOf:S,emptyImageUrl:k,requestFn:O,cancelFn:F,requestAnimFrame:R,cancelAnimFrame:$};function W(){}W.extend=function(f){var x=function(){g(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},C=x.__super__=this.prototype,P=r(C);P.constructor=x,x.prototype=P;for(var V in this)Object.prototype.hasOwnProperty.call(this,V)&&V!=="prototype"&&V!=="__super__"&&(x[V]=this[V]);return f.statics&&s(x,f.statics),f.includes&&(te(f.includes),s.apply(null,[P].concat(f.includes))),s(P,f),delete P.statics,delete P.includes,P.options&&(P.options=C.options?r(C.options):{},s(P.options,f.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){C.callInitHooks&&C.callInitHooks.call(this),this._initHooksCalled=!0;for(var re=0,ye=P._initHooks.length;re<ye;re++)P._initHooks[re].call(this)}},x},W.include=function(f){var x=this.prototype.options;return s(this.prototype,f),f.options&&(this.prototype.options=x,this.mergeOptions(f.options)),this},W.mergeOptions=function(f){return s(this.prototype.options,f),this},W.addInitHook=function(f){var x=Array.prototype.slice.call(arguments,1),C=typeof f=="function"?f:function(){this[f].apply(this,x)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(C),this};function te(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=w(f)?f:[f];for(var x=0;x<f.length;x++)f[x]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var H={on:function(f,x,C){if(typeof f=="object")for(var P in f)this._on(P,f[P],x);else{f=m(f);for(var V=0,re=f.length;V<re;V++)this._on(f[V],x,C)}return this},off:function(f,x,C){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var P in f)this._off(P,f[P],x);else{f=m(f);for(var V=arguments.length===1,re=0,ye=f.length;re<ye;re++)V?this._off(f[re]):this._off(f[re],x,C)}return this},_on:function(f,x,C,P){if(typeof x!="function"){console.warn("wrong listener type: "+typeof x);return}if(this._listens(f,x,C)===!1){C===this&&(C=void 0);var V={fn:x,ctx:C};P&&(V.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(V)}},_off:function(f,x,C){var P,V,re;if(this._events&&(P=this._events[f],!!P)){if(arguments.length===1){if(this._firingCount)for(V=0,re=P.length;V<re;V++)P[V].fn=h;delete this._events[f];return}if(typeof x!="function"){console.warn("wrong listener type: "+typeof x);return}var ye=this._listens(f,x,C);if(ye!==!1){var De=P[ye];this._firingCount&&(De.fn=h,this._events[f]=P=P.slice()),P.splice(ye,1)}}},fire:function(f,x,C){if(!this.listens(f,C))return this;var P=s({},x,{type:f,target:this,sourceTarget:x&&x.sourceTarget||this});if(this._events){var V=this._events[f];if(V){this._firingCount=this._firingCount+1||1;for(var re=0,ye=V.length;re<ye;re++){var De=V[re],je=De.fn;De.once&&this.off(f,je,De.ctx),je.call(De.ctx||this,P)}this._firingCount--}}return C&&this._propagateEvent(P),this},listens:function(f,x,C,P){typeof f!="string"&&console.warn('"string" type argument expected');var V=x;typeof x!="function"&&(P=!!x,V=void 0,C=void 0);var re=this._events&&this._events[f];if(re&&re.length&&this._listens(f,V,C)!==!1)return!0;if(P){for(var ye in this._eventParents)if(this._eventParents[ye].listens(f,x,C,P))return!0}return!1},_listens:function(f,x,C){if(!this._events)return!1;var P=this._events[f]||[];if(!x)return!!P.length;C===this&&(C=void 0);for(var V=0,re=P.length;V<re;V++)if(P[V].fn===x&&P[V].ctx===C)return V;return!1},once:function(f,x,C){if(typeof f=="object")for(var P in f)this._on(P,f[P],x,!0);else{f=m(f);for(var V=0,re=f.length;V<re;V++)this._on(f[V],x,C,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[l(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[l(f)],this},_propagateEvent:function(f){for(var x in this._eventParents)this._eventParents[x].fire(f.type,s({layer:f.target,propagatedFrom:f.target},f),!0)}};H.addEventListener=H.on,H.removeEventListener=H.clearAllEventListeners=H.off,H.addOneTimeEventListener=H.once,H.fireEvent=H.fire,H.hasEventListeners=H.listens;var G=W.extend(H);function B(f,x,C){this.x=C?Math.round(f):f,this.y=C?Math.round(x):x}var Y=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};B.prototype={clone:function(){return new B(this.x,this.y)},add:function(f){return this.clone()._add(ne(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(ne(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new B(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new B(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Y(this.x),this.y=Y(this.y),this},distanceTo:function(f){f=ne(f);var x=f.x-this.x,C=f.y-this.y;return Math.sqrt(x*x+C*C)},equals:function(f){return f=ne(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=ne(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+d(this.x)+", "+d(this.y)+")"}};function ne(f,x,C){return f instanceof B?f:w(f)?new B(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new B(f.x,f.y):new B(f,x,C)}function le(f,x){if(f)for(var C=x?[f,x]:f,P=0,V=C.length;P<V;P++)this.extend(C[P])}le.prototype={extend:function(f){var x,C;if(!f)return this;if(f instanceof B||typeof f[0]=="number"||"x"in f)x=C=ne(f);else if(f=M(f),x=f.min,C=f.max,!x||!C)return this;return!this.min&&!this.max?(this.min=x.clone(),this.max=C.clone()):(this.min.x=Math.min(x.x,this.min.x),this.max.x=Math.max(C.x,this.max.x),this.min.y=Math.min(x.y,this.min.y),this.max.y=Math.max(C.y,this.max.y)),this},getCenter:function(f){return ne((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return ne(this.min.x,this.max.y)},getTopRight:function(){return ne(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var x,C;return typeof f[0]=="number"||f instanceof B?f=ne(f):f=M(f),f instanceof le?(x=f.min,C=f.max):x=C=f,x.x>=this.min.x&&C.x<=this.max.x&&x.y>=this.min.y&&C.y<=this.max.y},intersects:function(f){f=M(f);var x=this.min,C=this.max,P=f.min,V=f.max,re=V.x>=x.x&&P.x<=C.x,ye=V.y>=x.y&&P.y<=C.y;return re&&ye},overlaps:function(f){f=M(f);var x=this.min,C=this.max,P=f.min,V=f.max,re=V.x>x.x&&P.x<C.x,ye=V.y>x.y&&P.y<C.y;return re&&ye},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var x=this.min,C=this.max,P=Math.abs(x.x-C.x)*f,V=Math.abs(x.y-C.y)*f;return M(ne(x.x-P,x.y-V),ne(C.x+P,C.y+V))},equals:function(f){return f?(f=M(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function M(f,x){return!f||f instanceof le?f:new le(f,x)}function j(f,x){if(f)for(var C=x?[f,x]:f,P=0,V=C.length;P<V;P++)this.extend(C[P])}j.prototype={extend:function(f){var x=this._southWest,C=this._northEast,P,V;if(f instanceof X)P=f,V=f;else if(f instanceof j){if(P=f._southWest,V=f._northEast,!P||!V)return this}else return f?this.extend(Z(f)||q(f)):this;return!x&&!C?(this._southWest=new X(P.lat,P.lng),this._northEast=new X(V.lat,V.lng)):(x.lat=Math.min(P.lat,x.lat),x.lng=Math.min(P.lng,x.lng),C.lat=Math.max(V.lat,C.lat),C.lng=Math.max(V.lng,C.lng)),this},pad:function(f){var x=this._southWest,C=this._northEast,P=Math.abs(x.lat-C.lat)*f,V=Math.abs(x.lng-C.lng)*f;return new j(new X(x.lat-P,x.lng-V),new X(C.lat+P,C.lng+V))},getCenter:function(){return new X((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new X(this.getNorth(),this.getWest())},getSouthEast:function(){return new X(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof X||"lat"in f?f=Z(f):f=q(f);var x=this._southWest,C=this._northEast,P,V;return f instanceof j?(P=f.getSouthWest(),V=f.getNorthEast()):P=V=f,P.lat>=x.lat&&V.lat<=C.lat&&P.lng>=x.lng&&V.lng<=C.lng},intersects:function(f){f=q(f);var x=this._southWest,C=this._northEast,P=f.getSouthWest(),V=f.getNorthEast(),re=V.lat>=x.lat&&P.lat<=C.lat,ye=V.lng>=x.lng&&P.lng<=C.lng;return re&&ye},overlaps:function(f){f=q(f);var x=this._southWest,C=this._northEast,P=f.getSouthWest(),V=f.getNorthEast(),re=V.lat>x.lat&&P.lat<C.lat,ye=V.lng>x.lng&&P.lng<C.lng;return re&&ye},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,x){return f?(f=q(f),this._southWest.equals(f.getSouthWest(),x)&&this._northEast.equals(f.getNorthEast(),x)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function q(f,x){return f instanceof j?f:new j(f,x)}function X(f,x,C){if(isNaN(f)||isNaN(x))throw new Error("Invalid LatLng object: ("+f+", "+x+")");this.lat=+f,this.lng=+x,C!==void 0&&(this.alt=+C)}X.prototype={equals:function(f,x){if(!f)return!1;f=Z(f);var C=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return C<=(x===void 0?1e-9:x)},toString:function(f){return"LatLng("+d(this.lat,f)+", "+d(this.lng,f)+")"},distanceTo:function(f){return fe.distance(this,Z(f))},wrap:function(){return fe.wrapLatLng(this)},toBounds:function(f){var x=180*f/40075017,C=x/Math.cos(Math.PI/180*this.lat);return q([this.lat-x,this.lng-C],[this.lat+x,this.lng+C])},clone:function(){return new X(this.lat,this.lng,this.alt)}};function Z(f,x,C){return f instanceof X?f:w(f)&&typeof f[0]!="object"?f.length===3?new X(f[0],f[1],f[2]):f.length===2?new X(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new X(f.lat,"lng"in f?f.lng:f.lon,f.alt):x===void 0?null:new X(f,x,C)}var ue={latLngToPoint:function(f,x){var C=this.projection.project(f),P=this.scale(x);return this.transformation._transform(C,P)},pointToLatLng:function(f,x){var C=this.scale(x),P=this.transformation.untransform(f,C);return this.projection.unproject(P)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var x=this.projection.bounds,C=this.scale(f),P=this.transformation.transform(x.min,C),V=this.transformation.transform(x.max,C);return new le(P,V)},infinite:!1,wrapLatLng:function(f){var x=this.wrapLng?u(f.lng,this.wrapLng,!0):f.lng,C=this.wrapLat?u(f.lat,this.wrapLat,!0):f.lat,P=f.alt;return new X(C,x,P)},wrapLatLngBounds:function(f){var x=f.getCenter(),C=this.wrapLatLng(x),P=x.lat-C.lat,V=x.lng-C.lng;if(P===0&&V===0)return f;var re=f.getSouthWest(),ye=f.getNorthEast(),De=new X(re.lat-P,re.lng-V),je=new X(ye.lat-P,ye.lng-V);return new j(De,je)}},fe=s({},ue,{wrapLng:[-180,180],R:6371e3,distance:function(f,x){var C=Math.PI/180,P=f.lat*C,V=x.lat*C,re=Math.sin((x.lat-f.lat)*C/2),ye=Math.sin((x.lng-f.lng)*C/2),De=re*re+Math.cos(P)*Math.cos(V)*ye*ye,je=2*Math.atan2(Math.sqrt(De),Math.sqrt(1-De));return this.R*je}}),me=6378137,Pe={R:me,MAX_LATITUDE:85.0511287798,project:function(f){var x=Math.PI/180,C=this.MAX_LATITUDE,P=Math.max(Math.min(C,f.lat),-C),V=Math.sin(P*x);return new B(this.R*f.lng*x,this.R*Math.log((1+V)/(1-V))/2)},unproject:function(f){var x=180/Math.PI;return new X((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*x,f.x*x/this.R)},bounds:function(){var f=me*Math.PI;return new le([-f,-f],[f,f])}()};function Ne(f,x,C,P){if(w(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=x,this._c=C,this._d=P}Ne.prototype={transform:function(f,x){return this._transform(f.clone(),x)},_transform:function(f,x){return x=x||1,f.x=x*(this._a*f.x+this._b),f.y=x*(this._c*f.y+this._d),f},untransform:function(f,x){return x=x||1,new B((f.x/x-this._b)/this._a,(f.y/x-this._d)/this._c)}};function Fe(f,x,C,P){return new Ne(f,x,C,P)}var qe=s({},fe,{code:"EPSG:3857",projection:Pe,transformation:function(){var f=.5/(Math.PI*Pe.R);return Fe(f,.5,-f,.5)}()}),Qe=s({},qe,{code:"EPSG:900913"});function xe(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function he(f,x){var C="",P,V,re,ye,De,je;for(P=0,re=f.length;P<re;P++){for(De=f[P],V=0,ye=De.length;V<ye;V++)je=De[V],C+=(V?"L":"M")+je.x+" "+je.y;C+=x?Ge.svg?"z":"x":""}return C||"M0 0"}var ut=document.documentElement.style,ot="ActiveXObject"in window,Je=ot&&!document.addEventListener,it="msLaunchUri"in navigator&&!("documentMode"in document),ht=lt("webkit"),at=lt("android"),wt=lt("android 2")||lt("android 3"),Rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ft=at&&lt("Google")&&Rt<537&&!("AudioNode"in window),pt=!!window.opera,Ot=!it&&lt("chrome"),Ht=lt("gecko")&&!ht&&!pt&&!ot,Bt=!Ot&&lt("safari"),nn=lt("phantom"),mt="OTransition"in ut,di=navigator.platform.indexOf("Win")===0,gn=ot&&"transition"in ut,Bs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!wt,Vn="MozPerspective"in ut,ki=!window.L_DISABLE_3D&&(gn||Bs||Vn)&&!mt&&!nn,Js=typeof orientation<"u"||lt("mobile"),$n=Js&&ht,rl=Js&&Bs,fi=!window.PointerEvent&&window.MSPointerEvent,gr=!!(window.PointerEvent||fi),na="ontouchstart"in window||!!window.TouchEvent,Ti=!window.L_NO_TOUCH&&(na||gr),on=Js&&pt,Wn=Js&&Ht,ia=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ji=function(){var f=!1;try{var x=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",h,x),window.removeEventListener("testPassiveEventSupport",h,x)}catch{}return f}(),sa=function(){return!!document.createElement("canvas").getContext}(),Qr=!!(document.createElementNS&&xe("svg").createSVGRect),ge=!!Qr&&function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ee=!Qr&&function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var x=f.firstChild;return x.style.behavior="url(#default#VML)",x&&typeof x.adj=="object"}catch{return!1}}(),Be=navigator.platform.indexOf("Mac")===0,Ke=navigator.platform.indexOf("Linux")===0;function lt(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var Ge={ie:ot,ielt9:Je,edge:it,webkit:ht,android:at,android23:wt,androidStock:Ft,opera:pt,chrome:Ot,gecko:Ht,safari:Bt,phantom:nn,opera12:mt,win:di,ie3d:gn,webkit3d:Bs,gecko3d:Vn,any3d:ki,mobile:Js,mobileWebkit:$n,mobileWebkit3d:rl,msPointer:fi,pointer:gr,touch:Ti,touchNative:na,mobileOpera:on,mobileGecko:Wn,retina:ia,passiveEvents:Ji,canvas:sa,svg:Qr,vml:Ee,inlineSvg:ge,mac:Be,linux:Ke},Mt=Ge.msPointer?"MSPointerDown":"pointerdown",Nt=Ge.msPointer?"MSPointerMove":"pointermove",St=Ge.msPointer?"MSPointerUp":"pointerup",vt=Ge.msPointer?"MSPointerCancel":"pointercancel",Et={touchstart:Mt,touchmove:Nt,touchend:St,touchcancel:vt},Zt={touchstart:Pu,touchmove:zs,touchend:zs,touchcancel:zs},Qt={},Xn=!1;function En(f,x,C){return x==="touchstart"&&vr(),Zt[x]?(C=Zt[x].bind(this,C),f.addEventListener(Et[x],C,!1),C):(console.warn("wrong event specified:",x),h)}function Sn(f,x,C){if(!Et[x]){console.warn("wrong event specified:",x);return}f.removeEventListener(Et[x],C,!1)}function oi(f){Qt[f.pointerId]=f}function Io(f){Qt[f.pointerId]&&(Qt[f.pointerId]=f)}function No(f){delete Qt[f.pointerId]}function vr(){Xn||(document.addEventListener(Mt,oi,!0),document.addEventListener(Nt,Io,!0),document.addEventListener(St,No,!0),document.addEventListener(vt,No,!0),Xn=!0)}function zs(f,x){if(x.pointerType!==(x.MSPOINTER_TYPE_MOUSE||"mouse")){x.touches=[];for(var C in Qt)x.touches.push(Qt[C]);x.changedTouches=[x],f(x)}}function Pu(f,x){x.MSPOINTER_TYPE_TOUCH&&x.pointerType===x.MSPOINTER_TYPE_TOUCH&&as(x),zs(f,x)}function jl(f){var x={},C,P;for(P in f)C=f[P],x[P]=C&&C.bind?C.bind(f):C;return f=x,x.type="dblclick",x.detail=2,x.isTrusted=!1,x._simulated=!0,x}var Jr=200;function Vl(f,x){f.addEventListener("dblclick",x);var C=0,P;function V(re){if(re.detail!==1){P=re.detail;return}if(!(re.pointerType==="mouse"||re.sourceCapabilities&&!re.sourceCapabilities.firesTouchEvents)){var ye=Xl(re);if(!(ye.some(function(je){return je instanceof HTMLLabelElement&&je.attributes.for})&&!ye.some(function(je){return je instanceof HTMLInputElement||je instanceof HTMLSelectElement}))){var De=Date.now();De-C<=Jr?(P++,P===2&&x(jl(re))):P=1,C=De}}}return f.addEventListener("click",V),{dblclick:x,simDblclick:V}}function Dc(f,x){f.removeEventListener("dblclick",x.dblclick),f.removeEventListener("click",x.simDblclick)}var yn=Fh(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ti=Fh(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ra=ti==="webkitTransition"||ti==="OTransition"?ti+"End":"transitionend";function ol(f){return typeof f=="string"?document.getElementById(f):f}function Yn(f,x){var C=f.style[x]||f.currentStyle&&f.currentStyle[x];if((!C||C==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(f,null);C=P?P[x]:null}return C==="auto"?null:C}function vn(f,x,C){var P=document.createElement(f);return P.className=x||"",C&&C.appendChild(P),P}function an(f){var x=f.parentNode;x&&x.removeChild(f)}function Wl(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function Ul(f){var x=f.parentNode;x&&x.lastChild!==f&&x.appendChild(f)}function Hl(f){var x=f.parentNode;x&&x.firstChild!==f&&x.insertBefore(f,x.firstChild)}function Du(f,x){if(f.classList!==void 0)return f.classList.contains(x);var C=er(f);return C.length>0&&new RegExp("(^|\\s)"+x+"(\\s|$)").test(C)}function fn(f,x){if(f.classList!==void 0)for(var C=m(x),P=0,V=C.length;P<V;P++)f.classList.add(C[P]);else if(!Du(f,x)){var re=er(f);$c(f,(re?re+" ":"")+x)}}function Zn(f,x){f.classList!==void 0?f.classList.remove(x):$c(f,p((" "+er(f)+" ").replace(" "+x+" "," ")))}function $c(f,x){f.className.baseVal===void 0?f.className=x:f.className.baseVal=x}function er(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function yr(f,x){"opacity"in f.style?f.style.opacity=x:"filter"in f.style&&Rm(f,x)}function Rm(f,x){var C=!1,P="DXImageTransform.Microsoft.Alpha";try{C=f.filters.item(P)}catch{if(x===1)return}x=Math.round(x*100),C?(C.Enabled=x!==100,C.Opacity=x):f.style.filter+=" progid:"+P+"(opacity="+x+")"}function Fh(f){for(var x=document.documentElement.style,C=0;C<f.length;C++)if(f[C]in x)return f[C];return!1}function al(f,x,C){var P=x||new B(0,0);f.style[yn]=(Ge.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(C?" scale("+C+")":"")}function es(f,x){f._leaflet_pos=x,Ge.any3d?al(f,x):(f.style.left=x.x+"px",f.style.top=x.y+"px")}function ll(f){return f._leaflet_pos||new B(0,0)}var $u,Gl,Rf;if("onselectstart"in document)$u=function(){un(window,"selectstart",as)},Gl=function(){On(window,"selectstart",as)};else{var Ou=Fh(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);$u=function(){if(Ou){var f=document.documentElement.style;Rf=f[Ou],f[Ou]="none"}},Gl=function(){Ou&&(document.documentElement.style[Ou]=Rf,Rf=void 0)}}function Lf(){un(window,"dragstart",as)}function Pa(){On(window,"dragstart",as)}var ql,Oc;function Bh(f){for(;f.tabIndex===-1;)f=f.parentNode;f.style&&(Ts(),ql=f,Oc=f.style.outlineStyle,f.style.outlineStyle="none",un(window,"keydown",Ts))}function Ts(){ql&&(ql.style.outlineStyle=Oc,ql=void 0,Oc=void 0,On(window,"keydown",Ts))}function Lm(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function zh(f){var x=f.getBoundingClientRect();return{x:x.width/f.offsetWidth||1,y:x.height/f.offsetHeight||1,boundingClientRect:x}}var ln={__proto__:null,TRANSFORM:yn,TRANSITION:ti,TRANSITION_END:ra,get:ol,getStyle:Yn,create:vn,remove:an,empty:Wl,toFront:Ul,toBack:Hl,hasClass:Du,addClass:fn,removeClass:Zn,setClass:$c,getClass:er,setOpacity:yr,testProp:Fh,setTransform:al,setPosition:es,getPosition:ll,get disableTextSelection(){return $u},get enableTextSelection(){return Gl},disableImageDrag:Lf,enableImageDrag:Pa,preventOutline:Bh,restoreOutline:Ts,getSizedParentNode:Lm,getScale:zh};function un(f,x,C,P){if(x&&typeof x=="object")for(var V in x)Mc(f,V,x[V],C);else{x=m(x);for(var re=0,ye=x.length;re<ye;re++)Mc(f,x[re],C,P)}return this}var oa="_leaflet_events";function On(f,x,C,P){if(arguments.length===1)Pf(f),delete f[oa];else if(x&&typeof x=="object")for(var V in x)Mu(f,V,x[V],C);else if(x=m(x),arguments.length===2)Pf(f,function(De){return S(x,De)!==-1});else for(var re=0,ye=x.length;re<ye;re++)Mu(f,x[re],C,P);return this}function Pf(f,x){for(var C in f[oa]){var P=C.split(/\d/)[0];(!x||x(P))&&Mu(f,P,null,null,C)}}var jh={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Mc(f,x,C,P){var V=x+l(C)+(P?"_"+l(P):"");if(f[oa]&&f[oa][V])return this;var re=function(De){return C.call(P||f,De||window.event)},ye=re;!Ge.touchNative&&Ge.pointer&&x.indexOf("touch")===0?re=En(f,x,re):Ge.touch&&x==="dblclick"?re=Vl(f,re):"addEventListener"in f?x==="touchstart"||x==="touchmove"||x==="wheel"||x==="mousewheel"?f.addEventListener(jh[x]||x,re,Ge.passiveEvents?{passive:!1}:!1):x==="mouseenter"||x==="mouseleave"?(re=function(De){De=De||window.event,Fc(f,De)&&ye(De)},f.addEventListener(jh[x],re,!1)):f.addEventListener(x,ye,!1):f.attachEvent("on"+x,re),f[oa]=f[oa]||{},f[oa][V]=re}function Mu(f,x,C,P,V){V=V||x+l(C)+(P?"_"+l(P):"");var re=f[oa]&&f[oa][V];if(!re)return this;!Ge.touchNative&&Ge.pointer&&x.indexOf("touch")===0?Sn(f,x,re):Ge.touch&&x==="dblclick"?Dc(f,re):"removeEventListener"in f?f.removeEventListener(jh[x]||x,re,!1):f.detachEvent("on"+x,re),f[oa][V]=null}function Kl(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function Df(f){return Mc(f,"wheel",Kl),this}function Fu(f){return un(f,"mousedown touchstart dblclick contextmenu",Kl),f._leaflet_disable_click=!0,this}function as(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function Eo(f){return as(f),Kl(f),this}function Xl(f){if(f.composedPath)return f.composedPath();for(var x=[],C=f.target;C;)x.push(C),C=C.parentNode;return x}function Pm(f,x){if(!x)return new B(f.clientX,f.clientY);var C=zh(x),P=C.boundingClientRect;return new B((f.clientX-P.left)/C.x-x.clientLeft,(f.clientY-P.top)/C.y-x.clientTop)}var Bu=Ge.linux&&Ge.chrome?window.devicePixelRatio:Ge.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Vh(f){return Ge.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/Bu:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function Fc(f,x){var C=x.relatedTarget;if(!C)return!0;try{for(;C&&C!==f;)C=C.parentNode}catch{return!1}return C!==f}var Dm={__proto__:null,on:un,off:On,stopPropagation:Kl,disableScrollPropagation:Df,disableClickPropagation:Fu,preventDefault:as,stop:Eo,getPropagationPath:Xl,getMousePosition:Pm,getWheelDelta:Vh,isExternalTarget:Fc,addListener:un,removeListener:On},$f=G.extend({run:function(f,x,C,P){this.stop(),this._el=f,this._inProgress=!0,this._duration=C||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=ll(f),this._offset=x.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(f){var x=+new Date-this._startTime,C=this._duration*1e3;x<C?this._runFrame(this._easeOut(x/C),f):(this._runFrame(1),this._complete())},_runFrame:function(f,x){var C=this._startPos.add(this._offset.multiplyBy(f));x&&C._round(),es(this._el,C),this.fire("step")},_complete:function(){$(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),Tn=G.extend({options:{crs:qe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,x){x=g(this,x),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),x.maxBounds&&this.setMaxBounds(x.maxBounds),x.zoom!==void 0&&(this._zoom=this._limitZoom(x.zoom)),x.center&&x.zoom!==void 0&&this.setView(Z(x.center),x.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ti&&Ge.any3d&&!Ge.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),un(this._proxy,ra,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,x,C){if(x=x===void 0?this._zoom:this._limitZoom(x),f=this._limitCenter(Z(f),x,this.options.maxBounds),C=C||{},this._stop(),this._loaded&&!C.reset&&C!==!0){C.animate!==void 0&&(C.zoom=s({animate:C.animate},C.zoom),C.pan=s({animate:C.animate,duration:C.duration},C.pan));var P=this._zoom!==x?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,x,C.zoom):this._tryAnimatedPan(f,C.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(f,x,C.pan&&C.pan.noMoveStart),this},setZoom:function(f,x){return this._loaded?this.setView(this.getCenter(),f,{zoom:x}):(this._zoom=f,this)},zoomIn:function(f,x){return f=f||(Ge.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,x)},zoomOut:function(f,x){return f=f||(Ge.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,x)},setZoomAround:function(f,x,C){var P=this.getZoomScale(x),V=this.getSize().divideBy(2),re=f instanceof B?f:this.latLngToContainerPoint(f),ye=re.subtract(V).multiplyBy(1-1/P),De=this.containerPointToLatLng(V.add(ye));return this.setView(De,x,{zoom:C})},_getBoundsCenterZoom:function(f,x){x=x||{},f=f.getBounds?f.getBounds():q(f);var C=ne(x.paddingTopLeft||x.padding||[0,0]),P=ne(x.paddingBottomRight||x.padding||[0,0]),V=this.getBoundsZoom(f,!1,C.add(P));if(V=typeof x.maxZoom=="number"?Math.min(x.maxZoom,V):V,V===1/0)return{center:f.getCenter(),zoom:V};var re=P.subtract(C).divideBy(2),ye=this.project(f.getSouthWest(),V),De=this.project(f.getNorthEast(),V),je=this.unproject(ye.add(De).divideBy(2).add(re),V);return{center:je,zoom:V}},fitBounds:function(f,x){if(f=q(f),!f.isValid())throw new Error("Bounds are not valid.");var C=this._getBoundsCenterZoom(f,x);return this.setView(C.center,C.zoom,x)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,x){return this.setView(f,this._zoom,{pan:x})},panBy:function(f,x){if(f=ne(f).round(),x=x||{},!f.x&&!f.y)return this.fire("moveend");if(x.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new $f,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),x.noMoveStart||this.fire("movestart"),x.animate!==!1){fn(this._mapPane,"leaflet-pan-anim");var C=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,C,x.duration||.25,x.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,x,C){if(C=C||{},C.animate===!1||!Ge.any3d)return this.setView(f,x,C);this._stop();var P=this.project(this.getCenter()),V=this.project(f),re=this.getSize(),ye=this._zoom;f=Z(f),x=x===void 0?ye:x;var De=Math.max(re.x,re.y),je=De*this.getZoomScale(ye,x),et=V.distanceTo(P)||1,Ct=1.42,Wt=Ct*Ct;function Cn(vi){var Fr=vi?-1:1,Qk=vi?je:De,Jk=je*je-De*De+Fr*Wt*Wt*et*et,xx=2*Qk*Wt*et,Gm=Jk/xx,tv=Math.sqrt(Gm*Gm+1)-Gm,wx=tv<1e-9?-18:Math.log(tv);return wx}function Mr(vi){return(Math.exp(vi)-Math.exp(-vi))/2}function Rs(vi){return(Math.exp(vi)+Math.exp(-vi))/2}function ha(vi){return Mr(vi)/Rs(vi)}var io=Cn(0);function Jh(vi){return De*(Rs(io)/Rs(io+Ct*vi))}function Yk(vi){return De*(Rs(io)*ha(io+Ct*vi)-Mr(io))/Wt}function Xc(vi){return 1-Math.pow(1-vi,1.5)}var Ma=Date.now(),pl=(Cn(1)-io)/Ct,Zk=C.duration?1e3*C.duration:1e3*pl*.8;function ev(){var vi=(Date.now()-Ma)/Zk,Fr=Xc(vi)*pl;vi<=1?(this._flyToFrame=R(ev,this),this._move(this.unproject(P.add(V.subtract(P).multiplyBy(Yk(Fr)/et)),ye),this.getScaleZoom(De/Jh(Fr),ye),{flyTo:!0})):this._move(f,x)._moveEnd(!0)}return this._moveStart(!0,C.noMoveStart),ev.call(this),this},flyToBounds:function(f,x){var C=this._getBoundsCenterZoom(f,x);return this.flyTo(C.center,C.zoom,x)},setMaxBounds:function(f){return f=q(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var x=this.options.minZoom;return this.options.minZoom=f,this._loaded&&x!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var x=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&x!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,x){this._enforcingBounds=!0;var C=this.getCenter(),P=this._limitCenter(C,this._zoom,q(f));return C.equals(P)||this.panTo(P,x),this._enforcingBounds=!1,this},panInside:function(f,x){x=x||{};var C=ne(x.paddingTopLeft||x.padding||[0,0]),P=ne(x.paddingBottomRight||x.padding||[0,0]),V=this.project(this.getCenter()),re=this.project(f),ye=this.getPixelBounds(),De=M([ye.min.add(C),ye.max.subtract(P)]),je=De.getSize();if(!De.contains(re)){this._enforcingBounds=!0;var et=re.subtract(De.getCenter()),Ct=De.extend(re).getSize().subtract(je);V.x+=et.x<0?-Ct.x:Ct.x,V.y+=et.y<0?-Ct.y:Ct.y,this.panTo(this.unproject(V),x),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=s({animate:!1,pan:!0},f===!0?{animate:!0}:f);var x=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var C=this.getSize(),P=x.divideBy(2).round(),V=C.divideBy(2).round(),re=P.subtract(V);return!re.x&&!re.y?this:(f.animate&&f.pan?this.panBy(re):(f.pan&&this._rawPanBy(re),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:x,newSize:C}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=s({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var x=o(this._handleGeolocationResponse,this),C=o(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(x,C,f):navigator.geolocation.getCurrentPosition(x,C,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var x=f.code,C=f.message||(x===1?"permission denied":x===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:x,message:"Geolocation error: "+C+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var x=f.coords.latitude,C=f.coords.longitude,P=new X(x,C),V=P.toBounds(f.coords.accuracy*2),re=this._locateOptions;if(re.setView){var ye=this.getBoundsZoom(V);this.setView(P,re.maxZoom?Math.min(ye,re.maxZoom):ye)}var De={latlng:P,bounds:V,timestamp:f.timestamp};for(var je in f.coords)typeof f.coords[je]=="number"&&(De[je]=f.coords[je]);this.fire("locationfound",De)}},addHandler:function(f,x){if(!x)return this;var C=this[f]=new x(this);return this._handlers.push(C),this.options[f]&&C.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),an(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&($(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)an(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,x){var C="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),P=vn("div",C,x||this._mapPane);return f&&(this._panes[f]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),x=this.unproject(f.getBottomLeft()),C=this.unproject(f.getTopRight());return new j(x,C)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,x,C){f=q(f),C=ne(C||[0,0]);var P=this.getZoom()||0,V=this.getMinZoom(),re=this.getMaxZoom(),ye=f.getNorthWest(),De=f.getSouthEast(),je=this.getSize().subtract(C),et=M(this.project(De,P),this.project(ye,P)).getSize(),Ct=Ge.any3d?this.options.zoomSnap:1,Wt=je.x/et.x,Cn=je.y/et.y,Mr=x?Math.max(Wt,Cn):Math.min(Wt,Cn);return P=this.getScaleZoom(Mr,P),Ct&&(P=Math.round(P/(Ct/100))*(Ct/100),P=x?Math.ceil(P/Ct)*Ct:Math.floor(P/Ct)*Ct),Math.max(V,Math.min(re,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,x){var C=this._getTopLeftPoint(f,x);return new le(C,C.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,x){var C=this.options.crs;return x=x===void 0?this._zoom:x,C.scale(f)/C.scale(x)},getScaleZoom:function(f,x){var C=this.options.crs;x=x===void 0?this._zoom:x;var P=C.zoom(f*C.scale(x));return isNaN(P)?1/0:P},project:function(f,x){return x=x===void 0?this._zoom:x,this.options.crs.latLngToPoint(Z(f),x)},unproject:function(f,x){return x=x===void 0?this._zoom:x,this.options.crs.pointToLatLng(ne(f),x)},layerPointToLatLng:function(f){var x=ne(f).add(this.getPixelOrigin());return this.unproject(x)},latLngToLayerPoint:function(f){var x=this.project(Z(f))._round();return x._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(Z(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(q(f))},distance:function(f,x){return this.options.crs.distance(Z(f),Z(x))},containerPointToLayerPoint:function(f){return ne(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return ne(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var x=this.containerPointToLayerPoint(ne(f));return this.layerPointToLatLng(x)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Z(f)))},mouseEventToContainerPoint:function(f){return Pm(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var x=this._container=ol(f);if(x){if(x._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");un(x,"scroll",this._onScroll,this),this._containerId=l(x)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ge.any3d,fn(f,"leaflet-container"+(Ge.touch?" leaflet-touch":"")+(Ge.retina?" leaflet-retina":"")+(Ge.ielt9?" leaflet-oldie":"")+(Ge.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var x=Yn(f,"position");x!=="absolute"&&x!=="relative"&&x!=="fixed"&&x!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),es(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(fn(f.markerPane,"leaflet-zoom-hide"),fn(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,x,C){es(this._mapPane,new B(0,0));var P=!this._loaded;this._loaded=!0,x=this._limitZoom(x),this.fire("viewprereset");var V=this._zoom!==x;this._moveStart(V,C)._move(f,x)._moveEnd(V),this.fire("viewreset"),P&&this.fire("load")},_moveStart:function(f,x){return f&&this.fire("zoomstart"),x||this.fire("movestart"),this},_move:function(f,x,C,P){x===void 0&&(x=this._zoom);var V=this._zoom!==x;return this._zoom=x,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),P?C&&C.pinch&&this.fire("zoom",C):((V||C&&C.pinch)&&this.fire("zoom",C),this.fire("move",C)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return $(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){es(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[l(this._container)]=this;var x=f?On:un;x(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&x(window,"resize",this._onResize,this),Ge.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){$(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,x){for(var C=[],P,V=x==="mouseout"||x==="mouseover",re=f.target||f.srcElement,ye=!1;re;){if(P=this._targets[l(re)],P&&(x==="click"||x==="preclick")&&this._draggableMoved(P)){ye=!0;break}if(P&&P.listens(x,!0)&&(V&&!Fc(re,f)||(C.push(P),V))||re===this._container)break;re=re.parentNode}return!C.length&&!ye&&!V&&this.listens(x,!0)&&(C=[this]),C},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var x=f.target||f.srcElement;if(!(!this._loaded||x._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(x))){var C=f.type;C==="mousedown"&&Bh(x),this._fireDOMEvent(f,C)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,x,C){if(f.type==="click"){var P=s({},f);P.type="preclick",this._fireDOMEvent(P,P.type,C)}var V=this._findEventTargets(f,x);if(C){for(var re=[],ye=0;ye<C.length;ye++)C[ye].listens(x,!0)&&re.push(C[ye]);V=re.concat(V)}if(V.length){x==="contextmenu"&&as(f);var De=V[0],je={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var et=De.getLatLng&&(!De._radius||De._radius<=10);je.containerPoint=et?this.latLngToContainerPoint(De.getLatLng()):this.mouseEventToContainerPoint(f),je.layerPoint=this.containerPointToLayerPoint(je.containerPoint),je.latlng=et?De.getLatLng():this.layerPointToLatLng(je.layerPoint)}for(ye=0;ye<V.length;ye++)if(V[ye].fire(x,je,!0),je.originalEvent._stopped||V[ye].options.bubblingMouseEvents===!1&&S(this._mouseEvents,x)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,x=this._handlers.length;f<x;f++)this._handlers[f].disable()},whenReady:function(f,x){return this._loaded?f.call(x||this,{target:this}):this.on("load",f,x),this},_getMapPanePos:function(){return ll(this._mapPane)||new B(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,x){var C=f&&x!==void 0?this._getNewPixelOrigin(f,x):this.getPixelOrigin();return C.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,x){var C=this.getSize()._divideBy(2);return this.project(f,x)._subtract(C)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,x,C){var P=this._getNewPixelOrigin(C,x);return this.project(f,x)._subtract(P)},_latLngBoundsToNewLayerBounds:function(f,x,C){var P=this._getNewPixelOrigin(C,x);return M([this.project(f.getSouthWest(),x)._subtract(P),this.project(f.getNorthWest(),x)._subtract(P),this.project(f.getSouthEast(),x)._subtract(P),this.project(f.getNorthEast(),x)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,x,C){if(!C)return f;var P=this.project(f,x),V=this.getSize().divideBy(2),re=new le(P.subtract(V),P.add(V)),ye=this._getBoundsOffset(re,C,x);return Math.abs(ye.x)<=1&&Math.abs(ye.y)<=1?f:this.unproject(P.add(ye),x)},_limitOffset:function(f,x){if(!x)return f;var C=this.getPixelBounds(),P=new le(C.min.add(f),C.max.add(f));return f.add(this._getBoundsOffset(P,x))},_getBoundsOffset:function(f,x,C){var P=M(this.project(x.getNorthEast(),C),this.project(x.getSouthWest(),C)),V=P.min.subtract(f.min),re=P.max.subtract(f.max),ye=this._rebound(V.x,-re.x),De=this._rebound(V.y,-re.y);return new B(ye,De)},_rebound:function(f,x){return f+x>0?Math.round(f-x)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(x))},_limitZoom:function(f){var x=this.getMinZoom(),C=this.getMaxZoom(),P=Ge.any3d?this.options.zoomSnap:1;return P&&(f=Math.round(f/P)*P),Math.max(x,Math.min(C,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Zn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,x){var C=this._getCenterOffset(f)._trunc();return(x&&x.animate)!==!0&&!this.getSize().contains(C)?!1:(this.panBy(C,x),!0)},_createAnimProxy:function(){var f=this._proxy=vn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(x){var C=yn,P=this._proxy.style[C];al(this._proxy,this.project(x.center,x.zoom),this.getZoomScale(x.zoom,1)),P===this._proxy.style[C]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){an(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),x=this.getZoom();al(this._proxy,this.project(f,x),this.getZoomScale(x,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,x,C){if(this._animatingZoom)return!0;if(C=C||{},!this._zoomAnimated||C.animate===!1||this._nothingToAnimate()||Math.abs(x-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(x),V=this._getCenterOffset(f)._divideBy(1-1/P);return C.animate!==!0&&!this.getSize().contains(V)?!1:(R(function(){this._moveStart(!0,C.noMoveStart||!1)._animateZoom(f,x,!0)},this),!0)},_animateZoom:function(f,x,C,P){this._mapPane&&(C&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=x,fn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:x,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Zn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $m(f,x){return new Tn(f,x)}var ps=W.extend({options:{position:"topright"},initialize:function(f){g(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var x=this._map;return x&&x.removeControl(this),this.options.position=f,x&&x.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var x=this._container=this.onAdd(f),C=this.getPosition(),P=f._controlCorners[C];return fn(x,"leaflet-control"),C.indexOf("bottom")!==-1?P.insertBefore(x,P.firstChild):P.appendChild(x),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(an(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),To=function(f){return new ps(f)};Tn.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},x="leaflet-",C=this._controlContainer=vn("div",x+"control-container",this._container);function P(V,re){var ye=x+V+" "+x+re;f[V+re]=vn("div",ye,C)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)an(this._controlCorners[f]);an(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Om=ps.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,x,C,P){return C<P?-1:P<C?1:0}},initialize:function(f,x,C){g(this,C),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var P in f)this._addLayer(f[P],P);for(P in x)this._addLayer(x[P],P,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var x=0;x<this._layers.length;x++)this._layers[x].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return ps.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,x){return this._addLayer(f,x),this._map?this._update():this},addOverlay:function(f,x){return this._addLayer(f,x,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var x=this._getLayer(l(f));return x&&this._layers.splice(this._layers.indexOf(x),1),this._map?this._update():this},expand:function(){fn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(fn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):Zn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Zn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",x=this._container=vn("div",f),C=this.options.collapsed;x.setAttribute("aria-haspopup",!0),Fu(x),Df(x);var P=this._section=vn("section",f+"-list");C&&(this._map.on("click",this.collapse,this),un(x,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var V=this._layersLink=vn("a",f+"-toggle",x);V.href="#",V.title="Layers",V.setAttribute("role","button"),un(V,{keydown:function(re){re.keyCode===13&&this._expandSafely()},click:function(re){as(re),this._expandSafely()}},this),C||this.expand(),this._baseLayersList=vn("div",f+"-base",P),this._separator=vn("div",f+"-separator",P),this._overlaysList=vn("div",f+"-overlays",P),x.appendChild(P)},_getLayer:function(f){for(var x=0;x<this._layers.length;x++)if(this._layers[x]&&l(this._layers[x].layer)===f)return this._layers[x]},_addLayer:function(f,x,C){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:x,overlay:C}),this.options.sortLayers&&this._layers.sort(o(function(P,V){return this.options.sortFunction(P.layer,V.layer,P.name,V.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Wl(this._baseLayersList),Wl(this._overlaysList),this._layerControlInputs=[];var f,x,C,P,V=0;for(C=0;C<this._layers.length;C++)P=this._layers[C],this._addItem(P),x=x||P.overlay,f=f||!P.overlay,V+=P.overlay?0:1;return this.options.hideSingleBase&&(f=f&&V>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=x&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var x=this._getLayer(l(f.target)),C=x.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;C&&this._map.fire(C,x)},_createRadioElement:function(f,x){var C='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(x?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=C,P.firstChild},_addItem:function(f){var x=document.createElement("label"),C=this._map.hasLayer(f.layer),P;f.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=C):P=this._createRadioElement("leaflet-base-layers_"+l(this),C),this._layerControlInputs.push(P),P.layerId=l(f.layer),un(P,"click",this._onInputClick,this);var V=document.createElement("span");V.innerHTML=" "+f.name;var re=document.createElement("span");x.appendChild(re),re.appendChild(P),re.appendChild(V);var ye=f.overlay?this._overlaysList:this._baseLayersList;return ye.appendChild(x),this._checkDisabledLayers(),x},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,x,C,P=[],V=[];this._handlingClick=!0;for(var re=f.length-1;re>=0;re--)x=f[re],C=this._getLayer(x.layerId).layer,x.checked?P.push(C):x.checked||V.push(C);for(re=0;re<V.length;re++)this._map.hasLayer(V[re])&&this._map.removeLayer(V[re]);for(re=0;re<P.length;re++)this._map.hasLayer(P[re])||this._map.addLayer(P[re]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,x,C,P=this._map.getZoom(),V=f.length-1;V>=0;V--)x=f[V],C=this._getLayer(x.layerId).layer,x.disabled=C.options.minZoom!==void 0&&P<C.options.minZoom||C.options.maxZoom!==void 0&&P>C.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,un(f,"click",as),this.expand();var x=this;setTimeout(function(){On(f,"click",as),x._preventClick=!1})}}),Bc=function(f,x,C){return new Om(f,x,C)},Ao=ps.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var x="leaflet-control-zoom",C=vn("div",x+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,x+"-in",C,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,x+"-out",C,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),C},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,x,C,P,V){var re=vn("a",C,P);return re.innerHTML=f,re.href="#",re.title=x,re.setAttribute("role","button"),re.setAttribute("aria-label",x),Fu(re),un(re,"click",Eo),un(re,"click",V,this),un(re,"click",this._refocusOnMap,this),re},_updateDisabled:function(){var f=this._map,x="leaflet-disabled";Zn(this._zoomInButton,x),Zn(this._zoomOutButton,x),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(fn(this._zoomOutButton,x),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(fn(this._zoomInButton,x),this._zoomInButton.setAttribute("aria-disabled","true"))}});Tn.mergeOptions({zoomControl:!0}),Tn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ao,this.addControl(this.zoomControl))});var Of=function(f){return new Ao(f)},zc=ps.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var x="leaflet-control-scale",C=vn("div",x),P=this.options;return this._addScales(P,x+"-line",C),f.on(P.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),C},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,x,C){f.metric&&(this._mScale=vn("div",x,C)),f.imperial&&(this._iScale=vn("div",x,C))},_update:function(){var f=this._map,x=f.getSize().y/2,C=f.distance(f.containerPointToLatLng([0,x]),f.containerPointToLatLng([this.options.maxWidth,x]));this._updateScales(C)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var x=this._getRoundNum(f),C=x<1e3?x+" m":x/1e3+" km";this._updateScale(this._mScale,C,x/f)},_updateImperial:function(f){var x=f*3.2808399,C,P,V;x>5280?(C=x/5280,P=this._getRoundNum(C),this._updateScale(this._iScale,P+" mi",P/C)):(V=this._getRoundNum(x),this._updateScale(this._iScale,V+" ft",V/x))},_updateScale:function(f,x,C){f.style.width=Math.round(this.options.maxWidth*C)+"px",f.innerHTML=x},_getRoundNum:function(f){var x=Math.pow(10,(Math.floor(f)+"").length-1),C=f/x;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:1,x*C}}),Z0=function(f){return new zc(f)},Wh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Mf=ps.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ge.inlineSvg?Wh+" ":"")+"Leaflet</a>"},initialize:function(f){g(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=vn("div","leaflet-control-attribution"),Fu(this._container);for(var x in f._layers)f._layers[x].getAttribution&&this.addAttribution(f._layers[x].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var x in this._attributions)this._attributions[x]&&f.push(x);var C=[];this.options.prefix&&C.push(this.options.prefix),f.length&&C.push(f.join(", ")),this._container.innerHTML=C.join(' <span aria-hidden="true">|</span> ')}}});Tn.mergeOptions({attributionControl:!0}),Tn.addInitHook(function(){this.options.attributionControl&&new Mf().addTo(this)});var Ff=function(f){return new Mf(f)};ps.Layers=Om,ps.Zoom=Ao,ps.Scale=zc,ps.Attribution=Mf,To.layers=Bc,To.zoom=Of,To.scale=Z0,To.attribution=Ff;var eo=W.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});eo.addTo=function(f,x){return f.addHandler(x,this),this};var Mm={Events:H},zu=Ge.touch?"touchstart mousedown":"mousedown",aa=G.extend({options:{clickTolerance:3},initialize:function(f,x,C,P){g(this,P),this._element=f,this._dragStartTarget=x||f,this._preventOutline=C},enable:function(){this._enabled||(un(this._dragStartTarget,zu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(aa._dragging===this&&this.finishDrag(!0),On(this._dragStartTarget,zu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!Du(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){aa._dragging===this&&this.finishDrag();return}if(!(aa._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(aa._dragging=this,this._preventOutline&&Bh(this._element),Lf(),$u(),!this._moving)){this.fire("down");var x=f.touches?f.touches[0]:f,C=Lm(this._element);this._startPoint=new B(x.clientX,x.clientY),this._startPos=ll(this._element),this._parentScale=zh(C);var P=f.type==="mousedown";un(document,P?"mousemove":"touchmove",this._onMove,this),un(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var x=f.touches&&f.touches.length===1?f.touches[0]:f,C=new B(x.clientX,x.clientY)._subtract(this._startPoint);!C.x&&!C.y||Math.abs(C.x)+Math.abs(C.y)<this.options.clickTolerance||(C.x/=this._parentScale.x,C.y/=this._parentScale.y,as(f),this._moved||(this.fire("dragstart"),this._moved=!0,fn(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),fn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(C),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),es(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){Zn(document.body,"leaflet-dragging"),this._lastTarget&&(Zn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),On(document,"mousemove touchmove",this._onMove,this),On(document,"mouseup touchend touchcancel",this._onUp,this),Pa(),Gl();var x=this._moved&&this._moving;this._moving=!1,aa._dragging=!1,x&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function Uh(f,x,C){var P,V=[1,4,2,8],re,ye,De,je,et,Ct,Wt,Cn;for(re=0,Ct=f.length;re<Ct;re++)f[re]._code=We(f[re],x);for(De=0;De<4;De++){for(Wt=V[De],P=[],re=0,Ct=f.length,ye=Ct-1;re<Ct;ye=re++)je=f[re],et=f[ye],je._code&Wt?et._code&Wt||(Cn=Le(et,je,Wt,x,C),Cn._code=We(Cn,x),P.push(Cn)):(et._code&Wt&&(Cn=Le(et,je,Wt,x,C),Cn._code=We(Cn,x),P.push(Cn)),P.push(je));f=P}return f}function Bf(f,x){var C,P,V,re,ye,De,je,et,Ct;if(!f||f.length===0)throw new Error("latlngs not passed");At(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Wt=Z([0,0]),Cn=q(f),Mr=Cn.getNorthWest().distanceTo(Cn.getSouthWest())*Cn.getNorthEast().distanceTo(Cn.getNorthWest());Mr<1700&&(Wt=zf(f));var Rs=f.length,ha=[];for(C=0;C<Rs;C++){var io=Z(f[C]);ha.push(x.project(Z([io.lat-Wt.lat,io.lng-Wt.lng])))}for(De=je=et=0,C=0,P=Rs-1;C<Rs;P=C++)V=ha[C],re=ha[P],ye=V.y*re.x-re.y*V.x,je+=(V.x+re.x)*ye,et+=(V.y+re.y)*ye,De+=ye*3;De===0?Ct=ha[0]:Ct=[je/De,et/De];var Jh=x.unproject(ne(Ct));return Z([Jh.lat+Wt.lat,Jh.lng+Wt.lng])}function zf(f){for(var x=0,C=0,P=0,V=0;V<f.length;V++){var re=Z(f[V]);x+=re.lat,C+=re.lng,P++}return Z([x/P,C/P])}var Hh={__proto__:null,clipPolygon:Uh,polygonCenter:Bf,centroid:zf};function jc(f,x){if(!x||!f.length)return f.slice();var C=x*x;return f=ee(f,C),f=jf(f,C),f}function Gh(f,x,C){return Math.sqrt(xt(f,x,C,!0))}function Vc(f,x,C){return xt(f,x,C)}function jf(f,x){var C=f.length,P=typeof Uint8Array<"u"?Uint8Array:Array,V=new P(C);V[0]=V[C-1]=1,A(f,V,x,0,C-1);var re,ye=[];for(re=0;re<C;re++)V[re]&&ye.push(f[re]);return ye}function A(f,x,C,P,V){var re=0,ye,De,je;for(De=P+1;De<=V-1;De++)je=xt(f[De],f[P],f[V],!0),je>re&&(ye=De,re=je);re>C&&(x[ye]=1,A(f,x,C,P,ye),A(f,x,C,ye,V))}function ee(f,x){for(var C=[f[0]],P=1,V=0,re=f.length;P<re;P++)st(f[P],f[V])>x&&(C.push(f[P]),V=P);return V<re-1&&C.push(f[re-1]),C}var pe;function be(f,x,C,P,V){var re=P?pe:We(f,C),ye=We(x,C),De,je,et;for(pe=ye;;){if(!(re|ye))return[f,x];if(re&ye)return!1;De=re||ye,je=Le(f,x,De,C,V),et=We(je,C),De===re?(f=je,re=et):(x=je,ye=et)}}function Le(f,x,C,P,V){var re=x.x-f.x,ye=x.y-f.y,De=P.min,je=P.max,et,Ct;return C&8?(et=f.x+re*(je.y-f.y)/ye,Ct=je.y):C&4?(et=f.x+re*(De.y-f.y)/ye,Ct=De.y):C&2?(et=je.x,Ct=f.y+ye*(je.x-f.x)/re):C&1&&(et=De.x,Ct=f.y+ye*(De.x-f.x)/re),new B(et,Ct,V)}function We(f,x){var C=0;return f.x<x.min.x?C|=1:f.x>x.max.x&&(C|=2),f.y<x.min.y?C|=4:f.y>x.max.y&&(C|=8),C}function st(f,x){var C=x.x-f.x,P=x.y-f.y;return C*C+P*P}function xt(f,x,C,P){var V=x.x,re=x.y,ye=C.x-V,De=C.y-re,je=ye*ye+De*De,et;return je>0&&(et=((f.x-V)*ye+(f.y-re)*De)/je,et>1?(V=C.x,re=C.y):et>0&&(V+=ye*et,re+=De*et)),ye=f.x-V,De=f.y-re,P?ye*ye+De*De:new B(V,re)}function At(f){return!w(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function hn(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),At(f)}function cn(f,x){var C,P,V,re,ye,De,je,et;if(!f||f.length===0)throw new Error("latlngs not passed");At(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Ct=Z([0,0]),Wt=q(f),Cn=Wt.getNorthWest().distanceTo(Wt.getSouthWest())*Wt.getNorthEast().distanceTo(Wt.getNorthWest());Cn<1700&&(Ct=zf(f));var Mr=f.length,Rs=[];for(C=0;C<Mr;C++){var ha=Z(f[C]);Rs.push(x.project(Z([ha.lat-Ct.lat,ha.lng-Ct.lng])))}for(C=0,P=0;C<Mr-1;C++)P+=Rs[C].distanceTo(Rs[C+1])/2;if(P===0)et=Rs[0];else for(C=0,re=0;C<Mr-1;C++)if(ye=Rs[C],De=Rs[C+1],V=ye.distanceTo(De),re+=V,re>P){je=(re-P)/V,et=[De.x-je*(De.x-ye.x),De.y-je*(De.y-ye.y)];break}var io=x.unproject(ne(et));return Z([io.lat+Ct.lat,io.lng+Ct.lng])}var Bn={__proto__:null,simplify:jc,pointToSegmentDistance:Gh,closestPointOnSegment:Vc,clipSegment:be,_getEdgeIntersection:Le,_getBitCode:We,_sqClosestPointOnSegment:xt,isFlat:At,_flat:hn,polylineCenter:cn},Ai={project:function(f){return new B(f.lng,f.lat)},unproject:function(f){return new X(f.y,f.x)},bounds:new le([-180,-90],[180,90])},Oi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new le([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var x=Math.PI/180,C=this.R,P=f.lat*x,V=this.R_MINOR/C,re=Math.sqrt(1-V*V),ye=re*Math.sin(P),De=Math.tan(Math.PI/4-P/2)/Math.pow((1-ye)/(1+ye),re/2);return P=-C*Math.log(Math.max(De,1e-10)),new B(f.lng*x*C,P)},unproject:function(f){for(var x=180/Math.PI,C=this.R,P=this.R_MINOR/C,V=Math.sqrt(1-P*P),re=Math.exp(-f.y/C),ye=Math.PI/2-2*Math.atan(re),De=0,je=.1,et;De<15&&Math.abs(je)>1e-7;De++)et=V*Math.sin(ye),et=Math.pow((1-et)/(1+et),V/2),je=Math.PI/2-2*Math.atan(re*et)-ye,ye+=je;return new X(ye*x,f.x*x/C)}},ms={__proto__:null,LonLat:Ai,Mercator:Oi,SphericalMercator:Pe},br=s({},fe,{code:"EPSG:3395",projection:Oi,transformation:function(){var f=.5/(Math.PI*Oi.R);return Fe(f,.5,-f,.5)}()}),As=s({},fe,{code:"EPSG:4326",projection:Ai,transformation:Fe(1/180,1,-1/180,.5)}),Da=s({},ue,{projection:Ai,transformation:Fe(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,x){var C=x.lng-f.lng,P=x.lat-f.lat;return Math.sqrt(C*C+P*P)},infinite:!0});ue.Earth=fe,ue.EPSG3395=br,ue.EPSG3857=qe,ue.EPSG900913=Qe,ue.EPSG4326=As,ue.Simple=Da;var Hi=G.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[l(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[l(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var x=f.target;if(x.hasLayer(this)){if(this._map=x,this._zoomAnimated=x._zoomAnimated,this.getEvents){var C=this.getEvents();x.on(C,this),this.once("remove",function(){x.off(C,this)},this)}this.onAdd(x),this.fire("add"),x.fire("layeradd",{layer:this})}}});Tn.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var x=l(f);return this._layers[x]?this:(this._layers[x]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var x=l(f);return this._layers[x]?(this._loaded&&f.onRemove(this),delete this._layers[x],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return l(f)in this._layers},eachLayer:function(f,x){for(var C in this._layers)f.call(x,this._layers[C]);return this},_addLayers:function(f){f=f?w(f)?f:[f]:[];for(var x=0,C=f.length;x<C;x++)this.addLayer(f[x])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[l(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var x=l(f);this._zoomBoundLayers[x]&&(delete this._zoomBoundLayers[x],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,x=-1/0,C=this._getZoomSpan();for(var P in this._zoomBoundLayers){var V=this._zoomBoundLayers[P].options;f=V.minZoom===void 0?f:Math.min(f,V.minZoom),x=V.maxZoom===void 0?x:Math.max(x,V.maxZoom)}this._layersMaxZoom=x===-1/0?void 0:x,this._layersMinZoom=f===1/0?void 0:f,C!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $r=Hi.extend({initialize:function(f,x){g(this,x),this._layers={};var C,P;if(f)for(C=0,P=f.length;C<P;C++)this.addLayer(f[C])},addLayer:function(f){var x=this.getLayerId(f);return this._layers[x]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var x=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[x]&&this._map.removeLayer(this._layers[x]),delete this._layers[x],this},hasLayer:function(f){var x=typeof f=="number"?f:this.getLayerId(f);return x in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var x=Array.prototype.slice.call(arguments,1),C,P;for(C in this._layers)P=this._layers[C],P[f]&&P[f].apply(P,x);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,x){for(var C in this._layers)f.call(x,this._layers[C]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return l(f)}}),Fm=function(f,x){return new $r(f,x)},Ro=$r.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),$r.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),$r.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new j;for(var x in this._layers){var C=this._layers[x];f.extend(C.getBounds?C.getBounds():C.getLatLng())}return f}}),Vf=function(f,x){return new Ro(f,x)},$a=W.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){g(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,x){var C=this._getIconUrl(f);if(!C){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(C,x&&x.tagName==="IMG"?x:null);return this._setIconStyles(P,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(f,x){var C=this.options,P=C[x+"Size"];typeof P=="number"&&(P=[P,P]);var V=ne(P),re=ne(x==="shadow"&&C.shadowAnchor||C.iconAnchor||V&&V.divideBy(2,!0));f.className="leaflet-marker-"+x+" "+(C.className||""),re&&(f.style.marginLeft=-re.x+"px",f.style.marginTop=-re.y+"px"),V&&(f.style.width=V.x+"px",f.style.height=V.y+"px")},_createImg:function(f,x){return x=x||document.createElement("img"),x.src=f,x},_getIconUrl:function(f){return Ge.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function Wf(f){return new $a(f)}var Yl=$a.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof Yl.imagePath!="string"&&(Yl.imagePath=this._detectIconPath()),(this.options.imagePath||Yl.imagePath)+$a.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var x=function(C,P,V){var re=P.exec(C);return re&&re[V]};return f=x(f,/^url\((['"])?(.+)\1\)$/,2),f&&x(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=vn("div","leaflet-default-icon-path",document.body),x=Yn(f,"background-image")||Yn(f,"backgroundImage");if(document.body.removeChild(f),x=this._stripUrl(x),x)return x;var C=document.querySelector('link[href$="leaflet.css"]');return C?C.href.substring(0,C.href.length-11-1):""}}),ju=eo.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new aa(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),fn(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Zn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var x=this._marker,C=x._map,P=this._marker.options.autoPanSpeed,V=this._marker.options.autoPanPadding,re=ll(x._icon),ye=C.getPixelBounds(),De=C.getPixelOrigin(),je=M(ye.min._subtract(De).add(V),ye.max._subtract(De).subtract(V));if(!je.contains(re)){var et=ne((Math.max(je.max.x,re.x)-je.max.x)/(ye.max.x-je.max.x)-(Math.min(je.min.x,re.x)-je.min.x)/(ye.min.x-je.min.x),(Math.max(je.max.y,re.y)-je.max.y)/(ye.max.y-je.max.y)-(Math.min(je.min.y,re.y)-je.min.y)/(ye.min.y-je.min.y)).multiplyBy(P);C.panBy(et,{animate:!1}),this._draggable._newPos._add(et),this._draggable._startPos._add(et),es(x._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=R(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&($(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,f)))},_onDrag:function(f){var x=this._marker,C=x._shadow,P=ll(x._icon),V=x._map.layerPointToLatLng(P);C&&es(C,P),x._latlng=V,f.latlng=V,f.oldLatLng=this._oldLatLng,x.fire("move",f).fire("drag",f)},_onDragEnd:function(f){$(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),gs=Hi.extend({options:{icon:new Yl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,x){g(this,x),this._latlng=Z(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var x=this._latlng;return this._latlng=Z(f),this.update(),this.fire("move",{oldLatLng:x,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,x="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),C=f.icon.createIcon(this._icon),P=!1;C!==this._icon&&(this._icon&&this._removeIcon(),P=!0,f.title&&(C.title=f.title),C.tagName==="IMG"&&(C.alt=f.alt||"")),fn(C,x),f.keyboard&&(C.tabIndex="0",C.setAttribute("role","button")),this._icon=C,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&un(C,"focus",this._panOnFocus,this);var V=f.icon.createShadow(this._shadow),re=!1;V!==this._shadow&&(this._removeShadow(),re=!0),V&&(fn(V,x),V.alt=""),this._shadow=V,f.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),V&&re&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&On(this._icon,"focus",this._panOnFocus,this),an(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&an(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&es(this._icon,f),this._shadow&&es(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var x=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(x)},_initInteraction:function(){if(this.options.interactive&&(fn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ju)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ju(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&yr(this._icon,f),this._shadow&&yr(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var x=this.options.icon.options,C=x.iconSize?ne(x.iconSize):ne(0,0),P=x.iconAnchor?ne(x.iconAnchor):ne(0,0);f.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:C.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function qh(f,x){return new gs(f,x)}var Lo=Hi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return g(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Zl=Lo.extend({options:{fill:!0,radius:10},initialize:function(f,x){g(this,x),this._latlng=Z(f),this._radius=this.options.radius},setLatLng:function(f){var x=this._latlng;return this._latlng=Z(f),this.redraw(),this.fire("move",{oldLatLng:x,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var x=f&&f.radius||this._radius;return Lo.prototype.setStyle.call(this,f),this.setRadius(x),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,x=this._radiusY||f,C=this._clickTolerance(),P=[f+C,x+C];this._pxBounds=new le(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Uf(f,x){return new Zl(f,x)}var xr=Zl.extend({initialize:function(f,x,C){if(typeof x=="number"&&(x=s({},C,{radius:x})),g(this,x),this._latlng=Z(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new j(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:Lo.prototype.setStyle,_project:function(){var f=this._latlng.lng,x=this._latlng.lat,C=this._map,P=C.options.crs;if(P.distance===fe.distance){var V=Math.PI/180,re=this._mRadius/fe.R/V,ye=C.project([x+re,f]),De=C.project([x-re,f]),je=ye.add(De).divideBy(2),et=C.unproject(je).lat,Ct=Math.acos((Math.cos(re*V)-Math.sin(x*V)*Math.sin(et*V))/(Math.cos(x*V)*Math.cos(et*V)))/V;(isNaN(Ct)||Ct===0)&&(Ct=re/Math.cos(Math.PI/180*x)),this._point=je.subtract(C.getPixelOrigin()),this._radius=isNaN(Ct)?0:je.x-C.project([et,f-Ct]).x,this._radiusY=je.y-ye.y}else{var Wt=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=C.latLngToLayerPoint(this._latlng),this._radius=this._point.x-C.latLngToLayerPoint(Wt).x}this._updateBounds()}});function Q0(f,x,C){return new xr(f,x,C)}var Po=Lo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,x){g(this,x),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var x=1/0,C=null,P=xt,V,re,ye=0,De=this._parts.length;ye<De;ye++)for(var je=this._parts[ye],et=1,Ct=je.length;et<Ct;et++){V=je[et-1],re=je[et];var Wt=P(f,V,re,!0);Wt<x&&(x=Wt,C=P(f,V,re))}return C&&(C.distance=Math.sqrt(x)),C},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return cn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,x){return x=x||this._defaultShape(),f=Z(f),x.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new j,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return At(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var x=[],C=At(f),P=0,V=f.length;P<V;P++)C?(x[P]=Z(f[P]),this._bounds.extend(x[P])):x[P]=this._convertLatLngs(f[P]);return x},_project:function(){var f=new le;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),x=new B(f,f);this._rawPxBounds&&(this._pxBounds=new le([this._rawPxBounds.min.subtract(x),this._rawPxBounds.max.add(x)]))},_projectLatlngs:function(f,x,C){var P=f[0]instanceof X,V=f.length,re,ye;if(P){for(ye=[],re=0;re<V;re++)ye[re]=this._map.latLngToLayerPoint(f[re]),C.extend(ye[re]);x.push(ye)}else for(re=0;re<V;re++)this._projectLatlngs(f[re],x,C)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var x=this._parts,C,P,V,re,ye,De,je;for(C=0,V=0,re=this._rings.length;C<re;C++)for(je=this._rings[C],P=0,ye=je.length;P<ye-1;P++)De=be(je[P],je[P+1],f,P,!0),De&&(x[V]=x[V]||[],x[V].push(De[0]),(De[1]!==je[P+1]||P===ye-2)&&(x[V].push(De[1]),V++))}},_simplifyPoints:function(){for(var f=this._parts,x=this.options.smoothFactor,C=0,P=f.length;C<P;C++)f[C]=jc(f[C],x)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,x){var C,P,V,re,ye,De,je=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(C=0,re=this._parts.length;C<re;C++)for(De=this._parts[C],P=0,ye=De.length,V=ye-1;P<ye;V=P++)if(!(!x&&P===0)&&Gh(f,De[V],De[P])<=je)return!0;return!1}});function Bm(f,x){return new Po(f,x)}Po._flat=hn;var tr=Po.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Bf(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var x=Po.prototype._convertLatLngs.call(this,f),C=x.length;return C>=2&&x[0]instanceof X&&x[0].equals(x[C-1])&&x.pop(),x},_setLatLngs:function(f){Po.prototype._setLatLngs.call(this,f),At(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return At(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,x=this.options.weight,C=new B(x,x);if(f=new le(f.min.subtract(C),f.max.add(C)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,V=this._rings.length,re;P<V;P++)re=Uh(this._rings[P],f,!0),re.length&&this._parts.push(re)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var x=!1,C,P,V,re,ye,De,je,et;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(re=0,je=this._parts.length;re<je;re++)for(C=this._parts[re],ye=0,et=C.length,De=et-1;ye<et;De=ye++)P=C[ye],V=C[De],P.y>f.y!=V.y>f.y&&f.x<(V.x-P.x)*(f.y-P.y)/(V.y-P.y)+P.x&&(x=!x);return x||Po.prototype._containsPoint.call(this,f,!0)}});function Kh(f,x){return new tr(f,x)}var la=Ro.extend({initialize:function(f,x){g(this,x),this._layers={},f&&this.addData(f)},addData:function(f){var x=w(f)?f:f.features,C,P,V;if(x){for(C=0,P=x.length;C<P;C++)V=x[C],(V.geometries||V.geometry||V.features||V.coordinates)&&this.addData(V);return this}var re=this.options;if(re.filter&&!re.filter(f))return this;var ye=Vu(f,re);return ye?(ye.feature=ca(f),ye.defaultOptions=ye.options,this.resetStyle(ye),re.onEachFeature&&re.onEachFeature(f,ye),this.addLayer(ye)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=s({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(x){this._setLayerStyle(x,f)},this)},_setLayerStyle:function(f,x){f.setStyle&&(typeof x=="function"&&(x=x(f.feature)),f.setStyle(x))}});function Vu(f,x){var C=f.type==="Feature"?f.geometry:f,P=C?C.coordinates:null,V=[],re=x&&x.pointToLayer,ye=x&&x.coordsToLatLng||Jl,De,je,et,Ct;if(!P&&!C)return null;switch(C.type){case"Point":return De=ye(P),Ql(re,f,De,x);case"MultiPoint":for(et=0,Ct=P.length;et<Ct;et++)De=ye(P[et]),V.push(Ql(re,f,De,x));return new Ro(V);case"LineString":case"MultiLineString":return je=nr(P,C.type==="LineString"?0:1,ye),new Po(je,x);case"Polygon":case"MultiPolygon":return je=nr(P,C.type==="Polygon"?1:2,ye),new tr(je,x);case"GeometryCollection":for(et=0,Ct=C.geometries.length;et<Ct;et++){var Wt=Vu({geometry:C.geometries[et],type:"Feature",properties:f.properties},x);Wt&&V.push(Wt)}return new Ro(V);case"FeatureCollection":for(et=0,Ct=C.features.length;et<Ct;et++){var Cn=Vu(C.features[et],x);Cn&&V.push(Cn)}return new Ro(V);default:throw new Error("Invalid GeoJSON object.")}}function Ql(f,x,C,P){return f?f(x,C):new gs(C,P&&P.markersInheritOptions&&P)}function Jl(f){return new X(f[1],f[0],f[2])}function nr(f,x,C){for(var P=[],V=0,re=f.length,ye;V<re;V++)ye=x?nr(f[V],x-1,C):(C||Jl)(f[V]),P.push(ye);return P}function ir(f,x){return f=Z(f),f.alt!==void 0?[d(f.lng,x),d(f.lat,x),d(f.alt,x)]:[d(f.lng,x),d(f.lat,x)]}function Oa(f,x,C,P){for(var V=[],re=0,ye=f.length;re<ye;re++)V.push(x?Oa(f[re],At(f[re])?0:x-1,C,P):ir(f[re],P));return!x&&C&&V.length>0&&V.push(V[0].slice()),V}function to(f,x){return f.feature?s({},f.feature,{geometry:x}):ca(x)}function ca(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var Wc={toGeoJSON:function(f){return to(this,{type:"Point",coordinates:ir(this.getLatLng(),f)})}};gs.include(Wc),xr.include(Wc),Zl.include(Wc),Po.include({toGeoJSON:function(f){var x=!At(this._latlngs),C=Oa(this._latlngs,x?1:0,!1,f);return to(this,{type:(x?"Multi":"")+"LineString",coordinates:C})}}),tr.include({toGeoJSON:function(f){var x=!At(this._latlngs),C=x&&!At(this._latlngs[0]),P=Oa(this._latlngs,C?2:x?1:0,!0,f);return x||(P=[P]),to(this,{type:(C?"Multi":"")+"Polygon",coordinates:P})}}),$r.include({toMultiPoint:function(f){var x=[];return this.eachLayer(function(C){x.push(C.toGeoJSON(f).geometry.coordinates)}),to(this,{type:"MultiPoint",coordinates:x})},toGeoJSON:function(f){var x=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(x==="MultiPoint")return this.toMultiPoint(f);var C=x==="GeometryCollection",P=[];return this.eachLayer(function(V){if(V.toGeoJSON){var re=V.toGeoJSON(f);if(C)P.push(re.geometry);else{var ye=ca(re);ye.type==="FeatureCollection"?P.push.apply(P,ye.features):P.push(ye)}}}),C?to(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function cl(f,x){return new la(f,x)}var ls=cl,Uc=Hi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,x,C){this._url=f,this._bounds=q(x),g(this,C)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(fn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){an(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&Ul(this._image),this},bringToBack:function(){return this._map&&Hl(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=q(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",x=this._image=f?this._url:vn("img");if(fn(x,"leaflet-image-layer"),this._zoomAnimated&&fn(x,"leaflet-zoom-animated"),this.options.className&&fn(x,this.options.className),x.onselectstart=h,x.onmousemove=h,x.onload=o(this.fire,this,"load"),x.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=x.src;return}x.src=this._url,x.alt=this.options.alt},_animateZoom:function(f){var x=this._map.getZoomScale(f.zoom),C=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;al(this._image,C,x)},_reset:function(){var f=this._image,x=new le(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),C=x.getSize();es(f,x.min),f.style.width=C.x+"px",f.style.height=C.y+"px"},_updateOpacity:function(){yr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),Or=function(f,x,C){return new Uc(f,x,C)},Do=Uc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",x=this._image=f?this._url:vn("video");if(fn(x,"leaflet-image-layer"),this._zoomAnimated&&fn(x,"leaflet-zoom-animated"),this.options.className&&fn(x,this.options.className),x.onselectstart=h,x.onmousemove=h,x.onloadeddata=o(this.fire,this,"load"),f){for(var C=x.getElementsByTagName("source"),P=[],V=0;V<C.length;V++)P.push(C[V].src);this._url=C.length>0?P:[x.src];return}w(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(x.style,"objectFit")&&(x.style.objectFit="fill"),x.autoplay=!!this.options.autoplay,x.loop=!!this.options.loop,x.muted=!!this.options.muted,x.playsInline=!!this.options.playsInline;for(var re=0;re<this._url.length;re++){var ye=vn("source");ye.src=this._url[re],x.appendChild(ye)}}});function Xh(f,x,C){return new Do(f,x,C)}var Hf=Uc.extend({_initImage:function(){var f=this._image=this._url;fn(f,"leaflet-image-layer"),this._zoomAnimated&&fn(f,"leaflet-zoom-animated"),this.options.className&&fn(f,this.options.className),f.onselectstart=h,f.onmousemove=h}});function Gf(f,x,C){return new Hf(f,x,C)}var wr=Hi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,x){f&&(f instanceof X||w(f))?(this._latlng=Z(f),g(this,x)):(g(this,f),this._source=x),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&yr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&yr(this._container,1),this.bringToFront(),this.options.interactive&&(fn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(yr(this._container,0),this._removeTimeout=setTimeout(o(an,void 0,this._container),200)):an(this._container),this.options.interactive&&(Zn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=Z(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ul(this._container),this},bringToBack:function(){return this._map&&Hl(this._container),this},_prepareOpen:function(f){var x=this._source;if(!x._map)return!1;if(x instanceof Ro){x=null;var C=this._source._layers;for(var P in C)if(C[P]._map){x=C[P];break}if(!x)return!1;this._source=x}if(!f)if(x.getCenter)f=x.getCenter();else if(x.getLatLng)f=x.getLatLng();else if(x.getBounds)f=x.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,x=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof x=="string")f.innerHTML=x;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(x)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),x=ne(this.options.offset),C=this._getAnchor();this._zoomAnimated?es(this._container,f.add(C)):x=x.add(f).add(C);var P=this._containerBottom=-x.y,V=this._containerLeft=-Math.round(this._containerWidth/2)+x.x;this._container.style.bottom=P+"px",this._container.style.left=V+"px"}},_getAnchor:function(){return[0,0]}});Tn.include({_initOverlay:function(f,x,C,P){var V=x;return V instanceof f||(V=new f(P).setContent(x)),C&&V.setLatLng(C),V}}),Hi.include({_initOverlay:function(f,x,C,P){var V=C;return V instanceof f?(g(V,P),V._source=this):(V=x&&!P?x:new f(P,this),V.setContent(C)),V}});var ul=wr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,wr.prototype.openOn.call(this,f)},onAdd:function(f){wr.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Lo||this._source.on("preclick",Kl))},onRemove:function(f){wr.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Lo||this._source.off("preclick",Kl))},getEvents:function(){var f=wr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",x=this._container=vn("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),C=this._wrapper=vn("div",f+"-content-wrapper",x);if(this._contentNode=vn("div",f+"-content",C),Fu(x),Df(this._contentNode),un(x,"contextmenu",Kl),this._tipContainer=vn("div",f+"-tip-container",x),this._tip=vn("div",f+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=vn("a",f+"-close-button",x);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',un(P,"click",function(V){as(V),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,x=f.style;x.width="",x.whiteSpace="nowrap";var C=f.offsetWidth;C=Math.min(C,this.options.maxWidth),C=Math.max(C,this.options.minWidth),x.width=C+1+"px",x.whiteSpace="",x.height="";var P=f.offsetHeight,V=this.options.maxHeight,re="leaflet-popup-scrolled";V&&P>V?(x.height=V+"px",fn(f,re)):Zn(f,re),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var x=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),C=this._getAnchor();es(this._container,x.add(C))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,x=parseInt(Yn(this._container,"marginBottom"),10)||0,C=this._container.offsetHeight+x,P=this._containerWidth,V=new B(this._containerLeft,-C-this._containerBottom);V._add(ll(this._container));var re=f.layerPointToContainerPoint(V),ye=ne(this.options.autoPanPadding),De=ne(this.options.autoPanPaddingTopLeft||ye),je=ne(this.options.autoPanPaddingBottomRight||ye),et=f.getSize(),Ct=0,Wt=0;re.x+P+je.x>et.x&&(Ct=re.x+P-et.x+je.x),re.x-Ct-De.x<0&&(Ct=re.x-De.x),re.y+C+je.y>et.y&&(Wt=re.y+C-et.y+je.y),re.y-Wt-De.y<0&&(Wt=re.y-De.y),(Ct||Wt)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([Ct,Wt]))}},_getAnchor:function(){return ne(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Hc=function(f,x){return new ul(f,x)};Tn.mergeOptions({closePopupOnClick:!0}),Tn.include({openPopup:function(f,x,C){return this._initOverlay(ul,f,x,C).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),Hi.include({bindPopup:function(f,x){return this._popup=this._initOverlay(ul,this._popup,f,x),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof Ro||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){Eo(f);var x=f.layer||f.target;if(this._popup._source===x&&!(x instanceof Lo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=x,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var hl=wr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){wr.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){wr.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=wr.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",x=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=vn("div",x),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var x,C,P=this._map,V=this._container,re=P.latLngToContainerPoint(P.getCenter()),ye=P.layerPointToContainerPoint(f),De=this.options.direction,je=V.offsetWidth,et=V.offsetHeight,Ct=ne(this.options.offset),Wt=this._getAnchor();De==="top"?(x=je/2,C=et):De==="bottom"?(x=je/2,C=0):De==="center"?(x=je/2,C=et/2):De==="right"?(x=0,C=et/2):De==="left"?(x=je,C=et/2):ye.x<re.x?(De="right",x=0,C=et/2):(De="left",x=je+(Ct.x+Wt.x)*2,C=et/2),f=f.subtract(ne(x,C,!0)).add(Ct).add(Wt),Zn(V,"leaflet-tooltip-right"),Zn(V,"leaflet-tooltip-left"),Zn(V,"leaflet-tooltip-top"),Zn(V,"leaflet-tooltip-bottom"),fn(V,"leaflet-tooltip-"+De),es(V,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&yr(this._container,f)},_animateZoom:function(f){var x=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(x)},_getAnchor:function(){return ne(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Yh=function(f,x){return new hl(f,x)};Tn.include({openTooltip:function(f,x,C){return this._initOverlay(hl,f,x,C).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),Hi.include({bindTooltip:function(f,x){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(hl,this._tooltip,f,x),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var x=f?"off":"on",C={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?C.add=this._openTooltip:(C.mouseover=this._openTooltip,C.mouseout=this.closeTooltip,C.click=this._openTooltip,this._map?this._addFocusListeners():C.add=this._addFocusListeners),this._tooltip.options.sticky&&(C.mousemove=this._moveTooltip),this[x](C),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof Ro||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var x=typeof f.getElement=="function"&&f.getElement();x&&(un(x,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),un(x,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var x=typeof f.getElement=="function"&&f.getElement();x&&x.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var x=this;this._map.once("moveend",function(){x._openOnceFlag=!1,x._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var x=f.latlng,C,P;this._tooltip.options.sticky&&f.originalEvent&&(C=this._map.mouseEventToContainerPoint(f.originalEvent),P=this._map.containerPointToLayerPoint(C),x=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(x)}});var Gc=$a.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var x=f&&f.tagName==="DIV"?f:document.createElement("div"),C=this.options;if(C.html instanceof Element?(Wl(x),x.appendChild(C.html)):x.innerHTML=C.html!==!1?C.html:"",C.bgPos){var P=ne(C.bgPos);x.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(x,"icon"),x},createShadow:function(){return null}});function qc(f){return new Gc(f)}$a.Default=Yl;var ec=Hi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ge.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){g(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),an(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ul(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Hl(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof B?f:new B(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var x=this.getPane().children,C=-f(-1/0,1/0),P=0,V=x.length,re;P<V;P++)re=x[P].style.zIndex,x[P]!==this._container&&re&&(C=f(C,+re));isFinite(C)&&(this.options.zIndex=C+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ge.ielt9){yr(this._container,this.options.opacity);var f=+new Date,x=!1,C=!1;for(var P in this._tiles){var V=this._tiles[P];if(!(!V.current||!V.loaded)){var re=Math.min(1,(f-V.loaded)/200);yr(V.el,re),re<1?x=!0:(V.active?C=!0:this._onOpaqueTile(V),V.active=!0)}}C&&!this._noPrune&&this._pruneTiles(),x&&($(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=vn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,x=this.options.maxZoom;if(f!==void 0){for(var C in this._levels)C=Number(C),this._levels[C].el.children.length||C===f?(this._levels[C].el.style.zIndex=x-Math.abs(f-C),this._onUpdateLevel(C)):(an(this._levels[C].el),this._removeTilesAtZoom(C),this._onRemoveLevel(C),delete this._levels[C]);var P=this._levels[f],V=this._map;return P||(P=this._levels[f]={},P.el=vn("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=x,P.origin=V.project(V.unproject(V.getPixelOrigin()),f).round(),P.zoom=f,this._setZoomTransform(P,V.getCenter(),V.getZoom()),h(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var f,x,C=this._map.getZoom();if(C>this.options.maxZoom||C<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)x=this._tiles[f],x.retain=x.current;for(f in this._tiles)if(x=this._tiles[f],x.current&&!x.active){var P=x.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var x in this._tiles)this._tiles[x].coords.z===f&&this._removeTile(x)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)an(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,x,C,P){var V=Math.floor(f/2),re=Math.floor(x/2),ye=C-1,De=new B(+V,+re);De.z=+ye;var je=this._tileCoordsToKey(De),et=this._tiles[je];return et&&et.active?(et.retain=!0,!0):(et&&et.loaded&&(et.retain=!0),ye>P?this._retainParent(V,re,ye,P):!1)},_retainChildren:function(f,x,C,P){for(var V=2*f;V<2*f+2;V++)for(var re=2*x;re<2*x+2;re++){var ye=new B(V,re);ye.z=C+1;var De=this._tileCoordsToKey(ye),je=this._tiles[De];if(je&&je.active){je.retain=!0;continue}else je&&je.loaded&&(je.retain=!0);C+1<P&&this._retainChildren(V,re,C+1,P)}},_resetView:function(f){var x=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),x,x)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var x=this.options;return x.minNativeZoom!==void 0&&f<x.minNativeZoom?x.minNativeZoom:x.maxNativeZoom!==void 0&&x.maxNativeZoom<f?x.maxNativeZoom:f},_setView:function(f,x,C,P){var V=Math.round(x);this.options.maxZoom!==void 0&&V>this.options.maxZoom||this.options.minZoom!==void 0&&V<this.options.minZoom?V=void 0:V=this._clampZoom(V);var re=this.options.updateWhenZooming&&V!==this._tileZoom;(!P||re)&&(this._tileZoom=V,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),V!==void 0&&this._update(f),C||this._pruneTiles(),this._noPrune=!!C),this._setZoomTransforms(f,x)},_setZoomTransforms:function(f,x){for(var C in this._levels)this._setZoomTransform(this._levels[C],f,x)},_setZoomTransform:function(f,x,C){var P=this._map.getZoomScale(C,f.zoom),V=f.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(x,C)).round();Ge.any3d?al(f.el,V,P):es(f.el,V)},_resetGrid:function(){var f=this._map,x=f.options.crs,C=this._tileSize=this.getTileSize(),P=this._tileZoom,V=this._map.getPixelWorldBounds(this._tileZoom);V&&(this._globalTileRange=this._pxBoundsToTileRange(V)),this._wrapX=x.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,x.wrapLng[0]],P).x/C.x),Math.ceil(f.project([0,x.wrapLng[1]],P).x/C.y)],this._wrapY=x.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([x.wrapLat[0],0],P).y/C.x),Math.ceil(f.project([x.wrapLat[1],0],P).y/C.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var x=this._map,C=x._animatingZoom?Math.max(x._animateToZoom,x.getZoom()):x.getZoom(),P=x.getZoomScale(C,this._tileZoom),V=x.project(f,this._tileZoom).floor(),re=x.getSize().divideBy(P*2);return new le(V.subtract(re),V.add(re))},_update:function(f){var x=this._map;if(x){var C=this._clampZoom(x.getZoom());if(f===void 0&&(f=x.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(f),V=this._pxBoundsToTileRange(P),re=V.getCenter(),ye=[],De=this.options.keepBuffer,je=new le(V.getBottomLeft().subtract([De,-De]),V.getTopRight().add([De,-De]));if(!(isFinite(V.min.x)&&isFinite(V.min.y)&&isFinite(V.max.x)&&isFinite(V.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var et in this._tiles){var Ct=this._tiles[et].coords;(Ct.z!==this._tileZoom||!je.contains(new B(Ct.x,Ct.y)))&&(this._tiles[et].current=!1)}if(Math.abs(C-this._tileZoom)>1){this._setView(f,C);return}for(var Wt=V.min.y;Wt<=V.max.y;Wt++)for(var Cn=V.min.x;Cn<=V.max.x;Cn++){var Mr=new B(Cn,Wt);if(Mr.z=this._tileZoom,!!this._isValidTile(Mr)){var Rs=this._tiles[this._tileCoordsToKey(Mr)];Rs?Rs.current=!0:ye.push(Mr)}}if(ye.sort(function(io,Jh){return io.distanceTo(re)-Jh.distanceTo(re)}),ye.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ha=document.createDocumentFragment();for(Cn=0;Cn<ye.length;Cn++)this._addTile(ye[Cn],ha);this._level.el.appendChild(ha)}}}},_isValidTile:function(f){var x=this._map.options.crs;if(!x.infinite){var C=this._globalTileRange;if(!x.wrapLng&&(f.x<C.min.x||f.x>C.max.x)||!x.wrapLat&&(f.y<C.min.y||f.y>C.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(f);return q(this.options.bounds).overlaps(P)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var x=this._map,C=this.getTileSize(),P=f.scaleBy(C),V=P.add(C),re=x.unproject(P,f.z),ye=x.unproject(V,f.z);return[re,ye]},_tileCoordsToBounds:function(f){var x=this._tileCoordsToNwSe(f),C=new j(x[0],x[1]);return this.options.noWrap||(C=this._map.wrapLatLngBounds(C)),C},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var x=f.split(":"),C=new B(+x[0],+x[1]);return C.z=+x[2],C},_removeTile:function(f){var x=this._tiles[f];x&&(an(x.el),delete this._tiles[f],this.fire("tileunload",{tile:x.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){fn(f,"leaflet-tile");var x=this.getTileSize();f.style.width=x.x+"px",f.style.height=x.y+"px",f.onselectstart=h,f.onmousemove=h,Ge.ielt9&&this.options.opacity<1&&yr(f,this.options.opacity)},_addTile:function(f,x){var C=this._getTilePos(f),P=this._tileCoordsToKey(f),V=this.createTile(this._wrapCoords(f),o(this._tileReady,this,f));this._initTile(V),this.createTile.length<2&&R(o(this._tileReady,this,f,null,V)),es(V,C),this._tiles[P]={el:V,coords:f,current:!0},x.appendChild(V),this.fire("tileloadstart",{tile:V,coords:f})},_tileReady:function(f,x,C){x&&this.fire("tileerror",{error:x,tile:C,coords:f});var P=this._tileCoordsToKey(f);C=this._tiles[P],C&&(C.loaded=+new Date,this._map._fadeAnimated?(yr(C.el,0),$(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(C.active=!0,this._pruneTiles()),x||(fn(C.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:C.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ge.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var x=new B(this._wrapX?u(f.x,this._wrapX):f.x,this._wrapY?u(f.y,this._wrapY):f.y);return x.z=f.z,x},_pxBoundsToTileRange:function(f){var x=this.getTileSize();return new le(f.min.unscaleBy(x).floor(),f.max.unscaleBy(x).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function ua(f){return new ec(f)}var sr=ec.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,x){this._url=f,x=g(this,x),x.detectRetina&&Ge.retina&&x.maxZoom>0?(x.tileSize=Math.floor(x.tileSize/2),x.zoomReverse?(x.zoomOffset--,x.minZoom=Math.min(x.maxZoom,x.minZoom+1)):(x.zoomOffset++,x.maxZoom=Math.max(x.minZoom,x.maxZoom-1)),x.minZoom=Math.max(0,x.minZoom)):x.zoomReverse?x.minZoom=Math.min(x.maxZoom,x.minZoom):x.maxZoom=Math.max(x.minZoom,x.maxZoom),typeof x.subdomains=="string"&&(x.subdomains=x.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,x){return this._url===f&&x===void 0&&(x=!0),this._url=f,x||this.redraw(),this},createTile:function(f,x){var C=document.createElement("img");return un(C,"load",o(this._tileOnLoad,this,x,C)),un(C,"error",o(this._tileOnError,this,x,C)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(C.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(C.referrerPolicy=this.options.referrerPolicy),C.alt="",C.src=this.getTileUrl(f),C},getTileUrl:function(f){var x={r:Ge.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var C=this._globalTileRange.max.y-f.y;this.options.tms&&(x.y=C),x["-y"]=C}return b(this._url,s(x,this.options))},_tileOnLoad:function(f,x){Ge.ielt9?setTimeout(o(f,this,null,x),0):f(null,x)},_tileOnError:function(f,x,C){var P=this.options.errorTileUrl;P&&x.getAttribute("src")!==P&&(x.src=P),f(C,x)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,x=this.options.maxZoom,C=this.options.zoomReverse,P=this.options.zoomOffset;return C&&(f=x-f),f+P},_getSubdomain:function(f){var x=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[x]},_abortLoading:function(){var f,x;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(x=this._tiles[f].el,x.onload=h,x.onerror=h,!x.complete)){x.src=k;var C=this._tiles[f].coords;an(x),delete this._tiles[f],this.fire("tileabort",{tile:x,coords:C})}},_removeTile:function(f){var x=this._tiles[f];if(x)return x.el.setAttribute("src",k),ec.prototype._removeTile.call(this,f)},_tileReady:function(f,x,C){if(!(!this._map||C&&C.getAttribute("src")===k))return ec.prototype._tileReady.call(this,f,x,C)}});function pi(f,x){return new sr(f,x)}var mi=sr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,x){this._url=f;var C=s({},this.defaultWmsParams);for(var P in x)P in this.options||(C[P]=x[P]);x=g(this,x);var V=x.detectRetina&&Ge.retina?2:1,re=this.getTileSize();C.width=re.x*V,C.height=re.y*V,this.wmsParams=C},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var x=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[x]=this._crs.code,sr.prototype.onAdd.call(this,f)},getTileUrl:function(f){var x=this._tileCoordsToNwSe(f),C=this._crs,P=M(C.project(x[0]),C.project(x[1])),V=P.min,re=P.max,ye=(this._wmsVersion>=1.3&&this._crs===As?[V.y,V.x,re.y,re.x]:[V.x,V.y,re.x,re.y]).join(","),De=sr.prototype.getTileUrl.call(this,f);return De+y(this.wmsParams,De,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ye},setParams:function(f,x){return s(this.wmsParams,f),x||this.redraw(),this}});function cs(f,x){return new mi(f,x)}sr.WMS=mi,pi.wms=cs;var gi=Hi.extend({options:{padding:.1},initialize:function(f){g(this,f),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),fn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,x){var C=this._map.getZoomScale(x,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),V=this._map.project(this._center,x),re=P.multiplyBy(-C).add(V).subtract(this._map._getNewPixelOrigin(f,x));Ge.any3d?al(this._container,re,C):es(this._container,re)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,x=this._map.getSize(),C=this._map.containerPointToLayerPoint(x.multiplyBy(-f)).round();this._bounds=new le(C,C.add(x.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),dl=gi.extend({options:{tolerance:0},getEvents:function(){var f=gi.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){gi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");un(f,"mousemove",this._onMouseMove,this),un(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),un(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){$(this._redrawRequest),delete this._ctx,an(this._container),On(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var x in this._layers)f=this._layers[x],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gi.prototype._update.call(this);var f=this._bounds,x=this._container,C=f.getSize(),P=Ge.retina?2:1;es(x,f.min),x.width=P*C.x,x.height=P*C.y,x.style.width=C.x+"px",x.style.height=C.y+"px",Ge.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){gi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[l(f)]=f;var x=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=x),this._drawLast=x,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var x=f._order,C=x.next,P=x.prev;C?C.prev=P:this._drawLast=P,P?P.next=C:this._drawFirst=C,delete f._order,delete this._layers[l(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var x=f.options.dashArray.split(/[, ]+/),C=[],P,V;for(V=0;V<x.length;V++){if(P=Number(x[V]),isNaN(P))return;C.push(P)}f.options._dashArray=C}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var x=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new le,this._redrawBounds.extend(f._pxBounds.min.subtract([x,x])),this._redrawBounds.extend(f._pxBounds.max.add([x,x]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var x=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,x.x,x.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,x=this._redrawBounds;if(this._ctx.save(),x){var C=x.getSize();this._ctx.beginPath(),this._ctx.rect(x.min.x,x.min.y,C.x,C.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)f=P.layer,(!x||f._pxBounds&&f._pxBounds.intersects(x))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,x){if(this._drawing){var C,P,V,re,ye=f._parts,De=ye.length,je=this._ctx;if(De){for(je.beginPath(),C=0;C<De;C++){for(P=0,V=ye[C].length;P<V;P++)re=ye[C][P],je[P?"lineTo":"moveTo"](re.x,re.y);x&&je.closePath()}this._fillStroke(je,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var x=f._point,C=this._ctx,P=Math.max(Math.round(f._radius),1),V=(Math.max(Math.round(f._radiusY),1)||P)/P;V!==1&&(C.save(),C.scale(1,V)),C.beginPath(),C.arc(x.x,x.y/V,P,0,Math.PI*2,!1),V!==1&&C.restore(),this._fillStroke(C,f)}},_fillStroke:function(f,x){var C=x.options;C.fill&&(f.globalAlpha=C.fillOpacity,f.fillStyle=C.fillColor||C.color,f.fill(C.fillRule||"evenodd")),C.stroke&&C.weight!==0&&(f.setLineDash&&f.setLineDash(x.options&&x.options._dashArray||[]),f.globalAlpha=C.opacity,f.lineWidth=C.weight,f.strokeStyle=C.color,f.lineCap=C.lineCap,f.lineJoin=C.lineJoin,f.stroke())},_onClick:function(f){for(var x=this._map.mouseEventToLayerPoint(f),C,P,V=this._drawFirst;V;V=V.next)C=V.layer,C.options.interactive&&C._containsPoint(x)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(C))&&(P=C);this._fireEvent(P?[P]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var x=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,x)}},_handleMouseOut:function(f){var x=this._hoveredLayer;x&&(Zn(this._container,"leaflet-interactive"),this._fireEvent([x],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,x){if(!this._mouseHoverThrottled){for(var C,P,V=this._drawFirst;V;V=V.next)C=V.layer,C.options.interactive&&C._containsPoint(x)&&(P=C);P!==this._hoveredLayer&&(this._handleMouseOut(f),P&&(fn(this._container,"leaflet-interactive"),this._fireEvent([P],f,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,x,C){this._map._fireDOMEvent(x,C||x.type,f)},_bringToFront:function(f){var x=f._order;if(x){var C=x.next,P=x.prev;if(C)C.prev=P;else return;P?P.next=C:C&&(this._drawFirst=C),x.prev=this._drawLast,this._drawLast.next=x,x.next=null,this._drawLast=x,this._requestRedraw(f)}},_bringToBack:function(f){var x=f._order;if(x){var C=x.next,P=x.prev;if(P)P.next=C;else return;C?C.prev=P:P&&(this._drawLast=P),x.prev=null,x.next=this._drawFirst,this._drawFirst.prev=x,this._drawFirst=x,this._requestRedraw(f)}}});function Zh(f){return Ge.canvas?new dl(f):null}var fl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),zm={_initContainer:function(){this._container=vn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(gi.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var x=f._container=fl("shape");fn(x,"leaflet-vml-shape "+(this.options.className||"")),x.coordsize="1 1",f._path=fl("path"),x.appendChild(f._path),this._updateStyle(f),this._layers[l(f)]=f},_addPath:function(f){var x=f._container;this._container.appendChild(x),f.options.interactive&&f.addInteractiveTarget(x)},_removePath:function(f){var x=f._container;an(x),f.removeInteractiveTarget(x),delete this._layers[l(f)]},_updateStyle:function(f){var x=f._stroke,C=f._fill,P=f.options,V=f._container;V.stroked=!!P.stroke,V.filled=!!P.fill,P.stroke?(x||(x=f._stroke=fl("stroke")),V.appendChild(x),x.weight=P.weight+"px",x.color=P.color,x.opacity=P.opacity,P.dashArray?x.dashStyle=w(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):x.dashStyle="",x.endcap=P.lineCap.replace("butt","flat"),x.joinstyle=P.lineJoin):x&&(V.removeChild(x),f._stroke=null),P.fill?(C||(C=f._fill=fl("fill")),V.appendChild(C),C.color=P.fillColor||P.color,C.opacity=P.fillOpacity):C&&(V.removeChild(C),f._fill=null)},_updateCircle:function(f){var x=f._point.round(),C=Math.round(f._radius),P=Math.round(f._radiusY||C);this._setPath(f,f._empty()?"M0 0":"AL "+x.x+","+x.y+" "+C+","+P+" 0,"+65535*360)},_setPath:function(f,x){f._path.v=x},_bringToFront:function(f){Ul(f._container)},_bringToBack:function(f){Hl(f._container)}},Qh=Ge.vml?fl:xe,Kc=gi.extend({_initContainer:function(){this._container=Qh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Qh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){an(this._container),On(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gi.prototype._update.call(this);var f=this._bounds,x=f.getSize(),C=this._container;(!this._svgSize||!this._svgSize.equals(x))&&(this._svgSize=x,C.setAttribute("width",x.x),C.setAttribute("height",x.y)),es(C,f.min),C.setAttribute("viewBox",[f.min.x,f.min.y,x.x,x.y].join(" ")),this.fire("update")}},_initPath:function(f){var x=f._path=Qh("path");f.options.className&&fn(x,f.options.className),f.options.interactive&&fn(x,"leaflet-interactive"),this._updateStyle(f),this._layers[l(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){an(f._path),f.removeInteractiveTarget(f._path),delete this._layers[l(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var x=f._path,C=f.options;x&&(C.stroke?(x.setAttribute("stroke",C.color),x.setAttribute("stroke-opacity",C.opacity),x.setAttribute("stroke-width",C.weight),x.setAttribute("stroke-linecap",C.lineCap),x.setAttribute("stroke-linejoin",C.lineJoin),C.dashArray?x.setAttribute("stroke-dasharray",C.dashArray):x.removeAttribute("stroke-dasharray"),C.dashOffset?x.setAttribute("stroke-dashoffset",C.dashOffset):x.removeAttribute("stroke-dashoffset")):x.setAttribute("stroke","none"),C.fill?(x.setAttribute("fill",C.fillColor||C.color),x.setAttribute("fill-opacity",C.fillOpacity),x.setAttribute("fill-rule",C.fillRule||"evenodd")):x.setAttribute("fill","none"))},_updatePoly:function(f,x){this._setPath(f,he(f._parts,x))},_updateCircle:function(f){var x=f._point,C=Math.max(Math.round(f._radius),1),P=Math.max(Math.round(f._radiusY),1)||C,V="a"+C+","+P+" 0 1,0 ",re=f._empty()?"M0 0":"M"+(x.x-C)+","+x.y+V+C*2+",0 "+V+-C*2+",0 ";this._setPath(f,re)},_setPath:function(f,x){f._path.setAttribute("d",x)},_bringToFront:function(f){Ul(f._path)},_bringToBack:function(f){Hl(f._path)}});Ge.vml&&Kc.include(zm);function no(f){return Ge.svg||Ge.vml?new Kc(f):null}Tn.include({getRenderer:function(f){var x=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return x||(x=this._renderer=this._createRenderer()),this.hasLayer(x)||this.addLayer(x),x},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var x=this._paneRenderers[f];return x===void 0&&(x=this._createRenderer({pane:f}),this._paneRenderers[f]=x),x},_createRenderer:function(f){return this.options.preferCanvas&&Zh(f)||no(f)}});var $o=tr.extend({initialize:function(f,x){tr.prototype.initialize.call(this,this._boundsToLatLngs(f),x)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=q(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function jm(f,x){return new $o(f,x)}Kc.create=Qh,Kc.pointsToPath=he,la.geometryToLayer=Vu,la.coordsToLatLng=Jl,la.coordsToLatLngs=nr,la.latLngToCoords=ir,la.latLngsToCoords=Oa,la.getFeature=to,la.asFeature=ca,Tn.mergeOptions({boxZoom:!0});var qf=eo.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){un(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){On(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){an(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),$u(),Lf(),this._startPoint=this._map.mouseEventToContainerPoint(f),un(document,{contextmenu:Eo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=vn("div","leaflet-zoom-box",this._container),fn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var x=new le(this._point,this._startPoint),C=x.getSize();es(this._box,x.min),this._box.style.width=C.x+"px",this._box.style.height=C.y+"px"},_finish:function(){this._moved&&(an(this._box),Zn(this._container,"leaflet-crosshair")),Gl(),Pa(),On(document,{contextmenu:Eo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var x=new j(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(x).fire("boxzoomend",{boxZoomBounds:x})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Tn.addInitHook("addHandler","boxZoom",qf),Tn.mergeOptions({doubleClickZoom:!0});var J0=eo.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var x=this._map,C=x.getZoom(),P=x.options.zoomDelta,V=f.originalEvent.shiftKey?C-P:C+P;x.options.doubleClickZoom==="center"?x.setZoom(V):x.setZoomAround(f.containerPoint,V)}});Tn.addInitHook("addHandler","doubleClickZoom",J0),Tn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Kf=eo.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new aa(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}fn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Zn(this._map._container,"leaflet-grab"),Zn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var x=q(this._map.options.maxBounds);this._offsetLimit=M(this._map.latLngToContainerPoint(x.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(x.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var x=this._lastTime=+new Date,C=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(C),this._times.push(x),this._prunePositions(x)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),x=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=x.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,x){return f-(f-x)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),x=this._offsetLimit;f.x<x.min.x&&(f.x=this._viscousLimit(f.x,x.min.x)),f.y<x.min.y&&(f.y=this._viscousLimit(f.y,x.min.y)),f.x>x.max.x&&(f.x=this._viscousLimit(f.x,x.max.x)),f.y>x.max.y&&(f.y=this._viscousLimit(f.y,x.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,x=Math.round(f/2),C=this._initialWorldOffset,P=this._draggable._newPos.x,V=(P-x+C)%f+x-C,re=(P+x+C)%f-x-C,ye=Math.abs(V+C)<Math.abs(re+C)?V:re;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ye},_onDragEnd:function(f){var x=this._map,C=x.options,P=!C.inertia||f.noInertia||this._times.length<2;if(x.fire("dragend",f),P)x.fire("moveend");else{this._prunePositions(+new Date);var V=this._lastPos.subtract(this._positions[0]),re=(this._lastTime-this._times[0])/1e3,ye=C.easeLinearity,De=V.multiplyBy(ye/re),je=De.distanceTo([0,0]),et=Math.min(C.inertiaMaxSpeed,je),Ct=De.multiplyBy(et/je),Wt=et/(C.inertiaDeceleration*ye),Cn=Ct.multiplyBy(-Wt/2).round();!Cn.x&&!Cn.y?x.fire("moveend"):(Cn=x._limitOffset(Cn,x.options.maxBounds),R(function(){x.panBy(Cn,{duration:Wt,easeLinearity:ye,noMoveStart:!0,animate:!0})}))}}});Tn.addInitHook("addHandler","dragging",Kf),Tn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Xf=eo.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),un(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),On(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,x=document.documentElement,C=f.scrollTop||x.scrollTop,P=f.scrollLeft||x.scrollLeft;this._map._container.focus(),window.scrollTo(P,C)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var x=this._panKeys={},C=this.keyCodes,P,V;for(P=0,V=C.left.length;P<V;P++)x[C.left[P]]=[-1*f,0];for(P=0,V=C.right.length;P<V;P++)x[C.right[P]]=[f,0];for(P=0,V=C.down.length;P<V;P++)x[C.down[P]]=[0,f];for(P=0,V=C.up.length;P<V;P++)x[C.up[P]]=[0,-1*f]},_setZoomDelta:function(f){var x=this._zoomKeys={},C=this.keyCodes,P,V;for(P=0,V=C.zoomIn.length;P<V;P++)x[C.zoomIn[P]]=f;for(P=0,V=C.zoomOut.length;P<V;P++)x[C.zoomOut[P]]=-f},_addHooks:function(){un(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){On(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var x=f.keyCode,C=this._map,P;if(x in this._panKeys){if(!C._panAnim||!C._panAnim._inProgress)if(P=this._panKeys[x],f.shiftKey&&(P=ne(P).multiplyBy(3)),C.options.maxBounds&&(P=C._limitOffset(ne(P),C.options.maxBounds)),C.options.worldCopyJump){var V=C.wrapLatLng(C.unproject(C.project(C.getCenter()).add(P)));C.panTo(V)}else C.panBy(P)}else if(x in this._zoomKeys)C.setZoom(C.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[x]);else if(x===27&&C._popup&&C._popup.options.closeOnEscapeKey)C.closePopup();else return;Eo(f)}}});Tn.addInitHook("addHandler","keyboard",Xf),Tn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Vm=eo.extend({addHooks:function(){un(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){On(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var x=Vh(f),C=this._map.options.wheelDebounceTime;this._delta+=x,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var P=Math.max(C-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),P),Eo(f)},_performZoom:function(){var f=this._map,x=f.getZoom(),C=this._map.options.zoomSnap||0;f._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),V=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,re=C?Math.ceil(V/C)*C:V,ye=f._limitZoom(x+(this._delta>0?re:-re))-x;this._delta=0,this._startTime=null,ye&&(f.options.scrollWheelZoom==="center"?f.setZoom(x+ye):f.setZoomAround(this._lastMousePos,x+ye))}});Tn.addInitHook("addHandler","scrollWheelZoom",Vm);var bx=600;Tn.mergeOptions({tapHold:Ge.touchNative&&Ge.safari&&Ge.mobile,tapTolerance:15});var Wm=eo.extend({addHooks:function(){un(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){On(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var x=f.touches[0];this._startPos=this._newPos=new B(x.clientX,x.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(un(document,"touchend",as),un(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",x))},this),bx),un(document,"touchend touchcancel contextmenu",this._cancel,this),un(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){On(document,"touchend",as),On(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),On(document,"touchend touchcancel contextmenu",this._cancel,this),On(document,"touchmove",this._onMove,this)},_onMove:function(f){var x=f.touches[0];this._newPos=new B(x.clientX,x.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,x){var C=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:x.screenX,screenY:x.screenY,clientX:x.clientX,clientY:x.clientY});C._simulated=!0,x.target.dispatchEvent(C)}});Tn.addInitHook("addHandler","tapHold",Wm),Tn.mergeOptions({touchZoom:Ge.touch,bounceAtZoomLimits:!0});var Um=eo.extend({addHooks:function(){fn(this._map._container,"leaflet-touch-zoom"),un(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Zn(this._map._container,"leaflet-touch-zoom"),On(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var x=this._map;if(!(!f.touches||f.touches.length!==2||x._animatingZoom||this._zooming)){var C=x.mouseEventToContainerPoint(f.touches[0]),P=x.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=x.getSize()._divideBy(2),this._startLatLng=x.containerPointToLatLng(this._centerPoint),x.options.touchZoom!=="center"&&(this._pinchStartLatLng=x.containerPointToLatLng(C.add(P)._divideBy(2))),this._startDist=C.distanceTo(P),this._startZoom=x.getZoom(),this._moved=!1,this._zooming=!0,x._stop(),un(document,"touchmove",this._onTouchMove,this),un(document,"touchend touchcancel",this._onTouchEnd,this),as(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var x=this._map,C=x.mouseEventToContainerPoint(f.touches[0]),P=x.mouseEventToContainerPoint(f.touches[1]),V=C.distanceTo(P)/this._startDist;if(this._zoom=x.getScaleZoom(V,this._startZoom),!x.options.bounceAtZoomLimits&&(this._zoom<x.getMinZoom()&&V<1||this._zoom>x.getMaxZoom()&&V>1)&&(this._zoom=x._limitZoom(this._zoom)),x.options.touchZoom==="center"){if(this._center=this._startLatLng,V===1)return}else{var re=C._add(P)._divideBy(2)._subtract(this._centerPoint);if(V===1&&re.x===0&&re.y===0)return;this._center=x.unproject(x.project(this._pinchStartLatLng,this._zoom).subtract(re),this._zoom)}this._moved||(x._moveStart(!0,!1),this._moved=!0),$(this._animRequest);var ye=o(x._move,x,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(ye,this,!0),as(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,$(this._animRequest),On(document,"touchmove",this._onTouchMove,this),On(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Tn.addInitHook("addHandler","touchZoom",Um),Tn.BoxZoom=qf,Tn.DoubleClickZoom=J0,Tn.Drag=Kf,Tn.Keyboard=Xf,Tn.ScrollWheelZoom=Vm,Tn.TapHold=Wm,Tn.TouchZoom=Um,n.Bounds=le,n.Browser=Ge,n.CRS=ue,n.Canvas=dl,n.Circle=xr,n.CircleMarker=Zl,n.Class=W,n.Control=ps,n.DivIcon=Gc,n.DivOverlay=wr,n.DomEvent=Dm,n.DomUtil=ln,n.Draggable=aa,n.Evented=G,n.FeatureGroup=Ro,n.GeoJSON=la,n.GridLayer=ec,n.Handler=eo,n.Icon=$a,n.ImageOverlay=Uc,n.LatLng=X,n.LatLngBounds=j,n.Layer=Hi,n.LayerGroup=$r,n.LineUtil=Bn,n.Map=Tn,n.Marker=gs,n.Mixin=Mm,n.Path=Lo,n.Point=B,n.PolyUtil=Hh,n.Polygon=tr,n.Polyline=Po,n.Popup=ul,n.PosAnimation=$f,n.Projection=ms,n.Rectangle=$o,n.Renderer=gi,n.SVG=Kc,n.SVGOverlay=Hf,n.TileLayer=sr,n.Tooltip=hl,n.Transformation=Ne,n.Util=U,n.VideoOverlay=Do,n.bind=o,n.bounds=M,n.canvas=Zh,n.circle=Q0,n.circleMarker=Uf,n.control=To,n.divIcon=qc,n.extend=s,n.featureGroup=Vf,n.geoJSON=cl,n.geoJson=ls,n.gridLayer=ua,n.icon=Wf,n.imageOverlay=Or,n.latLng=Z,n.latLngBounds=q,n.layerGroup=Fm,n.map=$m,n.marker=qh,n.point=ne,n.polygon=Kh,n.polyline=Bm,n.popup=Hc,n.rectangle=jm,n.setOptions=g,n.stamp=l,n.svg=no,n.svgOverlay=Gf,n.tileLayer=pi,n.tooltip=Yh,n.transformation=Fe,n.version=i,n.videoOverlay=Xh;var Hm=window.L;n.noConflict=function(){return window.L=Hm,this},window.L=n})})(zT,zT.exports);var vD=zT.exports;function HY(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function GY(t,e){return e==null?function(i,s){const r=K.useRef();return r.current||(r.current=t(i,s)),r}:function(i,s){const r=K.useRef();r.current||(r.current=t(i,s));const o=K.useRef(i),{instance:a}=r.current;return K.useEffect(function(){o.current!==i&&(e(a,i,o.current),o.current=i)},[a,i,s]),r}}function r8e(t,e){K.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var r;(r=e.layerContainer)==null||r.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function qY(t){return function(n){const i=t8e(),s=t(UY(n,i),i);return Zze(i.map,n.attribution),s8e(s.current,n.eventHandlers),r8e(s.current,i),s}}function o8e(t,e){const n=GY(t,e),i=qY(n);return n8e(i)}function a8e(t,e){const n=GY(t,e),i=qY(n);return i8e(i)}function l8e(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function jT(){return jT=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},jT.apply(this,arguments)}function c8e({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:r,placeholder:o,style:a,whenReady:l,zoom:c,...u},h){const[d]=K.useState({className:s,id:r,style:a}),[p,m]=K.useState(null);K.useImperativeHandle(h,()=>(p==null?void 0:p.map)??null,[p]);const g=K.useCallback(v=>{if(v!==null&&p===null){const b=new vD.Map(v,u);n!=null&&c!=null?b.setView(n,c):t!=null&&b.fitBounds(t,e),l!=null&&b.whenReady(l),m(Jze(b))}},[]);K.useEffect(()=>()=>{p==null||p.map.remove()},[p]);const y=p?xn.createElement(WY,{value:p},i):o??null;return xn.createElement("div",jT({},d,{ref:g}),y)}const u8e=K.forwardRef(c8e),h8e=o8e(function({position:e,...n},i){const s=new vD.Marker(e,n);return HY(s,e8e(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),d8e=a8e(function({url:e,...n},i){const s=new vD.TileLayer(e,UY(n,i));return HY(s,i)},function(e,n,i){l8e(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)}),f8e=t=>{const[e,n]=t.split(",");return{lat:parseFloat(e),lon:parseFloat(n)}},p8e=()=>{const[t,e]=K.useState([]),[n,i]=K.useState(!1),[s,r]=K.useState({lat:0,lon:0}),o=localStorage.getItem("userData"),a=JSON.parse(o),l=u=>{const h=u.substring(0,4),d=u.substring(4,6),p=u.substring(6,8);return`${h}-${d}-${p}`};K.useEffect(()=>{(async()=>{const h=Ia(Rl);try{const d=await mu(Yp(h,"devices"));if(d.exists()){const p=d.val(),m=[];for(const[y,v]of Object.entries(p))if(a.username in v){const b=v[a.username],w=Object.keys(b).sort((S,k)=>new Date(k)-new Date(S)).map(S=>{var T;const k=l(S),I=b[S];return{date:k,location:(T=I.location)==null?void 0:T.coordinates}});m.push({deviceId:y,dates:w})}e(m);const g={...a,devices:m};localStorage.setItem("userData",JSON.stringify(g))}}catch(d){console.error("Error fetching devices: ",d)}})()},[]);const c=u=>{const h=f8e(u);r(h),i(!0)};return Q.jsxs("div",{className:"p-4",children:[Q.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-3 md:gap-5 mt-4",children:[Q.jsx("p",{className:"font-bold ml-1 md:ml-3",children:"Your devices list"}),Q.jsx("input",{type:"text",id:"deviceName",className:"border border-gray-200 rounded-lg p-2 w-full md:w-[800px] mt-1 focus:outline-none",placeholder:t.length>0?t.map(u=>`${u.deviceId}`).join(" | "):"No devices found","aria-label":"Device Name",readOnly:!0})]}),Q.jsxs("div",{className:"mt-10",children:[Q.jsx("p",{className:"font-bold mb-3",children:"Device Usage Summary"}),Q.jsx("div",{className:"overflow-x-auto",children:Q.jsxs(j7,{bordered:!0,striped:!0,hover:!0,className:"min-w-[600px]",children:[Q.jsx("thead",{className:"bg-gray-200",children:Q.jsxs("tr",{children:[Q.jsx("th",{children:"Device Id"}),Q.jsx("th",{children:"Date"}),Q.jsx("th",{children:"Location"})]})}),Q.jsx("tbody",{children:t.map(u=>u.dates.map(h=>Q.jsxs("tr",{children:[Q.jsx("td",{children:u.deviceId}),Q.jsx("td",{children:h.date}),Q.jsxs("td",{className:"flex justify-between items-center",children:[h.location,Q.jsx("button",{onClick:()=>c(h.location),className:"ml-2 text-blue-500 hover:text-blue-700",children:Q.jsx("i",{className:"bi bi-eye"})})]})]},`${u.deviceId}-${h.date}`)))})]})})]}),Q.jsxs(Mo,{show:n,onHide:()=>i(!1),size:"lg",children:[Q.jsx(Mo.Header,{closeButton:!0,children:Q.jsx(Mo.Title,{children:"Device Location"})}),Q.jsx(Mo.Body,{children:Q.jsx("div",{className:"w-full h-[300px] md:h-[400px]",children:Q.jsxs(u8e,{center:[s.lat,s.lon],zoom:13,style:{height:"100%",width:"100%"},children:[Q.jsx(d8e,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://osm.org/copyright">OpenStreetMap</a>'}),Q.jsx(h8e,{position:[s.lat,s.lon]})]})})}),Q.jsx(Mo.Footer,{children:Q.jsx(Ho,{variant:"secondary",onClick:()=>i(!1),children:"Close"})})]})]})},m8e="/water_quality_system/assets/login_re-Dxko92t9.png",g8e=()=>{const t=localStorage.getItem("userData"),e=JSON.parse(t),[n,i]=K.useState(""),[s,r]=K.useState(""),o=async a=>{if(a.preventDefault(),n!==s){jt.error("Passwords do not match.");return}try{const l=jt.loading("Updating password..."),c=Ia(Rl,"members"),u=await mu(Yp(c,"/"));let h=null;if(u.forEach(d=>{d.val().username===e.username&&(h=d.key)}),h){const d=Ia(Rl,`members/${h}`);await LV(d,{password:n}),jt.update(l,{render:"Password updated successfully.",type:"success",isLoading:!1,autoClose:3e3}),i(""),r("")}else jt.update(l,{render:"User not found.",type:"error",isLoading:!1,autoClose:3e3})}catch(l){jt.error("Failed to update password."),console.error("Error updating password:",l)}};return Q.jsxs("div",{className:"flex flex-col md:flex-row justify-center items-center p-4",children:[Q.jsx("div",{className:"mt-8 md:mt-28 flex justify-center",children:Q.jsx("img",{src:m8e,alt:"Password",className:"w-64 h-64 md:w-96 md:h-96 md:mr-16"})}),Q.jsxs("div",{className:"mt-8 md:mt-28",children:[Q.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-center md:text-left",children:"Change Password"}),Q.jsxs(Bo,{className:"mt-6 flex flex-col items-center md:items-start",onSubmit:o,children:[Q.jsxs(Bo.Group,{controlId:"formNewPassword",className:"w-full md:w-auto",children:[Q.jsx(Bo.Label,{children:"New Password"}),Q.jsx(Bo.Control,{className:"w-64 md:w-96",type:"password",value:n,onChange:a=>i(a.target.value),required:!0})]}),Q.jsxs(Bo.Group,{controlId:"formConfirmPassword",className:"mt-3 w-full md:w-auto",children:[Q.jsx(Bo.Label,{children:"Confirm Password"}),Q.jsx(Bo.Control,{className:"w-64 md:w-96",type:"password",value:s,onChange:a=>r(a.target.value),required:!0})]}),Q.jsx(Ho,{variant:"primary",type:"submit",className:"mt-3 w-64 md:w-auto",children:"Update Password"})]})]}),Q.jsx(C0,{})]})},v8e=()=>{const[t,e]=K.useState([]),[n,i]=K.useState(""),[s,r]=K.useState([]),[o,a]=K.useState([]),[l,c]=K.useState([]),[u,h]=K.useState([]);K.useEffect(()=>{(async()=>{try{const S=Ia(Rl,"members"),k=Roe(S,Eoe("role"),Aoe("Client")),I=await mu(k);if(I.exists()){const T=[];I.forEach(E=>{const O=E.val();O.status==="Active"&&T.push(O.username)}),e(T)}else console.log("No clients available")}catch(S){console.error("Error fetching clients:",S)}})()},[]);const d=async()=>{if(!n){jt.error("Please select a client first!");return}try{const w=Ia(Rl,"devices"),S=await mu(w);if(S.exists()){const k=S.val(),I=new Set,T=new Set;for(const[E,O]of Object.entries(k))if(O[n]){const F=O[n];for(const[R,$]of Object.entries(F)){T.add(b(R));for(const[U,W]of Object.entries($))W.coordinates&&I.add(W.coordinates)}}I.size===0&&jt.warning("No locations found for the selected client."),r([...I]),a([...T])}else jt.error("No data found for the selected client.")}catch(w){console.error("Error fetching locations and dates:",w)}},p=w=>{i(w.target.value),r([]),a([]),c([]),h([])},m=w=>{c(w||[])},g=w=>{h(w||[])},y=async()=>{if(!n){jt.error("Please select a client.");return}if(l.length===0){jt.error("Please select at least one location.");return}if(u.length===0){jt.error("Please select at least one date.");return}const w=u.map(k=>k.value.replace(/-/g,"")),S=l.map(k=>k.value);try{const k=Ia(Rl,"devices"),I=await mu(k);if(I.exists()){const T=I.val(),E=[];for(const[O,F]of Object.entries(T))if(F[n]){const R=F[n];w.forEach($=>{if(R[$]){const U=R[$],W=U==null?void 0:U.location;if(W!=null&&W.coordinates&&S.includes(W.coordinates)){const te=W.sensor_data||{};E.push({deviceId:O,date:b($),coordinates:W.coordinates,ph:te.ph||{},tds:te.tds||{},turbidity:te.turbidity||{}})}}})}v(E)}else jt.error("No data found for the selected criteria.")}catch(k){console.error("Error fetching data:",k)}},v=w=>{const S=[];S.push("Device ID,Date,Coordinates,Coordinates,PH Time,PH Value,TDS Time,TDS Value,Turbidity Time,Turbidity Value"),w.forEach(O=>{const F=Math.max(Object.keys(O.ph).length,Object.keys(O.tds).length,Object.keys(O.turbidity).length);for(let R=0;R<F;R++){const $=Object.entries(O.ph)[R]||["",""],U=Object.entries(O.tds)[R]||["",""],W=Object.entries(O.turbidity)[R]||["",""];S.push([O.deviceId,O.date,O.coordinates,$[0],$[1],U[0],U[1],W[0],W[1]].join(","))}});const k=S.join(`
`),I=new Blob([k],{type:"text/csv"}),T=URL.createObjectURL(I),E=document.createElement("a");E.href=T,E.download="sensor_data.csv",document.body.appendChild(E),E.click(),document.body.removeChild(E)},b=w=>{const S=w.substring(0,4),k=w.substring(4,6),I=w.substring(6,8);return`${S}-${k}-${I}`};return Q.jsxs(Yy,{className:"mt-4",children:[Q.jsx(C0,{}),Q.jsx(or,{children:Q.jsx(jn,{xs:12,children:Q.jsxs(Bo,{children:[Q.jsxs(or,{className:"mb-3",children:[Q.jsx(jn,{xs:12,md:8,children:Q.jsxs(Bo.Group,{controlId:"clientSelect",children:[Q.jsx(Bo.Label,{children:"Select Client"}),Q.jsxs(Bo.Control,{as:"select",value:n,onChange:p,children:[Q.jsx("option",{value:"",children:"-- Select a Client --"}),t.map((w,S)=>Q.jsx("option",{value:w,children:w},S))]})]})}),Q.jsx(jn,{xs:12,md:4,className:"d-flex align-items-end",children:Q.jsx(Ho,{variant:"primary",onClick:d,disabled:!n,className:"w-100",children:"Get Locations and Dates"})})]}),Q.jsxs(or,{className:"mb-3",children:[Q.jsx(jn,{xs:12,md:6,children:Q.jsxs(Bo.Group,{controlId:"locationSelect",children:[Q.jsx(Bo.Label,{children:"Select Location(s)"}),Q.jsx(i0,{isMulti:!0,options:s.map(w=>({value:w,label:w})),value:l,onChange:m,isDisabled:s.length===0})]})}),Q.jsx(jn,{xs:12,md:6,children:Q.jsxs(Bo.Group,{controlId:"dateSelect",children:[Q.jsx(Bo.Label,{children:"Select Date(s)"}),Q.jsx(i0,{isMulti:!0,options:o.map(w=>({value:w,label:w})),value:u,onChange:g,isDisabled:o.length===0})]})})]}),Q.jsx(or,{className:"justify-content-center",children:Q.jsx(jn,{xs:12,md:6,className:"text-center",children:Q.jsx(Ho,{variant:"primary",onClick:y,disabled:!n,className:"w-100",children:"Download CSV"})})})]})})})]})},y8e=cte([{path:"/",element:Q.jsx(Woe,{})},{path:"/",element:Q.jsx(Lle,{}),children:[{path:"/dashboard",element:Q.jsx(Ple,{})},{path:"/sensor-data",element:Q.jsx(p8e,{})},{path:"/data-visualization",element:Q.jsx(z0e,{})},{path:"/members",element:Q.jsx(j0e,{})},{path:"/reports",element:Q.jsx(Yze,{})},{path:"/settings",element:Q.jsx(g8e,{})},{path:"/client-data",element:Q.jsx(v8e,{})}]}],{basename:"/water_quality_system"});function b8e(){return Q.jsx(vte,{router:y8e})}$8(document.getElementById("root")).render(Q.jsx(K.StrictMode,{children:Q.jsx(b8e,{})}));export{Vv as _,bc as c,Py as g};
